/*! For license information please see background.js.LICENSE.txt */
!function(){var e={44020:function(e){"use strict";var t="%[a-f0-9]{2}",r=new RegExp("("+t+")|([^%]+?)","gi"),n=new RegExp("("+t+")+","gi");function o(e,t){try{return[decodeURIComponent(e.join(""))]}catch(e){}if(1===e.length)return e;t=t||1;var r=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],o(r),o(n))}function c(e){try{return decodeURIComponent(e)}catch(c){for(var t=e.match(r)||[],n=1;n<t.length;n++)t=(e=o(t,n).join("")).match(r)||[];return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},r=n.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch(e){var o=c(r[0]);o!==r[0]&&(t[r[0]]=o)}r=n.exec(e)}t["%C2"]="\ufffd";for(var a=Object.keys(t),i=0;i<a.length;i++){var u=a[i];e=e.replace(new RegExp(u,"g"),t[u])}return e}(e)}}},73759:function(e){"use strict";var t=function(e){};e.exports=function(e,r){for(var n=arguments.length,o=new Array(n>2?n-2:0),c=2;c<n;c++)o[c-2]=arguments[c];if(t(r),!e){var a;if(void 0===r)a=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var i=0;(a=new Error(r.replace(/%s/g,(function(){return String(o[i++])})))).name="Invariant Violation"}throw a.framesToPop=1,a}}},28918:function(e,t,r){"use strict";var n=r(73759);e.exports=function(e){var t,r={};for(t in e instanceof Object&&!Array.isArray(e)||n(!1),e)e.hasOwnProperty(t)&&(r[t]=t);return r}},18552:function(e,t,r){var n=r(10852)(r(55639),"DataView");e.exports=n},57071:function(e,t,r){var n=r(10852)(r(55639),"Map");e.exports=n},53818:function(e,t,r){var n=r(10852)(r(55639),"Promise");e.exports=n},58525:function(e,t,r){var n=r(10852)(r(55639),"Set");e.exports=n},62705:function(e,t,r){var n=r(55639).Symbol;e.exports=n},70577:function(e,t,r){var n=r(10852)(r(55639),"WeakMap");e.exports=n},44239:function(e,t,r){var n=r(62705),o=r(89607),c=r(2333),a=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?o(e):c(e)}},9454:function(e,t,r){var n=r(44239),o=r(37005);e.exports=function(e){return o(e)&&"[object Arguments]"==n(e)}},28458:function(e,t,r){var n=r(23560),o=r(15346),c=r(13218),a=r(80346),i=/^\[object .+?Constructor\]$/,u=Function.prototype,s=Object.prototype,f=u.toString,l=s.hasOwnProperty,p=RegExp("^"+f.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!c(e)||o(e))&&(n(e)?p:i).test(a(e))}},38749:function(e,t,r){var n=r(44239),o=r(41780),c=r(37005),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return c(e)&&o(e.length)&&!!a[n(e)]}},280:function(e,t,r){var n=r(25726),o=r(86916),c=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return o(e);var t=[];for(var r in Object(e))c.call(e,r)&&"constructor"!=r&&t.push(r);return t}},7518:function(e){e.exports=function(e){return function(t){return e(t)}}},14429:function(e,t,r){var n=r(55639)["__core-js_shared__"];e.exports=n},31957:function(e,t,r){var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=n},10852:function(e,t,r){var n=r(28458),o=r(47801);e.exports=function(e,t){var r=o(e,t);return n(r)?r:void 0}},89607:function(e,t,r){var n=r(62705),o=Object.prototype,c=o.hasOwnProperty,a=o.toString,i=n?n.toStringTag:void 0;e.exports=function(e){var t=c.call(e,i),r=e[i];try{e[i]=void 0;var n=!0}catch(e){}var o=a.call(e);return n&&(t?e[i]=r:delete e[i]),o}},64160:function(e,t,r){var n=r(18552),o=r(57071),c=r(53818),a=r(58525),i=r(70577),u=r(44239),s=r(80346),f="[object Map]",l="[object Promise]",p="[object Set]",h="[object WeakMap]",v="[object DataView]",d=s(n),y=s(o),m=s(c),b=s(a),g=s(i),E=u;(n&&E(new n(new ArrayBuffer(1)))!=v||o&&E(new o)!=f||c&&E(c.resolve())!=l||a&&E(new a)!=p||i&&E(new i)!=h)&&(E=function(e){var t=u(e),r="[object Object]"==t?e.constructor:void 0,n=r?s(r):"";if(n)switch(n){case d:return v;case y:return f;case m:return l;case b:return p;case g:return h}return t}),e.exports=E},47801:function(e){e.exports=function(e,t){return null==e?void 0:e[t]}},15346:function(e,t,r){var n,o=r(14429),c=(n=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";e.exports=function(e){return!!c&&c in e}},25726:function(e){var t=Object.prototype;e.exports=function(e){var r=e&&e.constructor;return e===("function"==typeof r&&r.prototype||t)}},86916:function(e,t,r){var n=r(5569)(Object.keys,Object);e.exports=n},31167:function(e,t,r){e=r.nmd(e);var n=r(31957),o=t&&!t.nodeType&&t,c=o&&e&&!e.nodeType&&e,a=c&&c.exports===o&&n.process,i=function(){try{var e=c&&c.require&&c.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=i},2333:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5569:function(e){e.exports=function(e,t){return function(r){return e(t(r))}}},55639:function(e,t,r){var n=r(31957),o="object"==typeof self&&self&&self.Object===Object&&self,c=n||o||Function("return this")();e.exports=c},80346:function(e){var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},35694:function(e,t,r){var n=r(9454),o=r(37005),c=Object.prototype,a=c.hasOwnProperty,i=c.propertyIsEnumerable,u=n(function(){return arguments}())?n:function(e){return o(e)&&a.call(e,"callee")&&!i.call(e,"callee")};e.exports=u},1469:function(e){var t=Array.isArray;e.exports=t},98612:function(e,t,r){var n=r(23560),o=r(41780);e.exports=function(e){return null!=e&&o(e.length)&&!n(e)}},44144:function(e,t,r){e=r.nmd(e);var n=r(55639),o=r(95062),c=t&&!t.nodeType&&t,a=c&&e&&!e.nodeType&&e,i=a&&a.exports===c?n.Buffer:void 0,u=(i?i.isBuffer:void 0)||o;e.exports=u},41609:function(e,t,r){var n=r(280),o=r(64160),c=r(35694),a=r(1469),i=r(98612),u=r(44144),s=r(25726),f=r(36719),l=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(i(e)&&(a(e)||"string"==typeof e||"function"==typeof e.splice||u(e)||f(e)||c(e)))return!e.length;var t=o(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(s(e))return!n(e).length;for(var r in e)if(l.call(e,r))return!1;return!0}},23560:function(e,t,r){var n=r(44239),o=r(13218);e.exports=function(e){if(!o(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},41780:function(e){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},13218:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},37005:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},36719:function(e,t,r){var n=r(38749),o=r(7518),c=r(31167),a=c&&c.isTypedArray,i=a?o(a):n;e.exports=i},95062:function(e){e.exports=function(){return!1}},27418:function(e){"use strict";var t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,o){for(var c,a,i=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),u=1;u<arguments.length;u++){for(var s in c=Object(arguments[u]))r.call(c,s)&&(i[s]=c[s]);if(t){a=t(c);for(var f=0;f<a.length;f++)n.call(c,a[f])&&(i[a[f]]=c[a[f]])}}return i}},17563:function(e,t,r){"use strict";var n=r(70610),o=r(27418),c=r(44020);function a(e,t){return t.encode?t.strict?n(e):encodeURIComponent(e):e}function i(e){return Array.isArray(e)?e.sort():"object"==typeof e?i(Object.keys(e)).sort((function(e,t){return Number(e)-Number(t)})).map((function(t){return e[t]})):e}function u(e){var t=e.indexOf("?");return-1===t?"":e.slice(t+1)}function s(e,t){var r=function(e){var t;switch(e.arrayFormat){case"index":return function(e,r,n){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===n[e]&&(n[e]={}),n[e][t[1]]=r):n[e]=r};case"bracket":return function(e,r,n){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==n[e]?n[e]=[].concat(n[e],r):n[e]=[r]:n[e]=r};default:return function(e,t,r){void 0!==r[e]?r[e]=[].concat(r[e],t):r[e]=t}}}(t=o({arrayFormat:"none"},t)),n=Object.create(null);return"string"!=typeof e?n:(e=e.trim().replace(/^[?#&]/,""))?(e.split("&").forEach((function(e){var t=e.replace(/\+/g," ").split("="),o=t.shift(),a=t.length>0?t.join("="):void 0;a=void 0===a?null:c(a),r(c(o),a,n)})),Object.keys(n).sort().reduce((function(e,t){var r=n[t];return Boolean(r)&&"object"==typeof r&&!Array.isArray(r)?e[t]=i(r):e[t]=r,e}),Object.create(null))):n}t.extract=u,t.parse=s,t.stringify=function(e,t){!1===(t=o({encode:!0,strict:!0,arrayFormat:"none"},t)).sort&&(t.sort=function(){});var r=function(e){switch(e.arrayFormat){case"index":return function(t,r,n){return null===r?[a(t,e),"[",n,"]"].join(""):[a(t,e),"[",a(n,e),"]=",a(r,e)].join("")};case"bracket":return function(t,r){return null===r?a(t,e):[a(t,e),"[]=",a(r,e)].join("")};default:return function(t,r){return null===r?a(t,e):[a(t,e),"=",a(r,e)].join("")}}}(t);return e?Object.keys(e).sort(t.sort).map((function(n){var o=e[n];if(void 0===o)return"";if(null===o)return a(n,t);if(Array.isArray(o)){var c=[];return o.slice().forEach((function(e){void 0!==e&&c.push(r(n,e,c.length))})),c.join("&")}return a(n,t)+"="+a(o,t)})).filter((function(e){return e.length>0})).join("&"):""},t.parseUrl=function(e,t){return{url:e.split("?")[0]||"",query:s(u(e),t)}}},70610:function(e){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}},17061:function(e,t,r){var n=r(18698).default;function o(){"use strict";e.exports=o=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},r=Object.prototype,c=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},u=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",f=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function p(e,t,r,n){var o=t&&t.prototype instanceof d?t:d,c=Object.create(o.prototype),i=new T(n||[]);return a(c,"_invoke",{value:x(e,r,i)}),c}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=p;var v={};function d(){}function y(){}function m(){}var b={};l(b,u,(function(){return this}));var g=Object.getPrototypeOf,E=g&&g(g(P([])));E&&E!==r&&c.call(E,u)&&(b=E);var S=m.prototype=d.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,a,i,u){var s=h(e[o],e,a);if("throw"!==s.type){var f=s.arg,l=f.value;return l&&"object"==n(l)&&c.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(l).then((function(e){f.value=e,i(f)}),(function(e){return r("throw",e,i,u)}))}u(s.arg)}var o;a(this,"_invoke",{value:function(e,n){function c(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(c,c):c()}})}function x(e,t,r){var n="suspendedStart";return function(o,c){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw c;return k()}for(r.method=o,r.arg=c;;){var a=r.delegate;if(a){var i=w(a,r);if(i){if(i===v)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=h(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function w(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=h(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,v;var c=o.arg;return c?c.done?(t[e.resultName]=c.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,v):c:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function P(e){if(e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(c.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:k}}function k(){return{value:void 0,done:!0}}return y.prototype=m,a(S,"constructor",{value:m,configurable:!0}),a(m,"constructor",{value:y,configurable:!0}),y.displayName=l(m,f,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,f,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},_(O.prototype),l(O.prototype,s,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,c){void 0===c&&(c=Promise);var a=new O(p(e,r,n,o),c);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},_(S),l(S,f,"Generator"),l(S,u,(function(){return this})),l(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=P,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&c.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var i=c.call(o,"catchLoc"),u=c.call(o,"finallyLoc");if(i&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&c.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),v}},t}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},18698:function(e){function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},64687:function(e,t,r){var n=r(17061)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var c=t[n]={id:n,loaded:!1,exports:{}};return e[n](c,c.exports,r),c.loaded=!0,c.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t){var r=function(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,r||"default");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"===e(r)?r:String(r)}function n(e,r,n){return(r=t(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function o(e,t,r,n,o,c,a){try{var i=e[c](a),u=i.value}catch(e){return void r(e)}i.done?t(u):Promise.resolve(u).then(n,o)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(n,c){var a=e.apply(t,r);function i(e){o(a,n,c,i,u,"next",e)}function u(e){o(a,n,c,i,u,"throw",e)}i(void 0)}))}}var a=r(64687),i=r.n(a),u=r(41609),s=r.n(u),f={GET_CURRENT_USER:"".concat("PP_CACHE","_GET_CURRENT_USER")},l=function(e){return new Promise((function(t){try{chrome.storage.local.get(e,(function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(s()(r[e]))t();else{var n=r[e],o=n.value,c=n.creationDate,a=new Date(c);a.setSeconds(a.getSeconds()+86400),new Date>a?h(e).then((function(){t(void 0)})):t(o)}}))}catch(e){console.error("Error in getFromCache",e),t(void 0)}}))},p=function(e,t){return new Promise((function(r){try{chrome.storage.local.set(n({},e,{value:t,creationDate:(new Date).toISOString()}),(function(){r()}))}catch(e){console.error("Error in saveToCache",e),r()}}))},h=function(e){return new Promise((function(t){try{chrome.storage.local.remove(e,(function(){t()}))}catch(e){console.error("Error in deleteFromCache",e),t()}}))},v="serious_num",d=function(){return new Promise((function(e){chrome.storage.local.get(v,(function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})[v];e(t)}))}))},y=function(){return new Promise((function(e){chrome.storage.local.remove(v,(function(){e()}))}))};function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var g="https://api.welldonecode.com",E=function(){var e=c(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:return t=e.sent,e.abrupt("return",{Authorization:"Bearer ".concat(t)});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=c(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:return t=e.sent,e.abrupt("return",!s()(t));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l(f.GET_CURRENT_USER).then(function(){var t=c(i().mark((function t(r){var n,o;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.skipCache||!r){t.next=2;break}return t.abrupt("return",r);case 2:return t.next=4,S();case 4:if(t.sent){t.next=9;break}return t.next=8,h(f.GET_CURRENT_USER);case 8:return t.abrupt("return",null);case 9:return t.next=11,E();case 11:return n=t.sent,o="".concat(g,"/user/me"),t.abrupt("return",fetch(o,{method:"GET",headers:b({},n)}).then((function(e){if(!e.ok)throw 401===e.status&&y(),new Error("HTTP error! status: ".concat(e.status));return e.json()})).then(function(){var e=c(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(f.GET_CURRENT_USER,t);case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(t){if(console.error('Failed getCurrentUser. Url:"'.concat(o,'". ').concat(t.message)),e.getFromCacheOnError&&r)return r;throw t})));case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},O=function(){return-1!=="chrome".indexOf("enterprise")},x=r(28918),w=r.n(x),A=w()({DEFAULT:null,BLUE:null,GREEN:null,GRAYSCALE:null,UKRAINE:null}),j=function(){return"chrome".startsWith("chrome")},T=function(){var e={appIcon:A.DEFAULT,debugMode:!1,enableHotkeys:!0,enableMousewheelOpacity:!0,rememberPanelOpenClosedState:!0,enableDeleteLayerConfirmationMessage:!1,allowPositionChangeWhenLocked:!0,disablePanelSnapping:!1,disableAddFirstLayerHelpingScreen:!1,enableLayerRotation:!0,NewLayerMoveToScrollPosition:!0,autoScale:!0,customCssCode:"",sendStatistics:!!j()||void 0,_firstLoadAskPermissionsPassed:j(),isVisible:!0,isLocked:!1,isInverted:!1,isCentered:!1,allowAnimationCollapse:!0};return O()&&(e.sendStatistics=!1,e._firstLoadAskPermissionsPassed=!0),e},P=function(e){return new Promise((function(t){chrome.storage.local.get(e,(function(r){var n=r[e];t(n)}))}))},k=function(e){return new Promise((function(t){chrome.storage.local.set(e,(function(){t()}))}))},L=function(){var e=c(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("clientId");case 2:if(t=e.sent){e.next=7;break}return t=self.crypto.randomUUID(),e.next=7,k({clientId:t});case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=c(i().mark((function e(){var t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("sessionData");case 2:if(t=e.sent,r=Date.now(),!t||!t.timestamp){e.next=13;break}if(!((r-t.timestamp)/6e4>30)){e.next=10;break}t=null,e.next=13;break;case 10:return t.timestamp=r,e.next=13,k({sessionData:t});case 13:if(t){e.next=17;break}return t={session_id:r.toString(),timestamp:r.toString()},e.next=17,k({sessionData:t});case 17:return e.abrupt("return",t.session_id);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=c(i().mark((function e(){var t,r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(),t=T(),r=Object.keys(t).filter((function(e){return t.hasOwnProperty(e)})),o=r.map(function(){var e=c(i().mark((function e(r){var o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o="store.settings.".concat(r),e.next=3,P(o);case 3:if(void 0!==e.sent||void 0===t[r]){e.next=6;break}return e.abrupt("return",k(n({},o,JSON.stringify(t[r]))));case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=6,Promise.all(o).then((function(e){console.log("All settings processed.")})).catch((function(e){console.error("Error processing settings:",e)}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=c(i().mark((function e(){var t,r,n,o,c,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=T(),r=Object.keys(t).filter((function(e){return t.hasOwnProperty(e)})),n=r.map((function(e){return M(e)})),e.next=5,Promise.all(n);case 5:return o=e.sent,c=r.reduce((function(e,t,r){return e[t]=o[r],e}),{}),a=chrome.runtime.getManifest(),c.defaultLocale=a.default_locale,c.version=a.version,e.next=12,L();case 12:if(c.clientId=e.sent,!O()){e.next=17;break}return e.next=16,M("enterpriseKey");case 16:c.enterpriseKey=e.sent;case 17:return e.abrupt("return",c);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=c(i().mark((function e(t){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("sendStatistics"!==t||!O()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,P("store.settings.".concat(t));case 4:if(void 0!==(r=e.sent)){e.next=9;break}r=T()[t],e.next=18;break;case 9:e.prev=9,r=JSON.parse(r),e.next=18;break;case 13:return e.prev=13,e.t0=e.catch(9),console.error(e.t0),e.next=18,k("store.settings.".concat(t),JSON.stringify(r));case 18:return e.abrupt("return",r);case 19:case"end":return e.stop()}}),e,null,[[9,13]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=c(i().mark((function e(t,r){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(n({},"store.settings.".concat(t),JSON.stringify(r)));case 2:return e.abrupt("return",r);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();function C(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var U={NOTIFICATIONS_JSON_URL:"https://s3-eu-west-1.amazonaws.com/www.welldonecode.com/perfectpixel/data/notifications.json?random=".concat(Math.random()),ADS_JSON_URL:"https://s3-eu-west-1.amazonaws.com/www.welldonecode.com/perfectpixel/data/ads.json?random=".concat(Math.random()),METASURVEY_UNINSTALL_SURVEY_URL:"https://public.getmetasurvey.com/?survey_id=5e10ed0d9dadfe0017f5d173",GOOGLE_ANALYTICS_COLLECT_URL:"https://www.google-analytics.com/mp/collect",YANDEX_METRIKA_COLLECT_URL:"https://mc.yandex.ru/watch"},D=["events"];function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var q=!1,K=null,V=null,J=null,H=function(){var e=c(i().mark((function e(t){var r,n,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(q){e.next=2;break}return e.abrupt("return");case 2:return r=t.events,n=C(t,D),e.next=5,N();case 5:return o=e.sent,e.t0=fetch,e.t1="".concat(U.GOOGLE_ANALYTICS_COLLECT_URL,"?measurement_id=").concat(V,"&api_secret=").concat(J),e.t2={"Content-Type":"application/json"},e.t3=JSON,e.t4=B,e.next=13,L();case 13:e.t5=e.sent,e.t6=r.map((function(e){return B(B({},e),{},{params:B(B({},e.params),{},{session_id:o,engagement_time_msec:100})})})),e.t7={client_id:e.t5,events:e.t6},e.t8=n,e.t9=(0,e.t4)(e.t7,e.t8),e.t10=e.t3.stringify.call(e.t3,e.t9),e.t11={method:"POST",headers:e.t2,body:e.t10},(0,e.t0)(e.t1,e.t11);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y={init:function(e){K=e.extVersion,V=e.googleAnalyticsId,J=e.googleAnalyticsApiSecret,q=!0},trackRun:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};H({events:[{name:"page_view",params:{page_title:e.pageTitle||"PerfectPixel UI",page_location:"http://perfectpixel.example.com",page_path:e.pagePath||"/"}}],user_properties:{extension_version:{value:K}}})},trackEvent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};H(B({events:[{name:e.eventCategory,params:B(B(B({},void 0!==e.eventAction?{action:e.eventAction}:{}),void 0!==e.eventValue?{value:e.eventValue}:{}),void 0!==e.eventLabel?{label:e.eventLabel}:{})}]},s()(e.userProperties)?{}:{user_properties:B({},e.userProperties)}))}},$=r(17563);function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var z=!1,Q=null,X=null,Z=function(e){if(z){var t=$.stringify(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({rn:Math.floor(1e6*Math.random())},e));fetch("".concat(U.YANDEX_METRIKA_COLLECT_URL,"/").concat(X,"/1?").concat(t))}},ee=[Y,{init:function(e){Q=e.extVersion,X=e.yandexMetrikaCounterId,z=!0},trackRun:function(){Z({"site-info":JSON.stringify({extversion:Q}),"page-url":"perfectpixel".concat("chrome",".com"),ut:"noindex"})},trackEvent:function(e){}}],te={init:function(e){ee.forEach((function(t){return t.init(e)}))},trackRun:function(e){ee.forEach((function(t){return t.trackRun(e)}))},trackEvent:function(e){ee.forEach((function(t){return t.trackEvent(e)}))}},re=function(e){chrome.tabs.query({status:"complete"},(function(t){for(var r=0;r<t.length;r++)chrome.tabs.sendMessage(t[r].id,e,(function(){return chrome.runtime.lastError}))}))},ne=function(e){return!e.url||e.url.match(/^chrome:/)||e.url.match(/^about:/)||e.url.match(/^https:\/\/chrome.google.com\/webstore/)||e.url.match(/^https:\/\/addons.mozilla.org/)},oe={measurementId:"G-NS02M3NL2K",apiSecret:"qW0PjVb_R4uxUj4fxcFJEA"},ce="47490319",ae=(w()({OFFSCREEN_CLIPBOARD:null}),w()({BACK_MESSAGE_CONTENT_PING:null,BACK_MESSAGE_CONTENT_TOGGLE_PANEL:null,BACK_MESSAGE_CONTENT_GLOBAL_STORAGE_UPDATED:null,BACK_MESSAGE_CONTENT_SETTINGS_UPDATED:null,BACK_MESSAGE_CONTENT_USER_UPDATED:null,MESSAGE_GET_TAB_ID:null,MESSAGE_OPEN_NEW_TAB:null,MESSAGE_OPEN_SETTINGS_PAGE:null,MESSAGE_TRACK_EVENT:null,MESSAGE_TRACK_PAGE_LOAD:null,MESSAGE_GET_SETTINGS:null,MESSAGE_SET_SETTINGS:null,MESSAGE_GET_GLOBAL_STORAGE_ELEMENT:null,MESSAGE_SET_GLOBAL_STORAGE_ELEMENT:null,MESSAGE_PASTE_FROM_URL_CHUNKED:null,MESSAGE_REQUEST_PERMISSIONS:null,MESSAGE_REMOVE_PERMISSIONS:null,MESSAGE_LOAD_NOTIFICATIONS:null,MESSAGE_LOAD_ADS:null,MESSAGE_GET_USER:null,MESSAGE_CLOSE_PANEL:null,MESSAGE_REFRESH_ICONS_FOR_ALL_TABS:null})),ie=function(e){switch(e){case A.BLUE:return"assets/images/icons/app_icons/blue.png";case A.GREEN:return"assets/images/icons/app_icons/green.png";case A.GRAYSCALE:return"assets/images/icons/app_icons/grayscale.png";case A.UKRAINE:return"assets/images/icons/app_icons/ukraine.png";case A.DEFAULT:default:return"assets/images/icons/app_icons/default.png"}},ue=w()({PRO:null}),se=function(e){return!!O()||!s()(e)&&("function"==typeof e.getIn?e.getIn(["subscriptionDetails","isActive"])&&e.getIn(["subscriptionDetails","plan"])===ue.PRO:e.subscriptionDetails.isActive&&e.subscriptionDetails.plan===ue.PRO)},fe=function(){return((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).skipUserFetch?Promise.resolve():_()).catch((function(){})).then((function(e){chrome.tabs.query({},(function(t){t=t||[];for(var r=0;r<t.length;r++)le({tab:t[r],user:e})}))}))},le=function(e){var t=e.tab,r=e.user;function n(){return o.apply(this,arguments)}function o(){return o=c(i().mark((function e(){var t,r,n,o,c,a=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(t=a.length>0&&void 0!==a[0]?a[0]:{}).appIcon,n=t.tabId,o=t.user,!r){e.next=5;break}e.t0=r,e.next=13;break;case 5:if(!se(o)){e.next=11;break}return e.next=8,M("appIcon");case 8:e.t1=e.sent,e.next=12;break;case 11:e.t1=A.DEFAULT;case 12:e.t0=e.t1;case 13:c=e.t0,chrome.action.setIcon({path:chrome.runtime.getURL(ie(c)),tabId:n});case 15:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}function a(e){chrome.action.setPopup({tabId:t.id,popup:e})}ne(t)?(a("popups/tab-not-allowed.html"),n({appIcon:A.GRAYSCALE,tabId:t.id})):t.url&&t.url.match(/file:\//)?(a(""),chrome.extension.isAllowedFileSchemeAccess((function(e){e&&n({tabId:t.id,user:r})}))):(n({tabId:t.id,user:r}),a(""))};var pe=function(){this.ArrayBuffer=null,this.Name=null,this.MimeType=null,this.ToBlob=function(){var e=new DataView(this.ArrayBuffer);return new Blob([e],{type:this.MimeType})}},he=pe,ve={bufferToString:function(e){var t=new Uint8Array(e);return Array.prototype.join.call(t,",")},stringToBuffer:function(e){var t=JSON.parse("[".concat(e,"]"));return new Uint8Array(t).buffer}};var de=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return chrome.i18n?chrome.i18n.getMessage.apply(chrome,arguments):t};function ye(e,t,r){fetch(e,{type:"HEAD"}).then((function(n){var o=n.headers.get("content-type");o.includes("image")?fetch(e).then((function(e){var n=new pe;n.Name=self.crypto.randomUUID(),n.MimeType=o,e.arrayBuffer().then((function(e){n.ArrayBuffer=e,r?t({status:"SUCCESS",file:n}):function(e,t){t(e instanceof he?{status:"OK",fileName:e.Name,fileType:e.MimeType,arrayBuffer:ve.bufferToString(e.ArrayBuffer)}:e?{status:"FAIL",message:e.message,showToUser:e.showToUser}:{status:"FAIL",message:"Unknown error"})}(n,t)})).catch((function(){t({status:"FAIL",message:de("error_image_not_found","Image not found")})}))})):(console.warn('Content-Type "'.concat(o,'" is not image')),t({status:"FAIL",message:de("error_image_not_found","Image not found")}))})).catch((function(){t({status:"FAIL",message:de("error_invalid_url","Incorrect URL")})}))}var me="CHUNKED_MESSAGE_FLAG",be=33554432,ge={},Ee=function(e){return new Promise((function(t){return chrome.runtime.sendMessage(e,(function(e){t(e)}))}))},Se=function(){var e=c(i().mark((function e(t){var r,o,c,a,u,s,f,l,p,h,v,d,y,m,b,g,E=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=(o=E.length>1&&void 0!==E[1]?E[1]:{}).sendMessageFn,a=o.requestId,u=c||Ee,s=a||self.crypto.randomUUID(),f=JSON.stringify(t),l=f.length,p=be,h=0;case 7:if(!(h<l)){e.next=15;break}return d=Math.min(h+p,l),y=f.substring(h,d),e.next=12,u((n(v={},me,!0),n(v,"requestId",s),n(v,"chunk",y),v));case 12:h=d,e.next=7;break;case 15:return e.next=17,u((n(r={},me,!0),n(r,"requestId",s),n(r,"done",!0),r));case 17:if(!(m=e.sent)||!m[me]){e.next=29;break}return e.prev=19,e.next=22,new Promise((function(e){b=_e((function(t,r,n){n(),e(t)}),{requestIdToMonitor:m.requestId})}));case 22:return g=e.sent,e.abrupt("return",g);case 24:return e.prev=24,b&&Oe(b),e.finish(24);case 27:e.next=30;break;case 29:return e.abrupt("return",m);case 30:case"end":return e.stop()}}),e,null,[[19,,24,27]])})));return function(t){return e.apply(this,arguments)}}(),_e=function(e,t){var r=xe(e,t);return chrome.runtime.onMessage.addListener(r),r},Oe=function(e){chrome.runtime.onMessage.removeListener(e)},xe=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).requestIdToMonitor;return function(r,n,o){if(r&&r[me]&&r.requestId){var c=r.requestId;if(t&&c!==t)return!1;if(r.done){var a="".concat.apply("",ge[c]);delete ge[c];var i=JSON.parse(a);return e(i,n,o)}ge[c]||(ge[c]=[]),ge[c].push(r.chunk),o({status:"PENDING"})}return!1}},we=function(e){chrome.scripting.insertCSS({target:{tabId:e},files:["styles/content.css"]}),chrome.scripting.executeScript({target:{tabId:e},files:["content.js"]},(function(){console.log("content.js injected successfully to tab ".concat(e)),Te(e)}))};function Ae(){console.log("PP init analytics"),te.init({googleAnalyticsId:oe.measurementId||oe.measurementId,googleAnalyticsApiSecret:oe.apiSecret||oe.apiSecret,yandexMetrikaCounterId:ce||ce,extVersion:chrome.runtime.getManifest().version}),console.log("PP init analytics succeeded")}function je(){return console.log("PP init user"),_({skipCache:!0}).then((function(){console.log("PP init user succeeded")})).catch((function(){}))}chrome.action.onClicked.addListener(function(){var e=c(i().mark((function e(t){var r,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,n=!1,e.prev=2,e.next=5,new Promise((function(e,t){chrome.tabs.sendMessage(r,{type:ae.BACK_MESSAGE_CONTENT_PING},(function(r){var n=chrome.runtime.lastError;n&&t(n),e(r)}))}));case 5:n=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),n=!1;case 11:n?Te(r):we(r);case 12:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()),chrome.tabs.onUpdated.addListener(function(){var e=c(i().mark((function e(t,r,n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("complete"!==r.status){e.next=11;break}if(!ne(n)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,chrome.scripting.executeScript({target:{tabId:t},func:function(){return JSON.stringify(localStorage["perfectpixel-panel-active"])}});case 5:if(null===e.sent[0].result){e.next=11;break}return e.next=9,G();case 9:if(!e.sent.rememberPanelOpenClosedState){e.next=11;break}we(t);case 11:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()),self.addEventListener("activate",function(){var e=c(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe({skipUserFetch:!0});case 2:return e.next=4,I();case 4:return je().then((function(){fe()})),e.next=7,G();case 7:if(!e.sent.sendStatistics){e.next=9;break}Ae();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),chrome.tabs.onUpdated.addListener((function(e,t,r){if("loading"===t.status){var n={url:r.url,id:r.id};le({tab:n}),_().catch((function(){})).then((function(e){le({tab:n,user:e})}))}})),chrome.runtime.onMessage.addListener((function(e,t,r){if(e[me])return!1;switch(e.type){case ae.MESSAGE_GET_TAB_ID:return r({tabId:t.tab.id}),!1;case ae.MESSAGE_OPEN_SETTINGS_PAGE:var o=chrome.runtime.getURL("settings.html");chrome.tabs.query({url:o},(function(e){e&&e.length?chrome.tabs.update(e[0].id,{active:!0}):chrome.tabs.create({url:o}),r()}));break;case ae.MESSAGE_OPEN_NEW_TAB:chrome.tabs.create({url:e.url},(function(e){r()}));break;case ae.MESSAGE_TRACK_PAGE_LOAD:return te.trackRun({pagePath:e.pagePath,pageTitle:e.pageTitle}),r(),!1;case ae.MESSAGE_TRACK_EVENT:return te.trackEvent({eventCategory:e.eventCategory,eventAction:e.eventAction,eventValue:e.eventValue,eventLabel:e.eventLabel,pagePath:e.pagePath,userProperties:e.userProperties}),r(),!1;case ae.MESSAGE_GET_GLOBAL_STORAGE_ELEMENT:P(e.key).then((function(e){r({value:e})}));break;case ae.MESSAGE_SET_GLOBAL_STORAGE_ELEMENT:c(i().mark((function t(){var r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("perfectpixel-notification"!==e.key){t.next=9;break}return t.next=3,P(e.key);case 3:if((r=t.sent)&&!(parseInt(r)<e.value)){t.next=7;break}return t.next=7,k(n({},e.key,e.value));case 7:t.next=11;break;case 9:return t.next=11,k(n({},e.key,e.value));case 11:case"end":return t.stop()}}),t)})))().then((function(){re({type:ae.BACK_MESSAGE_CONTENT_GLOBAL_STORAGE_UPDATED,key:e.key}),r()}));break;case ae.MESSAGE_GET_SETTINGS:G().then((function(e){return r(e)}));break;case ae.MESSAGE_SET_SETTINGS:c(i().mark((function t(){var r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,G();case 2:r=t.sent,Object.keys(e.value).forEach(function(){var t=c(i().mark((function t(n){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R(n,e.value[n]);case 2:"sendStatistics"===n&&r.sendStatistics&&Ae(),"appIcon"===n&&fe();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 4:case"end":return t.stop()}}),t)})))().then((function(){re({type:ae.BACK_MESSAGE_CONTENT_SETTINGS_UPDATED}),r()}));break;case ae.MESSAGE_REQUEST_PERMISSIONS:chrome.permissions.request({permissions:e.permissions},(function(e){r(e)}));break;case ae.MESSAGE_REMOVE_PERMISSIONS:chrome.permissions.remove({permissions:e.permissions},(function(e){r(e)}));break;case ae.MESSAGE_LOAD_NOTIFICATIONS:!function(e){e.request;var t=e.sendResponse;O()?t([]):fetch(U.NOTIFICATIONS_JSON_URL).then((function(e){if(!e.ok)throw new Error("PP Notifications: Network response was not ok");return e.json()})).then((function(e){console.log("PP Notifications: fetched successfully"),t(e)})).catch((function(e){console.error("PP Notifications: There was a problem with the fetch operation:",e)}))}({request:e,sendResponse:r});break;case ae.MESSAGE_LOAD_ADS:!function(e){e.request;var t=e.sendResponse;O()?t([]):fetch(U.ADS_JSON_URL).then((function(e){if(!e.ok)throw new Error("HTTP error! status: ".concat(e.status));return e.json()})).then((function(e){return t(e)})).catch((function(e){console.error("Failed to load ads",e.message),t({status:"FAIL"})}))}({request:e,sendResponse:r});break;case ae.MESSAGE_GET_USER:!function(e){e.request;var t=e.sendResponse;_().then((function(e){return t(e)})).catch((function(){return t(void 0)}))}({request:e,sendResponse:r});break;case ae.MESSAGE_CLOSE_PANEL:break;case ae.MESSAGE_REFRESH_ICONS_FOR_ALL_TABS:return fe(),!1;default:return console.warn("Unexpected message type received: '".concat(e.type,"'. Message: "),e),!1}return!0})),_e((function(e,t,r){return e.type===ae.MESSAGE_PASTE_FROM_URL_CHUNKED&&(o=e.url,c=function(e){var o;"OK"===e.status&&(null==e||null===(o=e.arrayBuffer)||void 0===o?void 0:o.length)>be?function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).sendMessageFn;return function(t,r,o){var c,a=self.crypto.randomUUID();t((n(c={},me,!0),n(c,"requestId",a),c)),Se(r,{sendMessageFn:e||Ee,requestId:a})}}({sendMessageFn:function(e){return chrome.tabs.sendMessage(t.tab.id,e)}})(r,e,t):r(e)},i=function(e){var t="https://",r="http://";return e.substr(0,t.length)!==t&&e.substr(0,r.length)!==r&&(e=t+e),e}(o),a?new Promise((function(){ye(i,c,a)})):ye(i,c),!0);var o,c,a,i}));var Te=function(e){console.log("Toggle panel message sent to tab ".concat(e)),chrome.tabs.sendMessage(e,{type:ae.BACK_MESSAGE_CONTENT_TOGGLE_PANEL})}}()}();