!function(){var e={591:function(e,t,n){var r=n(8).default;function o(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */e.exports=o=function(){return n},e.exports.__esModule=!0,e.exports.default=e.exports;var t,n={},a=Object.prototype,i=a.hasOwnProperty,c=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},u=s.iterator||"@@iterator",p=s.asyncIterator||"@@asyncIterator",f=s.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(t){l=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var o=t&&t.prototype instanceof b?t:b,a=Object.create(o.prototype),i=new U(r||[]);return c(a,"_invoke",{value:P(e,n,i)}),a}function m(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=d;var h="suspendedStart",v="executing",g="completed",y={};function b(){}function w(){}function x(){}var k={};l(k,u,(function(){return this}));var j=Object.getPrototypeOf,S=j&&j(j(C([])));S&&S!==a&&i.call(S,u)&&(k=S);var O=x.prototype=b.prototype=Object.create(k);function q(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function R(e,t){function n(o,a,c,s){var u=m(e[o],e,a);if("throw"!==u.type){var p=u.arg,f=p.value;return f&&"object"==r(f)&&i.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,c,s)}),(function(e){n("throw",e,c,s)})):t.resolve(f).then((function(e){p.value=e,c(p)}),(function(e){return n("throw",e,c,s)}))}s(u.arg)}var o;c(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(a,a):a()}})}function P(e,n,r){var o=h;return function(a,i){if(o===v)throw new Error("Generator is already running");if(o===g){if("throw"===a)throw i;return{value:t,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var s=E(c,r);if(s){if(s===y)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=v;var u=m(e,n,r);if("normal"===u.type){if(o=r.done?g:"suspendedYield",u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=g,r.method="throw",r.arg=u.arg)}}}function E(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var a=m(o,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,y;var i=a.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function M(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function U(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(M,this),this.reset(!0)}function C(e){if(e||""===e){var n=e[u];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function n(){for(;++o<e.length;)if(i.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}throw new TypeError(r(e)+" is not iterable")}return w.prototype=x,c(O,"constructor",{value:x,configurable:!0}),c(x,"constructor",{value:w,configurable:!0}),w.displayName=l(x,f,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,l(e,f,"GeneratorFunction")),e.prototype=Object.create(O),e},n.awrap=function(e){return{__await:e}},q(R.prototype),l(R.prototype,p,(function(){return this})),n.AsyncIterator=R,n.async=function(e,t,r,o,a){void 0===a&&(a=Promise);var i=new R(d(e,t,r,o),a);return n.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},q(O),l(O,f,"Generator"),l(O,u,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=C,U.prototype={constructor:U,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(_),!e)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,o){return c.type="throw",c.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:C(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},n}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},8:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},757:function(e,t,n){var r=n(591)();e.exports=r;try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},476:function(e){"use strict";e.exports="(function () {\n  var c = {\n    vmid: 'OM',\n    state: 0,\n    utf8decode: function utf8decode(utftext) {\n      var string = '';\n      var i = 0;\n      var c = 0,\n        c2 = 0,\n        c3 = 0;\n      while (i < utftext.length) {\n        c = utftext.charCodeAt(i);\n        if (c < 128) {\n          string += String.fromCharCode(c);\n          i++;\n        } else if (c > 191 && c < 224) {\n          c2 = utftext.charCodeAt(i + 1);\n          string += String.fromCharCode((c & 31) << 6 | c2 & 63);\n          i += 2;\n        } else {\n          c2 = utftext.charCodeAt(i + 1);\n          c3 = utftext.charCodeAt(i + 2);\n          string += String.fromCharCode((c & 15) << 12 | (c2 & 63) << 6 | c3 & 63);\n          i += 3;\n        }\n      }\n      return string;\n    },\n    getUniqId: function getUniqId() {\n      return Date.now().toString(36) + Math.random().toString(36).slice(2, 6);\n    },\n    props: Object.getOwnPropertyNames(window),\n    includes: function includes(arr, item) {\n      for (var i = arr.length; i--;) {\n        if (arr[i] === item) return true;\n      }\n      return false;\n    },\n    forEach: function forEach(arr, func) {\n      var length = arr && arr.length || 0;\n      for (var i = 0; i < length; i++) func(arr[i], i, arr);\n    },\n    map: function map(arr, func) {\n      var comm = this;\n      var res = [];\n      comm.forEach(arr, function (item, i) {\n        res.push(func(item, i, arr));\n      });\n      return res;\n    },\n    init: function init(srcId, destId) {\n      var comm = this;\n      comm.sid = comm.vmid + srcId;\n      comm.did = comm.vmid + destId;\n      document.addEventListener(comm.sid, comm['handle' + srcId].bind(comm), false);\n      comm.load = comm.checkLoad = function () {};\n      // check whether the page is injectable via <script>, whether limited by CSP\n      try {\n        comm.injectable = (0, eval)('true');\n      } catch (e) {\n        comm.injectable = false;\n      }\n    },\n    post: function post(data) {\n      var e = new CustomEvent(this.did, {\n        detail: data\n      });\n      document.dispatchEvent(e);\n    },\n    handleR: function handleR(e) {\n      var obj = e.detail;\n      var comm = this;\n      var maps = {\n        LoadScript: comm.loadScript.bind(comm),\n        Command: function Command(data) {\n          var func = comm.command[data];\n          func && func();\n        },\n        GotRequestId: function GotRequestId(id) {\n          comm.qrequests.shift().start(id);\n        },\n        HttpRequested: function HttpRequested(r) {\n          var req = comm.requests[r.id];\n          if (req) req.callback(r);\n        },\n        UpdateValues: function UpdateValues(data) {\n          var values = comm.values;\n          if (values && values[data.uri]) values[data.uri] = data.values;\n        },\n        NotificationClicked: function NotificationClicked(id) {\n          var options = comm.notif[id];\n          if (options) {\n            var onclick = options.onclick;\n            onclick && onclick();\n          }\n        },\n        NotificationClosed: function NotificationClosed(id) {\n          var options = comm.notif[id];\n          if (options) {\n            delete comm.notif[id];\n            var ondone = options.ondone;\n            ondone && ondone();\n          }\n        },\n        // advanced inject\n        Injected: function Injected(id) {\n          var obj = comm.ainject[id];\n          var func = window['VM_' + id];\n          delete window['VM_' + id];\n          delete comm.ainject[id];\n          if (obj && func) comm.runCode(obj[0], func, obj[1], obj[2]);\n        }\n      };\n      var func = maps[obj.cmd];\n      if (func) func(obj.data);\n    },\n    runCode: function runCode(name, func, args, thisObj) {\n      try {\n        func.apply(thisObj, args);\n      } catch (e) {\n        var msg = 'Error running script: ' + name + '\\n' + e;\n        if (e.message) msg += '\\n' + e.message;\n        console.error(msg);\n      }\n    },\n    initRequest: function initRequest() {\n      // request functions\n      function reqAbort() {\n        comm.post({\n          cmd: 'AbortRequest',\n          data: this.id\n        });\n      }\n      function parseData(req, details) {\n        if (req.resType) {\n          // blob or arraybuffer\n          var data = req.data.response.split(',');\n          var mimetype = data[0].match(/^data:(.*?);base64$/);\n          if (!mimetype) {\n            // invalid\n            req.data.response = null;\n          } else {\n            data = window.atob(data[1]);\n            var arr = new window.Uint8Array(data.length);\n            for (var i = 0; i < data.length; i++) arr[i] = data.charCodeAt(i);\n            if (details.responseType == 'blob') {\n              // blob\n              return new Blob([arr], {\n                type: mimetype\n              });\n            } else {\n              // arraybuffer\n              return arr.buffer;\n            }\n          }\n        } else if (details.responseType == 'json') {\n          // json\n          return JSON.parse(req.data.response);\n        } else {\n          // text\n          return req.data.response;\n        }\n      }\n\n      // request object functions\n      function callback(req) {\n        var t = this;\n        var cb = t.details['on' + req.type];\n        if (cb) {\n          if (req.data.response) {\n            if (!t.data) t.data = [parseData(req, t.details)];\n            req.data.response = t.data[0];\n          }\n          cb(req.data);\n        }\n        if (req.type == 'loadend') delete comm.requests[t.id];\n      }\n      function start(id) {\n        var t = this;\n        var data = {\n          id: id,\n          method: t.details.method,\n          url: t.details.url,\n          data: t.details.data,\n          //async: !t.details.synchronous,\n          user: t.details.user,\n          password: t.details.password,\n          headers: t.details.headers,\n          overrideMimeType: t.details.overrideMimeType\n        };\n        t.id = id;\n        comm.requests[id] = t;\n        if (comm.includes(['arraybuffer', 'blob'], t.details.responseType)) {\n          data.responseType = 'blob';\n        }\n        comm.post({\n          cmd: 'HttpRequest',\n          data: data\n        });\n      }\n      function getFullUrl(url) {\n        var a = document.createElement('a');\n        a.setAttribute('href', url);\n        return a.href;\n      }\n      var comm = this;\n      comm.requests = {};\n      comm.qrequests = [];\n      comm.Request = function (details) {\n        var t = {\n          details: details,\n          callback: callback,\n          start: start,\n          req: {\n            abort: reqAbort\n          }\n        };\n        details.url = getFullUrl(details.url);\n        comm.qrequests.push(t);\n        comm.post({\n          cmd: 'GetRequestId'\n        });\n        return t.req;\n      };\n    },\n    getWrapper: function getWrapper() {\n      // http://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects\n      // http://developer.mozilla.org/docs/Web/API/Window\n      var comm = this;\n      var wrapper = {};\n      // `eval` should be called directly so that it is run in current scope\n      wrapper.eval = eval;\n      // Wrap methods\n      comm.forEach([\n      // 'uneval',\n      'isFinite', 'isNaN', 'parseFloat', 'parseInt', 'decodeURI', 'decodeURIComponent', 'encodeURI', 'encodeURIComponent', 'addEventListener', 'alert', 'atob', 'blur', 'btoa', 'clearInterval', 'clearTimeout', 'close', 'confirm', 'dispatchEvent', 'fetch', 'find', 'focus', 'getComputedStyle', 'getSelection', 'matchMedia', 'moveBy', 'moveTo', 'open', 'openDialog', 'postMessage', 'print', 'prompt', 'removeEventListener', 'requestAnimationFrame', 'resizeBy', 'resizeTo', 'scroll', 'scrollBy', 'scrollByLines', 'scrollByPages', 'scrollTo', 'setInterval', 'setTimeout', 'stop'], function (name) {\n        var method = window[name];\n        if (method) wrapper[name] = function () {\n          return method.apply(window, arguments);\n        };\n      });\n      function defineProtectedProperty(name) {\n        var modified = false;\n        var value;\n        Object.defineProperty(wrapper, name, {\n          get: function get() {\n            if (!modified) value = window[name];\n            return value === window ? wrapper : value;\n          },\n          set: function set(val) {\n            modified = true;\n            value = val;\n          }\n        });\n      }\n      function defineReactedProperty(name) {\n        Object.defineProperty(wrapper, name, {\n          get: function get() {\n            var value = window[name];\n            return value === window ? wrapper : value;\n          },\n          set: function set(val) {\n            window[name] = val;\n          }\n        });\n      }\n\n      // Wrap properties\n      comm.forEach(comm.props, function (name) {\n        if (wrapper[name]) return;\n        if (name.slice(0, 2) === 'on') defineReactedProperty(name);else defineProtectedProperty(name);\n      });\n      return wrapper;\n    },\n    wrapGM: function wrapGM(script, cache) {\n      function getValues() {\n        return comm.values[script.uri];\n      }\n      function propertyToString() {\n        return '[Violentmonkey property]';\n      }\n      function addProperty(name, prop, obj) {\n        if ('value' in prop) prop.writable = false;\n        prop.configurable = false;\n        Object.defineProperty(obj, name, prop);\n        if (typeof obj[name] == 'function') obj[name].toString = propertyToString;\n      }\n      function saveValues() {\n        comm.post({\n          cmd: 'SetValue',\n          data: {\n            uri: script.uri,\n            values: getValues()\n          }\n        });\n      }\n\n      // Add GM functions\n      // Reference: http://wiki.greasespot.net/Greasemonkey_Manual:API\n      var comm = this;\n      var gm = {};\n      var grant = script.meta.grant || [];\n      var urls = {};\n      if (!grant.length || grant.length == 1 && grant[0] == 'none') {\n        // @grant none\n        grant.pop();\n      } else {\n        gm['window'] = comm.getWrapper();\n      }\n      if (!comm.includes(grant, 'unsafeWindow')) grant.push('unsafeWindow');\n      if (!comm.includes(grant, 'GM_info')) grant.push('GM_info');\n      var resources = script.meta.resources || {};\n      var gm_funcs = {\n        unsafeWindow: {\n          value: window\n        },\n        GM_info: {\n          get: function get() {\n            var m = script.code.match(/\\/\\/\\s+==UserScript==\\s+([\\s\\S]*?)\\/\\/\\s+==\\/UserScript==\\s/);\n            var data = {\n              description: script.meta.description || '',\n              excludes: script.meta.exclude.concat(),\n              includes: script.meta.include.concat(),\n              matches: script.meta.match.concat(),\n              name: script.meta.name || '',\n              namespace: script.meta.namespace || '',\n              resources: {},\n              'run-at': script.meta['run-at'] || '',\n              unwrap: false,\n              version: script.meta.version || ''\n            };\n            var obj = {};\n            addProperty('scriptMetaStr', {\n              value: m ? m[1] : ''\n            }, obj);\n\n            // whether update is allowed\n            addProperty('scriptWillUpdate', {\n              value: !!script.update\n            }, obj);\n\n            // OrangeMonkey specific data\n            addProperty('version', {\n              value: comm.version\n            }, obj);\n            addProperty('scriptHandler', {\n              value: 'OrangeMonkey'\n            }, obj);\n\n            // script object\n            addProperty('script', {\n              value: {}\n            }, obj);\n\n            // downloadMode\n            addProperty('downloadMode', {\n              value: 'browser'\n            }, obj);\n            var i;\n            for (i in data) addProperty(i, {\n              value: data[i]\n            }, obj.script);\n            for (i in script.meta.resources) {\n              addProperty(i, {\n                value: script.meta.resources[i]\n              }, obj.script.resources);\n            }\n            return obj;\n          }\n        },\n        GM_deleteValue: {\n          value: function value(key) {\n            var values = getValues();\n            delete values[key];\n            saveValues();\n          }\n        },\n        GM_getValue: {\n          value: function value(key, val) {\n            var values = getValues();\n            var v = values[key];\n            if (v) {\n              var type = v[0];\n              v = v.slice(1);\n              switch (type) {\n                case 'n':\n                  val = Number(v);\n                  break;\n                case 'b':\n                  val = v == 'true';\n                  break;\n                case 'o':\n                  try {\n                    val = JSON.parse(v);\n                  } catch (e) {\n                    console.warn(e);\n                  }\n                  break;\n                default:\n                  val = v;\n              }\n            }\n            return val;\n          }\n        },\n        GM_listValues: {\n          value: function value() {\n            return Object.getOwnPropertyNames(getValues());\n          }\n        },\n        GM_setValue: {\n          value: function value(key, val) {\n            var type = (typeof val)[0];\n            switch (type) {\n              case 'o':\n                val = type + JSON.stringify(val);\n                break;\n              default:\n                val = type + val;\n            }\n            var values = getValues();\n            values[key] = val;\n            saveValues();\n          }\n        },\n        GM_getResourceText: {\n          value: function value(name) {\n            for (var i in resources) if (name == i) {\n              var text = cache[resources[i]];\n              if (text) text = comm.utf8decode(window.atob(text));\n              return text;\n            }\n          }\n        },\n        GM_getResourceURL: {\n          value: function value(name) {\n            for (var k in resources) if (name == k) {\n              var key = resources[k];\n              var url = urls[key];\n              if (!url) {\n                var cc = cache[key];\n                if (cc) {\n                  // Binary string is not supported by blob constructor,\n                  // so we have to transform it into array buffer.\n                  var bin = window.atob(cc);\n                  var arr = new window.Uint8Array(bin.length);\n                  for (var i = 0; i < bin.length; i++) {\n                    arr[i] = bin.charCodeAt(i);\n                  }\n                  var b = new Blob([arr]);\n                  urls[key] = url = URL.createObjectURL(b);\n                } else {\n                  url = key;\n                }\n              }\n              return url;\n            }\n          }\n        },\n        GM_addStyle: {\n          value: function value(css) {\n            comm.post({\n              cmd: 'AddStyle',\n              data: css\n            });\n          }\n        },\n        GM_log: {\n          /* eslint-disable no-console */\n          value: function value(data) {\n            console.log(data);\n          }\n          /* eslint-enable no-console */\n        },\n        GM_openInTab: {\n          value: function value(url, background) {\n            comm.post({\n              cmd: 'OpenTab',\n              data: {\n                url: url,\n                active: !background\n              }\n            });\n          }\n        },\n        GM_registerMenuCommand: {\n          value: function value(cap, func, acc) {\n            var scriptName, scriptNamespace;\n            if (this.GM_info && this.GM_info.script) {\n              scriptName = this.GM_info.script.name;\n              scriptNamespace = this.GM_info.script.namespace;\n            }\n            comm.command[cap] = func;\n            if (scriptName) {\n              comm.command[scriptName + '_' + cap] = func;\n            }\n            comm.post({\n              cmd: 'RegisterMenu',\n              data: [cap, acc, scriptName, scriptNamespace]\n            });\n          }\n        },\n        GM_xmlhttpRequest: {\n          value: function value(details) {\n            if (!comm.Request) comm.initRequest();\n            return comm.Request(details);\n          }\n        },\n        GM_download: {\n          value: function value(url, name) {\n            var details = null;\n            if (typeof url === 'object') {\n              details = url;\n            } else {\n              details = {\n                url: url,\n                name: name\n              };\n            }\n            comm.post({\n              cmd: 'Download',\n              data: details\n            });\n            if (details.onerror) {\n              details.onerror({\n                error: 'not_supported_events',\n                details: 'Events onload/onerror is not supported!'\n              });\n            }\n          }\n        },\n        GM_evalFunction: {\n          value: function value(msg, cb) {\n            comm.post({\n              cmd: 'EvalFunction',\n              data: {\n                msg: msg,\n                cb: cb\n              }\n            });\n          }\n        },\n        GM_notification: {\n          value: function value(text, title, image, onclick) {\n            if (!text) {\n              throw 'Invalid parameters.';\n            }\n            var options = typeof text === 'object' ? text : {\n              text: text,\n              title: title,\n              image: image,\n              onclick: onclick\n            };\n            var id = comm.notif[''] = (comm.notif[''] || 0) + 1;\n            comm.notif[id] = options;\n            comm.post({\n              cmd: 'Notification',\n              data: {\n                id: id,\n                text: options.text,\n                title: options.title,\n                image: options.image\n              }\n            });\n          }\n        },\n        GM_setClipboard: {\n          value: function value(text, type) {\n            comm.post({\n              cmd: 'SetClipboard',\n              data: {\n                type: type,\n                data: text\n              }\n            });\n          }\n        }\n      };\n      var isSafari = navigator.vendor && navigator.vendor.indexOf('Apple') > -1 && navigator.userAgent && navigator.userAgent.indexOf('CriOS') == -1 && navigator.userAgent.indexOf('FxiOS') == -1;\n      if (isSafari) {\n        delete gm_funcs.GM_download;\n        delete gm_funcs.GM_notification;\n      }\n      comm.forEach(grant, function (name) {\n        var prop = gm_funcs[name];\n        prop && addProperty(name, prop, gm);\n      });\n      return gm;\n    },\n    loadScript: function loadScript(data) {\n      function buildCode(script) {\n        var require = script.meta.require || [];\n        var wrapper = comm.wrapGM(script, data.cache);\n        // Must use Object.getOwnPropertyNames to list unenumerable properties\n        var wrapperKeys = Object.getOwnPropertyNames(wrapper);\n        var code = [comm.map(wrapperKeys, function (name) {\n          return 'this[\"' + name + '\"]=' + name;\n        }).join(';') + ';with(this)!function(){'];\n        comm.forEach(require, function (key) {\n          var script = data.require[key];\n          script && code.push(script);\n        });\n        // wrap code to make 'use strict' work\n        code.push('!function(){' + script.code + '\\n}.call(this)');\n        code.push('}.call(this);');\n        code = code.join('\\n');\n        var name = script.custom.name || script.meta.name || script.id;\n        var args = comm.map(wrapperKeys, function (key) {\n          return wrapper[key];\n        });\n        var thisObj = wrapper.window || wrapper;\n        if (comm.injectable) {\n          // normal injection\n          try {\n            var func = Function.apply(null, wrapperKeys.concat([code]));\n          } catch (e) {\n            console.error('Syntax error in script: ' + name + '\\n' + e.message);\n            return;\n          }\n          comm.runCode(name, func, args, thisObj);\n        } else {\n          // advanced injection\n          var id = comm.getUniqId();\n          comm.ainject[id] = [name, args, thisObj];\n          comm.post({\n            cmd: 'Inject',\n            data: [id, wrapperKeys, code]\n          });\n        }\n      }\n      function run(list) {\n        while (list.length) buildCode(list.shift());\n      }\n      var comm = this;\n      var start = [];\n      var idle = [];\n      var end = [];\n      comm.command = {};\n      comm.notif = {};\n      comm.ainject = {};\n      comm.version = data.version;\n      comm.values = {};\n      // reset load and checkLoad\n      comm.load = function () {\n        run(end);\n        setTimeout(run, 0, idle);\n      };\n      comm.checkLoad = function () {\n        if (!comm.state && comm.includes(['interactive', 'complete'], document.readyState)) comm.state = 1;\n        if (comm.state) comm.load();\n      };\n      var listMap = {\n        'document-start': start,\n        'document-idle': idle,\n        'document-end': end\n      };\n      comm.forEach(data.scripts, function (script) {\n        comm.values[script.uri] = data.values[script.uri] || {};\n        if (script && script.enabled) {\n          var list = listMap[script.custom['run-at'] || script.meta['run-at']] || end;\n          list.push(script);\n        }\n      });\n      run(start);\n      comm.checkLoad();\n    }\n  };\n  c.init('R', 'C');\n  document.addEventListener(\"DOMContentLoaded\", function (e) {\n    c.state = 1;\n    c.load();\n  }, false);\n  c.checkLoad();\n})();"}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function t(t,n){return function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],s=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(t,n)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function o(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function c(e){o(i,r,a,c,s,"next",e)}function s(e){o(i,r,a,c,s,"throw",e)}c(void 0)}))}}var i=n(757),c=n.n(i);function s(e){return e&&!/^(file|data):/.test(e)}function u(e,t,n){return p.apply(this,arguments)}function p(){return(p=a(c().mark((function e(t,n,r){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(t,{method:"GET",headers:r}).then(function(){var e=a(c().mark((function e(t){var r,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=2;break}throw new Error("Network response was not ok");case 2:if("blob"!==(o=n||"text")){e.next=9;break}return e.next=6,t.blob();case 6:r=e.sent,e.next=18;break;case 9:if("json"!==o){e.next=15;break}return e.next=12,t.json();case 12:r=e.sent,e.next=18;break;case 15:return e.next=17,t.text();case 17:r=e.sent;case 18:return a={status:200,statusText:"OK",response:r,responseType:n||""},"text"===o&&(a.responseText=r),e.abrupt("return",a);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){var t={include:[],exclude:[],match:[],require:[],resource:[],grant:[]},n=-1;return e.replace(/(?:^|\n)\/\/\s*([@=]\S+)(.*)/g,(function(e,r,o){if(n<0&&"==UserScript=="==r?n=1:n>0&&"==/UserScript=="==r&&(n=0),1==n&&"@"==r[0]){var a=r.slice(1),i=o.replace(/^\s+|\s+$/g,""),c=t[a];c&&c.push?c.push(i):a in t||(t[a]=i)}})),t.resources={},t.resource.forEach((function(e){var n=e.match(/^(\w\S*)\s+(.*)/);n&&(t.resources[n[1]]=n[2])})),delete t.resource,!t.homepageURL&&t.homepage&&(t.homepageURL=t.homepage),t}function l(){var e={custom:{},enabled:1,update:1,code:"// ==UserScript==\n// @name New Script\n// @namespace OrangeMonkey Scripts\n// @grant none\n// ==/UserScript==\n"};return e.meta=f(e.code),e}function d(e){return{id:e.id,custom:e.custom,meta:e.meta,enabled:e.enabled,update:e.update}}function m(e){var t=e.meta.namespace||"",n=e.meta.name||"",r=escape(t)+":"+escape(n)+":";return t||n||(r+=e.id||""),r}function h(e){return RegExp("^"+e.replace(/([.?\/])/g,"\\$1").replace(/\*/g,".*?")+"$")}function v(e){return/^\/.*\/$/.test(e)?RegExp(e.slice(1,-1)):h(e)}var g={testURL:function(e,t){var n=t.custom,r=t.meta,o=[],a=[],i=[];!1!==n._match&&r.match&&(i=i.concat(r.match)),n.match&&(i=i.concat(n.match)),!1!==n._include&&r.include&&(o=o.concat(r.include)),n.include&&(o=o.concat(n.include)),!1!==n._exclude&&r.exclude&&(a=a.concat(r.exclude)),n.exclude&&(a=a.concat(n.exclude));var c,s=!i.length&&!o.length;return s=(s=(s=s||i.length&&(c=function(e){function t(e,t){return e==t||"*"==e&&/^https?$/i.test(t)?1:0}function n(e,t){if("*"==e)return 1;if(e==t)return 1;if(/^\*\.[^*]*$/.test(e)){if(e.slice(2)==t)return 1;if(h(e).test(t))return 1}return 0}function r(e,t){return h(e).test(t)}var o=/(.*?):\/\/([^\/]*)\/(.*)/,a=e.match(o);return function(e){if("<all_urls>"==e)return!0;var i=e.match(o);return!!i&&t(i[1],a[1])&&n(i[2],a[2])&&r(i[3],a[3])}}(e),i.some(c)))||o.some((function(t){return v(t).test(e)})))&&!a.some((function(t){return v(t).test(e)}))}};function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e){var t=function(e,t){if("object"!=y(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==y(t)?t:String(t)}function w(e,t,n){return(t=b(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e,t,n){e[t]||Object.defineProperty(e,t,{value:n})}j(Object,"assign",(function(){for(var e=arguments[0],t=1;t<arguments.length;t++){var n=arguments[t];n&&Object.keys(n).forEach((function(t){e[t]=n[t]}))}return e})),j(String.prototype,"startsWith",(function(e){return this.slice(0,e.length)===e})),j(Array.prototype,"findIndex",(function(e){for(var t=this.length,n=0;n<t;n++){if(e(this[n],n,this))return n}return-1})),j(Array.prototype,"find",(function(e){return this[this.findIndex(e)]}));var S=function(e){return chrome.i18n.getMessage(e)},O="/images/icon128.png";function q(e){return e||(e=[]),Array.isArray(e)||(e=e.toString().split(".")),e}var R,P={get:function(e,t,n){for(var r=q(t),o=0,a=r.length;o<a;o++){if(t=r[o],!e||!(t in e))return n;e=e[t]}return e},set:function(e,t,n){var r=q(t);if(!r.length)return n;for(var o=e=e||{},a=0,i=r.length-1;a<i;a++)o=o[t=r[a]]=o[t]||{};return o[r[r.length-1]]=n,e}},E=function(){function e(e,n){return t.apply(this,arguments)}function t(){return(t=a(c().mark((function e(t,n){var r,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=q(t),t=r[0],e.next=4,chrome.storage.local.get(t).then((function(e){return e[t]}));case 4:o=e.sent;try{a=JSON.parse(o)}catch(e){}return null==a&&(a=u[t]),null==a&&(a=n),e.abrupt("return",r.length>1?P.get(a,r.slice(1),n):a);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function n(e,t,n){var r=p[e];r&&r.forEach((function(e){e(n,t)}))}function r(){return(r=a(c().mark((function t(r,o){var a,i,s;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=q(r),i=a.join("."),s=o,!((r=a[0])in u)){t.next=14;break}if(!(a.length>1)){t.next=13;break}return t.t0=P,t.next=9,e(r);case 9:t.t1=t.sent,t.t2=a.slice(1),t.t3=o,s=t.t0.set.call(t.t0,t.t1,t.t2,t.t3);case 13:chrome.storage.local.set(w({},r,JSON.stringify(s))).then((function(){[i,r,""].forEach((function(e){n(e,i,o)}))})).catch((function(e){return console.error("Update storage error. ".concat(e.message))}));case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function o(){return(o=a(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object.keys(u).reduce(function(){var t=a(c().mark((function t(n,r){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=k,t.t1=k({},n),t.t2={},t.t3=w,t.t4={},t.t5=r,t.next=8,e(r);case 8:return t.t6=t.sent,t.t7=(0,t.t3)(t.t4,t.t5,t.t6),t.abrupt("return",(0,t.t0)(t.t1,t.t2,t.t7));case 11:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),Promise.resolve({}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function i(e){return 1===e.length?{key:"",cb:e[0]}:{key:e[0]||"",cb:e[1]}}function s(){var e=i(arguments),t=p[e.key];if(t){var n=t.indexOf(e.cb);~n&&t.splice(n,1)}}var u={isApplied:!0,autoUpdate:!0,ignoreGrant:!1,lastUpdate:0,exportValues:!0,closeAfterInstall:!1,trackLocalFile:!1,autoReload:!1,features:null},p={};return{get:e,set:function(e,t){return r.apply(this,arguments)},getAll:function(){return o.apply(this,arguments)},hook:function(){var e=i(arguments),t=p[e.key];return t||(t=p[e.key]=[]),t.push(e.cb),function(){s(e.key,e.cb)}},unhook:s}}(),M=(chrome.runtime.onConnect.addListener((function(e){R=e,e.onDisconnect.addListener((function(){R===e&&(R=null)}))})),{post:function(e){try{R&&R.postMessage(e)}catch(e){R=null}},send:function(e,t){chrome.tabs.sendMessage(e,t)}});function _(){var e=this;e.storage={values:{},scripts:{},cache:{},require:{}},e.initialized=e.initCache(),e.checkUpdate=e.checkUpdate.bind(e)}_.prototype.initCache=function(){var e=this;return e.get(e.storage).then((function(t){for(var n in t)e.storage[n]=t[n]}))},_.prototype._saveValues=function(){return this.set({values:this.storage.values})},_.prototype._saveScripts=function(){return this.set({scripts:this.storage.scripts})},_.prototype._saveCache=function(){return this.set({scripts:this.storage.scripts})},_.prototype._saveRequire=function(){return this.set({scripts:this.storage.scripts})},_.prototype.get=function(){var e=a(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,chrome.storage.local.get(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_.prototype.set=function(){var e=a(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,chrome.storage.local.set(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_.prototype.getRandomInt=function(e,t){return Math.floor(Math.random()*(t-e))+e},_.prototype.getScripts=function(){return Promise.resolve(this.storage.scripts)},_.prototype.getScriptArray=function(e){var t=this.storage.scripts,n=[];return e.forEach((function(e){t.hasOwnProperty(e)&&n.push(t[e])})),Promise.resolve(n)},_.prototype.getScript=function(e){return Promise.resolve(this.storage.scripts[e])},_.prototype.queryScript=function(e,t){var n,r=this.storage.scripts;if(e)n=r[e];else{var o=m({meta:t});for(var e in r)if(r[e].uri===o){n=r[e];break}}return Promise.resolve(n)},_.prototype.getScriptData=function(e){var t=this.storage.scripts[e];if(!t)return Promise.reject(new Error("Script is empty!"));var n=d(t);return n.code=t.code,Promise.resolve(n)},_.prototype.getScriptInfos=function(e){return this.getScriptArray(e).then((function(e){return e.map(d)}))},_.prototype.getValues=function(e){var t=this.storage.values,n={};return e.forEach((function(e){t.hasOwnProperty(e)&&(n[e]=t[e])})),Promise.resolve(n)},_.prototype.getScriptsByURL=function(e){var t=this;return t.getScriptsByIndex("position",null).then((function(t){var n={uris:[]},r={},o={};return n.scripts=t.filter((function(t){if(g.testURL(e,t))return n.uris.push(t.uri),t.meta.require.forEach((function(e){r[e]=1})),Object.keys(t.meta.resources).forEach((function(e){o[t.meta.resources[e]]=1})),!0})),n.require=Object.keys(r),n.cache=Object.keys(o),n})).then((function(e){return Promise.all([(n=e.require,r=t.storage.require,o={},n.forEach((function(e){r.hasOwnProperty(e)&&(o[e]=r[e])})),o),t.getValues(e.uris),t.getCacheB64(e.cache)]).then((function(t){return{scripts:e.scripts,require:t[0],values:t[1],cache:t[2]}}));var n,r,o}))},_.prototype.getData=function(){var e=this;return e.getScriptsByIndex("position",null).then((function(e){var t={},n={};return t.scripts=e.map((function(e){var t=e.meta.icon64||e.meta.icon;return s(t)&&(n[t]=1),d(e)})),t.cache=Object.keys(n),t})).then((function(t){return(n=t.cache,e.getCacheB64(n).then((function(e){return Object.keys(e).forEach((function(t){e[t]="data:image/png;base64,"+e[t]})),e}))).then((function(e){return{scripts:t.scripts,cache:e}}));var n}))},_.prototype.removeScript=function(e){var t=this,n=t.storage.scripts,r=t.storage.values;n.hasOwnProperty(e)&&delete r[n[e].uri];return delete n[e],t._saveValues().then((function(){return t._saveScripts()}))},_.prototype.moveScript=function(e,t){var n=this;return n.getScriptsByIndex("position",null).then((function(r){var o=null;if(r.some((function(t){if(t.id===e)return o=t,!0})),!o)return Promise.reject(new Error("Script is not found!"));var a=r.indexOf(o),i=a+t;r.splice(a,1),r.splice(i,0,o);var c={};return r.forEach((function(e,t){e.position=t,c[e.id]=e})),n._saveScripts()}))},_.prototype.getCacheB64=function(e){var t=this.storage.cache,n={};return e.forEach((function(e){t.hasOwnProperty(e)&&(n[e]=t[e])})),Promise.resolve(n)},_.prototype.saveCache=function(e,t){return this.storage.cache[e]=t,this._saveCache()},_.prototype.saveRequire=function(e,t){return this.storage.require[e]=t,this._saveRequire()},_.prototype.saveScript=function(e){var t=this;e.enabled=e.enabled?1:0,e.update=e.update?1:0;var n=t.storage.scripts;if(void 0===e.position&&(e.position=Object.keys(n).length),!e.id)do{e.id=t.getRandomInt(1,1e6)}while(n.hasOwnProperty(e.id));return n[e.id]=e,t._saveScripts().then((function(){return e}))},_.prototype.fetchCache=function(){var e={};return function(t,n){var r=this;return e[t]||(e[t]=u(t,"blob").then((function(e){return(n?n(e.response):Promise.resolve()).then((function(){return e.response}))})).then((function(n){return new Promise((function(o,a){var i=new FileReader;i.onload=function(n){r.saveCache(t,window.btoa(this.result)).then((function(){delete e[t],o()}))},i.onerror=function(e){a(e)},i.readAsBinaryString(n)}))})))}}(),_.prototype.fetchRequire=function(){var e={};return function(t){var n=this,r=e[t];return r||(r=e[t]=u(t).then((function(e){return n.saveRequire(t,e.responseText)})).catch((function(){console.error("Error fetching required script: "+t)})).then((function(){delete e[t]}))),r}}(),_.prototype.setValue=function(e,t){return this.storage.values[e]=t,this._saveValues()},_.prototype.updateScriptInfo=function(e,t,n){var r=this.storage.scripts[e];return r?(Object.keys(t).forEach((function(e){e in r&&(r[e]=t[e])})),Object.assign(r.custom,n),this._saveScripts().then((function(){return d(r)}))):Promise.reject(new Error("Script is not found!"))},_.prototype.getExportData=function(e,t){var n=this;return function(e){var t=n.storage.scripts,r=[];return e.forEach((function(e){t.hasOwnProperty(e)&&r.push(t[e])})),Promise.resolve(r)}(e).then((function(e){var r={scripts:e};return t?n.getValues(e.map((function(e){return e.uri}))).then((function(e){return r.values=e,r})):r}))},_.prototype.getScriptsByIndex=function(e,t){var n,r=this.storage.scripts,o=[];for(var a in r)n=r[a],null!==t&&n[e]!==t||o.push(n);return o.sort((function(t,n){var r=t[e],o=n[e];return r===o?0:r<o?-1:1})),Promise.resolve(o)},_.prototype.parseScript=function(e){var t=f(e.code);if(!t.name)return Promise.reject(S("msgInvalidScript"));var n={cmd:"update",data:{message:null==e.message?S("msgUpdated"):e.message||""}},r=this;t.require.forEach((function(t){var n=e.require&&e.require[t];n?r.saveRequire(t,n):r.fetchRequire(t)})),Object.keys(t.resources).forEach((function(n){var o=t.resources[n],a=e.resources&&e.resources[o];a?r.saveCache(o,a):r.fetchCache(o)}));var o=t.icon64||t.icon;return s(o)&&r.fetchCache(o,(function(e){return new Promise((function(t,n){var r=URL.createObjectURL(e),o=new Image,a=function(){URL.revokeObjectURL(r)};o.onload=function(){a(),t(e)},o.onerror=function(){a(),n()},o.src=r}))})),r.queryScript(e.id,t).then((function(o){if(o){if(e.isNew)throw S("msgNamespaceConflict")}else o=l(),n.cmd="add",n.data.message=S("msgInstalled");return e.more&&Object.keys(e.more).forEach((function(t){t in o&&(o[t]=e.more[t])})),o.meta=t,o.code=e.code,o.uri=m(o),t.homepageURL||o.custom.homepageURL||!s(e.from)||(o.custom.homepageURL=e.from),s(e.url)&&(o.custom.lastInstallURL=e.url),o.custom.modified=e.modified||Date.now(),r.saveScript(o)})).then((function(e){return Object.assign(n.data,d(e)),n}))},_.prototype.checkUpdate=function(){function e(e){var t={cmd:"update",data:{id:e.id,checking:!0}},n=e.custom.downloadURL||e.meta.downloadURL||e.custom.lastInstallURL,r=e.custom.updateURL||e.meta.updateURL||n;return r?(t.data.message=S("msgCheckingForUpdate"),M.post(t),u(r,null,{Accept:"text/x-userscript-meta","Cache-Control":"max-age=0, must-revalidate"}).then((function(n){var r=f(n.responseText);return function(e,t){e=(e||"").split("."),t=(t||"").split(".");for(var n=e.length,r=t.length,o=0;o<n||o<r;o++){var a=(parseInt(e[o],10)||0)-(parseInt(t[o],10)||0);if(a)return a<0?-1:1}return 0}(e.meta.version,r.version)<0?Promise.resolve():(t.data.checking=!1,t.data.message=S("msgNoUpdate"),M.post(t),Promise.reject())}),(function(e){return t.data.checking=!1,t.data.message=S("msgErrorFetchingUpdateInfo"),M.post(t),Promise.reject()})).then((function(){return n?(t.data.message=S("msgUpdating"),M.post(t),u(n,null,{"Cache-Control":"max-age=0, must-revalidate"}).then((function(e){return e.responseText}),(function(e){return t.data.checking=!1,t.data.message=S("msgErrorFetchingScript"),M.post(t),Promise.reject()}))):(t.data.message='<span class="new">'+S("msgNewVersion")+"</span>",M.post(t),Promise.reject())}))):Promise.reject()}var t={};return function(n){var r=this,o=t[n.id];return o||(o=t[n.id]=e(n).then((function(e){return delete t[n.id],r.parseScript({id:n.id,code:e}).then((function(e){e.data.checking=!1,M.post(e)}))}),(function(){delete t[n.id]}))),o}}();var U=_;function C(e){chrome.tabs.create({url:e})}function I(){return(I=a(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,chrome.tabs.get(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e){chrome.tabs.query({}).then((function(t){t.forEach((function(t){chrome.tabs.sendMessage(t.id,e)}))}))}function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var G={},N={},V=["user-agent","referer","origin","host"];function D(e){e.coreId&&delete N[e.coreId],delete G[e.id]}chrome.webRequest.onBeforeRedirect.addListener((function(e){var t=N[e.requestId];if(t){var n=G[t];n&&(n.finalUrl=e.redirectUrl)}}),{urls:["<all_urls>"],types:["xmlhttprequest"]}),chrome.webRequest.onBeforeSendHeaders.addListener((function(e){var t=e.requestHeaders,n=[],r={};t.forEach((function(e){"VM-"===e.name.slice(0,3)?r[e.name.slice(3)]=e.value:n.push(e)}));var o=r.Verify;if(o){var a=G[o];a&&(delete r.Verify,N[e.requestId]=o,a.coreId=e.requestId,Object.keys(r).forEach((function(e){~V.indexOf(e.toLowerCase())&&n.push({name:e,value:r[e]})})))}return{requestHeaders:n}}),{urls:["<all_urls>"],types:["xmlhttprequest"]},["requestHeaders"]),chrome.webRequest.onBeforeRequest.addListener((function(e){/\.user\.js([\?#]|$)/.test(e.url)&&!new RegExp(chrome.runtime.id,"g").test(e.url)&&(e.tabId<0?C("".concat(chrome.runtime.getURL("/options/index.html"),"#confirm/?url=").concat(encodeURIComponent(e.url))):function(e){return I.apply(this,arguments)}(e.tabId).then((function(t){var n=t.url?encodeURIComponent(t.url)+"/":"";C("".concat(chrome.runtime.getURL("/options/index.html"),"#confirm/").concat(n,"?url=").concat(encodeURIComponent(e.url)))})))}),{urls:["<all_urls>"],types:["main_frame"]},["requestBody"]);var F={getRequestId:function(){var e=Date.now().toString(36)+Math.random().toString(36).slice(2,6);return G[e]={id:e},e},abortRequest:function(e){var t=G[e];t&&t.response&&(t.response.cancel(),D(t))},httpRequest:function(e,t){var n=G[e.id];if(n&&!n.cb){n.cb=t;var r=new Headers;e.headers&&Object.keys(e.headers).forEach((function(t){var n=V.includes(t.toLowerCase())?"VM-"+t:t;r.append(n,e.headers[t])})),r.append("VM-Verify",e.id);var o=new AbortController,i=setTimeout((function(){return o.abort()}),6e4);fetch(e.url,{method:e.method,headers:r,body:e.data,mode:"cors",signal:o.signal,credentials:"include"}).then(function(){var t=a(c().mark((function t(r){var o,a,i;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.response=r,o=Object.fromEntries(r.headers),a=Object.keys(o).map((function(e){return"".concat(e,":").concat(o[e])})).join("\n"),i={id:n.id,type:"load",resType:e.responseType,data:{finalUrl:r.url,readyState:4,responseHeaders:a,status:r.status,statusText:r.statusText}},"blob"!==e.responseType){t.next=8;break}return t.abrupt("return",r.blob().then((function(e){var t=new FileReader;return t.readAsDataURL(e),new Promise((function(e){t.onload=function(){e(A(A({},i),{},{data:A(A({},i.data),{},{response:this.result})}))}}))})));case 8:if("json"!==e.responseType){t.next=12;break}return t.abrupt("return",r.json().then((function(e){return A(A({},i),{},{data:A(A({},i.data),{},{response:e})})})));case 12:return t.abrupt("return",r.text().then((function(e){return A(A({},i),{},{data:A(A({},i.data),{},{response:e,responseText:e})})})));case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).then((function(e){t&&t(e)})).catch((function(e){console.error(e);var r={id:n.id,data:{error:e}};"AbortError"===e.name?r.type="abort":"TypeError"===e.name&&"Failed to fetch"===e.message?r.type="timeout":r.type="error",t&&t(r)})).finally((function(){clearTimeout(i),D(n)}))}}};var B={},W={get:function(e){var t=B[e];return t&&t.value},set:function e(t,n){if(n){var r=B[t];r||(r=B[t]={key:t}),r.value=n,r.timer&&clearTimeout(r.timer),r.timer=setTimeout(e,3e3,t)}else delete B[t]}};function H(){return parseInt(Date.now()/1e3,10)}var $=function(){var e=a(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,chrome.storage.local.get(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=a(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,chrome.storage.local.set(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function J(){return $({uuid:null}).then((function(e){if(e.uuid)return e.uuid;var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}));return z({uuid:t}),t}))}var K,Y={init:function(e){$({trackTimeout:null}).then((function(t){var n=t.trackTimeout;n&&H()<n||!e||J().then((function(t){var n={v:1,t:"screenview",tid:"UA-142528268-15",cid:t,cd:"init",av:chrome.runtime.getManifest().version,an:"OrangeMonkey",ul:chrome.i18n.getMessage("@@ui_locale"),cd1:e};fetch("https://www.google-analytics.com/collect",{method:"POST",body:Object.keys(n).map((function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(n[e]))})).join("&")}).then((function(e){z({trackTimeout:H()+43200})}))}))}))}},Z=n(476),Q=["responseStatus","responseOk","responseType"],X=new U,ee=chrome.runtime.getManifest().version;function te(e){return ne.apply(this,arguments)}function ne(){return(ne=a(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=chrome.runtime.getURL(t),e.next=3,chrome.runtime.getContexts({contextTypes:["OFFSCREEN_DOCUMENT"],documentUrls:[n]});case 3:if(!(e.sent.length>0)){e.next=6;break}return e.abrupt("return");case 6:if(!K){e.next=11;break}return e.next=9,K;case 9:e.next=15;break;case 11:return K=chrome.offscreen.createDocument({url:t,reasons:[chrome.offscreen.Reason.CLIPBOARD,chrome.offscreen.Reason.IFRAME_SCRIPTING],justification:"Write text to the clipboard and use eval in sandbox iframe"}),e.next=14,K;case 14:K=null;case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var re,oe,ae,ie,ce,se,ue,pe,fe=function(){function e(){return t=!0,new Promise(function(){var e=a(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.get("autoUpdate");case 2:if(e.sent){e.next=4;break}return e.abrupt("return",n());case 4:return e.t0=Date.now(),e.next=7,E.get("lastUpdate");case 7:if(e.t2=r=e.sent,e.t1=null!==e.t2,!e.t1){e.next=11;break}e.t1=void 0!==r;case 11:if(!e.t1){e.next=15;break}e.t3=r,e.next=16;break;case 15:e.t3=0;case 16:if(e.t4=e.t3,e.t5=e.t0-e.t4,!(e.t5>=864e5)){e.next=20;break}t(de.CheckUpdateAll());case 20:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()).then((function(){setTimeout(e,36e5)}),(function(){t=!1}))}var t;return function(){t||e()}}(),le=function(){chrome.tabs.query({active:!0}).then((function(e){e.forEach((function(e){e.url.startsWith("chrome://")||chrome.scripting.executeScript({target:{tabId:e.id},files:["injected.js"]})}))}))},de={NewScript:function(e,t){return l()},RemoveScript:function(e,t){return X.removeScript(e).then((function(){M.post({cmd:"del",data:e})}))},GetData:function(e,t){return X.getData().then((function(e){return e.version=ee,e}))},GetInjected:(pe=a(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye();case 2:return e.t0=e.sent,e.next=5,E.get("isApplied");case 5:return e.t1=!!e.sent,e.next=8,E.get("injectMode");case 8:return e.t2=!!e.sent,e.t3=ee,r={isUserScriptsAvailable:e.t0,isApplied:e.t1,injectMode:e.t2,version:e.t3},n.tab&&n.url==n.tab.url&&chrome.tabs.sendMessage(n.tab.id,{cmd:"GetBadge"}),e.abrupt("return",r.isApplied?X.getScriptsByURL(t).then((function(e){return Object.assign(r,e)})):r);case 13:case"end":return e.stop()}}),e)}))),function(e,t){return pe.apply(this,arguments)}),UpdateScriptInfo:function(e,t){return X.updateScriptInfo(e.id,e,{modified:Date.now()}).then((function(e){M.post({cmd:"update",data:e})}))},SetValue:function(e,t){return X.setValue(e.uri,e.values).then((function(){L({cmd:"UpdateValues",data:{uri:e.uri,values:e.values}})}))},ExportZip:function(e,t){return X.getExportData(e.ids,e.values)},GetScript:function(e,t){return X.getScriptData(e)},GetMetas:function(e,t){return X.getScriptInfos(e)},Move:function(e,t){return X.moveScript(e.id,e.offset)},ParseScript:function(e,t){return X.parseScript(e).then(function(){var e=a(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.data.meta,e.t0=!n.grant.length,!e.t0){e.next=6;break}return e.next=5,E.get("ignoreGrant");case 5:e.t0=!e.sent;case 6:if(!e.t0){e.next=8;break}me({id:"VM-NoGrantWarning",title:S("Warning"),body:S("msgWarnGrant",n.name||S("labelNoName")),isClickable:!0});case 8:return M.post(t),e.abrupt("return",t.data);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},CheckUpdate:function(e,t){return X.getScript(e).then(X.checkUpdate),!1},CheckUpdateAll:(ue=a(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.set("lastUpdate",Date.now());case 2:return X.getScriptsByIndex("update",1).then((function(e){return Promise.all(e.map(X.checkUpdate))})),e.abrupt("return",!1);case 4:case"end":return e.stop()}}),e)}))),function(e,t){return ue.apply(this,arguments)}),EvalFunction:(se=a(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.msg,r=t.cb,e.next=3,te("offscreen.html");case 3:chrome.runtime.sendMessage({cmd:"eval-function",target:"offscreen",data:{msg:n,cb:r}});case 4:case"end":return e.stop()}}),e)}))),function(e){return se.apply(this,arguments)}),StorageGet:(ce=a(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,chrome.storage.local.get(t);case 2:r=e.sent,chrome.runtime.sendMessage({cmd:"StorageGot",data:r});case 4:case"end":return e.stop()}}),e)}))),function(e,t){return ce.apply(this,arguments)}),StorageSet:function(e,t){chrome.storage.local.set(e)},ParseMeta:function(e,t){return f(e)},AutoUpdate:fe,GetRequestId:function(e,t){return F.getRequestId()},HttpRequest:function(e,t){return F.httpRequest(e,(function(e){M.send(t.tab.id,{cmd:"HttpRequested",data:e})})),!1},FetchRequest:(ie=a(c().mark((function e(t,n){var o,a,i,s,u,p,f,l,d,m;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.url,a=t.options,s=(i=a||{}).responseStatus,u=i.responseOk,p=void 0===u||u,f=i.responseType,l=void 0===f?"text":f,d=r(i,Q),e.prev=2,e.next=5,fetch(o,d).then((function(e){if(p&&!e.ok||s&&s!==e.status)throw new Error("Response status ".concat(e.status));var t={};["ok","redirected","status","statusText","type","url"].forEach((function(n){t[n]=e[n]}));var n={};return e.headers.forEach((function(e,t){n[t]=e})),t.headers=n,e[l]().then((function(e){return{response:t,body:e}}))}));case 5:m=e.sent,chrome.runtime.sendMessage({cmd:"FetchRequested",data:m}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),chrome.runtime.sendMessage({cmd:"FetchRequested",data:{error:e.t0}});case 12:case"end":return e.stop()}}),e,null,[[2,9]])}))),function(e,t){return ie.apply(this,arguments)}),AbortRequest:function(e,t){return F.abortRequest(e)},SetBadge:function(e,t){return ve(e,t),!1},GetFromCache:function(e,t){return W.get(e)||null},Download:function(e){var t={url:e.url};if(e.name&&(t.filename=e.name),"boolean"==typeof e.saveAs&&(t.saveAs=e.saveAs),e.headers){var n=t.headers=[];Object.keys(e.headers).forEach((function(t){var r=String(e.headers[t]);n.push({name:t,value:r})}))}return void 0===e.saveAs&&(e.saveAs=!0),chrome.downloads.download(t),!0},Notification:(ae=a(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,chrome.notifications.create({type:"basic",title:t.title||S("extName"),message:t.text,iconUrl:t.image||O});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(e,t){return ae.apply(this,arguments)}),SetClipboard:(oe=a(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te("offscreen.html");case 2:chrome.runtime.sendMessage({cmd:"copy-data-to-clipboard",target:"offscreen",data:t});case 3:case"end":return e.stop()}}),e)}))),function(e,t){return oe.apply(this,arguments)}),OpenTab:function(e,t){chrome.tabs.create({url:e.url,active:e.active})},CheckIfUserScriptsAvailable:(re=a(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return re.apply(this,arguments)})};function me(e){chrome.notifications?chrome.notifications.create(e.id||"OrangeMonkey",{type:"basic",iconUrl:O,title:e.title+" - "+S("extName"),message:e.body,isClickable:e.isClickable}):alert(e.title+" - "+e.body)}X.initialized.then((function(){X.getScripts().then((function(e){var t=Object.keys(e).map((function(t){return e[t].meta.name})).join(";");Y.init(t)})),setTimeout(le,0),setTimeout(fe,2e4)})),chrome.runtime.onMessage.addListener((function(e,t,n){var r=de[e.cmd];if(r){var o=r(e.data,t);if(!1===o)return;var a=function(e){try{n(e)}catch(e){}};return Promise.resolve(o).then((function(e){a({data:e,error:null})}),(function(e){a({error:e})})),!0}}));var he,ve=(he={},function(e,t){var n=he[t.id];n||(n=he[t.id]={num:0}),n.num+=e,chrome.action.setBadgeText({text:(n.num||"").toString(),tabId:t.tab.id}),n.timer&&clearTimeout(n.timer),n.timer=setTimeout((function(){delete he[t.id]}),300)});function ge(){return(ge=a(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.get("isApplied");case 2:t=!!e.sent,chrome.action.setIcon({path:{19:"/images/icon19"+(t?"":"w")+".png",38:"/images/icon38"+(t?"":"w")+".png"}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ye(){return be.apply(this,arguments)}function be(){return(be=a(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,chrome.userScripts.getScripts();case 3:return e.abrupt("return",!!e.sent.length);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}!function(){ge.apply(this,arguments)}(),chrome.notifications&&(chrome.notifications.onClicked.addListener((function(e){"VM-NoGrantWarning"==e?C("http://wiki.greasespot.net/@grant"):L({cmd:"NotificationClick",data:e})})),chrome.notifications.onClosed.addListener((function(e){L({cmd:"NotificationClose",data:e})})));var we="comm";try{chrome.userScripts.configureWorld({csp:"script-src 'self' 'unsafe-eval';"}),chrome.userScripts.getScripts({ids:[we]}).then((function(e){t(e,1)[0]?chrome.userScripts.update([{id:we,matches:["<all_urls>"],js:[{code:Z}],runAt:"document_start",allFrames:!0}]):chrome.userScripts.register([{id:we,matches:["<all_urls>"],js:[{code:Z}],runAt:"document_start",allFrames:!0}])}))}catch(e){console.error(e)}}()}();