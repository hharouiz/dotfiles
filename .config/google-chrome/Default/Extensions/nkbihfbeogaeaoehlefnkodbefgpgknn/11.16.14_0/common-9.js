LavaPack.loadBundle([[5759,{"../../app/scripts/lib/util":97,"../../shared/constants/app":4343,"../../shared/constants/common":4345,"../../shared/constants/hardware-wallets":4349,"../../shared/constants/metametrics":4353,"../../shared/lib/switch-direction":4375,"../../shared/modules/conversion.utils":4383,"../../shared/modules/error":4386,"../../shared/modules/hexstring-utils":4390,"../../shared/modules/i18n":4391,"../../shared/modules/selectors":4400,"../../shared/modules/string-utils":4403,"../ducks/alerts/unconnected-account":5125,"../ducks/metamask/metamask":5135,"../ducks/send":5137,"../helpers/constants/notifications":5146,"../helpers/utils/transactions.util":5183,"../pages/swaps/swaps.util":5733,"../selectors":5751,"./actionConstants":5758,"./background-connection":5760,"@sentry/browser":2179,buffer:2795,"eth-rpc-errors":3026,lodash:3638,loglevel:3644},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.abortTransactionSigning=function(e){return async t=>{try{await(0,A.submitRequestToBackground)("abortTransactionSigning",[e])}catch(e){t(ee(e))}}},n.addImportedTokens=function(e,t){return async n=>{try{await(0,A.submitRequestToBackground)("addImportedTokens",[e,t])}catch(e){(0,v.logErrorWithMessage)(e)}finally{await ae(n)}}},n.addMorePermittedAccounts=function(e,t){return async n=>{await new Promise(((n,r)=>{(0,A.callBackgroundMethod)("addMorePermittedAccounts",[e,t],(e=>{e?r(e):n()}))})),await ae(n)}},n.addNewAccount=function(){return r.default.debug("background.addNewAccount"),async(e,t)=>{const n=(0,l.getInternalAccounts)(t());let r;e(J());try{r=await(0,A.submitRequestToBackground)("addNewAccount",[Object.keys(n).length])}catch(t){throw e(ee(t)),t}finally{e(Z())}return await ae(e),r}},n.addNft=function(e,t,n){return async r=>{if(!e)throw new Error("MetaMask - Cannot add NFT without address");if(!t)throw new Error("MetaMask - Cannot add NFT without tokenID");n||r(J());try{await(0,A.submitRequestToBackground)("addNft",[e,t])}catch(e){(0,v.logErrorWithMessage)(e),r(ee(e))}finally{await ae(r),r(Z())}}},n.addNftVerifyOwnership=function(e,t,n){return async r=>{if(!e)throw new Error("MetaMask - Cannot add NFT without address");if(!t)throw new Error("MetaMask - Cannot add NFT without tokenID");n||r(J());try{await(0,A.submitRequestToBackground)("addNftVerifyOwnership",[e,t])}catch(e){if((0,v.isErrorWithMessage)(e)&&(e.message.includes("This NFT is not owned by the user")||e.message.includes("Unable to verify ownership")))throw e;(0,v.logErrorWithMessage)(e),r(ee(e))}finally{await ae(r),r(Z())}}},n.addPermittedAccount=function(e,t){return async n=>{await new Promise(((n,r)=>{(0,A.callBackgroundMethod)("addPermittedAccount",[e,t],(e=>{e?r(e):n()}))})),await ae(n)}},n.addPollingTokenToAppState=le,n.addToAddressBook=function(e,t="",n=""){return r.default.debug("background.addToAddressBook"),async(r,a)=>{const{chainId:o}=(0,p.getProviderConfig)(a());let s;try{s=await(0,A.submitRequestToBackground)("setAddressBook",[(0,m.toChecksumHexAddress)(e),t,o,n])}catch(e){throw(0,v.logErrorWithMessage)(e),r(ee("Address book failed to update")),e}s||r(ee("Address book failed to update"))}},n.addToken=function({address:e,symbol:t,decimals:n,image:r,networkClientId:a},o){return async s=>{if(!e)throw new Error("MetaMask - Cannot add token without address");o||s(J());try{await(0,A.submitRequestToBackground)("addToken",[{address:e,symbol:t,decimals:n,image:r,networkClientId:a}])}catch(e){(0,v.logErrorWithMessage)(e),s(ee(e))}finally{await ae(s),s(Z())}}},n.addTransactionAndRouteToConfirmationPage=function(e,t){return async n=>{const a=(0,A.generateActionId)();try{r.default.debug("background.addTransaction");const o=await(0,A.submitRequestToBackground)("addTransaction",[e,{...t,actionId:a,origin:c.ORIGIN_METAMASK}]);return n($()),o}catch(e){n(Z()),n(ee(e))}return null}},n.addTransactionAndWaitForPublish=async function(e,t){r.default.debug("background.addTransactionAndWaitForPublish");const n=(0,A.generateActionId)();return await(0,A.submitRequestToBackground)("addTransactionAndWaitForPublish",[e,{...t,origin:c.ORIGIN_METAMASK,actionId:n}])},n.approvePermissionsRequest=function(e){return t=>{(0,A.callBackgroundMethod)("approvePermissionsRequest",[e],(e=>{e&&t(ee(e)),ae(t)}))}},n.attemptLedgerTransportCreation=async function(){return await(0,A.submitRequestToBackground)("attemptLedgerTransportCreation")},n.automaticallySwitchNetwork=function(e,t){return async n=>{await n(Y(e)),await n(Q({networkClientId:e,origin:t})),await ae(n)}},n.backupUserData=async function(){let e;try{e=await(0,A.submitRequestToBackground)("backupUserData")}catch(e){throw(0,v.logErrorWithMessage)(e),e}return e},n.cancelDecryptMsg=function(e){return async t=>{let n;t(J());try{n=await(0,A.submitRequestToBackground)("cancelDecryptMessage",[e.id])}finally{t(Z())}return t(G(n)),t(F(e.id)),t(X()),e}},n.cancelEncryptionPublicKeyMsg=function(e){return async t=>{let n;t(J());try{n=await(0,A.submitRequestToBackground)("cancelEncryptionPublicKey",[e.id])}finally{t(Z())}return t(G(n)),t(F(e.id)),t(X()),e}},n.cancelQRHardwareSignRequest=function(){return async e=>{e(Z()),await(0,A.submitRequestToBackground)("cancelQRHardwareSignRequest")}},n.cancelSmartTransaction=function(e){return async t=>{try{await(0,A.submitRequestToBackground)("cancelSmartTransaction",[e])}catch(e){if((0,v.logErrorWithMessage)(e),(0,v.isErrorWithMessage)(e)&&e.message.startsWith("Fetch error:")){const n=(0,y.parseSmartTransactionsError)(e.message);t({type:P.SET_SMART_TRANSACTIONS_ERROR,payload:n})}throw e}}},n.cancelSyncQRHardware=function(){return async e=>{e(Z()),await(0,A.submitRequestToBackground)("cancelSyncQRHardware")}},n.cancelTx=function(e,t=!0){return n=>(t&&n(J()),new Promise(((t,n)=>{(0,A.callBackgroundMethod)("rejectPendingApproval",[String(e.id),s.ethErrors.provider.userRejectedRequest().serialize()],(e=>{e?n(e):t()}))})).then((()=>q())).then((e=>n(G(e)))).then((()=>(n((0,g.resetSendState)()),n(F(e.id)),n(Z()),n(X()),e))).catch((e=>{throw n(Z()),e})))},n.cancelTxs=function(e){return async t=>{t(J());try{const n=e.map((({id:e})=>e)),r=n.map((e=>new Promise(((t,n)=>{(0,A.callBackgroundMethod)("rejectPendingApproval",[String(e),s.ethErrors.provider.userRejectedRequest().serialize()],(e=>{e?n(e):t()}))}))));await Promise.all(r);const a=await q();t(G(a)),t((0,g.resetSendState)()),n.forEach((e=>{t(F(e))}))}finally{(0,d.getEnvironmentType)()===c.ENVIRONMENT_TYPE_NOTIFICATION?fe():t(Z())}}},n.captureSingleException=function(e){return async(t,n)=>{const{singleExceptions:r}=n().appState;e in r||(t({type:P.CAPTURE_SINGLE_EXCEPTION,value:e}),(0,a.captureException)(Error(e)))}},n.checkAndUpdateAllNftsOwnershipStatus=async function(){await(0,A.submitRequestToBackground)("checkAndUpdateAllNftsOwnershipStatus")},n.checkAndUpdateSingleNftOwnershipStatus=async function(e){await(0,A.submitRequestToBackground)("checkAndUpdateSingleNftOwnershipStatus",[e,!1])},n.checkHardwareStatus=function(e,t){return r.default.debug("background.checkHardwareStatus",e,t),async n=>{n(J());let r=!1;try{r=await(0,A.submitRequestToBackground)("checkHardwareStatus",[e,t])}catch(e){throw(0,v.logErrorWithMessage)(e),n(ee(e)),e}finally{n(Z())}return await ae(n),r}},n.clearAccountDetails=function(){return{type:P.CLEAR_ACCOUNT_DETAILS}},n.clearPendingTokens=function(){return{type:P.CLEAR_PENDING_TOKENS}},n.clearSmartTransactionFees=function(){(0,A.submitRequestToBackground)("clearSmartTransactionFees")},n.clearSwapsQuotes=function(){return async e=>{await(0,A.submitRequestToBackground)("clearSwapsQuotes"),await ae(e)}},n.clearSwitchedNetworkDetails=function(){return async e=>{await(0,A.submitRequestToBackground)("clearSwitchedNetworkDetails",[]),await ae(e)}},n.closeCurrentNotificationWindow=X,n.closeNotificationPopup=fe,n.closeWelcomeScreen=function(){return{type:P.CLOSE_WELCOME_SCREEN}},n.completeOnboarding=ne,n.completedTx=F,n.connectHardware=function(e,t,n,a){return r.default.debug("background.connectHardware",e,t,n),async(r,s)=>{const{ledgerTransportType:i}=s().metamask;let u;r(J(`Looking for your ${(0,o.capitalize)(e)}...`));try{if(e===h.HardwareDeviceNames.ledger&&i===h.LedgerTransportTypes.webhid){const e=await window.navigator.hid.requestDevice({filters:[{vendorId:h.LEDGER_USB_VENDOR_ID}]});if(!e.some((e=>e.vendorId===Number(h.LEDGER_USB_VENDOR_ID))))throw new Error(a("ledgerWebHIDNotConnectedErrorMessage"))}u=await(0,A.submitRequestToBackground)("connectHardware",[e,t,n])}catch(t){throw(0,v.logErrorWithMessage)(t),e===h.HardwareDeviceNames.ledger&&i===h.LedgerTransportTypes.webhid&&(0,v.isErrorWithMessage)(t)&&t.message.match("Failed to open the device")?(r(ee(a("ledgerDeviceOpenFailureMessage"))),new Error(a("ledgerDeviceOpenFailureMessage"))):(e!==h.HardwareDeviceNames.qr&&r(ee(t)),t)}finally{r(Z())}return await ae(r),u}},n.createCancelTransaction=function(e,t,n={}){let a;return r.default.debug("background.createCancelTransaction"),r=>{const o=(0,A.generateActionId)();return new Promise(((s,i)=>{(0,A.callBackgroundMethod)("createCancelTransaction",[e,t,{...n,actionId:o}],((t,n)=>{var o;if(t)return null!=t&&null!==(o=t.message)&&void 0!==o&&o.includes("Previous transaction is already confirmed")&&r(z({name:"TRANSACTION_ALREADY_CONFIRMED",originalTransactionId:e})),r(ee(t)),void i(t);if(n){const e=(0,l.getCurrentNetworkTransactions)({metamask:n}),{id:t}=e[e.length-1];a=t,s(n)}}))})).then((e=>r(G(e)))).then((()=>a))}},n.createEventFragment=function(e){const t=(0,A.generateActionId)();return(0,A.submitRequestToBackground)("createEventFragment",[{...e,actionId:t}])},n.createNewVault=I,n.createNewVaultAndGetSeedPhrase=function(e){return async t=>{t(J());try{await I(e);return await O(e)}catch(e){throw t(ee(e)),(0,v.isErrorWithMessage)(e)?new Error(e.message):e}finally{t(Z())}}},n.createNewVaultAndRestore=function(e,n){return a=>{a(J()),r.default.debug("background.createNewVaultAndRestore");const o=Array.from(t.from(n,"utf8").values());let s;return new Promise(((t,n)=>{(0,A.callBackgroundMethod)("createNewVaultAndRestore",[e,o],((e,r)=>{e?n(e):(s=r,t())}))})).then((()=>a(x()))).then((()=>(a(V()),a(Z()),s))).catch((e=>(a(ee(e.message)),a(Z()),Promise.reject(e))))}},n.createRetryTransaction=function(e,t){let n;return r=>new Promise(((a,o)=>{const s=(0,A.generateActionId)();(0,A.callBackgroundMethod)("createSpeedUpTransaction",[e,t,{actionId:s}],((e,t)=>{if(e)return r(ee(e)),void o(e);if(t){const e=(0,l.getCurrentNetworkTransactions)(t);n=e[e.length-1],a(t)}}))})).then((e=>r(G(e)))).then((()=>n))},n.createSpeedUpTransaction=function(e,t,n={}){let a;return r.default.debug("background.createSpeedUpTransaction"),r=>{const o=(0,A.generateActionId)();return new Promise(((s,i)=>{(0,A.callBackgroundMethod)("createSpeedUpTransaction",[e,t,{...n,actionId:o}],((e,t)=>{if(e)return r(ee(e)),void i(e);if(t){const e=(0,l.getCurrentNetworkTransactions)(t);a=e[e.length-1],s(t)}}))})).then((e=>r(G(e)))).then((()=>a))}},n.createTransactionEventFragment=function(e){const t=(0,A.generateActionId)();return(0,A.submitRequestToBackground)("createTransactionEventFragment",[{transactionId:e,actionId:t}])},n.currencyRateStartPollingByNetworkClientId=async function(e){const t=await(0,A.submitRequestToBackground)("currencyRateStartPollingByNetworkClientId",[e]);return await le(t),t},n.currencyRateStopPollingByPollingToken=async function(e){await(0,A.submitRequestToBackground)("currencyRateStopPollingByPollingToken",[e]),await ge(e)},n.decryptMsg=function(e){return r.default.debug("action - decryptMsg"),async t=>{let n;t(J()),r.default.debug("actions calling background.decryptMessage");try{n=await(0,A.submitRequestToBackground)("decryptMessage",[e])}catch(e){throw(0,v.logErrorWithMessage)(e),t(ee(e)),e}finally{t(Z())}return t(G(n)),t(F(e.metamaskId)),t(X()),e}},n.decryptMsgInline=function(e){return r.default.debug("action - decryptMsgInline"),async t=>{let n;r.default.debug("actions calling background.decryptMessageInline");try{n=await(0,A.submitRequestToBackground)("decryptMessageInline",[e])}catch(e){throw(0,v.logErrorWithMessage)(e),t(ee(e)),e}return t(G(n)),n.unapprovedDecryptMsgs[e.metamaskId]}},n.deleteExpiredNotifications=function(){return async(e,t)=>{const n=t(),r=(0,l.getNotifications)(n).filter((e=>{const t=new Date(Date.now()-b.NOTIFICATIONS_EXPIRATION_DELAY);return Boolean(e.readDate&&new Date(e.readDate)<t)})).map((({id:e})=>e));r.length&&(await(0,A.submitRequestToBackground)("dismissNotifications",[r]),await ae(e))}},n.deleteInterface=function(e){return async t=>{await(0,A.submitRequestToBackground)("deleteInterface",[e]),await ae(t)}},n.detectNfts=function(){return async e=>{e(J()),r.default.debug("background.detectNfts"),await(0,A.submitRequestToBackground)("detectNfts"),e(Z()),await ae(e)}},n.detectTokens=function(){return async e=>{e(J()),r.default.debug("background.detectTokens"),await(0,A.submitRequestToBackground)("detectTokens"),e(Z()),await ae(e)}},n.disableSnap=function(e){return async t=>{await(0,A.submitRequestToBackground)("disableSnap",[e]),await ae(t)}},n.disconnectOriginFromSnap=function(e,t){return async n=>{await(0,A.submitRequestToBackground)("disconnectOriginFromSnap",[e,t]),await ae(n)}},n.dismissNotifications=function(e){return async t=>{await(0,A.submitRequestToBackground)("dismissNotifications",[e]),await ae(t)}},n.dismissOpenSeaToBlockaidBanner=function(){return e=>{r.default.debug("background.dismissOpenSeaToBlockaidBanner"),(0,A.callBackgroundMethod)("dismissOpenSeaToBlockaidBanner",[],(t=>{t&&e(ee(t))}))}},n.dismissSmartTransactionsErrorMessage=function(){return{type:P.DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE}},n.displayWarning=ee,n.editAndSetNetworkConfiguration=function({networkConfigurationId:e,rpcUrl:t,chainId:n,nickname:a,rpcPrefs:o,ticker:s=R.EtherDenomination.ETH},{source:i}){return async u=>{r.default.debug(`background.removeNetworkConfiguration: ${e}`);try{await(0,A.submitRequestToBackground)("removeNetworkConfiguration",[e])}catch(e){return(0,v.logErrorWithMessage)(e),void u(ee("Had a problem removing network!"))}try{await(0,A.submitRequestToBackground)("upsertNetworkConfiguration",[{rpcUrl:t,chainId:n,ticker:s,nickname:a||t,rpcPrefs:o},{setActive:!0,referrer:c.ORIGIN_METAMASK,source:i}])}catch(e){(0,v.logErrorWithMessage)(e),u(ee("Had a problem changing networks!"))}}},n.enableSnap=function(e){return async t=>{await(0,A.submitRequestToBackground)("enableSnap",[e]),await ae(t)}},n.encryptionPublicKeyMsg=function(e){return r.default.debug("action - encryptionPublicKeyMsg"),async t=>{let n;t(J()),r.default.debug("actions calling background.encryptionPublicKey");try{n=await(0,A.submitRequestToBackground)("encryptionPublicKey",[e])}catch(e){throw(0,v.logErrorWithMessage)(e),t(ee(e)),e}finally{t(Z())}return t(G(n)),t(F(e.metamaskId)),t(X()),e}},n.estimateGas=function(e){return(0,A.submitRequestToBackground)("estimateGas",[e])},n.exportAccount=function(e,t,n,a){return function(o){return o(J()),r.default.debug("background.verifyPassword"),new Promise(((s,i)=>{(0,A.callBackgroundMethod)("verifyPassword",[e],(function(u){if(u)return r.default.error("Error in verifying password."),o(Z()),o(ee("Incorrect Password.")),void i(u);r.default.debug("background.exportAccount"),(0,A.callBackgroundMethod)("exportAccount",[t,e],(function(e,t){if(o(Z()),e)return(0,v.logErrorWithMessage)(e),o(ee("Had a problem exporting the account.")),void i(e);n(t),a(!0),s(t)}))}))}))}},n.exportAccounts=function(e,t){return function(n){return r.default.debug("background.verifyPassword"),new Promise(((a,o)=>{(0,A.callBackgroundMethod)("verifyPassword",[e],(function(s){if(s)return r.default.error("Error in submitting password."),void o(s);r.default.debug("background.exportAccounts");const i=t.map((t=>new Promise(((r,a)=>(0,A.callBackgroundMethod)("exportAccount",[t,e],(function(e,t){if(e)return(0,v.logErrorWithMessage)(e),n(ee("Had a problem exporting the account.")),void a(e);r(t)}))))));a(Promise.all(i))}))}))}},n.fetchAndSetQuotes=function(e,t){return async n=>{const[r,a]=await(0,A.submitRequestToBackground)("fetchAndSetQuotes",[e,t]);return await ae(n),[r,a]}},n.fetchSmartTransactionFees=function(e,t){return async n=>{t&&(t.value="0x0");try{const r=await await(0,A.submitRequestToBackground)("fetchSmartTransactionFees",[e,t]);return n({type:P.SET_SMART_TRANSACTIONS_ERROR,payload:null}),r}catch(e){if((0,v.logErrorWithMessage)(e),(0,v.isErrorWithMessage)(e)&&e.message.startsWith("Fetch error:")){const t=(0,y.parseSmartTransactionsError)(e.message);n({type:P.SET_SMART_TRANSACTIONS_ERROR,payload:t})}throw e}}},n.fetchSmartTransactionsLiveness=function(){return async()=>{try{await(0,A.submitRequestToBackground)("fetchSmartTransactionsLiveness")}catch(e){(0,v.logErrorWithMessage)(e)}}},n.finalizeEventFragment=function(e,t){return(0,A.submitRequestToBackground)("finalizeEventFragment",[e,t])},n.forceUpdateMetamaskState=ae,n.forgetDevice=function(e){return r.default.debug("background.forgetDevice",e),async t=>{t(J());try{await(0,A.submitRequestToBackground)("forgetDevice",[e])}catch(e){throw(0,v.logErrorWithMessage)(e),t(ee(e)),e}finally{t(Z())}await ae(t)}},n.gasFeeStartPollingByNetworkClientId=async function(e){const t=await(0,A.submitRequestToBackground)("gasFeeStartPollingByNetworkClientId",[e]);return await le(t),t},n.gasFeeStopPollingByPollingToken=async function(e){await(0,A.submitRequestToBackground)("gasFeeStopPollingByPollingToken",[e]),await ge(e)},n.getBalancesInSingleCall=async function(e){return await(0,A.submitRequestToBackground)("getBalancesInSingleCall",[e])},n.getContractMethodData=function(e=""){return async(t,n)=>{const a=(0,d.addHexPrefix)(e).slice(0,10);if(a.length<10)return{};const{knownMethodData:o,use4ByteResolution:s}=n().metamask;if(null!=o&&o[a]&&0!==Object.keys(o[a]).length)return o[a];r.default.debug("loadingMethodData");const{name:u,params:c}=await(0,i.getMethodDataAsync)(a,s);return(0,A.callBackgroundMethod)("addKnownMethodData",[a,{name:u,params:c}],(e=>{e&&t(ee(e))})),{name:u,params:c}}},n.getCurrentNetworkEIP1559Compatibility=async function(){let e;try{e=await(0,A.submitRequestToBackground)("getCurrentNetworkEIP1559Compatibility")}catch(e){console.error(e)}return e},n.getGasFeeTimeEstimate=function(e,t){return(0,A.submitRequestToBackground)("getGasFeeTimeEstimate",[e,t])},n.getLayer1GasFee=function({chainId:e,networkClientId:t,transactionParams:n}){return async()=>await(0,A.submitRequestToBackground)("getLayer1GasFee",[{chainId:e,networkClientId:t,transactionParams:n}])},n.getNetworkConfigurationByNetworkClientId=async function(e){let t;try{t=await(0,A.submitRequestToBackground)("getNetworkConfigurationByNetworkClientId",[e])}catch(e){console.error(e)}return t},n.getNextNonce=function(){return async(e,t)=>{const{address:n}=(0,l.getSelectedInternalAccount)(t()),r=(0,l.getSelectedNetworkClientId)(t());let a;try{a=await(0,A.submitRequestToBackground)("getNextNonce",[n,r])}catch(t){throw e(ee(t)),t}return e(ue(a)),a}},n.getOpenMetamaskTabsIds=function(){return async e=>{e(de(await(0,A.submitRequestToBackground)("getOpenMetamaskTabsIds")))}},n.getPhishingResult=async function(e){return await(0,A.submitRequestToBackground)("getPhishingResult",[e])},n.getRequestAccountTabIds=function(){return async e=>{e(ce(await(0,A.submitRequestToBackground)("getRequestAccountTabIds")))}},n.getRpcMethodPreferences=function(){return async e=>{e(J()),await(0,A.submitRequestToBackground)("getRpcMethodPreferences",[]),e(Z())}},n.getSeedPhrase=O,n.getSnapAccountsById=async function(e){return await(0,A.submitRequestToBackground)("getAccountsBySnapId",[e])},n.getTokenStandardAndDetails=async function(e,t,n){return await(0,A.submitRequestToBackground)("getTokenStandardAndDetails",[e,t,n])},n.getTokenSymbol=async function(e){return await(0,A.submitRequestToBackground)("getTokenSymbol",[e])},n.getTransactions=async function(e={}){return await(0,A.submitRequestToBackground)("getTransactions",[e])},n.goHome=B,n.handleSnapRequest=async function(e){return(0,A.submitRequestToBackground)("handleSnapRequest",[e])},n.hideAccountBanner=function(){return(0,A.submitRequestToBackground)("setShowAccountBanner",[!1])},n.hideAlert=function(){return{type:P.ALERT_CLOSE}},n.hideBetaHeader=function(){return(0,A.submitRequestToBackground)("setShowBetaHeader",[!1])},n.hideDeprecatedNetworkModal=function(){return{type:P.DEPRECATED_NETWORK_POPOVER_CLOSE}},n.hideImportNftsModal=function(){return{type:P.IMPORT_NFTS_MODAL_CLOSE}},n.hideImportTokensModal=function(){return{type:P.IMPORT_TOKENS_POPOVER_CLOSE}},n.hideIpfsModal=function(){return{type:P.SHOW_IPFS_MODAL_CLOSE}},n.hideKeyringRemovalResultModal=function(){return{type:P.HIDE_KEYRING_SNAP_REMOVAL_RESULT}},n.hideLoadingIndication=Z,n.hideModal=function(){return{type:P.MODAL_CLOSE}},n.hideNetworkBanner=function(){return(0,A.submitRequestToBackground)("setShowNetworkBanner",[!1])},n.hideNetworkDropdown=function(){return{type:P.NETWORK_DROPDOWN_CLOSE}},n.hidePermissionsTour=function(){return(0,A.submitRequestToBackground)("setShowPermissionsTour",[!1])},n.hideTestNetMessage=function(){return(0,A.submitRequestToBackground)("setShowTestnetMessageInDropdown",[!1])},n.hideWarning=function(){return{type:P.HIDE_WARNING}},n.ignoreTokens=function({tokensToIgnore:e,dontShowLoadingIndicator:t=!1}){const n=Array.isArray(e)?e:[e];return async e=>{t||e(J());try{await(0,A.submitRequestToBackground)("ignoreTokens",[n])}catch(t){(0,v.logErrorWithMessage)(t),e(ee(t))}finally{await ae(e),e(Z())}}},n.importNewAccount=function(e,t,n){return async a=>{let o;a(J(n));try{r.default.debug("background.importAccountWithStrategy"),await(0,A.submitRequestToBackground)("importAccountWithStrategy",[e,t]),r.default.debug("background.getState"),o=await(0,A.submitRequestToBackground)("getState")}finally{a(Z())}return a(G(o)),o}},n.isNftOwner=async function(e,t,n){return await(0,A.submitRequestToBackground)("isNftOwner",[e,t,n])},n.lockMetamask=function(){return r.default.debug("background.setLocked"),e=>(e(J()),j().then((()=>q())).catch((t=>(e(ee(t.message)),Promise.reject(t)))).then((t=>{e(G(t)),e(Z()),e({type:P.LOCK_METAMASK})})).catch((()=>{e(Z()),e({type:P.LOCK_METAMASK})})))},n.markNotificationsAsRead=function(e){return async t=>{await(0,A.submitRequestToBackground)("markNotificationsAsRead",[e]),await ae(t)}},n.markPasswordForgotten=function(){return async e=>{try{await new Promise(((e,t)=>{(0,A.callBackgroundMethod)("markPasswordForgotten",[],(n=>{n?t(n):e()}))}))}finally{e(Z()),await ae(e)}}},n.neverShowSwitchedNetworkMessage=function(){return(0,A.submitRequestToBackground)("setSwitchedNetworkNeverShowMessage",[!0])},n.qrCodeDetected=function(e){return async t=>{await t({type:P.QR_CODE_DETECTED,value:e}),t((0,g.computeEstimatedGasLimit)())}},n.rejectAllMessages=function(e){return async t=>{const n=(0,s.serializeError)(s.ethErrors.provider.userRejectedRequest());await Promise.all(e.map((async({id:e})=>await(0,A.submitRequestToBackground)("rejectPendingApproval",[e,n]))));const{pendingApprovals:r}=await ae(t);0===Object.values(r).length&&t(X())}},n.rejectPendingApproval=function(e,t){return async n=>{await(0,A.submitRequestToBackground)("rejectPendingApproval",[e,t]);const{pendingApprovals:r}=await ae(n);0===Object.values(r).length&&n(X())}},n.rejectPermissionsRequest=function(e){return t=>new Promise(((n,r)=>{(0,A.callBackgroundMethod)("rejectPermissionsRequest",[e],(e=>{if(e)return t(ee(e)),void r(e);ae(t).then(n).catch(r)}))}))},n.removeAccount=function(e){return async t=>{t(J());try{await new Promise(((t,n)=>{(0,A.callBackgroundMethod)("removeAccount",[e],((e,r)=>{e?n(e):t(r)}))})),await ae(t)}catch(e){throw t(ee(e)),e}finally{t(Z())}r.default.info(`Account removed: ${e}`),t(V())}},n.removeAndIgnoreNft=function(e,t,n){return async r=>{if(!e)throw new Error("MetaMask - Cannot ignore NFT without address");if(!t)throw new Error("MetaMask - Cannot ignore NFT without tokenID");n||r(J());try{await(0,A.submitRequestToBackground)("removeAndIgnoreNft",[e,t])}catch(e){throw(0,v.logErrorWithMessage)(e),r(ee(e)),e}finally{await ae(r),r(Z())}}},n.removeFromAddressBook=function(e,t){return r.default.debug("background.removeFromAddressBook"),async()=>{await(0,A.submitRequestToBackground)("removeFromAddressBook",[e,(0,m.toChecksumHexAddress)(t)])}},n.removeNetworkConfiguration=function(e){return t=>(r.default.debug(`background.removeNetworkConfiguration: ${e}`),new Promise(((n,r)=>{(0,A.callBackgroundMethod)("removeNetworkConfiguration",[e],(e=>{if(e)return(0,v.logErrorWithMessage)(e),t(ee("Had a problem removing network!")),void r(e);n()}))})))},n.removeNft=function(e,t,n){return async r=>{if(!e)throw new Error("MetaMask - Cannot remove NFT without address");if(!t)throw new Error("MetaMask - Cannot remove NFT without tokenID");n||r(J());try{await(0,A.submitRequestToBackground)("removeNft",[e,t])}catch(e){(0,v.logErrorWithMessage)(e),r(ee(e))}finally{await ae(r),r(Z())}}},n.removePermissionsFor=function(e){return t=>{(0,A.callBackgroundMethod)("removePermissionsFor",[e],(e=>{e&&t(ee(e))}))}},n.removePermittedAccount=function(e,t){return async n=>{await new Promise(((n,r)=>{(0,A.callBackgroundMethod)("removePermittedAccount",[e,t],(e=>{e?r(e):n()}))})),await ae(n)}},n.removePollingTokenFromAppState=ge,n.removeSnap=function(e){return async(t,n)=>{var r;t(J());const a=(null===(r=(0,l.getPermissionSubjects)(n())[e])||void 0===r||null===(r=r.permissions)||void 0===r?void 0:r.snap_manageAccounts)!==undefined;try{if(a){const t=await(0,A.submitRequestToBackground)("getAccountsBySnapId",[e]);for(const e of t)await(0,A.submitRequestToBackground)("removeAccount",[e])}await(0,A.submitRequestToBackground)("removeSnap",[e]),await ae(t)}catch(e){throw t(ee(e)),e}finally{t(Z())}}},n.requestAccountsPermissionWithId=function(e){return async t=>{const n=await(0,A.submitRequestToBackground)("requestAccountsPermissionWithId",[e]);return await ae(t),n}},n.requestRevealSeedWords=function(e){return async t=>{t(J()),r.default.debug("background.verifyPassword");try{await C(e);return await O(e)}finally{t(Z())}}},n.requestUserApproval=function({origin:e,type:t,requestData:n}){return async r=>{try{await(0,A.submitRequestToBackground)("requestUserApproval",[{origin:e,type:t,requestData:n}])}catch(e){(0,v.logErrorWithMessage)(e),r(ee("Had trouble requesting user approval"))}}},n.resetAccount=function(){return e=>(e(J()),new Promise(((t,n)=>{(0,A.callBackgroundMethod)("resetAccount",[],((a,o)=>{if(e(Z()),a)return(0,v.isErrorWithMessage)(a)&&e(ee(a.message)),void n(a);r.default.info(`Transaction history reset for ${o}`),e(V()),t(o)}))})))},n.resetBackgroundSwapsState=function(){return async e=>{await(0,A.submitRequestToBackground)("resetSwapsState"),await ae(e)}},n.resetOnboarding=function(){return async e=>{try{await e(ie(!1)),e(re())}catch(e){console.error(e)}}},n.resetOnboardingAction=re,n.resetSwapsPostFetchState=function(){return async e=>{await(0,A.submitRequestToBackground)("resetPostFetchState"),await ae(e)}},n.resetViewedNotifications=function(){return(0,A.submitRequestToBackground)("resetViewedNotifications")},n.resolvePendingApproval=function(e,t){return async n=>{await(0,A.submitRequestToBackground)("resolvePendingApproval",[e,t]);const{pendingApprovals:r}=await ae(n);0===Object.values(r).length&&n(X())}},n.restoreUserData=async function(e){try{await(0,A.submitRequestToBackground)("restoreUserData",[e])}catch(e){throw(0,v.logErrorWithMessage)(e),e}return!0},n.revokeDynamicSnapPermissions=function(e,t){return async n=>{await(0,A.submitRequestToBackground)("revokeDynamicSnapPermissions",[e,t]),await ae(n)}},n.rollbackToPreviousProvider=function(){return async e=>{try{await(0,A.submitRequestToBackground)("rollbackToPreviousProvider")}catch(t){(0,v.logErrorWithMessage)(t),e(ee("Had a problem changing networks!"))}}},n.safeRefetchQuotes=function(){return async e=>{await(0,A.submitRequestToBackground)("safeRefetchQuotes"),await ae(e)}},n.setAccountDetailsAddress=function(e){return{type:P.SET_ACCOUNT_DETAILS_ADDRESS,payload:e}},n.setAccountLabel=function(e,t){return n=>(n(J()),r.default.debug("background.setAccountLabel"),new Promise(((r,a)=>{(0,A.callBackgroundMethod)("setAccountLabel",[e,t],(o=>{if(n(Z()),o)return n(ee(o)),void a(o);n({type:P.SET_ACCOUNT_LABEL,value:{account:e,label:t}}),r(e)}))})))},n.setActiveNetwork=Y,n.setAddSnapAccountEnabled=async function(e){try{await(0,A.submitRequestToBackground)("setAddSnapAccountEnabled",[e])}catch(e){(0,v.logErrorWithMessage)(e)}},n.setAdvancedGasFee=function(e){return t=>{t(J()),r.default.debug("background.setAdvancedGasFee"),(0,A.callBackgroundMethod)("setAdvancedGasFee",[e],(e=>{t(Z()),e&&t(ee(e))}))}},n.setAlertEnabledness=async function(e,t){await(0,A.submitRequestToBackground)("setAlertEnabledness",[e,t])},n.setAutoLockTimeLimit=function(e){return te("autoLockTimeLimit",e)},n.setBackgroundSwapRouteState=function(e){return async t=>{await(0,A.submitRequestToBackground)("setBackgroundSwapRouteState",[e]),await ae(t)}},n.setCompletedOnboarding=function(){return async e=>{e(J());try{await(0,A.submitRequestToBackground)("completeOnboarding"),e(ne())}catch(t){throw e(ee(t)),t}finally{e(Z())}}},n.setConfirmationExchangeRates=function(e){return{type:P.SET_CONFIRMATION_EXCHANGE_RATES,value:e}},n.setConnectedStatusPopoverHasBeenShown=function(){return()=>{(0,A.callBackgroundMethod)("setConnectedStatusPopoverHasBeenShown",[],(e=>{if((0,v.isErrorWithMessage)(e))throw new Error(e.message)}))}},n.setCurrentCurrency=function(e){return async t=>{t(J()),r.default.debug("background.setCurrentCurrency");try{await(0,A.submitRequestToBackground)("setCurrentCurrency",[e]),await ae(t)}catch(e){return(0,v.logErrorWithMessage)(e),void t(ee(e))}finally{t(Z())}}},n.setCurrentExtensionPopupId=function(e){return async t=>{await(0,A.submitRequestToBackground)("setCurrentExtensionPopupId",[e]),await ae(t)}},n.setCurrentLocale=se,n.setCustomApproveTxData=function(e){return async t=>{await(0,A.submitRequestToBackground)("setCustomApproveTxData",[e]),await ae(t)}},n.setDataCollectionForMarketing=function(e){return async t=>{r.default.debug("background.setDataCollectionForMarketing"),await(0,A.submitRequestToBackground)("setDataCollectionForMarketing",[e]),t({type:P.SET_DATA_COLLECTION_FOR_MARKETING,value:e})}},n.setDefaultHomeActiveTabName=function(e){return async t=>{await(0,A.submitRequestToBackground)("setDefaultHomeActiveTabName",[e]),await ae(t)}},n.setDisabledRpcMethodPreference=function(e,t){return async n=>{n(J()),await(0,A.submitRequestToBackground)("setDisabledRpcMethodPreference",[e,t]),n(Z())}},n.setDismissSeedBackUpReminder=function(e){return async t=>{t(J()),await(0,A.submitRequestToBackground)("setDismissSeedBackUpReminder",[e]),t(Z())}},n.setFeatureFlag=function(e,t,n){return r=>(r(J()),new Promise(((a,o)=>{(0,A.callBackgroundMethod)("setFeatureFlag",[e,t],((e,t)=>{if(r(Z()),e)return r(ee(e)),void o(e);n&&r(z({name:n})),a(t)}))})))},n.setFeatureNotificationsEnabled=function(e){return te("featureNotificationsEnabled",e)},n.setFirstTimeFlowType=function(e){return t=>{r.default.debug("background.setFirstTimeFlowType"),(0,A.callBackgroundMethod)("setFirstTimeFlowType",[e],(e=>{e&&t(ee(e))})),t({type:P.SET_FIRST_TIME_FLOW_TYPE,value:e})}},n.setFirstTimeUsedNetwork=function(e){return(0,A.submitRequestToBackground)("setFirstTimeUsedNetwork",[e])},n.setHardwareWalletDefaultHdPath=function({device:e,path:t}){return{type:P.SET_HARDWARE_WALLET_DEFAULT_HD_PATH,payload:{device:e,path:t}}},n.setHideZeroBalanceTokens=function(e){return te("hideZeroBalanceTokens",e)},n.setIncomingTransactionsPreferences=function(e,t){return async n=>{n(J()),r.default.debug("background.setIncomingTransactionsPreferences"),await(0,A.submitRequestToBackground)("setIncomingTransactionsPreferences",[e,t]),n(Z())}},n.setInitialGasEstimate=function(e){return async t=>{await(0,A.submitRequestToBackground)("setInitialGasEstimate",[e]),await ae(t)}},n.setIpfsGateway=function(e){return t=>{r.default.debug("background.setIpfsGateway"),(0,A.callBackgroundMethod)("setIpfsGateway",[e],(e=>{e&&t(ee(e))}))}},n.setIsIpfsGatewayEnabled=function(e){return t=>{r.default.debug("background.setIsIpfsGatewayEnabled"),(0,A.callBackgroundMethod)("setIsIpfsGatewayEnabled",[e],(e=>{e&&t(ee(e))}))}},n.setLastActiveTime=function(){return e=>{(0,A.callBackgroundMethod)("setLastActiveTime",[],(t=>{t&&e(ee(t))}))}},n.setName=function(e){return async()=>{await(0,A.submitRequestToBackground)("setName",[e])}},n.setNetworkClientIdForDomain=function(e,t){return(0,A.submitRequestToBackground)("setNetworkClientIdForDomain",[e,t])},n.setNewNetworkAdded=function({networkConfigurationId:e,nickname:t}){return{type:P.SET_NEW_NETWORK_ADDED,payload:{networkConfigurationId:e,nickname:t}}},n.setNewNftAddedMessage=function(e){return{type:P.SET_NEW_NFT_ADDED_MESSAGE,payload:e}},n.setNewPrivacyPolicyToastClickedOrClosed=function(){return async()=>{await(0,A.submitRequestToBackground)("setNewPrivacyPolicyToastClickedOrClosed")}},n.setNewPrivacyPolicyToastShownDate=function(e){return async()=>{await(0,A.submitRequestToBackground)("setNewPrivacyPolicyToastShownDate",[e])}},n.setNewTokensImported=function(e){return{type:P.SET_NEW_TOKENS_IMPORTED,payload:e}},n.setNewTokensImportedError=function(e){return{type:P.SET_NEW_TOKENS_IMPORTED_ERROR,payload:e}},n.setNextNonce=ue,n.setOnboardingDate=function(){return async()=>{await(0,A.submitRequestToBackground)("setOnboardingDate")}},n.setOpenMetamaskTabsIDs=de,n.setOpenSeaEnabled=function(e){return async t=>{t(J()),r.default.debug("background.setOpenSeaEnabled");try{await(0,A.submitRequestToBackground)("setOpenSeaEnabled",[e])}finally{t(Z())}}},n.setOutdatedBrowserWarningLastShown=function(e){return async()=>{await(0,A.submitRequestToBackground)("setOutdatedBrowserWarningLastShown",[e])}},n.setParticipateInMetaMetrics=function(e){return t=>(r.default.debug("background.setParticipateInMetaMetrics"),new Promise(((n,a)=>{(0,A.callBackgroundMethod)("setParticipateInMetaMetrics",[e],((o,s)=>{var i;if(r.default.debug(o),o)return t(ee(o)),void a(o);null===(i=window.sentry)||void 0===i||i.toggleSession(),t({type:P.SET_PARTICIPATE_IN_METAMETRICS,value:e}),n([e,s])}))})))},n.setPendingTokens=function(e){const{customToken:t,selectedTokens:n={},tokenAddressList:r=[]}=e,a=null!=t&&t.address&&null!=t&&t.symbol&&Boolean((null==t?void 0:t.decimals)>=0&&(null==t?void 0:t.decimals)<=36)?{...n,[t.address]:{...t,isCustom:!0}}:n;return Object.keys(a).forEach((e=>{a[e].unlisted=!r.find((t=>(0,T.isEqualCaseInsensitive)(t,e)))})),{type:P.SET_PENDING_TOKENS,payload:a}},n.setPetnamesEnabled=function(e){return te("petnamesEnabled",e)},n.setPreference=te,n.setProviderType=function(e){return async t=>{r.default.debug("background.setProviderType",e);try{await(0,A.submitRequestToBackground)("setProviderType",[e])}catch(e){(0,v.logErrorWithMessage)(e),t(ee("Had a problem changing networks!"))}}},n.setRecoveryPhraseReminderHasBeenShown=function(){return()=>{(0,A.callBackgroundMethod)("setRecoveryPhraseReminderHasBeenShown",[],(e=>{if((0,v.isErrorWithMessage)(e))throw new Error(e.message)}))}},n.setRecoveryPhraseReminderLastShown=function(e){return()=>{(0,A.callBackgroundMethod)("setRecoveryPhraseReminderLastShown",[e],(e=>{if((0,v.isErrorWithMessage)(e))throw new Error(e.message)}))}},n.setRedesignedConfirmationsEnabled=function(e){return te("redesignedConfirmations",e)},n.setRemoveNftMessage=function(e){return{type:P.SET_REMOVE_NFT_MESSAGE,payload:e}},n.setRequestAccountTabIds=ce,n.setSecurityAlertsEnabled=function(e){try{(0,A.submitRequestToBackground)("setSecurityAlertsEnabled",[e])}catch(e){(0,v.logErrorWithMessage)(e)}},n.setSeedPhraseBackedUp=ie,n.setSelectedAccount=function(e){return async(t,n)=>{t(J()),r.default.debug("background.setSelectedAccount");const a=n(),o=(0,p.getUnconnectedAccountAlertEnabledness)(a),s=a.activeTab.origin,i=(0,l.getInternalAccountByAddress)(a,e),u=(0,l.getPermittedAccountsForCurrentTab)(a),c=Boolean(s)&&u.includes(i.address),d=Boolean(s)&&u.includes(e),g=c&&!d;try{await K(i.id),await ae(t)}catch(e){return void t(ee(e))}finally{t(Z())}o&&g&&(t((0,f.switchedToUnconnectedAccount)()),await me(s))}},n.setSelectedInternalAccount=function(e){return async t=>{t(J()),r.default.debug("background.setSelectedInternalAccount");try{await K(e)}catch(e){return void t(ee(e))}finally{t(Z())}}},n.setSelectedNetworkConfigurationId=function(e){return{type:P.SET_SELECTED_NETWORK_CONFIGURATION_ID,payload:e}},n.setSelectedQuoteAggId=function(e){return async t=>{await(0,A.submitRequestToBackground)("setSelectedQuoteAggId",[e]),await ae(t)}},n.setServiceWorkerKeepAlivePreference=function(e){return async t=>{t(J()),r.default.debug("background.setServiceWorkerKeepAlivePreference");try{await(0,A.submitRequestToBackground)("setServiceWorkerKeepAlivePreference",[e])}catch(e){t(ee(e))}finally{t(Z())}}},n.setShowExtensionInFullSizeView=function(e){return te("showExtensionInFullSizeView",e)},n.setShowFiatConversionOnTestnetsPreference=function(e){return te("showFiatInTestnets",e)},n.setShowTestNetworks=function(e){return te("showTestNetworks",e)},n.setSmartTransactionsOptInStatus=function(e){return async(t,n)=>{const r=(0,k.getSmartTransactionsOptInStatus)(n());pe({category:w.MetaMetricsEventCategory.Settings,event:w.MetaMetricsEventName.SettingsUpdated,properties:{stx_opt_in:e,prev_stx_opt_in:r}}),await t(te("smartTransactionsOptInStatus",e)),await ae(t)}},n.setSmartTransactionsRefreshInterval=function(e){return async()=>{try{await(0,A.submitRequestToBackground)("setStatusRefreshInterval",[e])}catch(e){(0,v.logErrorWithMessage)(e)}}},n.setSnapsAddSnapAccountModalDismissed=async function(){await(0,A.submitRequestToBackground)("setSnapsAddSnapAccountModalDismissed",[!0])},n.setSnapsInstallPrivacyWarningShownStatus=function(e){return async()=>{await(0,A.submitRequestToBackground)("setSnapsInstallPrivacyWarningShownStatus",[e])}},n.setSurveyLinkLastClickedOrClosed=function(e){return async()=>{await(0,A.submitRequestToBackground)("setSurveyLinkLastClickedOrClosed",[e])}},n.setSwapsErrorKey=function(e){return async t=>{await(0,A.submitRequestToBackground)("setSwapsErrorKey",[e]),await ae(t)}},n.setSwapsFeatureFlags=function(e){return async t=>{await(0,A.submitRequestToBackground)("setSwapsFeatureFlags",[e]),await ae(t)}},n.setSwapsLiveness=function(e){return async t=>{await(0,A.submitRequestToBackground)("setSwapsLiveness",[e]),await ae(t)}},n.setSwapsQuotesPollingLimitEnabled=function(e){return async t=>{await(0,A.submitRequestToBackground)("setSwapsQuotesPollingLimitEnabled",[e]),await ae(t)}},n.setSwapsTokens=function(e){return async t=>{await(0,A.submitRequestToBackground)("setSwapsTokens",[e]),await ae(t)}},n.setSwapsTxGasLimit=function(e){return async t=>{await(0,A.submitRequestToBackground)("setSwapsTxGasLimit",[e,!0]),await ae(t)}},n.setSwapsTxGasPrice=function(e){return async t=>{await(0,A.submitRequestToBackground)("setSwapsTxGasPrice",[e]),await ae(t)}},n.setSwitchedNetworkDetails=Q,n.setTermsOfUseLastAgreed=function(e){return async()=>{await(0,A.submitRequestToBackground)("setTermsOfUseLastAgreed",[e])}},n.setTheme=function(e){return async t=>{t(J()),r.default.debug("background.setTheme");try{await(0,A.submitRequestToBackground)("setTheme",[e])}finally{t(Z())}}},n.setUnconnectedAccountAlertShown=me,n.setUse4ByteResolution=function(e){return async t=>{t(J()),r.default.debug("background.setUse4ByteResolution");try{await(0,A.submitRequestToBackground)("setUse4ByteResolution",[e])}catch(e){t(ee(e))}finally{t(Z())}}},n.setUseAddressBarEnsResolution=function(e){return t=>{r.default.debug("background.setUseAddressBarEnsResolution"),(0,A.callBackgroundMethod)("setUseAddressBarEnsResolution",[e],(e=>{e&&t(ee(e))}))}},n.setUseBlockie=function(e){return t=>{t(J()),r.default.debug("background.setUseBlockie"),(0,A.callBackgroundMethod)("setUseBlockie",[e],(e=>{t(Z()),e&&t(ee(e))}))}},n.setUseCurrencyRateCheck=function(e){return t=>{t(J()),r.default.debug("background.setUseCurrencyRateCheck"),(0,A.callBackgroundMethod)("setUseCurrencyRateCheck",[e],(e=>{t(Z()),e&&t(ee(e))}))}},n.setUseExternalNameSources=function(e){try{(0,A.submitRequestToBackground)("setUseExternalNameSources",[e])}catch(e){(0,v.logErrorWithMessage)(e)}},n.setUseMultiAccountBalanceChecker=function(e){return t=>{t(J()),r.default.debug("background.setUseMultiAccountBalanceChecker"),(0,A.callBackgroundMethod)("setUseMultiAccountBalanceChecker",[e],(e=>{t(Z()),e&&t(ee(e))}))}},n.setUseNativeCurrencyAsPrimaryCurrencyPreference=function(e){return te("useNativeCurrencyAsPrimaryCurrency",e)},n.setUseNftDetection=function(e){return async t=>{t(J()),r.default.debug("background.setUseNftDetection");try{await(0,A.submitRequestToBackground)("setUseNftDetection",[e])}finally{t(Z())}}},n.setUseNonceField=function(e){return async t=>{t(J()),r.default.debug("background.setUseNonceField");try{await(0,A.submitRequestToBackground)("setUseNonceField",[e])}catch(e){t(ee(e))}t(Z())}},n.setUsePhishDetect=function(e){return t=>{t(J()),r.default.debug("background.setUsePhishDetect"),(0,A.callBackgroundMethod)("setUsePhishDetect",[e],(e=>{t(Z()),e&&t(ee(e))}))}},n.setUseRequestQueue=function(e){try{(0,A.submitRequestToBackground)("setUseRequestQueue",[e])}catch(e){(0,v.logErrorWithMessage)(e)}},n.setUseSafeChainsListValidation=function(e){return t=>{t(J()),r.default.debug("background.setUseSafeChainsListValidation"),(0,A.callBackgroundMethod)("setUseSafeChainsListValidation",[e],(e=>{t(Z()),e&&t(ee(e))}))}},n.setUseTokenDetection=function(e){return t=>{t(J()),r.default.debug("background.setUseTokenDetection"),(0,A.callBackgroundMethod)("setUseTokenDetection",[e],(e=>{t(Z()),e&&t(ee(e))}))}},n.setUseTransactionSimulations=function(e){try{(0,A.submitRequestToBackground)("setUseTransactionSimulations",[e])}catch(e){(0,v.logErrorWithMessage)(e)}},n.setWeb3ShimUsageAlertDismissed=async function(e){await(0,A.submitRequestToBackground)("setWeb3ShimUsageAlertDismissed",[e])},n.showAccountsPage=V,n.showAlert=function(e){return{type:P.ALERT_OPEN,payload:e}},n.showConfTxPage=$,n.showDeprecatedNetworkModal=function(){return{type:P.DEPRECATED_NETWORK_POPOVER_OPEN}},n.showImportNftsModal=function(e){return{type:P.IMPORT_NFTS_MODAL_OPEN,payload:e}},n.showImportTokensModal=function(){return{type:P.IMPORT_TOKENS_POPOVER_OPEN}},n.showIpfsModal=function(){return{type:P.SHOW_IPFS_MODAL_OPEN}},n.showKeyringSnapRemovalModal=function(e){return{type:P.SHOW_KEYRING_SNAP_REMOVAL_RESULT,payload:e}},n.showLoadingIndication=J,n.showModal=z,n.showNetworkDropdown=function(){return{type:P.NETWORK_DROPDOWN_OPEN}},n.showPrivateKey=function(e){return{type:P.SHOW_PRIVATE_KEY,payload:e}},n.showQrScanner=function(){return e=>{e(z({name:"QR_SCANNER"}))}},n.showSendTokenPage=function(){return{type:P.SHOW_SEND_TOKEN_PAGE}},n.signAndSendSmartTransaction=function({unsignedTransaction:e,smartTransactionFees:t}){return async n=>{const r=await he(e,t.fees),a=await he(e,t.cancelFees,!0);try{return(await(0,A.submitRequestToBackground)("submitSignedTransactions",[{signedTransactions:r,signedCanceledTransactions:a,txParams:e}])).uuid}catch(e){if((0,v.logErrorWithMessage)(e),(0,v.isErrorWithMessage)(e)&&e.message.startsWith("Fetch error:")){const t=(0,y.parseSmartTransactionsError)(e.message);n({type:P.SET_SMART_TRANSACTIONS_ERROR,payload:t})}throw e}}},n.stopPollingForQuotes=function(){return async e=>{await(0,A.submitRequestToBackground)("stopPollingForQuotes"),await ae(e)}},n.submitPassword=_,n.submitQRHardwareCryptoAccount=async function(e){await(0,A.submitRequestToBackground)("submitQRHardwareCryptoAccount",[e])},n.submitQRHardwareCryptoHDKey=async function(e){await(0,A.submitRequestToBackground)("submitQRHardwareCryptoHDKey",[e])},n.submitQRHardwareSignature=async function(e,t){await(0,A.submitRequestToBackground)("submitQRHardwareSignature",[e,t])},n.throwTestBackgroundError=async function(e){await(0,A.submitRequestToBackground)("throwTestError",[e])},n.toggleAccountMenu=function(){return{type:P.TOGGLE_ACCOUNT_MENU}},n.toggleExternalServices=function(e){return t=>{r.default.debug("background.toggleExternalServices"),(0,A.callBackgroundMethod)("toggleExternalServices",[e],(e=>{e&&t(ee(e))}))}},n.toggleNetworkMenu=function(){return{type:P.TOGGLE_NETWORK_MENU}},n.trackMetaMetricsEvent=pe,n.trackMetaMetricsPage=function(e,t){return(0,A.submitRequestToBackground)("trackMetaMetricsPage",[{...e,actionId:(0,A.generateActionId)()},t])},n.tryReverseResolveAddress=function(e){return()=>new Promise((t=>{(0,A.callBackgroundMethod)("tryReverseResolveAddress",[e],(e=>{e&&(0,v.logErrorWithMessage)(e),t()}))}))},n.tryUnlockMetamask=function(e){return t=>(t(J()),t(U()),r.default.debug("background.submitPassword"),new Promise(((t,n)=>{(0,A.callBackgroundMethod)("submitPassword",[e],(e=>{e?n(e):t()}))})).then((()=>(t(H()),ae(t)))).then((()=>{t(Z())})).catch((e=>(t(W(e.message)),t(Z()),Promise.reject(e)))))},n.unMarkPasswordForgotten=x,n.unlockAndGetSeedPhrase=function(e){return async t=>{t(J());try{await _(e);const n=await O(e);return await ae(t),n}catch(e){throw t(ee(e)),(0,v.isErrorWithMessage)(e)?new Error(e.message):e}finally{t(Z())}}},n.unlockFailed=W,n.unlockHardwareWalletAccounts=function(e,t,n,a){return r.default.debug("background.unlockHardwareWalletAccount",e,t,n,a),async r=>{r(J());for(const o of e)try{await(0,A.submitRequestToBackground)("unlockHardwareWalletAccount",[o,t,n,a])}catch(e){throw(0,v.logErrorWithMessage)(e),r(ee(e)),r(Z()),e}return r(Z()),undefined}},n.unlockInProgress=U,n.unlockSucceeded=H,n.updateAccountsList=function(e){return async()=>{await(0,A.submitRequestToBackground)("updateAccountsList",[e])}},n.updateAndApproveTx=function(e,t,n){return r=>(!t&&r(J(n)),new Promise(((t,n)=>{const a=(0,A.generateActionId)();(0,A.callBackgroundMethod)("resolvePendingApproval",[String(e.id),{txMeta:e,actionId:a},{waitForResult:!0}],(a=>{if(r(L(e.id,e.txParams)),r((0,g.resetSendState)()),a)return r(B()),(0,v.logErrorWithMessage)(a),void n(a);t(e)}))})).then((()=>q())).then((e=>r(G(e)))).then((()=>(r((0,g.resetSendState)()),r(F(e.id)),r(Z()),r(D("")),r(X()),e))).catch((e=>(r(Z()),Promise.reject(e)))))},n.updateCurrentLocale=oe,n.updateCustomNonce=D,n.updateCustomSwapsEIP1559GasParams=function({gasLimit:e,maxFeePerGas:t,maxPriorityFeePerGas:n}){return async r=>{await Promise.all([(0,A.submitRequestToBackground)("setSwapsTxGasLimit",[e]),(0,A.submitRequestToBackground)("setSwapsTxMaxFeePerGas",[t]),(0,A.submitRequestToBackground)("setSwapsTxMaxFeePriorityPerGas",[n])]),await ae(r)}},n.updateEditableParams=function(e,t){return async n=>{let r;try{r=await(0,A.submitRequestToBackground)("updateEditableParams",[e,t])}catch(e){throw(0,v.logErrorWithMessage)(e),e}return await ae(n),r}},n.updateEventFragment=function(e,t){return(0,A.submitRequestToBackground)("updateEventFragment",[e,t])},n.updateHiddenAccountsList=function(e){return async()=>{await(0,A.submitRequestToBackground)("updateHiddenAccountsList",[e])}},n.updateInterfaceState=function(e,t){return async n=>{await(0,A.submitRequestToBackground)("updateInterfaceState",[e,t]),await ae(n)}},n.updateMetamaskState=G,n.updateNetworksList=function(e){return async()=>{await(0,A.submitRequestToBackground)("updateNetworksList",[e])}},n.updateNftDropDownState=function(e){return async t=>{await(0,A.submitRequestToBackground)("updateNftDropDownState",[e]),await ae(t)}},n.updatePreviousGasParams=function(e,t){return async()=>{let n;try{n=await(0,A.submitRequestToBackground)("updatePreviousGasParams",[e,t])}catch(e){throw(0,v.logErrorWithMessage)(e),e}return n}},n.updateProposedNames=function(e){return async()=>await(0,A.submitRequestToBackground)("updateProposedNames",[e])},n.updateSmartTransaction=function(e,t){return async n=>{try{await(0,A.submitRequestToBackground)("updateSmartTransaction",[{uuid:e,...t}])}catch(e){if((0,v.logErrorWithMessage)(e),(0,v.isErrorWithMessage)(e)&&e.message.startsWith("Fetch error:")){const t=(0,y.parseSmartTransactionsError)(e.message);n({type:P.SET_SMART_TRANSACTIONS_ERROR,payload:t})}throw e}}},n.updateSnap=function(e,t){return async(n,r)=>{await(0,A.submitRequestToBackground)("updateSnap",[e,t]),await ae(n);const a=r(),o=(0,l.getFirstSnapInstallOrUpdateRequest)(a);return null==o?void 0:o.metadata.id}},n.updateSwapsUserFeeLevel=function(e){return async t=>{await(0,A.submitRequestToBackground)("setSwapsUserFeeLevel",[e]),await ae(t)}},n.updateTokenType=async function(e){try{return await(0,A.submitRequestToBackground)("updateTokenType",[e])}catch(e){(0,v.logErrorWithMessage)(e)}return undefined},n.updateTransaction=function(e,t){return async n=>{!t&&n(J());try{await(0,A.submitRequestToBackground)("updateTransaction",[e])}catch(t){throw n(L(e.id,e.txParams)),n(Z()),n(B()),(0,v.logErrorWithMessage)(t),t}try{n(L(e.id,e.txParams));return n(G(await q())),n($({id:e.id})),e}finally{n(Z())}}},n.updateTransactionGasFees=function(e,t){return async()=>{let n;try{n=await(0,A.submitRequestToBackground)("updateTransactionGasFees",[e,t])}catch(e){throw(0,v.logErrorWithMessage)(e),e}return n}},n.updateTransactionParams=L,n.updateTransactionSendFlowHistory=function(e,t,n){return async()=>{let r;try{r=await(0,A.submitRequestToBackground)("updateTransactionSendFlowHistory",[e,t,n])}catch(e){throw(0,v.logErrorWithMessage)(e),e}return r}},n.updateViewedNotifications=function(e){return(0,A.submitRequestToBackground)("updateViewedNotifications",[e])},n.upsertNetworkConfiguration=function({rpcUrl:e,chainId:t,nickname:n,rpcPrefs:a,ticker:o=R.EtherDenomination.ETH},{setActive:s,source:i}){return async u=>{let d;r.default.debug(`background.upsertNetworkConfiguration: ${e} ${t} ${o} ${n}`);try{d=await(0,A.submitRequestToBackground)("upsertNetworkConfiguration",[{rpcUrl:e,chainId:t,ticker:o,nickname:n||e,rpcPrefs:a},{setActive:s,source:i,referrer:c.ORIGIN_METAMASK}])}catch(e){r.default.error(e),u(ee("Had a problem adding network!"))}return d}},n.verifyPassword=C;var r=N(e("loglevel")),a=e("@sentry/browser"),o=e("lodash"),s=e("eth-rpc-errors"),i=e("../helpers/utils/transactions.util"),u=N(e("../../shared/lib/switch-direction")),c=e("../../shared/constants/app"),d=e("../../app/scripts/lib/util"),l=e("../selectors"),g=e("../ducks/send"),f=e("../ducks/alerts/unconnected-account"),p=e("../ducks/metamask/metamask"),m=e("../../shared/modules/hexstring-utils"),h=e("../../shared/constants/hardware-wallets"),w=e("../../shared/constants/metametrics"),y=e("../pages/swaps/swaps.util"),T=e("../../shared/modules/string-utils"),k=e("../../shared/modules/selectors"),b=e("../helpers/constants/notifications"),S=e("../../shared/modules/i18n"),E=e("../../shared/modules/conversion.utils"),R=e("../../shared/constants/common"),v=e("../../shared/modules/error"),P=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=M(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(e("./actionConstants")),A=e("./background-connection");function M(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(M=function(e){return e?n:t})(e)}function N(e){return e&&e.__esModule?e:{default:e}}function B(){return{type:P.GO_HOME}}function _(e){return new Promise(((t,n)=>{(0,A.callBackgroundMethod)("submitPassword",[e],(e=>{e?n(e):t()}))}))}function I(e){return new Promise(((t,n)=>{(0,A.callBackgroundMethod)("createNewVaultAndKeychain",[e],(e=>{e?n(e):t(!0)}))}))}function C(e){return new Promise(((t,n)=>{(0,A.callBackgroundMethod)("verifyPassword",[e],(e=>{e?n(e):t(!0)}))}))}async function O(e){const n=await(0,A.submitRequestToBackground)("getSeedPhrase",[e]);return t.from(n).toString("utf8")}function D(e){return{type:P.UPDATE_CUSTOM_NONCE,value:e}}const q=()=>(r.default.debug("background.getState"),new Promise(((e,t)=>{(0,A.callBackgroundMethod)("getState",[],((n,r)=>{n?t(n):e(r)}))})));function F(e){return t=>{t({type:P.COMPLETED_TX,value:{id:e}})}}function L(e,t){return{type:P.UPDATE_TRANSACTION_PARAMS,id:e,value:t}}function x(){return e=>new Promise((e=>{(0,A.callBackgroundMethod)("unMarkPasswordForgotten",[],(()=>{e()}))})).then((()=>ae(e)))}function U(){return{type:P.UNLOCK_IN_PROGRESS}}function W(e){return{type:P.UNLOCK_FAILED,value:e}}function H(e){return{type:P.UNLOCK_SUCCEEDED,value:e}}function G(e){return(t,n)=>{var r,a;const s=n(),i=(0,p.getProviderConfig)(s),{metamask:u}=s,{currentLocale:c}=u,d=(0,l.getSelectedInternalAccount)(s),f=null==d?void 0:d.address,{currentLocale:m,providerConfig:h}=e,w=(0,l.getSelectedInternalAccount)({metamask:e}),y=null==w?void 0:w.address;c&&m&&c!==m&&t(oe(m)),f!==y&&t({type:P.SELECTED_ADDRESS_CHANGED});const T=(null===(r=e.addressBook)||void 0===r?void 0:r[null==h?void 0:h.chainId])??{},k=(null===(a=u.addressBook)||void 0===a?void 0:a[null==i?void 0:i.chainId])??{},b=(0,l.getMetaMaskAccounts)({metamask:e}),S=(0,l.getMetaMaskAccounts)({metamask:u}),E=b[y],R=b[f];Object.entries(S).forEach((([e,n])=>{(0,o.isEqual)(n,b[e])||t({type:P.ACCOUNT_CHANGED,payload:{account:b[e]}})})),!1===(0,o.isEqual)(R,E)&&t({type:P.SELECTED_ACCOUNT_CHANGED,payload:{account:E}}),!1===(0,o.isEqual)(k,T)&&t({type:P.ADDRESS_BOOK_UPDATED,payload:{addressBook:T}}),!1===(0,o.isEqual)(u.gasFeeEstimates,e.gasFeeEstimates)&&t({type:P.GAS_FEE_ESTIMATES_UPDATED,payload:{gasFeeEstimates:e.gasFeeEstimates,gasEstimateType:e.gasEstimateType}}),t({type:P.UPDATE_METAMASK_STATE,value:e}),i.chainId!==h.chainId&&(t({type:P.CHAIN_CHANGED,payload:h.chainId}),t((0,g.initializeSendState)({chainHasChanged:!0})))}}const j=()=>new Promise(((e,t)=>{(0,A.callBackgroundMethod)("setLocked",[],(n=>{n?t(n):e()}))}));async function K(e){r.default.debug("background.setSelectedInternalAccount"),await(0,A.submitRequestToBackground)("setSelectedInternalAccount",[e])}function V(){return{type:P.SHOW_ACCOUNTS_PAGE}}function $({id:e}={}){return{type:P.SHOW_CONF_TX_PAGE,id:e}}function Q(e){return async t=>{await(0,A.submitRequestToBackground)("setSwitchedNetworkDetails",[e]),await ae(t)}}function Y(e){return async t=>{r.default.debug(`background.setActiveNetwork: ${e}`);try{await(0,A.submitRequestToBackground)("setActiveNetwork",[e])}catch(e){(0,v.logErrorWithMessage)(e),t(ee("Had a problem changing networks!"))}}}function z(e){return{type:P.MODAL_OPEN,payload:e}}function X(){return(e,t)=>{const n=t(),r=(0,l.getApprovalFlows)(n);(0,d.getEnvironmentType)()!==c.ENVIRONMENT_TYPE_NOTIFICATION||(0,l.hasTransactionPendingApprovals)(n)||(0,l.getIsSigningQRHardwareTransaction)(n)||0!==r.length||fe()}}function J(e){return{type:P.SHOW_LOADING,payload:e}}function Z(){return{type:P.HIDE_LOADING}}function ee(e){return(0,v.isErrorWithMessage)(e)?{type:P.DISPLAY_WARNING,payload:e.message}:"string"==typeof e?{type:P.DISPLAY_WARNING,payload:e}:{type:P.DISPLAY_WARNING,payload:`${e}`}}function te(e,t){return n=>(n(J()),new Promise(((r,a)=>{(0,A.callBackgroundMethod)("setPreference",[e,t],((e,t)=>{if(n(Z()),e)return n(ee(e)),void a(e);r(t)}))})))}function ne(){return{type:P.COMPLETE_ONBOARDING}}function re(){return{type:P.RESET_ONBOARDING}}async function ae(e){let t;r.default.debug("background.getState");try{t=await(0,A.submitRequestToBackground)("getState")}catch(t){throw e(ee(t)),t}return e(G(t)),t}function oe(e){return async t=>{t(J());try{await(0,S.loadRelativeTimeFormatLocaleData)(e);const n=await(0,S.fetchLocale)(e),r=await(0,A.submitRequestToBackground)("setCurrentLocale",[e]);(0,u.default)(r),t(se(e,n))}catch(e){return void t(ee(e))}finally{t(Z())}}}function se(e,t){return{type:P.SET_CURRENT_LOCALE,payload:{locale:e,messages:t}}}function ie(e){return t=>(r.default.debug("background.setSeedPhraseBackedUp"),new Promise(((n,r)=>{(0,A.callBackgroundMethod)("setSeedPhraseBackedUp",[e],(e=>{if(e)return t(ee(e)),void r(e);ae(t).then(n).catch(r)}))})))}function ue(e){return{type:P.SET_NEXT_NONCE,payload:e}}function ce(e){return{type:P.SET_REQUEST_ACCOUNT_TABS,payload:e}}function de(e){return{type:P.SET_OPEN_METAMASK_TAB_IDS,payload:e}}async function le(e){return(0,A.submitRequestToBackground)("addPollingTokenToAppState",[e,c.POLLING_TOKEN_ENVIRONMENT_TYPES[(0,d.getEnvironmentType)()]])}async function ge(e){return(0,A.submitRequestToBackground)("removePollingTokenFromAppState",[e,c.POLLING_TOKEN_ENVIRONMENT_TYPES[(0,d.getEnvironmentType)()]])}async function fe(){await(0,A.submitRequestToBackground)("markNotificationPopupAsAutomaticallyClosed"),global.platform.closeCurrentWindow()}function pe(e,t){return(0,A.submitRequestToBackground)("trackMetaMetricsEvent",[{...e,actionId:(0,A.generateActionId)()},t])}async function me(e){await(0,A.submitRequestToBackground)("setUnconnectedAccountAlertShown",[e])}const he=async(e,t,n)=>{const r=t.map((t=>{const r={...e,maxFeePerGas:(0,E.decimalToHex)(t.maxFeePerGas),maxPriorityFeePerGas:(0,E.decimalToHex)(t.maxPriorityFeePerGas),gas:n?(0,E.decimalToHex)(21e3):e.gas,value:e.value};return n&&(r.to=r.from,r.data="0x"),r}));return await(0,A.submitRequestToBackground)("approveTransactionsWithSameNonce",[r])}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"ui/store/actions.ts"}],[5760,{pify:3783},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.generateActionId=n.callBackgroundMethod=void 0,n.setBackgroundConnection=async function(e){o=e,s=(0,a.default)(o)},n.submitRequestToBackground=function(e,t){var n;return null===(n=s)||void 0===n?void 0:n[e](...t??[])};var r,a=(r=e("pify"))&&r.__esModule?r:{default:r};let o=null,s=null;n.generateActionId=()=>Date.now()+Math.random();n.callBackgroundMethod=(e,t,n)=>{var r;null===(r=o)||void 0===r||r[e](...t,n)}}}},{package:"$root$",file:"ui/store/background-connection.ts"}],[59,{"../../../shared/modules/browser-runtime.utils":4380,"@sentry/browser":2179,loglevel:3644,"webextension-polyfill":4322},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(e("webextension-polyfill")),a=i(e("loglevel")),o=e("@sentry/browser"),s=e("../../../shared/modules/browser-runtime.utils");function i(e){return e&&e.__esModule?e:{default:e}}n.default=class{constructor(){this.isSupported=Boolean(r.default.storage.local),this.isSupported||a.default.error("Storage local API not available."),this.dataPersistenceFailing=!1,this.mostRecentRetrievedState=null}setMetadata(e){this.metadata=e}async set(e){if(!this.isSupported)throw new Error("Metamask- cannot persist state to local store as this browser does not support this action");if(!e)throw new Error("MetaMask - updated state is missing");if(!this.metadata)throw new Error('MetaMask - metadata must be set on instance of ExtensionStore before calling "set"');try{await this._set({data:e,meta:this.metadata}),this.dataPersistenceFailing&&(this.dataPersistenceFailing=!1)}catch(e){this.dataPersistenceFailing||(this.dataPersistenceFailing=!0,(0,o.captureException)(e)),a.default.error("error setting state in local store:",e)}}async get(){if(!this.isSupported)return undefined;const e=await this._get();return t=e,0===Object.keys(t).length?(this.mostRecentRetrievedState=null,undefined):(this.mostRecentRetrievedState=e,e);var t}_get(){const{local:e}=r.default.storage;return new Promise(((t,n)=>{e.get(null).then((e=>{const r=(0,s.checkForLastError)();r?n(r):t(e)}))}))}_set(e){const{local:t}=r.default.storage;return new Promise(((n,r)=>{t.set(e).then((()=>{const e=(0,s.checkForLastError)();e?r(e):n()}))}))}}}}},{package:"$root$",file:"app/scripts/lib/local-store.js"}],[63,{"../../../shared/modules/fetch-with-timeout":4388,loglevel:3644},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=a(e("loglevel"));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(n!==undefined){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const s=(0,a(e("../../../shared/modules/fetch-with-timeout")).default)();n.default=class{constructor(){o(this,"isSupported",!0),this._initialized=!1,this._initializing=this._init(),this._state=undefined,this.mostRecentRetrievedState=null}async _init(){try{const e=await s("http://localhost:12345/state.json");e.ok&&(this._state=await e.json())}catch(e){r.default.debug(`Error loading network state: '${e.message}'`)}finally{this._initialized=!0}}async get(){return this._initialized||await this._initializing,this.mostRecentRetrievedState||(this.mostRecentRetrievedState=this._state),this._state}setMetadata(e){this.metadata=e}async set(e){if(!this.isSupported)throw new Error("Metamask- cannot persist state to local store as this browser does not support this action");if(!e)throw new Error("MetaMask - updated state is missing");if(!this.metadata)throw new Error('MetaMask - metadata must be set on instance of ExtensionStore before calling "set"');this._initialized||await this._initializing,this._state={data:e,meta:this._metadata}}}}}},{package:"$root$",file:"app/scripts/lib/network-store.js"}],[69,{"../../../../shared/constants/network":4355,"../../../../shared/constants/security-provider":4361,"../../../../shared/constants/transaction":4368,"./ppom-util":70,uuid:4259},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SUPPORTED_CHAIN_IDS=void 0,n.createPPOMMiddleware=function(e,t,n,o,l){return async(g,f,p)=>{try{var m;const f=null===(m=t.store.getState())||void 0===m?void 0:m.securityAlertsEnabled,{chainId:p}=n.state.providerConfig;if(f&&c.includes(g.method)&&d.includes(p)){const t=(0,r.v4)();let n={reason:a.BlockaidResultType.Loading,result_type:a.BlockaidReason.inProgress,securityAlertId:t};e.usePPOM((async e=>{try{const r=(0,i.normalizePPOMRequest)(g);n=await e.validateJsonRpc(r),n.securityAlertId=t}catch(e){null==u||u.captureException(e),console.error("Error validating JSON RPC using PPOM: ","object"==typeof e||"string"==typeof e?e:JSON.stringify(e)),n={result_type:a.BlockaidResultType.Errored,reason:a.BlockaidReason.errored,description:e instanceof Error?`${e.name}: ${e.message}`:JSON.stringify(e)}}})).catch((e=>{null==u||u.captureException(e),console.error("Error createPPOMMiddleware#usePPOM: ","object"==typeof e||"string"==typeof e?e:JSON.stringify(e)),n={result_type:a.BlockaidResultType.Errored,reason:a.BlockaidReason.errored,description:e instanceof Error?`${e.name}: ${e.message}`:JSON.stringify(e)}})).finally((()=>{l(g,{...n,securityAlertId:t})})),s.SIGNING_METHODS.includes(g.method)&&o.addSignatureSecurityAlertResponse({reason:a.BlockaidResultType.Loading,result_type:a.BlockaidReason.inProgress,securityAlertId:t}),g.securityAlertResponse={...n}}}catch(e){null==u||u.captureException(e),console.error("Error createPPOMMiddleware: ","object"==typeof e||"string"==typeof e?e:JSON.stringify(e)),g.securityAlertResponse={result_type:a.BlockaidResultType.Errored,reason:a.BlockaidReason.errored,description:e instanceof Error?`${e.name}: ${e.message}`:JSON.stringify(e)}}finally{p()}}};var r=e("uuid"),a=e("../../../../shared/constants/security-provider"),o=e("../../../../shared/constants/network"),s=e("../../../../shared/constants/transaction"),i=e("./ppom-util");const{sentry:u}=global,c=Object.freeze(["eth_sendRawTransaction","eth_sendTransaction",...s.SIGNING_METHODS]),d=n.SUPPORTED_CHAIN_IDS=[o.CHAIN_IDS.ARBITRUM,o.CHAIN_IDS.AVALANCHE,o.CHAIN_IDS.BASE,o.CHAIN_IDS.BSC,o.CHAIN_IDS.LINEA_MAINNET,o.CHAIN_IDS.MAINNET,o.CHAIN_IDS.OPTIMISM,o.CHAIN_IDS.POLYGON,o.CHAIN_IDS.SEPOLIA]}}},{package:"$root$",file:"app/scripts/lib/ppom/ppom-middleware.ts"}],[70,{"@metamask/transaction-controller":2025},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.normalizePPOMRequest=function(e){var t;if(e.method!==a)return e;const n=(null===(t=e.params)||void 0===t?void 0:t[0])||{},o=(0,r.normalizeTransactionParams)(n);return{...e,params:[o]}};var r=e("@metamask/transaction-controller");const a="eth_sendTransaction"}}},{package:"$root$",file:"app/scripts/lib/ppom/ppom-util.ts"}],[85,{"@sentry/utils":2262},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.FilterEvents=void 0;var r=e("@sentry/utils");function a(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(n!==undefined){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o{constructor({getMetaMetricsEnabled:e}){a(this,"name",o.id),a(this,"getMetaMetricsEnabled",void 0),this.getMetaMetricsEnabled=e}setupOnce(e,t){e((async e=>{const n=t().getIntegration(o);return n&&!await n.getMetaMetricsEnabled()?(r.logger.warn("Event dropped due to MetaMetrics setting."),null):e}))}}n.FilterEvents=o,a(o,"id","FilterEvents")}}},{package:"$root$",file:"app/scripts/lib/sentry-filter-events.ts"}],[86,{"../../../shared/modules/object.utils":4395,"../platforms/extension":223,"./local-store":59,"./network-store":63,"./setupSentry":87},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=e("../../../shared/modules/object.utils"),a=i(e("../platforms/extension")),o=i(e("./local-store")),s=(i(e("./network-store")),e("./setupSentry"));function i(e){return e&&e.__esModule?e:{default:e}}const u=new a.default,c=new o.default;globalThis.stateHooks.getPersistedState=async function(){return await c.get()};const d={data:s.SENTRY_BACKGROUND_STATE,meta:{version:!0}};globalThis.stateHooks.getSentryState=function(){const e={browser:window.navigator.userAgent,version:u.getVersion()};if(globalThis.stateHooks.getSentryAppState)return{...e,state:globalThis.stateHooks.getSentryAppState()};if(c.mostRecentRetrievedState||globalThis.stateHooks.getMostRecentPersistedState){const t=c.mostRecentRetrievedState||globalThis.stateHooks.getMostRecentPersistedState();if(t)return{...e,persistedState:(0,r.maskObject)(t,d)}}return e}}}},{package:"$root$",file:"app/scripts/lib/setup-initial-state-hooks.js"}],[87,{"../../../shared/modules/object.utils":4395,"./extractEthjsErrorMessage":54,"./sentry-filter-events":85,"@sentry/browser":2179,"@sentry/integrations":2234},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SENTRY_UI_STATE=n.SENTRY_BACKGROUND_STATE=n.MMI_SENTRY_BACKGROUND_STATE=n.ERROR_URL_ALLOWLIST=void 0,n.beforeBreadcrumb=b,n.default=function({release:e,getState:t}){if(!e)throw new Error("Missing release");if(d&&!p)return undefined;const n="main"===f?l:`${l}-${f}`;let r;"production"===l?(r="https://3567c198f8a8412082d32655da2961d0@sentry.io/273505",console.log(`Setting up Sentry Remote Error Reporting for '${n}': SENTRY_DSN`)):(console.log(`Setting up Sentry Remote Error Reporting for '${n}': SENTRY_DSN_DEV`),r=g);async function s(){if("mmi"===f)return!0;const e=t();if(e.state||e.persistedState)return y(e);try{return T(await globalThis.stateHooks.getPersistedState())}catch(e){return console.error(e),!1}}async function u(){return"mmi"===f||s()}a.init({dsn:r,debug:d,autoSessionTracking:!1,environment:n,integrations:[new i.FilterEvents({getMetaMetricsEnabled:s}),new o.Dedupe,new o.ExtraErrorData,new a.BrowserProfilingIntegration],release:e,tracesSampleRate:.01,beforeSend:e=>E(e,t),beforeBreadcrumb:b(t)});const c=async()=>{var e,t,n,r;const o=null===(e=a.getCurrentHub)||void 0===e?void 0:e.call(a),s=(null===(t=o.getClient)||void 0===t||null===(n=(r=t.call(o)).getOptions)||void 0===n?void 0:n.call(r))??{};o&&!0===await u()&&(s.autoSessionTracking=!0,o.startSession())},m=async()=>{var e,t,n,r;const o=null===(e=a.getCurrentHub)||void 0===e?void 0:e.call(a),s=(null===(t=o.getClient)||void 0===t||null===(n=(r=t.call(o)).getOptions)||void 0===n?void 0:n.call(r))??{};o&&!1===await u()&&(s.autoSessionTracking=!1,o.endSession())};return{...a,startSession:c,endSession:m,toggleSession:async()=>{var e,t,n,r;const o=null===(e=a.getCurrentHub)||void 0===e?void 0:e.call(a),s=(null===(t=o.getClient)||void 0===t||null===(n=(r=t.call(o)).getOptions)||void 0===n?void 0:n.call(r))??{autoSessionTracking:!1},i=await u();!0===i&&!1===s.autoSessionTracking?await c():!1===i&&!0===s.autoSessionTracking&&await m()}}},n.removeUrlsFromBreadCrumb=S,n.rewriteReport=E;var r,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(e("@sentry/browser")),o=e("@sentry/integrations"),s=e("../../../shared/modules/object.utils"),i=e("./sentry-filter-events"),u=(r=e("./extractEthjsErrorMessage"))&&r.__esModule?r:{default:r};function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}const d=!1,l="production",g="https://f59f3dd640d2429d9d0e2445a87ea8e1@sentry.io/273496",f="main",p=!1,m=n.ERROR_URL_ALLOWLIST={CRYPTOCOMPARE:"cryptocompare.com",COINGECKO:"coingecko.com",ETHERSCAN:"etherscan.io",CODEFI:"codefi.network",SEGMENT:"segment.io"},h=(n.MMI_SENTRY_BACKGROUND_STATE={MMIController:{opts:!0},CustodyController:{store:!0},MmiConfigurationController:{store:!0,configurationClient:!0}},n.SENTRY_BACKGROUND_STATE={AccountsController:{internalAccounts:{accounts:!1,selectedAccount:!1}},AccountTracker:{accounts:!1,accountsByChainId:!1,currentBlockGasLimit:!0,currentBlockGasLimitByChainId:!0},AddressBookController:{addressBook:!1},AlertController:{alertEnabledness:!0,unconnectedAccountAlertShownOrigins:!1,web3ShimUsageOrigins:!1},AnnouncementController:{announcements:!1},NetworkOrderController:{orderedNetworkList:[]},AccountOrderController:{pinnedAccountList:[],hiddenAccountList:[]},AppMetadataController:{currentAppVersion:!0,currentMigrationVersion:!0,previousAppVersion:!0,previousMigrationVersion:!0},ApprovalController:{approvalFlows:!1,pendingApprovals:!1,pendingApprovalCount:!1},AppStateController:{browserEnvironment:!0,connectedStatusPopoverHasBeenShown:!0,currentPopupId:!1,onboardingDate:!1,currentExtensionPopupId:!1,defaultHomeActiveTabName:!0,fullScreenGasPollTokens:!0,hadAdvancedGasFeesSetPriorToMigration92_3:!0,nftsDetectionNoticeDismissed:!0,nftsDropdownState:!0,notificationGasPollTokens:!0,outdatedBrowserWarningLastShown:!0,popupGasPollTokens:!0,qrHardware:!0,recoveryPhraseReminderHasBeenShown:!0,recoveryPhraseReminderLastShown:!0,showBetaHeader:!0,showPermissionsTour:!0,showNetworkBanner:!0,showAccountBanner:!0,switchedNetworkDetails:!1,switchedNetworkNeverShowMessage:!1,showTestnetMessageInDropdown:!0,surveyLinkLastClickedOrClosed:!0,snapsInstallPrivacyWarningShown:!0,termsOfUseLastAgreed:!0,timeoutMinutes:!0,trezorModel:!0,usedNetworks:!0},CronjobController:{jobs:!1},CurrencyController:{currentCurrency:!0,currencyRates:!0},DecryptMessageController:{unapprovedDecryptMsgs:!1,unapprovedDecryptMsgCount:!0},EncryptionPublicKeyController:{unapprovedEncryptionPublicKeyMsgs:!1,unapprovedEncryptionPublicKeyMsgCount:!0},EnsController:{ensResolutionsByAddress:!1,ensEntries:!1},GasFeeController:{estimatedGasFeeTimeBounds:!0,gasEstimateType:!0,gasFeeEstimates:!0,gasFeeEstimatesByChainId:!0,nonRPCGasFeeApisDisabled:!1},KeyringController:{isUnlocked:!0,keyrings:!1},LoggingController:{logs:!1},MetaMetricsController:{eventsBeforeMetricsOptIn:!1,fragments:!1,metaMetricsId:!0,participateInMetaMetrics:!0,previousUserTraits:!1,segmentApiCalls:!1,traits:!1,dataCollectionForMarketing:!1},NameController:{names:!1,nameSources:!1,useExternalNameSources:!1},NetworkController:{networkConfigurations:!1,networksMetadata:!0,providerConfig:{chainId:!0,id:!0,nickname:!0,rpcPrefs:!1,rpcUrl:!1,ticker:!0,type:!0},selectedNetworkClientId:!1},NftController:{allNftContracts:!1,allNfts:!1,ignoredNfts:!1},NotificationController:{notifications:!1},OnboardingController:{completedOnboarding:!0,firstTimeFlowType:!0,onboardingTabs:!1,seedPhraseBackedUp:!0},PPOMController:{securityAlertsEnabled:!1,storageMetadata:[],versionFileETag:!1,versionInfo:[]},PermissionController:{subjects:!1},PermissionLogController:{permissionActivityLog:!1,permissionHistory:!1},PhishingController:{},PreferencesController:{advancedGasFee:!0,currentLocale:!0,disabledRpcMethodPreferences:!0,dismissSeedBackUpReminder:!0,featureFlags:!0,forgottenPassword:!0,identities:!1,incomingTransactionsPreferences:!0,isIpfsGatewayEnabled:!1,ipfsGateway:!1,knownMethodData:!1,ledgerTransportType:!0,lostIdentities:!1,openSeaEnabled:!0,preferences:{autoLockTimeLimit:!0,hideZeroBalanceTokens:!0,showExtensionInFullSizeView:!0,showFiatInTestnets:!0,showTestNetworks:!0,smartTransactionsOptInStatus:!0,useNativeCurrencyAsPrimaryCurrency:!0,petnamesEnabled:!0},useExternalServices:!1,selectedAddress:!1,snapRegistryList:!1,theme:!0,signatureSecurityAlertResponses:!1,use4ByteResolution:!0,useAddressBarEnsResolution:!0,useBlockie:!0,useCurrencyRateCheck:!0,useMultiAccountBalanceChecker:!0,useNftDetection:!0,useNonceField:!0,usePhishDetect:!0,useTokenDetection:!0,useRequestQueue:!0,useTransactionSimulations:!0,enableMV3TimestampSave:!0,hasDismissedOpenSeaToBlockaidBanner:!0},SelectedNetworkController:{domains:!1},SignatureController:{unapprovedMsgCount:!0,unapprovedMsgs:!1,unapprovedPersonalMsgCount:!0,unapprovedPersonalMsgs:!1,unapprovedTypedMessages:!1,unapprovedTypedMessagesCount:!0},SmartTransactionsController:{smartTransactionsState:{fees:{approvalTxFees:!0,tradeTxFees:!0},liveness:!0,smartTransactions:!1,userOptIn:!0,userOptInV2:!0}},SnapController:{unencryptedSnapStates:!1,snapStates:!1,snaps:!1},SnapInterface:{interfaces:!1},SnapsRegistry:{database:!1,lastUpdated:!1,databaseUnavailable:!1},SubjectMetadataController:{subjectMetadata:!1},SwapsController:{swapsState:{approveTxId:!1,customApproveTxData:!1,customGasPrice:!0,customMaxFeePerGas:!0,customMaxGas:!0,customMaxPriorityFeePerGas:!0,errorKey:!0,fetchParams:!0,quotes:!1,quotesLastFetched:!0,quotesPollingLimitEnabled:!0,routeState:!0,saveFetchedQuotes:!0,selectedAggId:!0,swapsFeatureFlags:!0,swapsFeatureIsLive:!0,swapsQuotePrefetchingRefreshTime:!0,swapsQuoteRefreshTime:!0,swapsStxBatchStatusRefreshTime:!0,swapsStxGetTransactionsRefreshTime:!0,swapsStxMaxFeeMultiplier:!0,swapsUserFeeLevel:!0,tokens:!1,topAggId:!1,tradeTxId:!1}},TokenDetectionController:{[s.AllProperties]:!1},TokenListController:{preventPollingOnNetworkRestart:!0,tokenList:!1,tokensChainsCache:{[s.AllProperties]:!1}},TokenRatesController:{contractExchangeRates:!1,contractExchangeRatesByChainId:!1},TokensController:{allDetectedTokens:{[s.AllProperties]:!1},allIgnoredTokens:{[s.AllProperties]:!1},allTokens:{[s.AllProperties]:!1},detectedTokens:!1,ignoredTokens:!1,tokens:!1},TransactionController:{transactions:!1,lastFetchedBlockNumbers:!1,methodData:!1},TxController:{transactions:!1},UserOperationController:{userOperations:!1}}),w=Object.values(h).reduce(((e,t)=>({...e,...t})),{});n.SENTRY_UI_STATE={gas:!0,history:!0,metamask:{...w,isInitialized:!0,customNonceValue:!0,isAccountMenuOpen:!0,isNetworkMenuOpen:!0,nextNonce:!0,pendingTokens:!1,welcomeScreenSeen:!0,confirmationExchangeRates:!0,useSafeChainsListValidation:!0,addSnapAccountEnabled:!1,snapsAddSnapAccountModalDismissed:!1,switchedNetworkDetails:!1,switchedNetworkNeverShowMessage:!1,newPrivacyPolicyToastClickedOrClosed:!1,newPrivacyPolicyToastShownDate:!1},unconnectedAccount:!0};function y(e){return e.persistedState?T(e.persistedState):!!e.state&&(e.state.metamask?Boolean(e.state.metamask.participateInMetaMetrics):Boolean(null===(t=e.state.MetaMetricsController)||void 0===t?void 0:t.participateInMetaMetrics));var t}function T(e){var t;return Boolean(null==e||null===(t=e.data)||void 0===t||null===(t=t.MetaMetricsController)||void 0===t?void 0:t.participateInMetaMetrics)}function k(e){return e.match(/^(chrome-extension|moz-extension):\/\//u)?e:""}function b(e){return t=>{if(!e)return null;const n=e();if(!y(n)||!function(e){var t,n;return e.persistedState?Boolean(null===(t=e.persistedState.data)||void 0===t||null===(t=t.OnboardingController)||void 0===t?void 0:t.completedOnboarding):!!e.state&&(e.state.metamask?Boolean(e.state.metamask.completedOnboarding):Boolean(null===(n=e.state.OnboardingController)||void 0===n?void 0:n.completedOnboarding))}(n)||"ui.input"===(null==t?void 0:t.category))return null;return S(t)}}function S(e){var t,n,r;return null!=e&&null!==(t=e.data)&&void 0!==t&&t.url&&(e.data.url=k(e.data.url)),null!=e&&null!==(n=e.data)&&void 0!==n&&n.to&&(e.data.to=k(e.data.to)),null!=e&&null!==(r=e.data)&&void 0!==r&&r.from&&(e.data.from=k(e.data.from)),e}function E(e,t){try{if(function(e){R(e,(e=>{let t=(0,u.default)(e);return 0===t.indexOf("Transaction Failed: known transaction")&&(t="Transaction Failed: known transaction"),t}))}(e),function(e){R(e,(e=>{let t=e;const n=/(([-.+a-zA-Z]+:\/\/)|(www\.))\S+[@:.]\S+/gu;return(t.match(n)||[]).forEach((e=>{try{const n=new URL(e),{hostname:r}=n;Object.values(m).some((e=>r===e||r.endsWith(`.${e}`)))||(t=t.replace(e,"**"))}catch(n){t=t.replace(e,"**")}})),t}))}(e),function(e){R(e,(e=>e.replace(/0x[A-Fa-f0-9]{40}/u,"0x**")))}(e),function(e){var t;null!==(t=e.request)&&void 0!==t&&t.url&&(e.request.url=v(e.request.url));e.exception&&e.exception.values&&e.exception.values.forEach((e=>{e.stacktrace&&e.stacktrace.frames.forEach((e=>{e.filename=v(e.filename)}))}))}(e),t){const n=t();e.extra||(e.extra={}),e.extra.appState=n}}catch(e){console.warn(e)}return e}function R(e,t){"string"==typeof e.message&&(e.message=t(e.message)),e.exception&&e.exception.values&&e.exception.values.forEach((e=>{"string"==typeof e.value&&(e.value=t(e.value))}))}function v(e){var t;if(null===(t=globalThis.location)||void 0===t||!t.origin)return e;const n=null==e?void 0:e.split(globalThis.location.origin)[1];if(!n)return e;return`/metamask${n}`}}}},{package:"$root$",file:"app/scripts/lib/setupSentry.js"}],[93,{"../../../shared/constants/app":4343,"obj-multiplex":3742,pump:3852},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.setupMultiplex=function(e){const t=new r.default;return t.ignoreStream(o.EXTENSION_MESSAGES.CONNECTION_READY),(0,a.default)(e,t,e,(e=>{e&&console.error(e)})),t};var r=s(e("obj-multiplex")),a=s(e("pump")),o=e("../../../shared/constants/app");function s(e){return e&&e.__esModule?e:{default:e}}}}},{package:"$root$",file:"app/scripts/lib/stream-utils.js"}],[97,{"../../../shared/constants/app":4343,"../../../shared/constants/network":4355,"../../../shared/modules/hexstring-utils":4390,"@metamask/transaction-controller":2025,"bn.js":2747,lodash:3638,url:4235},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BnMultiplyByFraction=function(e,t,n){const r=new a.default(t),o=new a.default(n);return e.mul(r).div(o)},n.addHexPrefix=void 0,n.addUrlProtocolPrefix=function(e){let t=e.trim();t.length&&!r.default.parse(t).protocol&&(t=`https://${t}`);if(null!==f(t))return t;return null},n.checkAlarmExists=function(e,t){return e.some((e=>e.name===t))},n.deferredPromise=function(){let e,t;return{promise:new Promise(((n,r)=>{e=n,t=r})),resolve:e,reject:t}},n.formatTxMetaForRpcResult=function(e){const{r:t,s:n,v:r,hash:a,txReceipt:o,txParams:i}=e,{to:u,data:c,nonce:d,gas:l,from:g,value:f,gasPrice:p,accessList:m,maxFeePerGas:h,maxPriorityFeePerGas:w}=i,y={v:r,r:t,s:n,to:u,gas:l,from:g,hash:a,nonce:`${d}`,input:c||"0x",value:f||"0x0",accessList:m||null,blockHash:(null==o?void 0:o.blockHash)||null,blockNumber:(null==o?void 0:o.blockNumber)||null,transactionIndex:(null==o?void 0:o.transactionIndex)||null,type:h&&w?s.TransactionEnvelopeType.feeMarket:s.TransactionEnvelopeType.legacy};h&&w?(y.gasPrice=h,y.maxFeePerGas=h,y.maxPriorityFeePerGas=w):y.gasPrice=p;return y},n.generateRandomId=void 0,n.getChainType=function(e){if(e===u.CHAIN_IDS.MAINNET)return"mainnet";if(u.TEST_CHAINS.includes(e))return"testnet";return"custom"},n.getPlatform=n.getEnvironmentType=void 0,n.getValidUrl=f,n.hexToBn=function(e){return new a.default((0,c.stripHexPrefix)(e),16)},n.isValidDate=void 0,n.isWebUrl=function(e){const t=f(e);return null!==t&&("https:"===t.protocol||"http:"===t.protocol)},n.previousValueComparator=function(e,t){let n,r=!0;return a=>{try{return r?(r=!1,e(t??a,a)):e(n,a)}finally{n=a}}},n.shouldEmitDappViewedEvent=function(e){if(null===e)return!1;const t=e.slice(-4);return parseInt(t,16)%100==0};var r=d(e("url")),a=d(e("bn.js")),o=e("lodash"),s=e("@metamask/transaction-controller"),i=e("../../../shared/constants/app"),u=e("../../../shared/constants/network"),c=e("../../../shared/modules/hexstring-utils");function d(e){return e&&e.__esModule?e:{default:e}}const l=(0,o.memoize)((e=>{const t=new URL(e);return"/popup.html"===t.pathname?i.ENVIRONMENT_TYPE_POPUP:["/home.html"].includes(t.pathname)?i.ENVIRONMENT_TYPE_FULLSCREEN:"/notification.html"===t.pathname?i.ENVIRONMENT_TYPE_NOTIFICATION:i.ENVIRONMENT_TYPE_BACKGROUND}));n.getEnvironmentType=(e=window.location.href)=>l(e);n.getPlatform=()=>{const{navigator:e}=window,{userAgent:t}=e;return t.includes("Firefox")?i.PLATFORM_FIREFOX:"brave"in e?i.PLATFORM_BRAVE:t.includes("Edg/")?i.PLATFORM_EDGE:t.includes("OPR")?i.PLATFORM_OPERA:i.PLATFORM_CHROME};n.addHexPrefix=e=>"string"!=typeof e||e.match(/^-?0x/u)?e:e.match(/^-?0X/u)?e.replace("0X","0x"):e.startsWith("-")?e.replace("-","-0x"):`0x${e}`;const g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";n.generateRandomId=()=>{let e="";for(let t=0;t<20;t++)e+=g.charAt(Math.floor(62*Math.random()));return e};function f(e){try{const t=new URL(e);return 0===t.hostname.length||0===t.pathname.length||t.hostname!==decodeURIComponent(t.hostname)?null:t}catch(e){return null}}n.isValidDate=e=>e instanceof Date}}},{package:"$root$",file:"app/scripts/lib/util.ts"}],[997,{"./errors":998,"./packer":1001,"@metamask/utils":2072},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.decodeSingle=n.decode=n.encodePacked=n.encodeSingle=n.encode=void 0;const r=e("@metamask/utils"),a=e("./errors"),o=e("./packer");n.encode=(e,t,n,r)=>{try{return(0,o.pack)({types:e,values:t,packed:n,tight:r})}catch(e){if(e instanceof a.ParserError)throw new a.ParserError(`Unable to encode value: ${e.message}`,e);throw new a.ParserError(`An unexpected error occurred: ${(0,a.getErrorMessage)(e)}`,e)}};n.encodeSingle=(e,t)=>(0,n.encode)([e],[t]);n.encodePacked=(e,t,r)=>(0,n.encode)(e,t,!0,r);n.decode=(e,t)=>{const n=(0,r.createBytes)(t);try{return(0,o.unpack)(e,n)}catch(e){if(e instanceof a.ParserError)throw new a.ParserError(`Unable to decode value: ${e.message}`,e);throw new a.ParserError(`An unexpected error occurred: ${(0,a.getErrorMessage)(e)}`,e)}};n.decodeSingle=(e,t)=>{const o=(0,n.decode)([e],t);return(0,r.assert)(1===o.length,new a.ParserError("Decoded value array has unexpected length.")),o[0]}}}},{package:"@metamask/abi-utils",file:"node_modules/@metamask/abi-utils/dist/abi.js"}],[998,{"@metamask/utils":2072},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ParserError=n.getErrorStack=n.getErrorMessage=void 0;const r=e("@metamask/utils");n.getErrorMessage=e=>"string"==typeof e?e:e instanceof Error||(0,r.isObject)(e)&&(0,r.hasProperty)(e,"message")&&"string"==typeof e.message?e.message:"Unknown error.";n.getErrorStack=e=>e instanceof Error?e.stack:undefined;class a extends Error{constructor(e,t){super(e),this.name="ParserError";const r=(0,n.getErrorStack)(t);r&&(this.stack=r)}}n.ParserError=a}}},{package:"@metamask/abi-utils",file:"node_modules/@metamask/abi-utils/dist/errors.js"}],[999,{"./abi":997,"./errors":998,"./types":1014},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),a(e("./abi"),n),a(e("./errors"),n),a(e("./types"),n)}}},{package:"@metamask/abi-utils",file:"node_modules/@metamask/abi-utils/dist/index.js"}]],[],{});