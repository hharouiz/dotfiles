/*
 Ctx.silent && jQuery.scrollTo
 Copyright (c) 2007 Ariel Flesler - aflesler ? gmail ? com | https://github.com/flesler
 Licensed under MIT
 https://github.com/flesler/jquery.scrollTo
 @projectDescription Lightweight, cross-browser and highly customizable animated scrolling with jQuery
 @author Ariel Flesler
 @version 2.1.2
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(N,U,E){N instanceof String&&(N=String(N));for(var V=N.length,M=0;M<V;M++){var wa=N[M];if(U.call(E,wa,M,N))return{i:M,v:wa}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(N,U,E){if(N==Array.prototype||N==Object.prototype)return N;N[U]=E.value;return N};$jscomp.getGlobal=function(N){N=["object"==typeof globalThis&&globalThis,N,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var U=0;U<N.length;++U){var E=N[U];if(E&&E.Math==Math)return E}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(N,U){var E=$jscomp.propertyToPolyfillSymbol[U];if(null==E)return N[U];E=N[E];return void 0!==E?E:N[U]};
$jscomp.polyfill=function(N,U,E,V){U&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(N,U,E,V):$jscomp.polyfillUnisolated(N,U,E,V))};$jscomp.polyfillUnisolated=function(N,U,E,V){E=$jscomp.global;N=N.split(".");for(V=0;V<N.length-1;V++){var M=N[V];if(!(M in E))return;E=E[M]}N=N[N.length-1];V=E[N];U=U(V);U!=V&&null!=U&&$jscomp.defineProperty(E,N,{configurable:!0,writable:!0,value:U})};
$jscomp.polyfillIsolated=function(N,U,E,V){var M=N.split(".");N=1===M.length;V=M[0];V=!N&&V in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var wa=0;wa<M.length-1;wa++){var O=M[wa];if(!(O in V))return;V=V[O]}M=M[M.length-1];E=$jscomp.IS_SYMBOL_NATIVE&&"es6"===E?V[M]:null;U=U(E);null!=U&&(N?$jscomp.defineProperty($jscomp.polyfills,M,{configurable:!0,writable:!0,value:U}):U!==E&&($jscomp.propertyToPolyfillSymbol[M]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(M):$jscomp.POLYFILL_PREFIX+
M,M=$jscomp.propertyToPolyfillSymbol[M],$jscomp.defineProperty(V,M,{configurable:!0,writable:!0,value:U})))};$jscomp.polyfill("Array.prototype.findIndex",function(N){return N?N:function(U,E){return $jscomp.findInternal(this,U,E).i}},"es6","es3");$jscomp.polyfill("Array.prototype.find",function(N){return N?N:function(U,E){return $jscomp.findInternal(this,U,E).v}},"es6","es3");
$jscomp.polyfill("Array.prototype.fill",function(N){return N?N:function(U,E,V){var M=this.length||0;0>E&&(E=Math.max(0,M+E));if(null==V||V>M)V=M;V=Number(V);0>V&&(V=Math.max(0,M+V));for(E=Number(E||0);E<V;E++)this[E]=U;return this}},"es6","es3");$jscomp.typedArrayFill=function(N){return N?N:Array.prototype.fill};$jscomp.polyfill("Int8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Uint8ClampedArray.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Float32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Float64Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
void 0==window.diigolet&&function(){function N(a){var c=document.createElement("canvas");c.style.backgroundColor="transparent";var d=c.getContext("2d");c.width=300;c.height=300;580<a.length&&(a=a.substring(0,500)+" ...");d.lineWidth=1;d.font="14px Arial";d.strokeStyle="black";var f=10;a=a.split(" ");for(var h="",k=0;k<a.length;k++){var m=h+a[k]+" ";300<d.measureText(m).width&&0<k?(d.fillText(h,10,f),h=a[k]+" ",f+=24):h=m}d.fillText(h,10,f);d=document.createElement("img");d.src=c.toDataURL();return d}
function U(a){a=a.concat();for(var c=0;c<a.length;++c)for(var d=c+1;d<a.length;++d)a[c]===a[d]&&a.splice(d--,1);return a}function E(){var a=Array.prototype.slice.call(arguments);a.unshift("[Diigolet]");if("never"!=A.logLevel)try{var c=xb.indexOf("debug"),d=xb.indexOf(A.logLevel);-1<c&&-1<d&&c>=d&&window.console&&console.log.apply(console,a)}catch(f){}}function V(){var a=Array.prototype.slice.call(arguments);a.unshift("[Diigolet]");console.log(a,"info")}function M(){for(var a=[].slice.call(arguments),
c=a.shift(),d=0,f=a.length,h;h=a[d],d<f;d++)for(var k in h)c[k]=h[k];return c}function wa(a,c,d){for(var f=0,h=d.length,k;k=d[f],f<h;f++)a[k]=c[k];return a}function O(a,c,d){if(void 0!==a.length)for(var f=0,h=a.length;f<h;f++)c.call(d,a[f],f);else for(f in a)c.call(d,a[f],f)}function bb(a,c,d){for(var f=[],h=0,k=a.length;h<k;h++)c.call(d,a[h],h)&&f.push(a[h]);return f}function ta(a,c,d){for(var f=a.length,h=Array(f),k=0;k<f;k++)h[k]=c.call(d,a[k],k);return h}function yb(a,c,d){for(var f=0,h=a.length;f<
h;f++)if(c.call(d,a[f],f))return!0;return!1}function zb(a,c,d){for(var f=a.length,h=[],k,m=0;m<f;m++)k=c.call(d,a[m],m),null!==k&&h.push(k);return h}function Ka(a,c,d){var f="function"==typeof c;d=d||0;for(var h=a.length,k;k=a[d],d<h;d++)if(f?c(k):k==c)return d;return-1}function Sa(a,c,d){c=Ka(a,c,d);return-1<c?a[c]:null}function Ab(a,c){for(var d=[],f=0,h=a.length,k;k=a[f],f<h;f++)c?Sa(d,function(m){return c(m,k)})||d.push(k):-1==d.indexOf(k)&&d.push(k);return d}function Ub(a){for(var c=Array(a.length),
d=a.length-1,f=0;0<=d;d--,f++)c[f]=a[d];return c}function Ta(a){a=a.replace(/^\s\s*/,"");for(var c=/\s/,d=a.length;c.test(a.charAt(--d)););return a.slice(0,d+1)}function Vb(a,c,d){if(!c.global)throw"string.scan: pattern is not global";for(var f;f=c.exec(a);)d(f)}function cb(a,c,d){for(var f="",h;0<a.length;)if(h=a.match(c)){f+=a.slice(0,h.index);var k=d(h);f+=null==k?"":String(k);a=a.slice(h.index+h[0].length)}else f+=a,a="";return f}function da(a,c){return cb(a,Wb,function(d){if(null==c)return"";
var f=d[1]||"";if("\\"==f)return d[2];var h=c,k=d[3],m=/^([^.[]+|\[((?:.*?[^\\])?)\])(\.|\[|$)/;d=m.exec(k);if(null==d)return f;for(;null!=d;){var q=0===d[1].indexOf("[")?cb(d[2],"\\\\]","]"):d[1];h=h[q];if(null==h||""==d[3])break;k=k.substring("["==d[3]?d[1].length:d[0].length);d=m.exec(k)}return f+(null==h?"":String(h))})}function Xb(a){return $(a)}function X(a){return $("#"+a)}function Ya(a){return!a||0==a.length||(a.match?!!a.match(/^\s*$/):!0)}function db(a){var c=db.options;a=c.parser[c.strictMode?
"strict":"loose"].exec(a);for(var d={},f=14;f--;)d[c.key[f]]=a[f]||"";d[c.q.name]={};d[c.key[12]].replace(c.q.parser,function(h,k,m){k&&(d[c.q.name][k]=m)});return d}function La(a){function c(x,y){var z=x&2147483648;var B=y&2147483648;var D=x&1073741824;var I=y&1073741824;x=(x&1073741823)+(y&1073741823);return D&I?x^2147483648^z^B:D|I?x&1073741824?x^3221225472^z^B:x^1073741824^z^B:x^z^B}function d(x,y,z,B,D,I,J){x=c(x,c(c(y&z|~y&B,D),J));return c(x<<I|x>>>32-I,y)}function f(x,y,z,B,D,I,J){x=c(x,c(c(y&
B|z&~B,D),J));return c(x<<I|x>>>32-I,y)}function h(x,y,z,B,D,I,J){x=c(x,c(c(y^z^B,D),J));return c(x<<I|x>>>32-I,y)}function k(x,y,z,B,D,I,J){x=c(x,c(c(z^(y|~B),D),J));return c(x<<I|x>>>32-I,y)}function m(x){var y="",z;for(z=0;3>=z;z++){var B=x>>>8*z&255;B="0"+B.toString(16);y+=B.substr(B.length-2,2)}return y}var q=[];q=function(x){var y=x.length;var z=y+8;for(var B=16*((z-z%64)/64+1),D=Array(B-1),I,J=0;J<y;)z=(J-J%4)/4,I=J%4*8,D[z]|=x.charCodeAt(J)<<I,J++;z=(J-J%4)/4;D[z]|=128<<J%4*8;D[B-2]=y<<3;
D[B-1]=y>>>29;return D}(a);var n=1732584193;var t=4023233417;var r=2562383102;var w=271733878;for(a=0;a<q.length;a+=16){var G=n;var F=t;var L=r;var u=w;n=d(n,t,r,w,q[a+0],7,3614090360);w=d(w,n,t,r,q[a+1],12,3905402710);r=d(r,w,n,t,q[a+2],17,606105819);t=d(t,r,w,n,q[a+3],22,3250441966);n=d(n,t,r,w,q[a+4],7,4118548399);w=d(w,n,t,r,q[a+5],12,1200080426);r=d(r,w,n,t,q[a+6],17,2821735955);t=d(t,r,w,n,q[a+7],22,4249261313);n=d(n,t,r,w,q[a+8],7,1770035416);w=d(w,n,t,r,q[a+9],12,2336552879);r=d(r,w,n,t,q[a+
10],17,4294925233);t=d(t,r,w,n,q[a+11],22,2304563134);n=d(n,t,r,w,q[a+12],7,1804603682);w=d(w,n,t,r,q[a+13],12,4254626195);r=d(r,w,n,t,q[a+14],17,2792965006);t=d(t,r,w,n,q[a+15],22,1236535329);n=f(n,t,r,w,q[a+1],5,4129170786);w=f(w,n,t,r,q[a+6],9,3225465664);r=f(r,w,n,t,q[a+11],14,643717713);t=f(t,r,w,n,q[a+0],20,3921069994);n=f(n,t,r,w,q[a+5],5,3593408605);w=f(w,n,t,r,q[a+10],9,38016083);r=f(r,w,n,t,q[a+15],14,3634488961);t=f(t,r,w,n,q[a+4],20,3889429448);n=f(n,t,r,w,q[a+9],5,568446438);w=f(w,n,
t,r,q[a+14],9,3275163606);r=f(r,w,n,t,q[a+3],14,4107603335);t=f(t,r,w,n,q[a+8],20,1163531501);n=f(n,t,r,w,q[a+13],5,2850285829);w=f(w,n,t,r,q[a+2],9,4243563512);r=f(r,w,n,t,q[a+7],14,1735328473);t=f(t,r,w,n,q[a+12],20,2368359562);n=h(n,t,r,w,q[a+5],4,4294588738);w=h(w,n,t,r,q[a+8],11,2272392833);r=h(r,w,n,t,q[a+11],16,1839030562);t=h(t,r,w,n,q[a+14],23,4259657740);n=h(n,t,r,w,q[a+1],4,2763975236);w=h(w,n,t,r,q[a+4],11,1272893353);r=h(r,w,n,t,q[a+7],16,4139469664);t=h(t,r,w,n,q[a+10],23,3200236656);
n=h(n,t,r,w,q[a+13],4,681279174);w=h(w,n,t,r,q[a+0],11,3936430074);r=h(r,w,n,t,q[a+3],16,3572445317);t=h(t,r,w,n,q[a+6],23,76029189);n=h(n,t,r,w,q[a+9],4,3654602809);w=h(w,n,t,r,q[a+12],11,3873151461);r=h(r,w,n,t,q[a+15],16,530742520);t=h(t,r,w,n,q[a+2],23,3299628645);n=k(n,t,r,w,q[a+0],6,4096336452);w=k(w,n,t,r,q[a+7],10,1126891415);r=k(r,w,n,t,q[a+14],15,2878612391);t=k(t,r,w,n,q[a+5],21,4237533241);n=k(n,t,r,w,q[a+12],6,1700485571);w=k(w,n,t,r,q[a+3],10,2399980690);r=k(r,w,n,t,q[a+10],15,4293915773);
t=k(t,r,w,n,q[a+1],21,2240044497);n=k(n,t,r,w,q[a+8],6,1873313359);w=k(w,n,t,r,q[a+15],10,4264355552);r=k(r,w,n,t,q[a+6],15,2734768916);t=k(t,r,w,n,q[a+13],21,1309151649);n=k(n,t,r,w,q[a+4],6,4149444226);w=k(w,n,t,r,q[a+11],10,3174756917);r=k(r,w,n,t,q[a+2],15,718787259);t=k(t,r,w,n,q[a+9],21,3951481745);n=c(n,G);t=c(t,F);r=c(r,L);w=c(w,u)}return(m(n)+m(t)+m(r)+m(w)).toLowerCase()}function Ba(a){var c=/lhidgfaliccjjbgkabchckabpdamkphg/g;eb=eb.replace(c,a);Bb=Bb.replace(c,a);fb=fb.replace(c,a);Cb=
Cb.replace(c,a);gb=gb.replace(c,a);hb=hb.replace(c,a);ib=ib.replace(c,a);jb=jb.replace(c,a);kb=kb.replace(c,a);Db=Db.replace(c,a);Eb=Eb.replace(c,a);lb=lb.replace(c,a);mb=mb.replace(c,a);nb=nb.replace(c,a);ob=ob.replace(c,a)}function Ma(a,c){c=void 0===c?850:c;a=$(a).unbind("mouseout").unbind("mouseover");a[0]&&clearTimeout(a[0]._hideTimerId);a.bind("mouseout",function(){a[0]._hideTimerId=setTimeout(function(){a.hide()},c)}).bind("mouseover",function(){clearTimeout(a[0]._hideTimerId)})}function pb(){O([aa,
K,ia,ka,ea,Na,P,Q,Y],function(a){if(a.j){var c=function(d){return function(){Ua=d.clickedOn=!0}}(a);a.j.unbind(".pay4sin").bind("mouseup.pay4sin",c).bind("mousedown.pay4sin",c).bind("keydown.pay4sin",function(d){d.stopPropagation()})}});qb.mousedown(function(a){if("INPUT"==a.target.tagName||"TEXTAREA"==a.target.tagName)rb=!0;else if("diigolet-csm-dropdown"==a.target.id||"diigolet-csm-coloritem"==a.target.className||"diigolet-panel-btnHighlight"==a.target.parentNode.id)Ua=!0;window.getSelection();
mousedownTop=a.pageY;mousedownLeft=a.pageX}).mouseup(Yb).mouseover(Zb).mouseout($b).mousemove(function(a){window.curcorX=a.pageX;window.curcorY=a.pageY});$(document.body).click(function(a){var c=$(a.target);c.hasClass("_diigoLink")&&(sb(c.attr("diigolink")),a.preventDefault())})}function sb(a){var c;"myLibrary"==a?c=A.urls.getUserBookmarksPageURL():"signIn"==a?c=A.urls.getSignInURL()+"?referInfo="+encodeURIComponent("/images/diigo-logo.png#SIGNED_IN"):"signOut"==a?c=A.urls.getSignOutURL():"feedback"==
a?c=A.urls.getFeedbackURL():"followOnTwitter"==a?c=A.urls.getFollowOnTwitterURL():"rating"==a&&(c=A.urls.getRatingURL());c&&A.openURL(c)}function Fb(){var a=[];l.myTagsWithCount.sort(function(f,h){return f.count<=h.count?1:-1});for(var c=l.myTagsWithCount.length,d=0;d<c;d++)a[d]=l.myTagsWithCount[d].name;a={resultsClass:"diigolet ac_results",data:a,mode:"multiple",multipleSeparator:" ,",onItemSelect:function(){aa.clickedOn=!0},id:"diigolet-ac"};try{new Gb("#Diigo-Bookmark-Tag-Input",a)}catch(f){E(f)}}
function Zb(a,c){if(!l.draggingFloatNote){var d=la.isHighlightElement(a.target);if(d){c=S.find(d.ids[0]);c.activate(!0);if(0==d.type||1==d.type)Ga.reset(c),ea.scheduleShow(a,c),pa.showed&&$(".diigoHighlight.id_"+c.id).addClass("hover").attr("draggable",!0);else if(2==d.type||d.type==ANNOTATION_TYPE_ICON){Ga.removeEditMode();Ga.ann=null;var f=K.ann!=c;K.isEditing()||(f||!K.shown?(K.shown&&K.hide(),K.scheduleShow(a,c)):K.cancelHide())}0<c.comments.length&&(0==d.type||1==d.type)&&(Ga.reset(c),Ga.scheduleToggleEdit(!0))}}}
function $b(a,c){!l.draggingFloatNote&&(a=la.isHighlightElement(a.target))&&(c=S.find(a.ids[0]),c.activate(!1),$(".diigoHighlight.id_"+c.id).removeClass("hover"),K.aboutToShow()&&!K.isEditing()&&K.scheduleHide(),Ga.aboutToShow()&&0>=c.comments.length&&Ga.scheduleHide(),Ga.scheduleToggleEdit(!1),ea.scheduleHide())}function Yb(a){ia.clickedOn||$("#diigolet-toolbar .dropdownMenu").hide();!K.shown||K.clickedOn||K.isEditing()||K.hide();rb||Ua||!Za.isTextSelected()?ka.hide():l.isHighlightPen?diigolet.handle(a,
"highlight"):R.get("prefs.autoShowHighlightIcon",function(c){"true"===c&&(ka.direction=a.pageX<mousedownLeft?"reverse":"normal",ka.show(a,"selection"))});ia.clickedOn=aa.clickedOn=K.clickedOn=P.clickedOn=Ua=rb=!1}function ua(){return l.signedIn||(l.notify('Please <a href="#" title="Sign in into Diigo.com" id="signIn">sign in</a> first.',1E3),!1)}function Xa(){Fb();P.onSignIn()}function Hb(){E("onSignOut");l.unpaintAllAnnotations();l.reset();Na.onSignOut();ia.onSignOut();P.onSignOut()}function Ib(){sb("signIn");
T.send({name:"activateMeAfterSignIn"})}function qa(){var a=document.body.id=document.body.id||"dummybodyid";/^[a-zA-Z]/.test(a)||(document.body.id=a="a"+a);a=function(k){var m=/[^\-_a-z0-9U+00A1-]/g;return m.test(k)?k.replace(m,function(q){return"\\"+q.charCodeAt(0).toString(16)+" "}):k}(a);for(var c="",d,f,h=/([^{}@]*)({[^{}]*})/g;d=h.exec(ob);)f=d[1],d=d[2].replace(/\r\n/g,"\n"),c+=$.map(f.split(","),function(k){return/(^|\s)body([\s.\[#]|$)/.test(k)?k.replace("body","body#"+a):/(^|\s)html(\s|$)/.test(k)?
k.replace("html","html body#"+a):"body#"+a+" "+k.replace(/^\s+/m,"")}).join(",")+d+"\n";0==$("head").find('style[id="diigolet-chrome-css"]').length&&(document.createStyleSheet?document.createStyleSheet().cssText=c:$("head").add(document.body).eq(0).append($(document.createElement("style")).attr({type:"text/css",id:"diigolet-chrome-css"}).text(c)))}function Oa(a,c){var d=db(a),f=d.path;if(!/^https?$/i.test(d.protocol)&&!/^ftp?$/i.test(d.protocol))return!1;if(/\.?diigo\./i.test(d.host)){if(/^\/annotated\//i.test(f)||
/(player|slides?)\.diigo\./i.test(d.host)&&/^\/(list|feed)/i.test(f)||/^\/bookmark\//i.test(f)||/^\/cached/i.test(f)||/^\/text_view/i.test(f)||/^\/site\/text_view/i.test(f))return!1;if(/^\/item\/pdf/i.test(f)){if(!c)return!1}else if(/^\/outliner\//i.test(f))return!1}else if(/^https?:\/\/chrome\.google\.com\/(extensions|webstore)/i.test(a))return!1;return!0}function ac(a){var c=[];$.each(a,function(d,f){c.push(encodeURIComponent(d)+"="+encodeURIComponent(f))});return c.join("&")}function xa(a,c,d){this.options=
$.extend({reverse:!1,whatToShow:-1,filter:function(){return!0}},d||{});this.node=a;this.func=c;this.end=!1}function Jb(){0==$("#diigolet-csm").length&&(Q.init(),Ba(chrome.runtime.id),qa(),K.init(),ka.init(),pb())}function ra(a){if("true"==a)return!0;if("false"==a)return!1}function Va(a){$("#diigo-bookmark-frame")[0].contentWindow.postMessage(a,"*")}function Pa(a){$("#diigo-screenshot-frame")[0].contentWindow.postMessage(a,"*")}function Kb(){var a=[];l.myTagsWithCount.sort(function(m,q){return m.count<=
q.count?1:-1});var c=l.myTagsWithCount.slice(0,101),d=c[0].count,f=c.length;c.sort(function(m,q){return m.name.toLowerCase()<=q.name.toLowerCase()?-1:1});for(var h=0;h<f;h++)a[h]=c[h].count;a=U(a);f=a.length;a.sort(function(m,q){return m<q?1:-1});var k=Math.ceil(f/10);f=a.slice(1,1+k);h=a.slice(1+k,1+2*k);a=a.slice(1+2*k,1+3*k);return{topTags:c,maxCount:d,a:f,b:h,c:a}}function Lb(){var a=window.location.href;return".pdf"==a.substring(a.length-4)&&0<$('embed[type="application/pdf"]').length?!0:!1}
var A=window.diigolet={debug:!1,logLevel:"never",version:"3.5.0",show:function(){ia.show();P.show()},callback:function(){C.callback.apply(C,arguments)},devil:function(a){return eval(a)}};window.diigoletrocks=function(){A.logLevel="debug";window.d=window.D=A;window.dj=$;window.devil=window.e=A.devil;window.Bookmark=va;window.Annotation=S;window.TextHighlight=$a;window.ImageHighlight=ya;window.FloatNote=tb;window.Comment=ab;window.PageComment=Ca;window.InlineComment=za;window.Ctx=l;window.Toolbar=ia;
window.DlgBookmark=aa;window.DlgIC=K;window.Utils=H};$.browser.ieBelow7=$.browser.msie&&7>$.browser.version;$.browser.ieBelow8=$.browser.msie&&8>$.browser.version;$.browser.supportPositionFixed=!$.browser.msie||7<=$.browser.version&&$.boxModel;$.fn.extend({showHide:function(a){return a?this.show():this.hide()}});(function(a){a.toJSON=JSON.stringify;a.parseJSON=JSON.parse})(jQuery);var H={dump:function(){window.diigolet.debug&&window.console&&console.log.apply(console,[].slice.call(arguments))},fork:function(a){setTimeout(function(){a()},
13)}},Ha=H;H.lang={isArray:function(a){return a?this.isNumber(a.length)&&this.isFunction(a.splice)&&!this.hasOwnProperty(a.length):!1},isBoolean:function(a){return"boolean"===typeof a},isFunction:function(a){return"function"===typeof a},isNull:function(a){return null===a},isNumber:function(a){return"number"===typeof a&&isFinite(a)},isObject:function(a){return a&&("object"===typeof a||this.isFunction(a))||!1},isString:function(a){return"string"===typeof a},isUndefined:function(a){return"undefined"===
typeof a},hasOwnProperty:function(a,c){return Object.prototype.hasOwnProperty?a.hasOwnProperty(c):!this.isUndefined(a[c])&&a.constructor.prototype[c]!==a[c]},extend:function(){for(var a=[].slice.call(arguments),c=a.shift(),d=0,f=a.length,h;h=a[d],d<f;d++)for(var k in h)c[k]=h[k];return c},protectiveExtend:function(a,c){for(var d in c)void 0!==a[d]&&(a[d]=c[d])},extendFiltered:function(){for(var a=[].slice.call(arguments),c=a.shift(),d=a.pop(),f=0,h=a.length,k;k=a[f],f<h;f++)for(var m in k){var q=
d(m);q&&(c[!0===q?m:q]=k[m])}return c},toArray:function(a){return[].slice.call(a)},toBoolean:function(a){return a?"false"!=a&&"0"!=a:!1},each:function(a,c,d){if(a.forEach)a.forEach(c,d);else for(var f in a)c.call(d,a[f],f)}};H.lang.extend(H,H.lang);H.array={findIndex:function(a,c,d){d=d||0;for(var f=a.length,h;h=a[d],d<f;d++)if(c(h))return d;return-1},find:function(a,c,d){c=this.findIndex(a,c,d);return-1<c?a[c]:null},concatMe:function(a,c){[].splice.apply(a,[a.length,0].concat(c));return a},unique:function(a,
c){for(var d=[],f=0,h=a.length,k;k=a[f],f<h;f++)c?this.find(d,function(m){return c(m,k)})||d.push(k):-1==d.indexOf(k)&&d.push(k);return d},reverse:function(a){for(var c=Array(a.length),d=a.length-1,f=0;0<=d;d--,f++)c[f]=a[d];return c}};H.string={md5:function(a){function c(x,y){var z=x&2147483648;var B=y&2147483648;var D=x&1073741824;var I=y&1073741824;x=(x&1073741823)+(y&1073741823);return D&I?x^2147483648^z^B:D|I?x&1073741824?x^3221225472^z^B:x^1073741824^z^B:x^z^B}function d(x,y,z,B,D,I,J){x=c(x,
c(c(y&z|~y&B,D),J));return c(x<<I|x>>>32-I,y)}function f(x,y,z,B,D,I,J){x=c(x,c(c(y&B|z&~B,D),J));return c(x<<I|x>>>32-I,y)}function h(x,y,z,B,D,I,J){x=c(x,c(c(y^z^B,D),J));return c(x<<I|x>>>32-I,y)}function k(x,y,z,B,D,I,J){x=c(x,c(c(z^(y|~B),D),J));return c(x<<I|x>>>32-I,y)}function m(x){var y="",z;for(z=0;3>=z;z++){var B=x>>>8*z&255;B="0"+B.toString(16);y+=B.substr(B.length-2,2)}return y}var q=[];q=function(x){var y=x.length;var z=y+8;for(var B=16*((z-z%64)/64+1),D=Array(B-1),I,J=0;J<y;)z=(J-J%
4)/4,I=J%4*8,D[z]|=x.charCodeAt(J)<<I,J++;z=(J-J%4)/4;D[z]|=128<<J%4*8;D[B-2]=y<<3;D[B-1]=y>>>29;return D}(a);var n=1732584193;var t=4023233417;var r=2562383102;var w=271733878;for(a=0;a<q.length;a+=16){var G=n;var F=t;var L=r;var u=w;n=d(n,t,r,w,q[a+0],7,3614090360);w=d(w,n,t,r,q[a+1],12,3905402710);r=d(r,w,n,t,q[a+2],17,606105819);t=d(t,r,w,n,q[a+3],22,3250441966);n=d(n,t,r,w,q[a+4],7,4118548399);w=d(w,n,t,r,q[a+5],12,1200080426);r=d(r,w,n,t,q[a+6],17,2821735955);t=d(t,r,w,n,q[a+7],22,4249261313);
n=d(n,t,r,w,q[a+8],7,1770035416);w=d(w,n,t,r,q[a+9],12,2336552879);r=d(r,w,n,t,q[a+10],17,4294925233);t=d(t,r,w,n,q[a+11],22,2304563134);n=d(n,t,r,w,q[a+12],7,1804603682);w=d(w,n,t,r,q[a+13],12,4254626195);r=d(r,w,n,t,q[a+14],17,2792965006);t=d(t,r,w,n,q[a+15],22,1236535329);n=f(n,t,r,w,q[a+1],5,4129170786);w=f(w,n,t,r,q[a+6],9,3225465664);r=f(r,w,n,t,q[a+11],14,643717713);t=f(t,r,w,n,q[a+0],20,3921069994);n=f(n,t,r,w,q[a+5],5,3593408605);w=f(w,n,t,r,q[a+10],9,38016083);r=f(r,w,n,t,q[a+15],14,3634488961);
t=f(t,r,w,n,q[a+4],20,3889429448);n=f(n,t,r,w,q[a+9],5,568446438);w=f(w,n,t,r,q[a+14],9,3275163606);r=f(r,w,n,t,q[a+3],14,4107603335);t=f(t,r,w,n,q[a+8],20,1163531501);n=f(n,t,r,w,q[a+13],5,2850285829);w=f(w,n,t,r,q[a+2],9,4243563512);r=f(r,w,n,t,q[a+7],14,1735328473);t=f(t,r,w,n,q[a+12],20,2368359562);n=h(n,t,r,w,q[a+5],4,4294588738);w=h(w,n,t,r,q[a+8],11,2272392833);r=h(r,w,n,t,q[a+11],16,1839030562);t=h(t,r,w,n,q[a+14],23,4259657740);n=h(n,t,r,w,q[a+1],4,2763975236);w=h(w,n,t,r,q[a+4],11,1272893353);
r=h(r,w,n,t,q[a+7],16,4139469664);t=h(t,r,w,n,q[a+10],23,3200236656);n=h(n,t,r,w,q[a+13],4,681279174);w=h(w,n,t,r,q[a+0],11,3936430074);r=h(r,w,n,t,q[a+3],16,3572445317);t=h(t,r,w,n,q[a+6],23,76029189);n=h(n,t,r,w,q[a+9],4,3654602809);w=h(w,n,t,r,q[a+12],11,3873151461);r=h(r,w,n,t,q[a+15],16,530742520);t=h(t,r,w,n,q[a+2],23,3299628645);n=k(n,t,r,w,q[a+0],6,4096336452);w=k(w,n,t,r,q[a+7],10,1126891415);r=k(r,w,n,t,q[a+14],15,2878612391);t=k(t,r,w,n,q[a+5],21,4237533241);n=k(n,t,r,w,q[a+12],6,1700485571);
w=k(w,n,t,r,q[a+3],10,2399980690);r=k(r,w,n,t,q[a+10],15,4293915773);t=k(t,r,w,n,q[a+1],21,2240044497);n=k(n,t,r,w,q[a+8],6,1873313359);w=k(w,n,t,r,q[a+15],10,4264355552);r=k(r,w,n,t,q[a+6],15,2734768916);t=k(t,r,w,n,q[a+13],21,1309151649);n=k(n,t,r,w,q[a+4],6,4149444226);w=k(w,n,t,r,q[a+11],10,3174756917);r=k(r,w,n,t,q[a+2],15,718787259);t=k(t,r,w,n,q[a+9],21,3951481745);n=c(n,G);t=c(t,F);r=c(r,L);w=c(w,u)}return(m(n)+m(t)+m(r)+m(w)).toLowerCase()},strip:function(a){return a.replace(/^\s+/,"").replace(/\s+$/,
"")},trim:function(a){return this.strip(a)},strip2:function(a){return a.replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")},trim2:function(a){return this.strip2(a)},evalTpl:function(a,c){c.toTemplateReplacements&&(c=c.toTemplateReplacements());return a.replace(/(^|.|\r|\n)(#\{(.*?)\})/g,function(d,f,h,k){if(null==c)return"";d=f||"";if("\\"==d)return h;h=c;f=/^([^.[]+|\[((?:.*?[^\\])?)\])(\.|\[|$)/;var m=f.exec(k);if(null==m)return"";for(;null!=m;){var q="["==m[1][0]?m[2].replace(/\\\\]/g,"]"):
m[1];h=h[q];if(null==h||""==m[3])break;k=k.substring("["==m[3]?m[1].length:m[0].length);m=f.exec(k)}return d+(null==h?"":String(h))})},parseQuery:function(a,c){a=H.string.strip(a).match(/([^?#]*)(#.*)?$/);if(!a)return{};var d={};H.each(a[1].split(c||"&"),function(f){if((f=f.split("="))[0]){var h=decodeURIComponent(f.shift());f=1<f.length?f.join("="):f[0];void 0!=f&&(f=decodeURIComponent(f));h in d?(H.isArray(d[h])||(d[h]=[d[h]]),d[h].push(f)):d[h]=f}});return d},toQueryString:function(a){var c=function(f,
h){f=encodeURIComponent(f);void 0===h?d.push(f):d.push(f+"="+(null==h?"":encodeURIComponent(h)))},d=[];H.each(a,function(f,h){h&&(f&&"object"==typeof f?H.isArray(f)&&H.each(f,function(k){c(h,k)}):c(h,f))});return d.join("&")},escapeRegexp:function(a){arguments.callee.sRE||(arguments.callee.sRE=/(\/|\.|\*|\+|\?|\||\(|\)|\[|\]|\{|\}|\\)/g);return a.replace(arguments.callee.sRE,"\\$1")},stripTags:function(a){return a.replace(/<\/?[^>]+>/gi,"").replace(/[<>]/g,"")},stripScripts:function(a){return a.replace(/<script[^>]*>([\S\s]*?)<\/script>/img,
"")},scan:function(a,c,d){if(!c.global)throw"string.scan: pattern is not global";for(var f;f=c.exec(a);)d(f)},split:function(a,c){return(a=this.strip(a||""))?a.split(c):[]},truncate:function(a,c,d){if(a.length<=c)return a;"string"!=typeof d&&(d="...");return a.substr(0,c-d.length)+d}};H.url={isSubDomainOf:function(a,c){}};H.dom={build2:function(){var a=[],c=arguments,d=0,f;for(c=c[0]instanceof Array?c[0]:c;d<c.length;d++)if(c[d+1]instanceof Object){var h=a[a.length]=document.createElement(c[d]);for(f in c[++d])h.setAttribute(f,
c[d][f]);if(c[d+1]instanceof Array){var k=arguments.callee(c[++d]);for(f=0;f<k.length;f++)h.appendChild(k[f])}}else a[a.length]=document.createTextNode(c[d]);return a},buildOne:function(a,c,d){return this.build2(a,c,d)[0]},isChildOf:function(a,c){for(;a&&(a=a.parentNode);)if(a==c)return!0;return!1},HTML_addCSS:function(a,c,d){var f=a.createElement("style");f.setAttribute("type","text/css");d&&f.setAttribute("id",d);f.appendChild(a.createTextNode(c));(a.getElementsByTagName("head")[0]||a.body).appendChild(f)}};
var xb=["debug","info","error"];Array.prototype.indexOf||(Array.prototype.indexOf=function(a,c){var d=this.length;c=Number(c)||0;c=0>c?Math.ceil(c):Math.floor(c);for(0>c&&(c+=d);c<d;c++)if(c in this&&this[c]===a)return c;return-1});var Wb=/(^|.|\r|\n)(#\{(.*?)\})/;H={parseColor:function(a){var c={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],
darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,
128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]};return c[a]?{r:c[a][0],g:c[a][1],b:c[a][2]}:(result=/^rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)$/.exec(a))?{r:parseInt(result[1]),g:parseInt(result[2]),b:parseInt(result[3])}:(result=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)%\s*,\s*([0-9]+(?:\.[0-9]+)?)%\s*,\s*([0-9]+(?:\.[0-9]+)?)%\s*\)$/.exec(a))?{r:2.55*parseFloat(result[1]),g:2.55*parseFloat(result[2]),
b:2.55*parseFloat(result[3])}:(result=/^#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/.exec(a))?{r:parseInt("0x"+result[1]+result[1]),g:parseInt("0x"+result[2]+result[2]),b:parseInt("0x"+result[3]+result[3])}:(result=/^#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/.exec(a))?{r:parseInt("0x"+result[1]),g:parseInt("0x"+result[2]),b:parseInt("0x"+result[3])}:{r:255,g:255,b:255}},dom:{build:function(){var a=[],c=arguments,d=0,f;for(c=c[0]instanceof Array?c[0]:c;d<c.length;d++)if(c[d+1]instanceof Object){var h=
a[a.length]=document.createElement(c[d]);for(f in c[++d])h.setAttribute(f,c[d][f]);if(c[d+1]instanceof Array){var k=arguments.callee(c[++d]);for(f=0;f<k.length;f++)h.appendChild(k[f])}}else a[a.length]=document.createTextNode(c[d]);return a},buildOne:function(a,c,d){return this.build(a,c,d)[0]},getSelection:function(){return window.getSelection?window.getSelection().toString():document.getSelection?document.getSelection():document.selection.createRange().text}},content2Html:function(a){return this.safeHtml(a).replace(/\n/g,
"<br/>")},safeHtml:function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}};if("undefined"==typeof Wa)var Wa={};Wa.URLParser=function(a){this._fields={Username:4,Password:5,Port:7,Protocol:2,Host:6,Pathname:8,URL:0,Querystring:9,Fragment:10};this._values={};this._regex=null;this.version=.1;this._regex=/^((\w+):\/\/)?((\w+):?(\w+)?@)?([^\/\?:]+):?(\d+)?(\/?[^\?#]+)?\??([^#]+)?#?(\w*)/;for(var c in this._fields)this["get"+c]=this._makeGetter(c);"undefined"!=typeof a&&this._parse(a)};
Wa.URLParser.prototype.setURL=function(a){this._parse(a)};Wa.URLParser.prototype._initValues=function(){for(var a in this._fields)this._values[a]=""};Wa.URLParser.prototype._parse=function(a){this._initValues();a=this._regex.exec(a);if(!a)throw"DPURLParser::_parse -> Invalid URL";for(var c in this._fields)"undefined"!=typeof a[this._fields[c]]&&(this._values[c]=a[this._fields[c]])};Wa.URLParser.prototype._makeGetter=function(a){return function(){return this._values[a]}};db.options={strictMode:!1,
key:"source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};
var ma=function(){};ma.extend=function(a,c){var d=ma.prototype.extend;ma._prototyping=!0;var f=new this;d.call(f,a);delete ma._prototyping;var h=f.constructor,k=f.constructor=function(){if(!ma._prototyping)if(this._constructing||this.constructor==k)this._constructing=!0,h.apply(this,arguments),delete this._constructing;else if(null!=arguments[0])return(arguments[0].extend||d).call(arguments[0],f)};k.ancestor=this;k.extend=this.extend;k.forEach=this.forEach;k.implement=this.implement;k.prototype=f;
k.toString=this.toString;k.valueOf=function(m){return"object"==m?k:h.valueOf()};d.call(k,c);"function"==typeof k.init&&k.init();return k};ma.prototype={extend:function(a,c){if(1<arguments.length){var d=this[a];if(d&&"function"==typeof c&&(!d.valueOf||d.valueOf()!=c.valueOf())&&/\bbase\b/.test(c)){var f=c.valueOf();c=function(){var t=this.base||ma.prototype.base;this.base=d;var r=f.apply(this,arguments);this.base=t;return r};c.valueOf=function(t){return"object"==t?c:f};c.toString=ma.toString}this[a]=
c}else if(a){var h=ma.prototype.extend;ma._prototyping||"function"==typeof this||(h=this.extend||h);for(var k={toSource:null},m=["constructor","toString","valueOf"],q=ma._prototyping?0:1;n=m[q++];)a[n]!=k[n]&&h.call(this,n,a[n]);for(var n in a)k[n]||h.call(this,n,a[n])}return this},base:function(){}};ma=ma.extend({constructor:function(a){this.extend(a)}},{ancestor:Object,version:"1.1",forEach:function(a,c,d){for(var f in a)void 0===this.prototype[f]&&c.call(d,a[f],f,a)},implement:function(){for(var a=
0;a<arguments.length;a++)if("function"==typeof arguments[a])arguments[a](this.prototype);else this.prototype.extend(arguments[a]);return this},toString:function(){return String(this.valueOf())}});jQuery.Draggable=function(a,c){function d(r){if(0==r.button)return m=!1,k(document).bind("mousemove",f).bind("mouseup",h),n=r.pageX,t=r.pageY,!1}function f(r){m||q.beforeDrag(r);m=!0;var w=parseInt(a.css("left")),G=parseInt(a.css("top")),F=r.pageX-n,L=r.pageY-t;q.onDrag(a,{ox:F,oy:L})&&a.css({left:w+F,top:G+
L});n=r.pageX;t=r.pageY;return!1}function h(r){k(document).unbind("mousemove",f).unbind("mouseup",h);return m?(q.afterDrag(r),!1):!0}var k=jQuery,m=!1;a=this.ele=k(a);a[0]._draggable&&a[0]._draggable.destroy();a[0]._draggable=this;var q=this.options=k.extend({handle:"",cursor:"move",onDrag:function(){return!0},beforeDrag:function(){},afterDrag:function(){}},c||{});q.handle=q.handle?k(q.handle,a):a;q.handle.css({cursor:q.cursor});var n,t;this.destroy=function(){q.handle.unbind("mousedown",d)};q.handle.bind("mousedown",
d)};var Gb=function(a,c){function d(u){var x=-1,y="";$.each(F.multipleSeparator,function(z,B){(z=u.lastIndexOf(B))>x&&(y=B,x=z)});return[x,y]}function f(){L.hide()}function h(u){switch(u.keyCode){case 38:u.preventDefault();m(-1);break;case 40:u.preventDefault();m(1);break;case 9:case 13:L.is(":visible")&&(k()?L.hide():m(1),u.preventDefault(),u.stopPropagation());break;case 27:L.is(":visible")&&(u.preventDefault(),u.stopPropagation(),L.hide());break;case 32:L.is(":visible")&&(u.stopPropagation(),L.hide());
break;default:G=-1,w&&clearTimeout(w),w=setTimeout(function(){r.val().length<F.minChars?L.hide():q(r.val())},F.delay)}}function k(u){void 0!==u&&(G=u,m(0));u=G;if(!(0>u)){var x=L.find("li").eq(u).text();0<=x.indexOf(" ")&&(x='"'+x+'"');if("multiple"==F.mode){u=r.val();var y=d(u);new_value=1<=y[0]?u.substr(0,y[0]+1)+x+y[1]:x+" "}else new_value=x;r.val(new_value);r.trigger("input");L.hide();F.onItemSelect&&setTimeout(function(){F.onItemSelect(x)},1);setTimeout(function(){r[0].focus();var z=r[0],B=r.val().length;
z.createTextRange?(z=z.createTextRange(),z.move("character",B),z.select()):0<=z.selectionStart&&(z.focus(),z.setSelectionRange(B,B))},13);return!0}}function m(u){var x=L.find("li");0!=x.size()&&(G+=u,0>G?G=x.size()-1:G>=x.size()&&(G=0),x.removeClass("over").eq(G).addClass("over"))}function q(u){if("multiple"==F.mode){var x=d(u),y="";y=0<x[0]?u.substr(x[0]+1):u;if(0<y.length)tags=A.parseTags(y,!0),u=tags.pop();else{u=y;L.hide();return}}u=u.toLowerCase();x=[];y=[];for(var z=0,B;B=F.data[z],z<F.data.length;z++)0==
B.toLowerCase().indexOf(u)?x.push(B):0!=B.toLowerCase().indexOf(u)&&-1!=B.toLowerCase().indexOf(u)&&y.push(B);y.sort(function(D,I){return D.indexOf(u)<=I.indexOf(u)?-1:1});x=x.concat(y);n(u,x)}function n(u,x){x&&0<x.length?(8<x.length&&x.splice(7,99999),u=function(y){for(var z=y.offsetLeft||0,B=y.offsetTop||0;y=y.offsetParent;)z+=y.offsetLeft,B+=y.offsetTop;$.browser.opera&&"CSS1Compat"!=document.compatMode&&(B+=30);return{x:z+0,y:B+0}}(r[0]),L.find("li").unbind(),L.find("ul").html($.map(x,function(y){return"<li>"+
y+"</li>"}).join("")).end().css({top:u.y+r[0].offsetHeight,left:u.x}).show(),L.find("li").mouseover(function(y){G=L.find("li").index(y.target);m(0)}).mousedown(function(y){G=L.find("li").index(y.target);m(0);k();return!1})):L.hide()}function t(u){L.hide()}var r=$(a),w,G=-1;r[0].autoCompleter&&r[0].autoCompleter.destroy();r[0].autoCompleter=this;var F=c=$.extend({inputClass:"ac_input",resultsClass:"ac_results",minChars:1,delay:100,matchCase:0,matchSubset:1,matchContains:0,mustMatch:0,loadingClass:"ac_loading",
selectFirst:!1,selectOnly:!1,mode:"multiple",multipleSeparator:" "},c||{});"string"==typeof F.multipleSeparator&&(F.multipleSeparator=F.multipleSeparator.split(""));this.destroy=function(){r.unbind("keydown",h).unbind("blur",t);$(window).unbind("scroll",f);r[0].autoCompleter=null};r.attr("autocomplete","off").addClass(F.inputClass).bind("keydown",h).bind("blur",t);$.browser.supportPositionFixed||$(window).bind("scroll",f);var L=$("#"+c.id);0==L.size()&&(L=$('<div id="'+c.id+'"><ul></ul></div>').addClass(F.resultsClass).hide().css({position:$.browser.supportPositionFixed?
"fixed":"absolute"}).appendTo(document.body).hide(),$.browser.ieBelow7&&L.append(document.createElement("<iframe class=\"bgiframe\" src=\"javascript:false;document.write('');\" tabindex=\"-1\" style=\"display:block; position:absolute; top: expression(((parseInt(this.parentNode.currentStyle.borderTopWidth)  || 0) * -1) + 'px'); left:expression(((parseInt(this.parentNode.currentStyle.borderLeftWidth) || 0) * -1) + 'px'); z-index:-1; filter:Alpha(Opacity='0'); width:expression(this.parentNode.offsetWidth + 'px'); height:expression(this.parentNode.offsetHeight + 'px')\"/>")))},
eb='<div id="diigolet-toolbar" class="diigolet" title="Diigolet version #{DIIGOLET_VERSION}"><div id="diigolet-tb-content"><div id="diigolet-tb-bar"><a id="diigolet-tb-btnHide" href="#" class="_hoverAndHideDropdown" onclick="return diigolet.handle(event, \'hideToolbar\');" title="Hide the toolbar"></a><a style="\n              float: right;\n              width: 30px;\n              height: 24px;\n              background: url(\'chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigoletHelp.gif\')\n                no-repeat 50% 50%;\n            " href="#" onmouseover="return diigolet.handle(event, \'showHelp\');" onclick="return diigolet.handle(event, \'showHelp\');" title="Help"></a><a id="diigolet-tb-btnMore" href="#" class="diigoletButton hover" onclick="return false;" onmouseover="return diigolet.handle(event, \'tb_showDropDownMenu\', \'#diigolet-tb-moreMenu\')"><b class="outer"><b>Diigo</b></b></a\n          ><a id="diigolet-tb-btnBookmark" href="#" class="diigoletButton" onclick="diigolet.handle(event, \'bookmark\');" title="Bookmark this page"><b class="outer"><b>Bookmark</b></b></a\n          ><a id="diigolet-button-highlight" href="#" class="diigoletButton" onmouseout="diigolet.handle(event, \'outHighlight\');" onmouseover="diigolet.handle(event, \'overHighlight\');" onmousedown="this.blur();return diigolet.handle(event, \'highlight\');" onclick="return false;" title="Selected some text to highlight"><b class="outer"><b>Highlight</b></b></a\n          ><a id="diigolet-button-highlight-dropdown" href="#" class="diigoletButton" onmouseout="diigolet.handle(event, \'outHighlight\');" onmouseover="diigolet.handle(event, \'overHighlight\');" onmousedown="this.blur();return diigolet.handle(event, \'dropDownColorMenu\');" onclick="return false;"></a><a id="diigolet-tb-btnFloatNote" href="#" class="diigoletButton" title="Add a sticky note" onclick="diigolet.handle(event, \'addStickyNote\')"><b class="outer"><b>Floating Sticky Note</b></b></a\n          ><a id="diigolet-tb-btnComment" href="#" class="diigoletButton" title="View comments" onclick="return diigolet.handle(event, \'tb_viewComments\')"><b class="outer"><b>Comment</b></b></a\n          ><span id="diigoDivInfo" style="padding-left: 25px; float: left"><span style="display: none" id="diigolet-tb-forward">Annotated\n              <a href="#" class="_forwardPageUrl" title="Go to the original page">page</a\n              >\n              by <a href="#" class="_forwardUserUrl" title=""></a>. </span\n            ><span class="_info"></span\n          ></span></div><div id="diigolet-tb-signInMenu" class="dropdownMenu" style="left: 1px; width: 80px"><a href="#" title="Sign in into Diigo.com" onclick="return diigolet.handle(event, \'tb_signIn\')">Sign in</a\n          ><a href="#{URL_DIIGO}/sign-up" title="Create a Diigo account" target="_blank">Sign up</a\n          ></div><div id="diigolet-tb-moreMenu" class="dropdownMenu" style="left: 10px" onclick="this.style.display = \'none\'"><a href="#" class="_URL_MY_LIBRARY _diigomenu" title="My Library" target="_blank">My Library</a\n          ><a href="#" class="_URL_MY_LIST _diigomenu" title="My lists home" target="_blank">My lists home</a\n          ><a href="#" class="_URL_MY_GROUP _diigomenu" title="My groups home" target="_blank">My groups home</a\n          ><a href="#" class="_URL_NETWORK _diigomenu" title="My Network" target="_blank">My Network</a\n          ><a href="#" class="_URL_HOT_BOOKMARK _diigomenu" title="Hot Bookmark" target="_blank">Hot Bookmark</a\n          ><div><img style="height: 2px; width: 140px" src="chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigoletToobarSep.png"\n            /></div><a href="#" title="Show/hide highlight" onclick="diigolet.handle(event, \'showHideHighlight\')">Show/hide highlight</a\n          ></div><div id="diigolet-tb-colorMenu" class="dropdownMenu" style="left: 329px" onclick="this.style.display = \'none\'"><a href="#" id="diigolet-colorMenu-yellow" onclick="diigolet.handle(event, \'ChangeColor\', \'yellow\')"><b class="colorItem"><b>Yellow</b></b></a\n          ><a href="#" id="diigolet-colorMenu-blue" onclick="diigolet.handle(event, \'ChangeColor\', \'blue\')"><b class="colorItem"><b>Blue</b></b></a\n          ><a href="#" id="diigolet-colorMenu-green" onclick="diigolet.handle(event, \'ChangeColor\', \'green\')"><b class="colorItem"><b>Green</b></b></a\n          ><a href="#" id="diigolet-colorMenu-pink" onclick="diigolet.handle(event, \'ChangeColor\', \'pink\')"><b class="colorItem"><b>Pink</b></b></a\n          ></div><div style="clear: both"></div></div><div id="diigolet-tb-shadow"></div><div id="diigolet-help"><div class="diigolet-closeBtn" onclick="diigolet.handle(event, \'hideHelp\')"></div><p>\n          To highlight, select some text and click "Highlight" on the context\n          menu.\n        </p><p>\n          To add a sticky note, move your mouse over highlighted text and the\n          click "Add Sticky Notes" on the context menu.\n        </p><p><a target="_blank" href="https://help.diigo.com/no-toolbar-simple-diigolet/use-diigolet" title="View full Help">View full help</a\n          ></p></div><div id="diigolet-notify" class="diigolet"><span></span></div><div id="diigolet-annotationSummary" style="width: 360px; display: none"></div></div>\n',
Bb='<div id="diigolet-tray" class="diigolet" onmouseover="diigolet.handle(event, \'mouseOnBorder\');"></div>\n',fb='<div class="diigolet" id="diigolet-tagForward"><div id="diigolet-tagForward-topBar" class="_dragHandle"><span class="topBar-title">Save to Diigo</span><span class="focus-research-tip">(focus research)</span><div id="diigolet-tagForward-remove"\n          data-gtooltip="Saved on April 24,2013"><span></span></div></div><div id="diigolet-Bookmark-Form"><div id="Diigo-outliner"><div id="diigo-list-add"><div class="diigo-alert-tip"><span>Name existed !</span><div class="diigo-alert-tip-arrow"></div></div><input type="text" id="diigo-list-addInput" /><div id="diigo-list-addBtn"><span class="label">Create</span><span class="spinner"></span></div><a id="diigo-list-addCancel">Cancel</a></div><div id="diigo-list-add-tip">\n            You have reach the limit of outliner.\n            <a href="" id="diigo-w-cancel">Cancel</a\n            ><a href="" id="diigo-w-upgrade">Upgrade</a></div><div id="diigo-list"><select></select></div></div><div id="Diigo-Bookmark-Title"><div id="link-icon" data-gtooltip="Edit url"></div><input type="text" id="Diigo-Bookmark-Title-Input" value="DISQUS - Elevating the discussion"\n          /><div class="diigo-alert-tip"><span>Please input a bookmark title</span><div class="diigo-alert-tip-arrow"></div></div></div><div id="Diigo-Bookmark-Url"><input type="text" id="Diigo-Bookmark-Url-Input" value="https://disqus.com"\n          /><div id="url-arrow"></div><div class="diigo-alert-tip"><span>Please input a valid url</span><div class="diigo-alert-tip-arrow"></div></div></div><div id="Diigo-Bookmark-Options"><div id="Diigo-Bookmark-Privacy" class="diigo-option"\n            data-gtooltip="private"><div class="op-checkbox-container" title="Make this bookmark private"><div class="op-checkbox"></div><div class="op-label">Private</div></div></div><div id="Diigo-Bookmark-Unread" class="diigo-option"\n            data-gtooltip="readlater"><div class="op-checkbox-container" title="Mark this bookmark as unread"\n              v\n            ><div class="op-checkbox"></div><div class="op-label">Read Later</div></div></div><div id="Diigo-Bookmark-uploadCache" class="diigo-option"\n            data-gtooltip="cache"><div class="op-checkbox-container" title="Upload a copy of the page"><div class="op-checkbox"></div><div class="op-label">Cache</div></div></div></div><div id="Diigo-Bookmark-Description"><textarea id="Diigo-Bookmark-Description-Input" placeholder="Add description"></textarea></div><div id="Diigo-Bookmark-Tag"><div id="Diigo-Bookmark-Tag-Wrapper"><span id="Diigo-Bookmark-Tag-dropdown"></span><input type="text" id="Diigo-Bookmark-Tag-Input" placeholder="Input or select tags"\n            /></div></div><div id="Diigo-Bookmark-Tag-suggestion"><div id="diigolet-bm-tagListContainer-recent" class="diigo-su-tag"><a href="javascript:void(0)" title="Select to add all">Recent Tags:</a\n            ></div><div id="diigolet-bm-tagListContainer-recommend" class="diigo-su-tag"><a href="javascript:void(0)">Recommended:</a>\x3c!--<div class="loading"></div>--\x3e</div><div id="diigolet-bm-tagListContainer-group" class="diigo-su-tag"><a href="javascript:void(0)">Group dictionary:</a><div class="loading"></div></div></div><div id="Diigo-Bookmark-Tag-Cloud"><div>\n            Select from your top 100 tags:\n            <a href="#" id="Diigo-Bookmark-Tag-Eidt" target="_blank">Edit tags &gt;&gt;</a\n            ></div><div id="Diigo-Bookmark-Tag-Cloud-Container"></div></div><div id="diigo-list-group"><div id="diigo-group"><select></select></div></div></div><div id="Diigo-Bookmark-bottom"><div id="Diigo-Bookmark-checkShareExisting"><div class="op-checkbox-container checked"><div class="op-checkbox"></div><div class="op-label">Share my existing annotations</div></div></div><div id="diigolet-dlgBm-btnSave">Save</div><a id="diigolet-dlgBm-btnCancel">cancel</a></div></div>\n',
Cb='<div id="diigolet-twitter" class="diigolet"><table width="100%" border="0" cellspacing="4" cellpadding="2"><tr><td><img width="210px" height="49px" src="https://assets3.twitter.com/images/twitter.png"\n            /></td></tr><tr><td><p>Share this bookmark with friends on Twitter</p></td></tr><tr><td><fieldset><legend>Input your message</legend><textarea id="message-editor" onkeyup="diigolet.handle(event, \'OnTwitterMsgChange\')" style="\n                  margin-top: 5px;\n                  margin-bottom: 5px;\n                  width: 361px;\n                  height: 113px;\n                "></textarea><span style="margin-right: 5px" id="left-count">51</span\n              >characters left\n            </fieldset></td></tr><tr><td colspan="2" style="text-align: right"><input type="button" class="diigo-button" onclick="return diigolet.handle(event, \'TwitterPost\')" value="Post"\n            /><input type="button" class="diigo-button" onclick="return diigolet.handle(event, \'TwitterCancel\')" value="Cancel" style="font-weight: normal"\n            /></td></tr></table></div>\n',
gb='<div id="diigolet-dlg-sticky" style="position: absolute;left: 100px;top:100px;" class="diigolet diigoletFN yellow"><div id="diigolet-dlg-sticky-top" class="_dragHandle"><span id="diigolet-dlg-sticky-close"></span><span id="diigolet-dlg-sticky-color"><div id="diigolet-dlg-sticky-currentColor" title="change color"></div><div id="diigolet-dlg-sticky-colorPicker"><b color="yellow" id="diigolet-dlg-yellow" class="dlg-colorItem colorchecked"><b></b></b><b color="blue" id="diigolet-dlg-blue" class="dlg-colorItem"><b></b></b><b color="green" id="diigolet-dlg-green" class="dlg-colorItem"><b></b></b><b color="pink" id="diigolet-dlg-pink" class="dlg-colorItem"><b></b></b></div></span><span id="diigolet-dlg-sticky-addTab"></span></div><div id="diigolet-dlg-sticky-content" class="private"><div id="diigolet-dlg-sticky-switcher"><span class="FN-switcher" id="FN-switcher-private"><b></b>Private</span><span class="FN-switcher" id="FN-switcher-group"><b></b>Group</span></div><div class="FN-content-wrapper private"><textarea id="FN-private-editor" placeholder="Input here..."></textarea><div id="FN-content-footer"><div id="editDone"><span id="FN-private-delete"><b></b></span><span id="FN-private-datetime"></span></div><div id="editing"><a href="javascript:void(0)" id="FN-private-saveBtn">Save</a><a href="javascript:void(0)" id="FN-private-cancelBtn">Cancel</a></div></div></div><div class="FN-content-wrapper group"><div><div id="FN-group-content-nav"><span id="FN-current-group"><span>+Share to a new group</span><b></b></span><div id="FN-group-menu"><ul id="FN-group-ul"></ul><ul id="FN-group-share-new-ul"><li id="FN-group-share-new">+Share to a new group</li></ul></div></div><div id="FN-post-form" class=""><div><textarea id="FN-group-post" placeholder="write a comment..."></textarea></div><div><select id="FN-group-share"><option>Choose a group</option><option>test</option></select><button><span class="button-label">Post</span><span class="button-spinner"></span></button><a href="javascript:void(0)">Cancel</a></div></div><div id="FN-group-content"><div id="FN-group-content-container"></div><div id="FN-group-content-postform"><textarea placeholder="Write a comment..."></textarea><div class="post-action"><button><span class="button-label">Post</span><span class="button-spinner"></span></button><a href="javascript:void(0)">Cancel</a></div></div></div></div></div></div></div>\n',
mb='<div id="diigolet-dialog-share" class="diigolet"><div id="diigolet-dialog-share-title" class="_dragHandle"><a id="diigolet-dialog-share-closeBtn" href="javascript:void(0);"></a><span>Share - Diigo</span></div><div id="diigolet-diglog-tabs"><ul id="diigolet-share-shareToTabs"><li class="shareToTwitter"><a id="diigolet-share-tab-twitter" diigotab="twitter" href="javascript:void(0)"><b>&#160;</b>Twitter</a></li><li class="shareToFacebook"><a id="diigolet-share-tab-facebook" diigotab="facebook" href="javascript:void(0)"><b>&#160;</b>Facebook</a></li><li class="shareToGplus"><a id="diigolet-share-tab-gPlus" diigotab="gPlus" href="javascript:void(0)"><b>&#160;</b>Google+</a></li><li class="shareToEmail"><a id="diigolet-share-tab-email" diigotab="email" href="javascript:void(0)"><b>&#160;</b>Email</a></li><li class="getAnnotatedLink"><a id="diigolet-share-tab-annotatedLink" diigotab="annotatedLink" href="javascript:void(0)"><b>&#160;</b>Annotated Link</a></li></ul></div><div id="diigolet-dialog-share-content"><div id="diigolet-dialog-share-twitter" style="display:none;"><p class="twitterDesc"><b id="diigolet-share-twitterLeftChars">20</b>Share this bookmark with friends on Twitter</p><textarea id="diigolet-dialog-share-twitterMsg" class="inputTxt">\n                FTA - Main page | FTA - Free Technology Academy http://bit.ly/d4OiXQ via www.diigo.com/~soraya\n                </textarea><div class="buttonRow clearfloat"><div style="float:left"><a href="https://www.twitter.com/diigo"><img src="chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/follow-us.png" alt="Follow diigo on Twitter" align="absmiddle"/></a></div><span id="diigolet-dialog-share-twitter-signInStatus"><span id="diigolet-dialog-share-twitter-signedIn">Signed in as <span></span><a href="#">(not you?)</a></span><a id="diigolet-dialog-share-twitter-notSignedIn" href="#">Click here to connect to twitter</a></span>\x3c!--<input type="button" value="Cancel" /><input class="defaultAction diigoBtn" type="button" value="Send" />--\x3e<a href="javascript:void(0)" id="diigolet-twitter-saveBtn" class="diigoBtn">Send</a><a href="javascript:void(0)" id="diigolet-twitter-cancelBtn">Cancel</a></div></div><div id="diigolet-dialog-share-facebook" style="display:none;">\n                Please finish sharing in the popup window.\n            </div><div id="diigolet-dialog-share-gPlus" style="display:none;">\n                Please finish sharing in the popup window.\n            </div><div id="diigolet-dialog-share-email" style="display: none"><table><tbody><tr><td style="width:60px"><label for="diigolet-dialog-share-email-to">To:</label></td><td><input id="diigolet-dialog-share-email-to" type="text" class="inputTxt" style="display:none" diigocomment="unused"/><div id="forwardTo" class="autocompleteContacts"></div></td></tr><tr><td><label for="diigolet-dialog-share-email-subject">Subject:</label></td><td><input id="diigolet-dialog-share-email-subject" type="text" class="inputTxt" /></td></tr></tbody></table><p><label id="diigolet-dialog-share-email-quotes-checker"><input type="checkbox" />Include Quotes</label><label for="diigolet-dialog-share-email-message">Message:</label><br/><textarea id="diigolet-dialog-share-email-message" class="inputTxt"></textarea></p><div id="diigolet-dialog-share-email-quotes"><div id="diigolet-aidlog-share-email-quotes-content"><strong>Quotes:</strong><div style="border-left: 3px solid #ddd;padding-left: 5px;margin-left: 5px;margin-top: 5px;"><p> After a 71/2-hour summit, Obama suggested Democrats may go it alone to try to pass an overhaul. By Charles Babington Associated Press WASHINGTON - Giving no ground, President Obama and Republican leaders fought forcefully for their competing visions of </p></div></div></div><div class="buttonRow clearfloat"><a href="javascript:void(0)" id="diigolet-email-saveBtn" class="diigoBtn">Send</a><a href="javascript:void(0)" id="diigolet-email-cancelBtn">Cancel</a></div></div><div id="diigolet-dialog-share-annotatedLink" style="display:none;"><div class="annotatedLinkInfo"><b>&#160;</b>An Annotated Link is a special URL provided by Diigo that allows you to share the current webpage complete with highlights and sticky notes to anyone.<br/><strong>Copy the URL below </strong>and paste it into your blog, email or IM messages...\n        \t\t\t</div><p><input id="diigolet-dialog-share-annotatedLink-value" type="text" class="inputTxt" value="https://www.diigo.com/09ijt" /></p><div class="buttonRow clearfloat"><span id="diigolet-dialog-share-annotatedLink-optLinks"><a href="javascript:void(0)" target="_blank">Preview</a></span><a href="javascript:void(0)" id="diigolet-annotatedLink-saveBtn" class="diigoBtn">Copy</a><a href="javascript:void(0)" id="diigolet-annotatedLink-cancelBtn">Cancel</a></div></div></div></div>\n',
hb='<div class="diigolet d3df themeDefault" id="d3df-sidebar"><div class="heading bgColor1 _dragHandle" style="zoom: 1; border: none"><a href="#{URL_DIIGO}" style="\n              background: transparent url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigoletIconv1.gif)\n                no-repeat scroll left -4px;\n              padding-left: 20px;\n              float: left;\n            ">\n            Diigo</a\n          ><a class="_signIn" href="#" title="Sign in into Diigo.com" style="float: left; margin-left: 10px" onclick="return diigolet.handle(event, \'tb_signIn\')">sign in</a\n          ><div style="float: right" title="Pop out and pin" class="popOut" onclick="diigolet.devil(\'Sidebar\').popOut();"></div><div style="clear: both"></div></div><div class="heading bgColor1 color2"><a id="d3df-togglePanelInline" class="togglePanel" href="#" onclick="diigolet.devil(\'Sidebar\').togglePanel(\'inline\');return false;"></a><a class="add" href="#" onclick="diigolet.devil(\'Sidebar\').addInlineComment();return false;">+Add</a\n          ><p><span class="_inlineCommentsTitle">Inline Comments</span>(<span class="_inlineCommentCount">0</span\n            >)\n          </p></div><ul id="d3df-inlineCommentBox" class="highlights bgColor2" style="overflow: auto">\n</ul><div class="heading bgColor1"><a id="d3df-togglePanelPage" class="togglePanel" href="#" onclick="diigolet.devil(\'Sidebar\').togglePanel(\'page\');return false;"></a><a class="add" href="#" onclick="diigolet.devil(\'Sidebar\').showEditPageCommentBox();return false;">Add</a\n          ><p>Page Comments(<span class="_pageCommentCount">0</span>)</p></div><div id="d3df-pageCommentBox" class="bgColor1"><div class="addComment"><select id="diigolet-sb-selpc" style="margin-left: 5px"></select><textarea id="diigolet-sb-txtpc" name="txtComment" rows="4" style="margin: 5px; width: 90%"></textarea><div style="margin: 5px"><input class="diigo-button" type="button" value="Post" onclick="diigolet.devil(\'Sidebar\').addCommentSubmit()"\n              /><input class="diigo-button" type="button" value="Cancel" onclick="diigolet.devil(\'Sidebar\').showEditPageCommentBox(false);"\n              /></div></div><ul id="d3df-pageCommentList" class="comments" style="overflow: auto">\n</ul></div></div>\n',
ib='<div id="diigolet-csm"><div id="diigolet-csm-research-mode"></div><div id="diigolet-csm-highlight-wrapper" class="csm-btn"><a id="diigolet-csm-highlight" class="csm-action" title="Highlight" href="javascript:void(0);"></a><div class="diigolet-csm-color small hidden"><a class="diigolet-csm-coloritem yellow" data-color="yellow"></a><a class="diigolet-csm-coloritem blue" data-color="blue"></a><a class="diigolet-csm-coloritem green" data-color="green"></a><a class="diigolet-csm-coloritem pink" data-color="pink"></a></div></div><div id="diigolet-csm-highlightAndComment-wrapper" class="csm-btn"><a id="diigolet-csm-highlightAndComment" class="csm-action" title="Highlight & Sticky note" href="javascript:void(0);"></a><div class="diigolet-csm-color small hidden"><a class="diigolet-csm-coloritem yellow" data-color="yellow"></a><a class="diigolet-csm-coloritem blue" data-color="blue"></a><a class="diigolet-csm-coloritem green" data-color="green"></a><a class="diigolet-csm-coloritem pink" data-color="pink"></a></div></div><a id="diigolet-csm-search" class="csm-action" title="Search in Google" href="javascript:void(0);"></a></div>\n',
jb='<div id="diigolet-annMenu" class="diigolet diigoletContexMenu"><div id="diigolet-annMenu-color" class="diigolet-annMenu-item _onlyMy"><b id="diigolet-annMenu-currentColor" title="change color"><b></b></b><div id="diigolet-annMenu-colorPicker"><b id="diigolet-context-yellow" color="yellow" class="ann-colorItem"><b></b\n          ></b><b id="diigolet-context-blue" color="blue" class="ann-colorItem"><b></b\n          ></b><b id="diigolet-context-green" color="green" class="ann-colorItem"><b></b\n          ></b><b id="diigolet-context-pink" color="pink" class="ann-colorItem"><b></b\n          ></b></div></div><div id="diigolet-annMenu-add" class="diigolet-annMenu-item" title="add a sticky note"><b></b></div><div id="diigolet-annMenu-share" class="diigolet-annMenu-item" title="share"><b></b></div><div id="diigolet-annMenu-del" class="diigolet-annMenu-item _onlyMy" title="delete"><b></b></div><div id="diigolet-annMenu-more" class="diigolet-annMenu-item" title="more action"><b></b></div><div id="diigolet-annMenu-arrow"></div><div id="diigolet-annMenu-moreThings"><ul><li><a href="javascript:void(0)" id="diigolet-annMenu-My">View in My Library</a\n            ></li>\x3c!--<li><a href="javascript:void(0)" id="diigolet-annMenu-copy-highlights">Copy this highlight</a></li>--\x3e<li id="diigolet-annMenu-tip"></li></ul></div></div>\n',
kb='<div class="diigolet floatNote diigoshow"><span>10</span></div>\n',Db="",Eb="",lb='<div id="diigolet-panel-panel" class="diigolet notSignedIn"><div id="diigolet-panel-logo" title="Expand the Annotation Toolbar"></div><div id="diigolet-panel-main" class="clearfloat"><div id="diigolet-panel-fold" title="Collapse the Annotation Toolbar"></div><div id="diigolet-panel-Highlight" class="diigolet-panel-btn"><div id="diigolet-panel-hightlight-dropdown" title="Select a highlight color"><b></b></div><div id="diigolet-panel-btnHighlight" title="Select text to highlight or click to turn on a highlighter pen"><b></b></div><ul id="diigolet-panel-colorPicker"><div id="diigolet-panel-colorPicker-arrow"></div><li diigocolor=\'yellow\' class="yellow"><span><b></b></span>\n                            Yellow\n                        </li><li diigocolor=\'blue\' class="blue"><span><b></b></span>\n                            Blue\n                        </li><li diigocolor=\'green\' class="green"><span><b></b></span>\n                            Green\n                        </li><li diigocolor=\'pink\' class="pink"><span><b></b></span>\n                            Pink\n                        </li></ul></div><div id="diigolet-panel-btnStickyNote" class="diigolet-panel-btn" title="Add sticky note"><b></b></div><div id="diigolet-panel-btnBookmark" class="diigolet-panel-btn" title="Save to Diigo"><b></b></div><div id="diigolet-panel-btnAnnotationList" class="diigolet-panel-btn" title="Show annotations list on this page"><b></b></div></div>\x3c!----\x3e<div id="diigolet-panel-space"></div></div>\n',
nb='<div class="diigolet notice" id="diigolet-notice" style="display:block;"><div><b>&#160;</b><p>Ok, done!</p><span id="close"></span></div><div class="info"><b>&#160;</b><p>Information</p></div><div class="alert"><b>&#160;</b><p>The value run-in is special, because it can make the generated box\u2019s formatting either block or inline. A run-in box that doesn\u2019t contain a block box, and is followed by a sibling block box in the normal document flow, becomes the first inline box of the sibling block box (unless the sibling is or contains a run-in).</p></div><div class="wait"><b>&#160;</b><p>Please wait...</p></div></div>\n',
ob='.diigolet,.diigolet a,.diigolet em,.diigolet span,.diigolet div,.diigolet dl,.diigolet dt,.diigolet dd,.diigolet ul,.diigolet ol,.diigolet li,.diigolet h1,.diigolet h2,.diigolet h3,.diigolet h4,.diigolet h5,.diigolet h6,.diigolet pre,.diigolet form,.diigolet fieldset,.diigolet p,.diigolet blockquote,.diigolet th,.diigolet td,.diigolet input,.diigolet textarea,.diigolet select,.diigolet *{background:transparent none;padding:0;margin:0;flex-direction:row;border:#000 0 solid;text-align:left;text-decoration:none;text-transform:none;text-indent:0;line-height:normal;word-break:normal;word-wrap:normal;width:auto;height:auto;color:inherit;font:inherit;float:none;cursor:default;position:static;overflow:visible;max-width:none;box-shadow:none;opacity:1;border-radius:0;}.diigolet{color:#000;font:normal normal normal 13px arial,helvetica,clean,sans-serif;}.diigolet input[type="text"],.diigolet textarea,.diigolet select,.diigolet fieldset{background-color:#fff;border:1px #999 solid;padding:1px;font-size:12px;display:inline;border-radius:2px;-webkit-transition:border linear .2s,box-shadow linear .2s;}.diigolet select{padding:0;height:20px;}.diigolet input[type="text"],.diigolet textarea{cursor:text;}.diigolet input[type="text"]{height:20px;}.diigolet input[type="button"],.diigolet input[type="submit"],.diigolet input[type="reset"],.diigolet input[type="file"]{color:buttontext;cursor:default;padding:2px 5px;text-align:center;border:1px solid #ccc;background:#fff;border-radius:2px;background-image:-webkit-gradient(linear,0% 0,0% 100%,from(#f8f8f8),to(#d2d2d2));}.diigolet input[type="button"]:active,.diigolet input[type="submit"]:active,.diigolet input[type="reset"]:active,.diigolet input[type="file"]:active{background:#ddd;}.diigolet textarea{white-space:normal!important;resize:vertical!important;padding:2px!important;}.diigolet input.diigo-check{border:none;vertical-align:middle;}.diigolet input.diigo-button{font-size:12px!important;font-weight:bold;padding:4px 8px;cursor:pointer;border-radius:4px;}.diigolet input.diigo-button#diigolet-dlgBm-btnSave{width:56px;color:white;height:25px;-webkit-border-radius:4px;background-color:rgba(237,237,237,0);-webkit-box-shadow:0 1px 1px rgba(0,0,0,0.15);border:solid 1px #0388dc;background-image:-webkit-linear-gradient(top,#4eaffa,#0492f5);}.diigolet input.diigo-button#diigolet-dlgBm-btnSave:hover{background-image:-webkit-linear-gradient(top,#349ef0,#0580d6);}.diigolet input.diigo-button#diigolet-dlgBm-btnSave:active{background-image:-webkit-linear-gradient(bottom,#4eaffa,#0492f5);}.diigolet input.diigo-downlist{background:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/arrow-down.png) 50% 50% no-repeat,-webkit-gradient(linear,0% 0,0% 100%,from(#f8f8f8),to(#d2d2d2));width:12px;margin-left:-16px;}.diigolet input.diigo-downlist:active{background:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/arrow-down.png) 50% 50% no-repeat,#ddd;}.diigolet div.diigo-buttonswitchlist{padding:4px 2px;border:1px solid #ccc;position:absolute;right:72px;background:#fff;z-index:100000;}.diigolet div.diigo-buttonswitchlist ul li{padding:2px 6px;}.diigolet div.diigo-buttonswitchlist ul li:hover{background:#43658f;color:#fff;cursor:pointer;}#diigoletFNSubmit{width:50px;}.diigolet table{border-collapse:collapse;border-spacing:0;width:auto;}.diigolet label{cursor:pointer!important;display:inline;vertical-align:middle;}.diigolet fieldset,.diigolet img{border:0;}.diigolet address,.diigolet caption,.diigolet cite,.diigolet code,.diigolet dfn,.diigolet em,.diigolet strong,.diigolet th,.diigolet var{font-style:normal;font-weight:bold;}.diigolet ol,.diigolet ul,.diigolet li{list-style:none;display:block;}.diigolet caption,.diigolet th{text-align:left;}.diigolet h1,.diigolet h2,.diigolet h3,.diigolet h4,.diigolet h5,.diigolet h6{font-weight:bold;}.diigolet q:before,.diigolet q:after{content:"";}.diigolet abbr,.diigolet acronym{border:0;}.diigolet a:link,.diigolet a:visited,.diigolet a:hover,.diigolet a:active{text-decoration:none;color:#00f;cursor:pointer!important;}.diigolet a:hover{text-decoration:underline;}.diigolet a *{cursor:inherit;}#diigolet-tray{position:fixed;top:0;left:10;width:16px;height:16px;background:transparent url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigoletIconv3.gif") no-repeat left -4px;z-index:2147483646;}.diigolet a.diigolet-Help:link,.diigolet a.diigolet-Help:visited{color:#06f;}.diigolet a.diigolet-Help:hover,.diigo a.diigolet-Help:active{color:#00f;}.diigolet label{margin-left:3px;}.diigolet span.noComments{color:#aaa;font-size:10px;}#diigolet-toolbar{border:none;width:100%;position:absolute;top:0;left:0;z-index:2147483647;color:#333;}#diigolet-tb-content{padding:3px 5px;background:#efedde url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigolet-toolbar-bg2.gif) repeat scroll 0;}#diigolet-tb-bar span,#diigolet-tb-bar div,#diigolet-tb-bar a,#diigolet-tb-bar em{line-height:24px;}#diigolet-tb-shadow{height:5px;background:transparent url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigolet-toolbar-shadow.png) repeat-x left top;}* html #diigolet-tb-shadow.ie6{filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true,sizingMethod=scale,src="chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigolet-toolbar-shadow.png");overflow:hidden;background:none;}#diigolet-help{display:none;position:absolute;top:29px;right:10px;width:200px;border:1px #ccc solid;background-color:#ffc;padding:6px 16px 6px 6px;}.diigolet a.diigoletButton{height:24px;float:left;padding-right:4px;cursor:pointer!important;}.diigolet a.diigoletButton:hover{text-decoration:none;color:#000;background:transparent url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigoletBtn3_r.png") no-repeat right top;}.diigolet a.diigoletButton:active{background-position:right bottom;}.diigolet a.diigoletButton b{font-weight:normal;color:#000;line-height:24px;float:left;padding-left:4px;height:24px;}#diigolet-button-highlight-dropdown{width:8px;height:16px;margin-right:4px;background:transparent url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/down_arrow.gif") no-repeat scroll left 2px;}#diigolet-button-highlight-dropdown.mouseovered{border-left:1px solid #888;margin-right:0;text-decoration:none;width:11px;height:24px;background:transparent url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigoletBtn4.png") no-repeat left top!important;}#diigolet-button-highlight-dropdown.mouseoveredIe{border-left:1px solid #888;margin-right:1px;text-decoration:none;width:11px;height:24px;background:transparent url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigoletBtn4.png") no-repeat left top!important;}#diigolet-button-highlight-dropdown.checked{border-left:1px solid #888;margin-right:0;text-decoration:none;width:11px;height:24px;background:transparent url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigoletBtn4_s.png") no-repeat left top!important;}#diigolet-button-highlight.mouseovered{text-decoration:none;color:#000;background:transparent url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigoletBtn3_r.png") no-repeat right top!important;}#diigolet-button-highlight.mouseoveredIe{text-decoration:none;color:#000;background:transparent url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigoletBtn3_r.png") no-repeat right top!important;}#diigolet-button-highlight.mouseovered b.outer{background:transparent url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigoletBtn3.png") no-repeat left top;}#diigolet-button-highlight.mouseoveredIe b.outer{background:transparent url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigoletBtn3.png") no-repeat left top;}a#diigolet-button-highlight b.outer{padding-right:5px;}a#diigolet-button-highlight{padding-right:0!important;}a.diigoletButton:hover b.outer{background:transparent url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigoletBtn3.png") no-repeat left top;}a.diigoletButton:active b.outer{background-position:left bottom;}.diigolet a.diigoletButton b b{font-size:12px;padding-left:20px;background:transparent url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigoletIconv3.gif") no-repeat left 50%;}.diigolet a.diigoletButton:active b b{position:relative;top:1px;left:1px;}.diigolet a.diigoletButton.diigoletDisabled{cursor:default;}.diigolet a.diigoletButton.diigoletDisabled b b{color:#999;position:static;}.diigolet a.diigoletButton.diigoletDisabled:hover{background:none transparent;}.diigolet a.diigoletButton.diigoletDisabled:hover b.outer{background:none transparent;}.diigolet a.diigoletButton.checked{background:transparent url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigoletBtn3_r.png") no-repeat right top;background-position:right bottom;}.diigolet a.diigoletButton.checked b.outer{background:transparent url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigoletBtn3.png") no-repeat left top;background-position:left bottom;}.diigolet a.diigoletButton.checked b b{position:relative;top:1px;left:1px;}#diigolet-tb-btnSidebar b b{background-position:left -24px;}#diigolet-tb-btnSidebar.toClose b b{background-position:left -48px;}#diigolet-tb-btnBookmark b b{background-position:left -144px;}#diigolet-tb-btnBookmark.saved b b{background-position:left -120px;}#diigolet-button-highlight b b{background-position:left -72px;}#diigolet-button-highlight.dontShow b b{background-position:left -96px;}#diigolet-button-highlight.yellow b b{background-position:left -355px;}#diigolet-button-highlight.blue b b{background-position:left -375px;}#diigolet-button-highlight.green b b{background-position:left -395px;}#diigolet-button-highlight.pink b b{background-position:left -415px;}.diigolet .colorItem{padding-left:20px;height:16px;background:transparent url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigoletIconv3.gif") no-repeat left -440px;}#diigolet-context-yellow b,#diigolet-colorMenu-yellow b{background-position:left -440px;}#diigolet-context-blue b,#diigolet-colorMenu-blue b{background-position:left -460px;}#diigolet-context-green b,#diigolet-colorMenu-green b{background-position:left -480px;}#diigolet-context-pink b,#diigolet-colorMenu-pink b{background-position:left -500px;}#diigolet-context-yellow.colorchecked b,#diigolet-colorMenu-yellow.colorchecked b{background-position:left -520px;}#diigolet-context-blue.colorchecked b,#diigolet-colorMenu-blue.colorchecked b{background-position:left -540px;}#diigolet-context-green.colorchecked b,#diigolet-colorMenu-green.colorchecked b{background-position:left -560px;}#diigolet-context-pink.colorchecked b,#diigolet-colorMenu-pink.colorchecked b{background-position:left -580px;}#diigolet-tb-btnFloatNote b b{background-position:left -167px;}#diigolet-tb-btnTwitter b b{background:transparent url("https://twitter.com/favicon.ico") no-repeat left 50%;}#diigolet-tb-btnComment b b{background-position:left -192px;}#diigolet-tb-btnComment.commented b b{background-position:left -192px;}#diigolet-tb-btnMore b b{background-position:left 0;}#diigolet-tb-btnSignIn b b{background-position:left -264px;}#diigolet-tb-btnHide{float:right;height:24px;width:16px;background:transparent url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigoletIconv3.gif") no-repeat left -240px;}div.diigoIcon{cursor:pointer!important;margin:0;padding:0;position:absolute;display:none;width:24px!important;z-index:2147483643;height:23px!important;background:transparent url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/ietoolbar-images/edit-highlight.png") no-repeat left;-webkit-transition:-webkit-transform 150ms ease;vertical-align:text-bottom;}span.diigoHighlightCommentLocator{vertical-align:text-bottom;line-height:0;}div.diigoIcon span{color:#000;display:block;font-family:Helvetica,Arial,sans-serif;font-size:13px;font-weight:700;line-height:18px;text-align:center;text-shadow:0 1px 1px #fff;text-decoration:none;text-indent:0;display:none;}div.diigoHighlightcommented{display:inline-block!important;}div.ImageIcon{background-color:transparent!important;}div.diigoIcon:hover{background-color:transparent!important;background-repeat:no-repeat!important;-webkit-transform:translate(0px,-2px);}div.diigoHighlightcommented.TextIcon{bottom:0;}div.diigoHighlightcommented.public{background:#fff url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/ietoolbar-images/public-annotation.png") no-repeat left;}div.diigoHighlightcommented.private.yellow{background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/ietoolbar-images/annotation-icon.png") 0 0 no-repeat;}div.diigoHighlightcommented.private.blue{background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/ietoolbar-images/annotation-icon.png") 0 -46px no-repeat;}div.diigoHighlightcommented.private.green{background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/ietoolbar-images/annotation-icon.png") 0 -92px no-repeat;}div.diigoHighlightcommented.private.pink{background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/ietoolbar-images/annotation-icon.png") 0 -138px no-repeat;}div.diigoHighlightcommented.group.yellow{background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/ietoolbar-images/annotation-icon.png") 0 -23px no-repeat;}div.diigoHighlightcommented.group.blue{background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/ietoolbar-images/annotation-icon.png") 0 -69px no-repeat;}div.diigoHighlightcommented.group.green{background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/ietoolbar-images/annotation-icon.png") 0 -115px no-repeat;}div.diigoHighlightcommented.group.pink{background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/ietoolbar-images/annotation-icon.png") 0 -161px no-repeat;}#diigolet-toolbar .dropdownMenu{display:none;border:1px solid #999;font:12px arial,helvetica,clean,sans-serif;background-color:Menu;padding:2px 0;z-index:2147483647;position:absolute;top:30px;width:140px;}#diigolet-toolbar .dropdownMenu a,#diigolet-toolbar .dropdownMenu a:link,#diigolet-toolbar .dropdownMenu a:visited,#diigolet-toolbar .dropdownMenu a:hover,#diigolet-toolbar .dropdownMenu a:active{display:block;padding:2px 12px;font-weight:normal;text-decoration:none;color:#000;background:#fff;cursor:default;}#diigolet-toolbar .dropdownMenu a:hover,#diigolet-toolbar .dropdownMenu a:active{color:#fff;background:#09f;}#diigolet-notify{display:none;position:absolute;top:33px;left:0;border:1px #ccc solid;background-color:#ffc;padding:6px 16px 6px 6px;z-index:2147483647;}#diigolet-notify.right{left:auto;right:0;text-align:right;}.diigolet .tagList{margin:2px 0;float:left;}.diigolet .diigo-su-tag .tagButton{display:inline-block;height:16px;padding:0 5px;line-height:16px;background-color:#f2f2f2;border-top:1px solid rgba(0,0,0,0);border-left:1px solid rgba(0,0,0,0);border-right:1px solid #c9d7f1;border-bottom:1px solid #c9d7f1;color:#858585;border-radius:1px;cursor:pointer;margin-right:3px;}.diigolet .diigo-su-tag .tagButton:hover{border-color:#82b3f8;}.diigolet .diigo-su-tag .tagButton.inused{color:#3f99a1;}.diigolet .diigo-su-tag .tagButton.selected{border-color:#82b3f8;}.diigolet .tagLoading a{display:none;margin-bottom:10px;}.diigolet .tagList.tagLoading .loading{background:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/ietoolbar-images/indicator.gif) no-repeat left top;height:16px;padding-left:22px;display:block;}.diigolet .tagLoading .tagListHeader{display:none;}.diigolet .tagListHeader{cursor:pointer;float:left;width:100px;line-height:23px;}.diigolet .tagListHeader:hover{text-decoration:underline;}.diigolet .tagList div{color:#666!important;font-size:12px!important;font-weight:bold!important;padding-right:5px!important;text-align:left!important;}#diigolet-twitter{background-color:threedface;font-family:Arial,sans-serif;font-size:13px;color:windowtext;padding:5px 5px;margin:0;left:0;top:30px;z-index:2147483646;width:380px;position:static;border:1px #09f solid;border-left-width:0;}#diigolet-twitter input{vertical-align:middle;}.diigolet .twitterlogo{width:210px;height:49px;filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true,sizingMethod=scale,src="https://assets3.twitter.com/images/twitter.png");}#diigolet-tagForward{background-color:white;width:460px;font-family:Arial,Helvetica,sans-serif;-webkit-border-radius:0;cursor:default;position:static;right:5px;top:75px;z-index:2147483646;border:1px solid rgba(0,0,0,0.25);box-shadow:0 1px 5px rgba(0,0,0,0.3);-webkit-user-select:none;background-clip:content-box;-webkit-animation:fadeinScale 200ms ease;}#diigolet-tagForward.show{-webkit-animation:fadeinScale 200ms ease;}#diigolet-tagForward.hide{-webkit-animation:fadeoutScale 200ms ease;}#diigolet-tagForward *{-webkit-box-sizing:content-box!important;box-sizing:content-box!important;}#diigolet-tagForward-topBar{height:38px;vertical-align:middle;background-color:#f5f5f5;border-bottom:1px solid #ddd;}#diigolet-tagForward-topBar>span{line-height:38px;display:inline-block;margin-left:15px;color:#4b4b4b;font-size:16px;cursor:move;}#diigolet-tagForward-topBar .focus-research-tip{margin-left:3px;font-size:12px;display:none;}#diigolet-tagForward .tabContainer{text-align:center;margin:5px;}#diigolet-tagForward .tab{margin-right:8px;margin-left:8px;padding:0 8px 2px 8px;font-weight:bold;}#diigolet-tagForward .tabContainer a:link,#diigolet-tagForward .tabContainer a:visited{padding:4px;border:1px #fff solid;font-weight:bold;color:#06c;text-decoration:none;}#diigolet-tagForward .tabContainer a.active:link,#diigolet-tagForward .tabContainer a.active:visited{border:none;background-color:#09f;color:#fff;padding:5px;}#diigolet-tagForward .tabContainer a:hover,#diigolet-tagForward .tabContainer a:active{border:1px #09f solid;}#diigolet-tagForward div.tabContent{display:none;}#diigolet-tagForward div.tabContent.active{display:block;}#diigolet-tagForward-caption{text-align:center;line-height:30px;font-size:14px;font-weight:bold;}#diigolet-tagForward-remove{float:right;color:#f00;background:-webkit-linear-gradient(bottom,#ebebeb,#f5f5f5);margin-top:6px;margin-right:15px;cursor:pointer;height:24px;width:27px;border:1px solid #c4c4c4;border-radius:4px;box-shadow:0 1px 0 #fff;}#diigolet-tagForward-remove:active{background:-webkit-linear-gradient(top,#ebebeb,#f5f5f5);}#diigolet-tagForward-remove>span{float:left;background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/img/popup-image/remove.png");height:14px;width:11px;margin-top:5px;margin-left:8px;cursor:pointer;}#diigolet-tagForward-remove:hover>span{background-position:0 -14px;}#diigolet-Bookmark-Form{padding:20px 15px 0 15px;}#diigolet-Bookmark-Form input[type="text"],#diigolet-Bookmark-Form textarea{outline:none;border:none;background-color:white;-webkit-transition:height .1s ease-in-out;}#diigolet-Bookmark-Form input[type="text"]{line-height:20px;min-height:20px;}#diigolet-tagForward .diigo-hr{width:426px;border-top:1px #ccc solid;margin:0 auto;height:1px;overflow:hidden;}.diigolet .diigo-table{margin:10px 20px;}.diigolet .diigo-table td{padding:2px 0;}.diigolet .diigo-table th{color:#666;font-weight:bold;padding-right:5px;width:62px;text-align:left;font-size:12px!important;}.diigolet .diigolet-input{width:350px;padding:1px;font-size:12px!important;height:16px!important;padding-left:3px!important;line-height:16px!important;outline:none!important;}.diigolet .diigolet-input:focus{border:solid 1px #3996ed;-webkit-box-shadow:0 0 1px rgba(77,144,254,0.55);}#Diigo-Bookmark-Description,#Diigo-Forward-PS{border:1px solid #d7d7d7;background-color:white;-webkit-transition:border 400ms ease;min-height:56px;}#Diigo-Bookmark-Description.focus{border:1px solid #aaa;}#Diigo-Bookmark-Description-Input{width:413px;max-width:413px;font-family:Arial;height:45px;margin-left:6px;margin-top:3px;font-size:12px;padding:2px;}#Diigo-Bookmark-Url{border-left:1px solid #dcdcdc;border-right:1px solid #dcdcdc;background-color:white;position:relative;-webkit-transform:rotateX(-90deg);height:0;position:relative;}#Diigo-Bookmark-Url.fold{-webkit-animation:fold 400ms ease both;-webkit-animation-play-state:running;}#Diigo-Bookmark-Url.unfold{-webkit-animation:unfold 400ms ease both;-webkit-animation-play-state:running;border-bottom:1px solid #dcdcdc;}#Diigo-Bookmark-Url>div#url-arrow{height:6px;width:13px;background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/img/popup-image/dp-arrow.png");position:absolute;left:11px;top:-6px;}#Diigo-Bookmark-Url-Input{margin-top:3px;width:412px;margin-left:5px;}#Diigo-Bookmark-Title{height:30px;border:1px solid #d7d7d7;background-color:white;-webkit-transition:border 400ms ease;position:relative;}.diigolet .diigo-alert-tip{background-color:rgba(255,0,0,0.8);position:absolute;left:117px;top:-29px;padding:4px 6px;display:block;font-size:12px;font-weight:bold;pointer-events:none;font-family:arial,sans-serif;color:white;display:none;line-height:16px;}.diigolet .diigo-alert-tip span{background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/img/popup-image/alert.png") -6px -4px no-repeat;text-indent:17px;display:inline-block;vertical-align:middle;}.diigolet .diigo-alert-tip .diigo-alert-tip-arrow{position:absolute;border:5px solid;border-top-color:transparent;border-right-color:transparent;border-bottom-color:rgba(255,0,0,0.8);border-left-color:transparent;top:24px;height:0;width:0;line-height:0;-webkit-transform:rotate(180deg);left:91px;}.diigolet #Diigo-Bookmark-Url .diigo-alert-tip{left:136px;}.diigolet #Diigo-Bookmark-Url .diigo-alert-tip-arrow{left:71px;}#Diigo-Bookmark-Title.focus{border:1px solid #aaa;}#Diigo-Bookmark-Title-Input{margin:4px 0 0 0;width:392px;border:none;outline:none;font-size:14px;}#Diigo-Bookmark-Title #link-icon{float:left;height:30px;width:30px;background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/img/popup-image/URL.png") 4px 0 no-repeat;cursor:pointer;}#Diigo-Bookmark-Title #link-icon:hover{background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/img/popup-image/URL.png") 4px -30px no-repeat;}#Diigo-Bookmark-Title #link-icon.unfold{background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/img/popup-image/URL.png") 4px -30px no-repeat;}#Diigo-Bookmark-Options .diigo-option{font-size:12px;height:inherit;width:120px;display:inline-block;padding:13px 0 15px 0;color:#555;}.diigo-option:hover{background-position:0 -20px;}.diigo-option:active{background-position:0 -40px;}.diigo-option.active{background-position:0 -40px;}.diigo-option .op-checkbox,#Diigo-Bookmark-checkShareExisting .op-checkbox{height:13px;width:15px;display:inline-block;vertical-align:middle;position:relative;cursor:pointer;background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/img/popup-image/checkbox.png");}.diigo-option .op-label{margin-left:7px;text-indent:20px;display:inline-block;vertical-align:middle;cursor:pointer;}#Diigo-Bookmark-checkShareExisting{display:none;}#Diigo-Bookmark-checkShareExisting .op-label{margin-left:7px;text-indent:-6px;display:inline-block;vertical-align:middle;cursor:pointer;}#Diigo-Bookmark-Options .op-checkbox-container{display:inline;cursor:pointer;}#Diigo-Bookmark-uploadCache{margin-left:20px;}.diigolet .op-checkbox-container:hover>.op-checkbox{background-position:0 -13px;}.diigolet .op-checkbox-container.checked .op-checkbox{background-position:0 -26px;}#Diigo-Bookmark-Privacy .op-label{background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/img/popup-image/private.png");background-repeat:no-repeat;}#Diigo-Bookmark-Unread .op-label{background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/img/popup-image/op-readlater.png");background-repeat:no-repeat;}#Diigo-Bookmark-uploadCache .op-label{background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/img/popup-image/cache.png");background-repeat:no-repeat;}#Diigo-Bookmark-Url.invalid{border:1px solid #f00;margin-top:-1px;}#Diigo-Bookmark-Url.invalid div{background-position:0 -6px;}#Diigo-Bookmark-Title.invalid{border:1px solid #f00;}#Diigo-Bookmark-Tag-Wrapper{min-height:24px;border:1px solid #d7d7d7;background-color:white;margin-top:15px;position:relative;-webkit-transition:border 400ms ease;height:30px;}#Diigo-Bookmark-Tag-Wrapper.focus{border:1px solid #aaa;}#Diigo-Bookmark-Tag-Input{margin-top:4px;margin-left:2px;width:389px;}#Diigo-Bookmark-Tag{height:30px;}.diigolet #Diigo-Bookmark-Tag{box-shadow:none;}#Diigo-Bookmark-Tag-Wrapper.active{border:solid 1px #3996ed;-webkit-box-shadow:0 0 1px rgba(77,144,254,0.55);}#Diigo-Bookmark-Tag-Cloud{border:1px solid #d7d7d7;border-bottom-right-radius:3px;border-bottom-left-radius:3px;display:none;background-color:white;font-size:12px;margin-top:-1px;}#Diigo-Bookmark-Tag-Cloud>div:first-child{height:25px;width:100%;line-height:25px;font-weight:bold;border-bottom:1px solid #ccc;text-indent:2px;clear:both;}#Diigo-Bookmark-Tag-Cloud>div:first-child a{float:right;margin-right:3px;text-decoration:none;}#Diigo-Bookmark-Tag-Cloud>div:first-child a:hover{text-decoration:underline;}#Diigo-Bookmark-Tag-Cloud-Container{max-height:180px;overflow:auto;width:421px;padding:3px 5px 5px 0;}#Diigo-Bookmark-Tag-Cloud-Container::-webkit-scrollbar{width:6px;}#Diigo-Bookmark-Tag-Cloud-Container::-webkit-scrollbar-track-piece{background-color:transparent;}#Diigo-Bookmark-Tag-Cloud-Container::-webkit-scrollbar-thumb:vertical{height:20px;background-color:#ccc;}#Diigo-Bookmark-Tag-Cloud-Container::-webkit-scrollbar-thumb:hover{background-color:#aaa;}#Diigo-Bookmark-Tag-Wrapper.opened+#Diigo-Bookmark-Tag-Cloud{visibility:visible;}#Diigo-Bookmark-Tag-Cloud ul li{display:inline-block;}#Diigo-Bookmark-Tag-Cloud .Diigo-Bookmark-Tag-item{margin-left:3px;text-decoration:none;color:#04c;line-height:normal;display:inline-block;line-height:140%;cursor:pointer;padding:0 2px;}#Diigo-Bookmark-checkShare{display:none;}#Diigo-Bookmark-checkShareExisting{margin-right:3px;}#Diigo-Bookmark-checkShare input[type="checkbox"]{width:14px;height:14px;margin:0;cursor:pointer;vertical-align:middle;background:#fff;border:1px solid #dcdcdc;-webkit-border-radius:1px;-moz-border-radius:1px;border-radius:1px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative!important;}#Diigo-Bookmark-checkShare input[type="checkbox"]:hover{border-color:#c6c6c6;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.1);-moz-box-shadow:inset 0 1px 1px rgba(0,0,0,0.1);box-shadow:inset 0 1px 1px rgba(0,0,0,0.1);}#Diigo-Bookmark-checkShare input[type="checkbox"]:active{border-color:#c6c6c6;background:#ebebeb;}#Diigo-Bookmark-Tag-Cloud .Diigo-Bookmark-Tag-item.selected{background-color:#09f;color:white;}#Diigo-Bookmark-Tag-Cloud>div:first-child{height:20px;width:100%;line-height:20px;font-weight:bold;border-bottom:1px solid #ccc;text-indent:2px;}#Diigo-Bookmark-Tag-Cloud .Diigo-Bookmark-Tag-item:hover{text-decoration:underline;}#Diigo-Bookmark-Tag-Eidt{float:right;margin-right:3px;}#Diigo-Bookmark-Tag-suggestion{margin-top:7px;}#diigolet-bm-tagListContainer-recommend{margin-top:3px;display:none;}#Diigo-Bookmark-Tag-suggestion .diigo-su-tag{line-height:26px;font-size:12px;min-height:26px;margin-top:5px;}#Diigo-Bookmark-Tag-suggestion .diigo-su-tag a{display:inline-block;text-decoration:none;color:#555;width:93px;}#Diigo-Bookmark-Tag-suggestion .loading{display:inline-block;height:10px;width:120px;background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/img/popup-image/loading.gif");}#Diigo-Bookmark-Tag-suggestion .diigo-su-tag a:hover{text-decoration:underline;}#Diigo-Bookmark-Tag-dropdown{height:30px;width:28px;background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/img/popup-image/dropdown.png");float:left;cursor:pointer;}#Diigo-Bookmark-Tag-dropdown:hover{background-position:0 -30px;}.diigo-table .diigo-invalid-input{display:none;height:16px;width:16px;background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/icons.png");background-position:-16px -80px;margin-left:4px;}#diigo-list-group{margin-top:17px;width:430px;height:24px;}#diigolet-Bookmark-Form #Diigo-outliner #diigo-list-addInput{width:309px;height:26px;border:1px solid #d7d7d7;-webkit-transition:border 400ms ease;padding:0 3px;}#Diigo-outliner{height:30px;margin-bottom:15px;}#Diigo-outliner>div{float:left;height:20px;font-size:12px;color:#04c;font-weight:bold;line-height:20px;}#diigo-list-group>div{float:left;height:20px;font-size:12px;color:#04c;width:200px;font-weight:bold;line-height:20px;}#Diigo-outliner #diigo-list-add-tip{border-radius:4px;padding:5px 14px 5px 14px;font-size:12px;text-shadow:0 1px 0 rgba(255,255,255,0.5);background-color:#f2dede;border:1px solid #eed3d7;color:#b94a48;font-weight:normal;width:399px;display:none;}#Diigo-outliner #diigo-list-add-tip a{float:right;margin:0 5px;color:b94a48;text-decoration:none;}#Diigo-outliner #diigo-list-add-tip a:hover{text-decoration:underline;}#Diigo-outliner #diigo-list-add{position:relative;display:none;}#diigo-list-add .diigo-alert-tip{left:7px;top:-29px;}#Diigo-outliner .diigo-alert-tip .diigo-alert-tip-arrow{left:43px;}#diigo-list-group #diigo-list-addInput{width:102px;height:26px;border:1px solid #d7d7d7;-webkit-transition:border 400ms ease;padding:0 3px;font-weight:normal;color:#000;border-radius:0;}#diigo-list-group #diigo-list-addInput:focus{border:1px solid #aaa;}#diigo-list-add>*{float:left;}#diigo-list-addBtn{height:26px;min-width:38px;background-image:-webkit-linear-gradient(top,#53aaf0,#118cef);border:1px solid #066ec1;color:#fff;border-radius:2px;line-height:26px;font-weight:normal;margin-left:6px;cursor:pointer;-webkit-transition:.3s cubic-bezier(0.175,0.885,0.32,1.275) all;text-align:center;}#diigo-list-addBtn:not(.processing):hover{background-image:-webkit-linear-gradient(top,#45a2ee,#037bdb);}#diigo-list-addBtn:not(.processing):active{background-image:-webkit-linear-gradient(bottom,#53aaf0,#118cef);}#diigo-list-addBtn .label{margin:8px;cursor:pointer;-webkit-transition:.3s cubic-bezier(0.175,0.885,0.32,1.275) all;}#diigo-list-addBtn .spinner{left:8px;margin-left:-16px;opacity:0;height:16px;width:16px;-webkit-transition:.3s cubic-bezier(0.175,0.885,0.32,1.275) all;display:inline-block;position:relative;top:3px;visibility:hidden;}#diigo-list-addBtn.processing+a{display:none;}#diigo-list-addBtn.processing .spinner{opacity:1;margin-left:12px;left:-7px;visibility:visible;background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/img/popup-image/addlist-processing.gif");}#diigo-list-addCancel{color:#999;cursor:pointer;font-weight:normal;line-height:26px;margin-left:5px;font-size:12px;margin-top:2px;}#diigo-list-addCancel:hover{text-decoration:underline;}#diigo-list-group>div>select:hover{background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/img/popup-image/select-arrow-hover.png"),-webkit-linear-gradient(top,#fbfbfb,#f3f3f3);}#diigo-list-group>div>select.processing{background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/img/popup-image/loading5.gif"),-webkit-linear-gradient(top,#f5f5f5,#fff);}#diigo-list-group>div>select:active{background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/img/popup-image/select-arrow-hover.png"),-webkit-linear-gradient(top,#f5f5f5,#fff);}#diigolet-bm-tagListContainer-group{display:none;}#diigo-list-group>div>select,#Diigo-outliner>div>select{height:28px;width:430px;display:block;-webkit-appearance:none!important;border:1px solid #d7d7d7;background-position:right;background-repeat:no-repeat;color:#333;background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/img/popup-image/select-arrow.png"),-webkit-linear-gradient(top,#fff,#f5f5f5);outline:none;cursor:pointer;font-size:12px;padding-right:22px;border-radius:0;font-weight:normal;box-sizing:border-box!important;}#Diigo-Bookmark-bottom{height:49px;padding-top:24px;}#Diigo-Bookmark-bottom>div:first-child{float:left;margin-top:3px;margin-left:15px;}#diigolet-dlgBm-btnSave{display:inline-block;height:28px;width:82px;line-height:28px;background-image:-webkit-linear-gradient(top,#53aaf0,#118cef);float:right;cursor:pointer;margin-right:15px;text-align:center;color:white;border-radius:2px;border:1px solid #066ec1;font-size:14px;}#diigolet-dlgBm-btnSave:hover{background-image:-webkit-linear-gradient(top,#45a2ee,#037bdb);}#diigolet-dlgBm-btnSave:active{background-image:-webkit-linear-gradient(bottom,#53aaf0,#118cef);}#diigolet-dlgBm-btnCancel{display:inline-block;float:right;font-size:14px;color:#999;height:12px;cursor:pointer;margin-top:8px;margin-right:19px;}#diigolet-dlgBm-btnCancel:hover{text-decoration:underline;}.diigolet .diigolet-submit{width:140px;height:25px;text-align:center;}#diigolet-txtPermalink{background-color:#eee;padding:3px;font-size:13px;}#diigolet-cross-promotion{font-family:arial,helvetica,sans-serif;font-size:12px;padding:10px;}#diigolet-cross-promotion a{background:whiteSmoke;border:1px solid #ccc;color:#06c;display:block;padding:3px 10px;text-align:center;text-decoration:none;-webkit-box-shadow:rgba(255,255,255,0.6) 0 1px 0;-webkit-border-radius:10px;-webkit-transition:all .25s linear;}#diigolet-cross-promotion a:hover{background:white;text-decoration:none;color:#04c;}.diigoletContexMenu{font:12px arial,helvetica,clean,sans-serif;z-index:2147483645;}#diigolet-csm #diigolet-csm-research-mode{width:18px;height:18px;background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/focus-research-csm.png");position:absolute;top:-8px;left:-9px;z-index:1;display:none;}#diigolet-csm.diigo-researchMode #diigolet-csm-research-mode{display:block;}#diigolet-csm .csm-action{display:block;height:22px!important;width:27px!important;border:1px solid rgba(0,0,0,0.15);border-radius:1px 0 0 1px;opacity:.9;z-index:100000;float:left;margin:0!important;}#diigolet-csm #diigolet-csm-highlight{background-image:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/highlight-csm.png),-webkit-linear-gradient(#fff,#f5f5f5);}#diigolet-csm #diigolet-csm-highlight:active{background-image:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/highlight-csm.png),-webkit-linear-gradient(#f2f2f2,#fff);}#diigolet-csm #diigolet-csm-highlightAndComment{border-width:1px 1px 1px 0;border-style:solid;border-color:rgba(0,0,0,0.15);border-radius:1px 0 0 1px;background-image:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/stickynote-csm.png),-webkit-linear-gradient(#fff,#f5f5f5);}#diigolet-csm #diigolet-csm-highlightAndComment:active{background-image:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/stickynote-csm.png),-webkit-linear-gradient(#f2f2f2,#fff);}#diigolet-csm #diigolet-csm-search{border-width:1px 1px 1px 0;border-style:solid;border-color:rgba(0,0,0,0.15);border-radius:1px 0 0 1px;background-image:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/search-csm.png),-webkit-linear-gradient(#fff,#f5f5f5);}#diigolet-csm #diigolet-csm-search:active{background-image:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/search-csm.png),-webkit-linear-gradient(#f2f2f2,#fff);}#diigolet-csm.yellow #diigolet-csm-highlight{background-position:0 0;}#diigolet-csm.blue #diigolet-csm-highlight{background-position:0 -22px;}#diigolet-csm.green #diigolet-csm-highlight{background-position:0 -44px;}#diigolet-csm.pink #diigolet-csm-highlight{background-position:0 -66px;}#diigolet-csm.yellow #diigolet-csm-highlightAndComment{background-position:0 0;}#diigolet-csm.blue #diigolet-csm-highlightAndComment{background-position:0 -22px;}#diigolet-csm.green #diigolet-csm-highlightAndComment{background-position:0 -44px;}#diigolet-csm.pink #diigolet-csm-highlightAndComment{background-position:0 -66px;}#diigolet-csm .csm-action:not(#diigolet-csm-search).editing{opacity:1!important;}#diigolet-csm a:visited,#diigolet-csm a:link{padding:0!important;}#diigolet-csm{z-index:100000;height:22px!important;flex-direction:row;}#diigolet-csm>div{float:left;position:relative;}#diigolet-csm a:hover{opacity:1!important;}#diigolet-csm #diigolet-csm-dropdown:hover{background-position:0 -44px;}#diigolet-csm #diigolet-csm-highlight:hover+a#diigolet-csm-dropdown{background-position:0 -22px;}#diigolet-csm #diigolet-csm-dropdown:active{background-position:0 -66px;}#diigolet-csm .diigolet-csm-color{position:absolute;top:23px;left:1px;background-color:white;-webkit-box-shadow:0 1px 2px rgba(0,0,0,0.35);line-height:13px;overflow:hidden;height:0;visibility:visible!important;z-index:-1;display:block!important;}#diigolet-csm-highlightAndComment-wrapper .diigolet-csm-color{left:0;}#diigolet-csm .diigolet-csm-color.hidden{height:0;}#diigolet-csm .diigolet-csm-color.small{height:0;width:27px;display:block;}#diigolet-csm .diigolet-csm-coloritem{float:left;display:block;cursor:pointer;padding:0;margin:0;}.diigolet-csm-color.small .diigolet-csm-coloritem{height:7px;width:10px;}#diigolet-csm .diigolet-csm-coloritem.yellow{background-color:#fc6;border:1px solid #fc6;margin-right:1px;margin-bottom:1px;margin-left:1px;margin-top:1px;}#diigolet-csm .diigolet-csm-coloritem.blue{background-color:#7ccce5;border:1px solid #7ccce5;margin-bottom:1px;margin-top:1px;}#diigolet-csm .diigolet-csm-coloritem.green{background-color:#b4db66;border:1px solid #b4db66;margin-right:1px;margin-left:1px;margin-bottom:1px;}#diigolet-csm .diigolet-csm-coloritem.pink{background-color:#f98baf;border:1px solid #f98baf;margin-right:0!important;margin-bottom:1px;}#diigolet-csm .diigolet-csm-color .diigolet-csm-coloritem:hover{border-color:#36c;}#diigolet-annMenu{height:26px;border-top:2px solid #43b4ea;border-radius:2px;background-color:#fff;padding:1px;position:absolute;box-shadow:-1px 0 0 rgba(0,0,0,0.1),1px 0 0 rgba(0,0,0,0.1),0px 1px 1px rgba(0,0,0,0.2);-webkit-user-select:none;-webkit-animation:fadeIn 130ms ease-in;box-sizing:content-box!important;}#diigolet-annMenu .diigolet-annMenu-item{height:20px;width:20px;float:left;padding:1px;position:relative;cursor:pointer;-webkit-transition:background-color 200ms ease;border-radius:3px;padding:3px;box-sizing:content-box!important;}#diigolet-annMenu .diigolet-annMenu-item *{box-sizing:content-box!important;}#diigolet-annMenu .diigolet-annMenu-item>b{cursor:pointer;}#diigolet-annMenu .diigolet-annMenu-item:hover{background-color:#d8f2ff;}#diigolet-annMenu #diigolet-annMenu-currentColor{height:12px;width:12px;border:1px solid #289fe4;margin:3px 0 0 2px;}#diigolet-annMenu #diigolet-annMenu-currentColor>b{height:10px;width:10px;border:1px solid #fff;display:block;background-color:#fc6;cursor:pointer;}#diigolet-annMenu #diigolet-annMenu-currentColor.yellow>b{background-color:#fc6;}#diigolet-annMenu #diigolet-annMenu-currentColor.blue>b{background-color:#7ccce5;}#diigolet-annMenu #diigolet-annMenu-currentColor.green>b{background-color:#b4db66;}#diigolet-annMenu #diigolet-annMenu-currentColor.pink>b{background-color:#f98baf;}#diigolet-annMenu .diigolet-annMenu-item>b{display:block;height:20px;width:20px;}#diigolet-annMenu-add>b{background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/ann-add.png");}#diigolet-annMenu-share>b{background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/ann-share.png");}#diigolet-annMenu-del>b{background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/ann-del.png");}#diigolet-annMenu-more>b{background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/ann-more.png");}#diigolet-annMenu-colorPicker{height:62px;width:14px;border:1px solid #96bbd5;padding:3px 2px;background-color:#fff;position:relative;top:3px;left:-1px;display:none;-webkit-animation:diigo-dropdown .15s ease-in 1;flex-direction:column;}#diigolet-annMenu-colorPicker .ann-colorItem{height:12px;width:12px;border-width:1px;border-style:solid;display:block;margin-bottom:2px;}#diigolet-annMenu-colorPicker .ann-colorItem:hover{border-color:#06f!important;}#diigolet-annMenu-colorPicker .ann-colorItem.colorchecked b{width:4px;height:4px;background:#666;margin-top:4px;margin-left:4px;display:block;}.ann-colorItem#diigolet-context-yellow{border-color:#e9a110;background-color:#fc6;}.ann-colorItem#diigolet-context-blue{border-color:#33a5c9;background-color:#7ccce5;}.ann-colorItem#diigolet-context-green{border-color:#9ac83b;background-color:#b4db66;}.ann-colorItem#diigolet-context-pink{border-color:#da376c;background-color:#f98baf;}#diigolet-annMenu-arrow{position:absolute;top:100%;left:33px;height:8px;width:14px;background-image:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/ann-arrow.png);}#diigolet-annMenu.onlyMy #diigolet-annMenu-arrow{left:59px;}#diigolet-annMenu-tip{padding-left:4px;border-top:1px solid #eee;margin-top:1px;color:#999;}#diigolet-annMenu-moreThings{display:none;position:absolute;top:110%;left:77%;min-width:236px;max-width:236px;padding:3px;border:1px solid #94bcd6;box-shadow:0 1px 2px rgba(0,0,0,0.15);background-color:#fff;border-radius:3px;font:12px/18px arial;color:#333;}.diigoletContexMenu a:link,.diigoletContexMenu a:visited{display:block;padding:2px 3px;text-decoration:none;color:#000;cursor:default;white-space:nowrap;}.diigoletContexMenu a:hover:not(.colorItem),.diigoletContexMenu a:active{color:#fff;background:#09f;}.diigoletContexMenu div.sep{line-height:0;border-top:1px solid #aaa;margin:3px 0;}*html .diigoletContexMenu ._selection a{width:45px;}*html .diigoletContexMenu ._highlight a{width:90px;}.diigolet.diigoletFN{z-index:2147483644;width:300px;-webkit-user-select:none;}.diigolet.diigoletFN *{flex-direction:row;}#diigolet-dlg-sticky.groupNew #FN-post-form{display:block;}#diigolet-dlg-sticky.groupNew #FN-group-content-nav{display:none;}#diigolet-dlg-sticky.groupNew #FN-group-content{display:none;}.diigolet.diigoletFN.onlyPrivate #diigolet-dlg-sticky-switcher{margin-left:29px;}.diigolet.diigoletFN.onlyGroup #diigolet-dlg-sticky-switcher{margin-left:29px;}#diigolet-dlg-sticky-top{height:30px;border-radius:2px 2px 0 0;position:relative;z-index:2;-webkit-transition:background-color 200ms ease;padding-right:5px;display:block;}#diigolet-dlg-sticky.yellow #diigolet-dlg-sticky-top{background:#f1c40f;}#diigolet-dlg-sticky.blue #diigolet-dlg-sticky-top{background:#5cc7ff;}#diigolet-dlg-sticky.green #diigolet-dlg-sticky-top{background:#47bf87;}#diigolet-dlg-sticky.pink #diigolet-dlg-sticky-top{background:#fe97bc;}#diigolet-dlg-sticky-content{background-color:#fcfbf7;border-radius:0 0 2px 2px;border-width:0 1px 1px 1px;border-color:rgba(0,0,0,0.08);border-style:solid;box-shadow:0 1px 3px rgba(0,0,0,0.08);position:relative;}#diigolet-dlg-sticky-logo{float:left;height:20px;width:20px;background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/FN-logo.png") 50% 50% no-repeat;margin:4px 5px 0 4px;}#diigolet-dlg-sticky-top>span{vertical-align:middle;line-height:28px;font-size:14px;color:#bb6602;}#diigolet-dlg-sticky-close{float:right;height:20px;width:20px;background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/FN-close.png") 50% 50% no-repeat;margin:5px 4px 0 0;cursor:pointer;display:none;}#diigolet-dlg-sticky-color{position:relative;float:right;margin:9px 4px 0 0;cursor:pointer;z-index:2;}#diigolet-dlg-sticky-addTab{height:12px;width:21px;margin:9px 7px 0 0;display:none;float:right;cursor:pointer;}#diigolet-dlg-sticky.onlyPrivate #diigolet-dlg-sticky-addTab{display:block;background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/add-tab.png") 0 0 no-repeat;}#diigolet-dlg-sticky.onlyGroup #diigolet-dlg-sticky-addTab{display:block;background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/add-tab.png") 0 -12px no-repeat;}#diigolet-dlg-sticky-currentColor{height:12px;width:12px;border:1px solid #fff;cursor:pointer;border-radius:1px;}#diigolet-dlg-sticky-colorPicker{height:62px;width:13px;padding:3px 3px 3px 2px;background-color:#fff;position:absolute;top:122%;display:none;-webkit-animation:diigo-dropdown .15s ease-in 1;box-shadow:0 1px 1px rgba(0,0,0,0.25);z-index:3;flex-direction:column;}#diigolet-dlg-sticky-colorPicker .dlg-colorItem{height:12px;width:12px;border-width:1px;border-style:solid;display:block;margin-bottom:2px;margin-left:-1px;}#diigolet-dlg-sticky-colorPicker .dlg-colorItem[color="yellow"]{border-color:#e9a110;background-color:#fc6;}#diigolet-dlg-sticky-colorPicker .dlg-colorItem[color="blue"]{border-color:#33a5c9;background-color:#7ccce5;}#diigolet-dlg-sticky-colorPicker .dlg-colorItem[color="green"]{border-color:#9ac83b;background-color:#b4db66;}#diigolet-dlg-sticky-colorPicker .dlg-colorItem[color="pink"]{border-color:#da376c;background-color:#f98baf;}#diigolet-dlg-sticky-colorPicker .dlg-colorItem.colorchecked b{width:4px;height:4px;background:#666;margin-top:3px;margin-left:3px;display:block;}#diigolet-dlg-sticky-colorPicker .dlg-colorItem:hover{border-color:#06f!important;}.FN-content-wrapper{display:none;opacity:0;-webkit-animation:fadeIn .2s ease-out;}@-webkit-keyframes fadeIn{0%{opacity:0;}100%{opacity:1;}}.FN-content-wrapper.private{min-height:120px;}#diigolet-dlg-sticky-content .FN-content-wrapper.private textarea{margin:6px 6px 0 6px;min-height:104px;width:282px;background-color:#fcfbf7!important;border:none;outline:none;overflow-y:visible;resize:none!important;font-size:12px;line-height:18px;word-wrap:break-word;}#diigolet-dlg-sticky-content #FN-content-footer{text-align:right;margin-top:-5px;}#diigolet-dlg-sticky-content #FN-content-footer #editing{height:30px;border-top:1px solid #ecece7;display:none;}#diigolet-dlg-sticky-content #FN-content-footer #editing a{float:right;}#diigolet-dlg-sticky-content #FN-content-footer #editing #FN-private-saveBtn{height:20px;width:50px;border-radius:2px;border:1px solid #85a0a6;color:#85a0a6;font-size:12px;text-align:center;line-height:20px;margin:4px 4px 4px 10px;}#diigolet-dlg-sticky-content #FN-content-footer #editing #FN-private-saveBtn:active{background:#85a0a6;color:#fff;}#diigolet-dlg-sticky-content #FN-content-footer #editing #FN-private-cancelBtn{text-decoration:none;color:#a3a39e;font-size:12px;line-height:30px;}#diigolet-dlg-sticky-content #FN-content-footer #editing #FN-private-cancelBtn:hover{text-decoration:underline;}#diigolet-dlg-sticky-content #FN-content-footer #editDone{height:22px;}#FN-private-saveBtn.notify{-webkit-animation:borderNotice 600ms ease both;-webkit-animation-iteration-count:2;}#FN-content-footer #FN-private-datetime{font-family:Arial,Helvetica;font-size:12px;color:#999;line-height:22px;margin-right:10px;float:right;}#FN-content-footer #FN-private-delete{display:none;float:left;vertical-align:middle;line-height:22px;margin-left:8px;color:#999;cursor:pointer;-webkit-transition:color 200ms ease;}#FN-content-footer #FN-private-delete b{display:block;float:left;height:12px;width:11px;background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/private-del.png");background-repeat:no-repeat;margin:5px 3px 0 0;cursor:pointer;}#FN-content-footer #FN-private-delete:hover{color:red;}#FN-content-footer #FN-private-delete:hover b{background-position:0 -12px;}.FN-content-wrapper.group{min-height:50px;}.FN-radio{display:none;}#diigolet-dlg-sticky-switcher{position:absolute;left:82px;top:-25px;z-index:2;}#diigolet-dlg-sticky-switcher.onlyOneTab span{margin-left:28px;}#diigolet-dlg-sticky-switcher .FN-switcher{float:left;height:18px;text-align:center;font-size:12px;cursor:pointer;padding:3px 8px;color:#fff;line-height:14px;-webkit-transition:background-color 200ms ease;border-radius:2px;}#diigolet-dlg-sticky-switcher .FN-switcher b{height:12px;width:13px;float:left;background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/tab-logo.png");background-repeat:no-repeat;margin:1px 1px 0 0;cursor:pointer;}#diigolet-dlg-sticky-content.private #FN-switcher-private{background-color:rgba(0,0,0,0.12);}#diigolet-dlg-sticky-content #FN-switcher-private b{background-position:0 0;}#diigolet-dlg-sticky-content #FN-switcher-group b{background-position:0 -12px;}#diigolet-dlg-sticky-content.group #FN-switcher-group{background-color:rgba(0,0,0,0.12);}#diigolet-dlg-sticky.onlyPrivate #FN-switcher-group{display:none;}#diigolet-dlg-sticky.onlyGroup #FN-switcher-private{display:none;}#diigolet-dlg-sticky-content.private .FN-content-wrapper.private{opacity:1;display:block;}#diigolet-dlg-sticky-content.group .FN-content-wrapper.group{opacity:1;-webkit-transition:opacity ease-out .2s .1s;display:block;}#FN-post-form{padding:10px;display:none;}#FN-post-form>div:last-child{margin-top:6px;}#FN-post-form textarea{width:272px;max-width:272px;height:54px;outline:none;line-height:18px;border:1px solid #ddd;}#FN-post-form textarea.notify,#FN-post-form select.notify{-webkit-animation:borderNotice 600ms ease both;-webkit-animation-iteration-count:2;}#FN-post-form button{float:right;margin:0;height:24px;width:50px;text-align:center;background-image:-webkit-linear-gradient(top,#fff,#f5f5f5);border:1px solid #ccc;font-size:14px;border-radius:2px;cursor:pointer;-webkit-transition:.3s cubic-bezier(0.175,0.885,0.32,1.275) all,10ms ease background-color;overflow:hidden;position:relative;}#FN-post-form .button-label{-webkit-transition:.3s cubic-bezier(0.175,0.885,0.32,1.275) all;position:relative;cursor:pointer;z-index:3;}#FN-post-form .button-spinner{position:absolute;z-index:2;display:inline-block;width:18px;height:18px;opacity:0;-webkit-transition:.3s cubic-bezier(0.175,0.885,0.32,1.275) all;left:31px;margin-left:-16px;margin-top:-10px;background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/uploading.gif");}#FN-post-form textarea:disabled{color:#999;background-color:#eee;}#FN-post-form button:disabled{background-color:#ddd;background-image:none;cursor:default;}#FN-post-form button:disabled .button-label{opacity:0;top:16px;}#FN-post-form button:disabled .button-spinner{opacity:1;top:12px;}#FN-post-form a{float:right;font-size:12px;text-decoration:none;color:#aaa;margin:5px 12px 5px 5px;}#FN-post-form a:hover{text-decoration:underline;}#FN-post-form.notEdit #FN-group-share{margin-left:67px;}#FN-post-form.notEdit div:first-child{display:none;}#FN-post-form.notEdit button,#FN-post-form.notEdit a{display:none;}#FN-group-content-nav{width:100%;height:25px;border-bottom:1px solid #eee;color:#333;font-size:12px;text-align:center;position:relative;z-index:1;}#FN-current-group{line-height:25px;padding:2px 10px;cursor:pointer;}#FN-current-group b{height:0;width:0;border-width:5px;border-style:solid;border-bottom-color:transparent;border-left-color:transparent;border-right-color:transparent;border-top-color:#666;display:inline-block;margin:2px 2px 0 6px;vertical-align:middle;cursor:pointer;}#FN-current-group span{cursor:pointer;}#FN-group-menu{margin:0;position:absolute;width:196px;top:90%;left:50px;background-color:#fff;border:1px solid rgba(0,0,0,0.12);text-align:left;box-shadow:0 1px 2px rgba(0,0,0,0.1);-webkit-animation:diigo-dropdown .15s ease-in 1;padding:2px;display:none;}#FN-group-content-nav li{list-style:none;height:20px;width:100%;line-height:20px;font-size:12px;color:#333;cursor:pointer;text-indent:9px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}#FN-group-share-new-ul{margin-top:2px;padding-top:2px;border-top:1px solid #ccc;}#FN-group-content-nav li:hover{background-color:#aaa;color:#fff;}#FN-group-content-container{min-height:80px;max-height:200px;overflow-y:auto;padding:0 10px 10px 10px;margin-top:-1px;}#FN-group-content-container .FN-group-comment-item{border-top:1px solid #eee;padding:5px 0;position:relative;}#FN-group-content-container .FN-group-comment-item-tbar{position:relative;font-size:12px;}#FN-group-content-container .FN-group-comment-item-content{font-size:12px;line-height:18px;}#FN-group-content-container .FN-group-comment-item-tbar .FN-group-comment-name{text-decoration:none;margin-right:3px;color:#0072d6;float:left;}#FN-group-content-container .FN-group-comment-item-time{font-size:12px;color:#777;}#FN-group-content-postform{padding:10px;position:relative;}#FN-group-content-postform textarea{height:18px;width:204px;max-width:208px;border:1px solid #d7d7d7;outline:none;line-height:18px;vertical-align:bottom;-webkit-transition:background-color .1s ease-in-out;}#FN-group-content-postform.active textarea{height:36px;border-color:#aaa;}#FN-group-content-postform textarea.notify{-webkit-animation:borderNotice 600ms ease both;-webkit-animation-iteration-count:2;}#FN-group-content-postform textarea:disabled{color:#999;background-color:#eee;}#FN-group-content-postform .post-action{vertical-align:bottom;display:inline-block;width:50px;padding:0 0 0 14px;}#FN-group-content-postform .post-action a{position:relative;left:4px;top:2px;color:#aaa;display:none;}#FN-group-content-postform.active .post-action a{display:block;}#FN-group-content-postform .post-action a:hover{text-decoration:underline;}#FN-group-content-postform button{margin:0;height:24px;width:50px;text-align:center;background-image:-webkit-linear-gradient(top,#fff,#f5f5f5);border:1px solid #ccc;font-size:14px;cursor:pointer;-webkit-transition:.3s cubic-bezier(0.175,0.885,0.32,1.275) all,10ms ease background-color;overflow:hidden;position:relative;}#FN-group-content-postform .button-label{-webkit-transition:.3s cubic-bezier(0.175,0.885,0.32,1.275) all;position:relative;cursor:pointer;z-index:3;}#FN-group-content-postform .button-spinner{position:absolute;z-index:2;display:inline-block;width:18px;height:18px;opacity:0;-webkit-transition:.3s cubic-bezier(0.175,0.885,0.32,1.275) all;left:31px;margin-left:-16px;margin-top:-10px;background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/uploading.gif");}#FN-group-content-postform button:disabled{background-color:#ddd;background-image:none;cursor:default;}#FN-group-content-postform button:disabled .button-label{opacity:0;top:16px;}#FN-group-content-postform button:disabled .button-spinner{opacity:1;top:12px;}#FN-group-content-container .FN-group-comment-item-delete{text-decoration:none;font-size:12px;color:#999;cursor:pointer;visibility:hidden;float:right;}#FN-group-content-container .FN-group-comment-item:hover .FN-group-comment-item-delete{visibility:visible;}#FN-group-content-container .FN-group-comment-item-delete:hover{color:red;}#diigolet-dlg-sticky-content ::-webkit-scrollbar{width:8px;}#diigolet-dlg-sticky-content ::-webkit-scrollbar-track-piece{background-color:transparent;}#diigolet-dlg-sticky-content ::-webkit-scrollbar-thumb:vertical{height:20px;background-color:#ccc;}#diigolet-dlg-sticky-content ::-webkit-scrollbar-thumb:hover{background-color:#aaa;}#diigolet-dlg-sticky-content select{-webkit-appearance:none;width:150px;height:24px;border:1px solid #ccc;background-position:right;background-repeat:no-repeat;background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/FN-select-arrow.png"),-webkit-linear-gradient(top,#fff,#fafafa);outline:none;cursor:pointer;font-size:12px;border-radius:2px;padding-right:14px;}.diigolet.diigoletFN a:link,.diigolet.diigoletFN a:visited{color:#06c;}.diigolet.diigoletFN a:hover,.diigolet.diigoletFN a:active{color:#333;text-decoration:none;}.diigolet .diigoletFNL{width:23px;background:transparent url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/float_note_l.png) no-repeat left top;}.diigolet .diigoletFNT{height:32px;background:transparent url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/float_note_t.png) no-repeat right top;cursor:move!important;}.diigolet .diigoletFNR{width:16px;background:transparent url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/float_note_r.png) no-repeat left bottom;overflow:hidden;vertical-align:bottom;}.diigolet .diigoletFNB{height:34px;background:transparent url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/float_note_b.png) no-repeat left bottom;}.diigolet .diigoletFNTH{vertical-align:top;width:12px;}.diigolet .diigoletFNTH div{width:12px;height:12px;background:transparent url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/float_note_h_rt.gif) no-repeat right top;position:relative;top:5px;left:-22px;overflow:hidden;cursor:ne-resize!important;}.diigolet .diigoletFNB{vertical-align:top;overflow:hidden;}.diigolet .diigoletFNPosN .diigoletFNXjjR,.diigolet .diigoletFNPosN .diigoletFNXjjT,.diigolet .diigoletFNPosN .diigoletFNXjjB,.diigolet .diigoletFNPosN .diigoletFNTH div,.diigolet .diigoletFNPosN .diigoletFNB div{display:none;}.diigolet .diigoletFNT h1{font:12px/19px Arial,Helvetica,sans-serif;font-weight:bold;color:#666;margin:4px 0 0 5px;padding:0;}.diigolet .diigoletFNT div.menu{margin:3px 21px 10px 0;background-color:#fff9a4;border-right:1px solid #f2e984;border-left:1px solid #c9b822;}.diigolet .diigoletFNT div.menu a{display:block;line-height:19px;float:left;color:#666;padding:0 5px;border-right:1px solid #c9b822;text-decoration:none;}.diigolet .diigoletFNT div.menu a:hover,.diigolet .diigoletFNT div.menu a:active{background-color:#fff587;color:#333;}.diigolet .diigoletFNT div.menu a.diigoletFNOpt{background:transparent url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/float_note_downdot.gif) no-repeat right top;padding-right:14px;}.diigolet .diigoletFNT{font:12px/32px Arial,Helvetica,sans-serif;}.diigolet .diigoletFNContent,.diigolet .diigoletFNComment{background-color:#fff89f;color:#666;font-family:Arial,Helvetica,sans-serif;font-size:11px;overflow:auto;width:355px;zoom:1;border-bottom:1px solid #e0db9d;}.diigolet .diigoletFNContent .diigoletFNAuthorP{font-size:10px;font-weight:normal;color:#666;margin:0 11px 5px 0;padding:2px 5px;line-height:100%;}.diigolet .diigoletFNContent .diigoletFNAuthorP .diigoletFNAuthor{border-bottom:1px dotted #ccc;color:#06c;}.diigolet .diigoletFNContent .diigoletFNAuthorP .diigoletFNAuthor:hover,.diigoletFNContent .diigoletFNAuthorP .diigoletFNAuthor:active{border-bottom:1px solid #ccc;color:#333;}.diigolet .diigoletFNContent .diigoletFNAuthorP a{color:#999;}.diigolet .diigoletFNContent .diigoletFNAuthorP a:hover,.diigoletFNContent .diigoletFNAuthorP a:active{color:#666;}.diigolet.diigoletFN blockquote{display:inline-block;}.diigolet .diigoletFNComment select,.diigolet .diigoletFNComment input,.diigolet .diigoletFNComment textarea{font:11px/15px Verdana,Arial,Helvetica,sans-serif;max-width:345px;}.diigolet .diigoletFNComment p{margin:5px 0;}.diigolet .diigoletFNTDiv{height:32px;overflow:hidden;}.diigolet.diigoletFN .menu{float:right;height:19px;overflow:hidden;}.diigolet .labelList label{margin-right:2px;background-color:#eee;color:#666;white-space:nowrap;font-weight:normal;font-size:9px;}.diigolet .labelList span{padding:0 2px;}.diigolet .labelList a{padding:0 2px;background-color:#ffe76a;}.diigolet .labelList a:hover{color:#fef5c7;text-decoration:none;}.diigolet .labelList a.del{border:none;padding-right:2px;font-weight:normal;}.diigolet a.del{cursor:pointer;background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigoletIconv3.gif") no-repeat left -343px;}.diigolet a.del:hover{filter:alpha(opacity=100);-moz-opacity:1;background-position:1px -342px;text-decoration:none;}.diigolet ul.diigoletFNDropdown{position:absolute;display:none;left:10px;background-color:#fff89f;border:1px solid #c9b822;z-index:2147483647;}.diigolet ul.diigoletFNDropdown li{padding-left:25px;}.diigolet ul.diigoletFNDropdown a:link,.diigolet ul.diigoletFNDropdown a:visited{color:#666;display:block;width:85px;font:11px Arial,Helvetica,sans-serif;}.diigolet ul.diigoletFNDropdown a:hover,.diigolet ul.diigoletFNDropdown a:active{background-color:#fff567;color:#333;}.diigolet.diigoletFNIEPatch .diigoletFNL{background:transparent url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/float_note_l.gif) no-repeat left top;}.diigolet.diigoletFNIEPatch .diigoletFNT{background:transparent url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/float_note_t.gif) no-repeat right top;}.diigolet.diigoletFNIEPatch .diigoletFNR{background:transparent url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/float_note_r.gif) no-repeat left bottom;}.diigolet.diigoletFNIEPatch .diigoletFNB{background:transparent url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/float_note_b.gif) no-repeat left bottom;}.diigolet.diigoletFNIEPatch .diigoletFNT{height:23px;}.diigolet.diigoletFNIEPatch .diigoletFNTDiv{height:23px;}.diigoletFN.editing .diigoletFNComment{display:block;}.personalText{color:#555!important;font-size:10px!important;display:inline-block;overflow:hidden!important;text-overflow:ellipsis!important;white-space:nowrap!important;width:343px!important;margin-top:4px!important;}.IconFeild{float:left!important;margin-left:8px!important;margin-top:5px!important;}.IconFeild:hover .editIcon{background-position:right!important;}.multipalCol{padding-top:0!important;}.singleCol{padding-top:7px!important;}.myCommentSpan{margin-left:35px!important;}.notMyCommentSpan{margin-left:15px!important;}.footText{line-height:1.5;width:343px!important;}div.floatNote{position:absolute!important;width:34px;height:34px;text-align:center;background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/float_icon.png")!important;background-repeat:no-repeat;z-index:2147483643;}div.floatNote.private.yellow{background-position:0 0;}div.floatNote.private.blue{background-position:0 -68px;}div.floatNote.private.green{background-position:0 -136px;}div.floatNote.private.pink{background-position:0 -204px;}div.floatNote.group.yellow{background-position:0 -34px;}div.floatNote.group.blue{background-position:0 -102px;}div.floatNote.group.green{background-position:0 -170px;}div.floatNote.group.pink{background-position:0 -238px;}div.floatNote.diigoshow{-webkit-animation:bounceIn 400ms ease both;-webkit-animation-play-state:running;}div.floatNote.diigoadd{-webkit-animation:flipInY 600ms ease both;-webkit-animation-play-state:running;}div.floatNote span{position:absolute;left:-4px;top:-3px;display:block;border-radius:15px;background-color:#666;padding:2px 3px;border:1px solid #fff;height:8px;font-size:11px;color:#fff;line-height:8px;}html div.floatNote{filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true,sizingMethod=scale,src="chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/float_icon.png");overflow:hidden;background:none;overflow:visible;}em.diigoHighlight{text-align:inherit;text-decoration:inherit;line-height:inherit;font:inherit;color:inherit;display:inline;position:relative;zoom:1;margin:0;padding:0;}em.diigoHighlight.hover{cursor:move;}em.diigoHighlight.hover.yellow{background-color:#f5f548;}em.diigoHighlight.hover.blue{background-color:#84b9ef;}em.diigoHighlight.hover.green{background-color:#a0de60;}em.diigoHighlight.hover.pink{background-color:#f9b0b0;}em.diigoHighlight.diigoHighlightcommented{margin-right:25px;}em.diigoHighlight.mouseOvered{background-color:#ffc62a!important;}em.diigoHighlight.yellow{background-color:#ff9;}img.diigoHighlight.yellow{cursor:pointer;outline:2px solid #ff9!important;}em.diigoHighlight.blue{background-color:#abd5ff;}img.diigoHighlight.blue{cursor:pointer;outline:2px solid #abd5ff!important;}em.diigoHighlight.green{background-color:#b2e57e;}img.diigoHighlight.green{cursor:pointer;outline:2px solid #b2e57e!important;}em.diigoHighlight.pink{background-color:#fcc;}img.diigoHighlight.pink{cursor:pointer;outline:2px solid #fcc!important;}img.diigoHighlight.mouseOvered{cursor:pointer;outline:2px solid #ffc62a!important;}.diigolet .diigolet-closeBtn{position:absolute;background:transparent url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/close1.gif);width:14px;height:14px;top:2px;right:2px;cursor:pointer!important;}.ac_results{border:1px solid #ddd;background:#fff none repeat scroll 0;cursor:pointer!important;font-size:11px!important;left:0;position:absolute;width:392px;z-index:2147483647;border-radius:1px;}.ac_results ul{margin:0;padding:0;}.ac_results li{list-style-image:none;list-style-position:outside;list-style-type:none;padding:2px 5px;border-radius:1px;}.ac_results a{width:100%;}.ac_results li.over{color:white;background:#09f none repeat scroll 0;}#gtooltip{background-color:#2a2a2a;border:1px solid #fff;color:#fff;display:block;font-size:12px!important;font-weight:bold!important;opacity:0;padding:4px 6px!important;pointer-events:none;position:absolute!important;-webkit-transition:visibility .13s,opacity .13s ease-out,left 0 linear .13s,top 0 linear .13s;-moz-transition:visibility .13s,opacity .13s ease-out,left 0 linear .13s,top 0 linear .13s;-o-transition:visibility .13s,opacity .13s ease-out,left 0 linear .13s,top 0 linear .13s;transition:visibility .13s,opacity .13s ease-out,left 0 linear .13s,top 0 linear .13s;visibility:hidden;font-family:arial,sans-serif!important;z-index:2147483647;top:-100px;left:-100px;line-height:15px!important;}#gtooltip.show{visibility:visible;opacity:1;-webkit-transition:visibility 0,opacity .13s ease-in;}#gtooltip #gtooltip-arrow{position:absolute!important;border:5px solid!important;border-top-color:transparent!important;border-right-color:transparent!important;border-bottom-color:#2a2a2a!important;border-left-color:transparent!important;height:0!important;width:0!important;line-height:0!important;}#gtooltip #gtooltip-content{white-space:nowrap!important;}.diigo-scrollmarker{height:10px;width:10px;cursor:pointer;overflow:hidden;font-size:12px;z-index:1000000;}.diigo-scrollmarker .inner{height:0;width:0;border-width:5px;border-style:solid;position:relative;right:-4px;}.diigo-scrollmarker.yellow .inner{border-color:transparent transparent transparent #ffb000;}.diigo-scrollmarker.blue .inner{border-color:transparent transparent transparent #0087f7;}.diigo-scrollmarker.green .inner{border-color:transparent transparent transparent #00a256;}.diigo-scrollmarker.pink .inner{border-color:transparent transparent transparent #f39;}#diigolet-highlight-share{background-color:#fcfbf7;width:402px;font-family:Arial,Helvetica,sans-serif;-webkit-border-radius:0;cursor:default;position:absolute;z-index:2147483646;box-shadow:0 1px 3px rgba(0,0,0,0.08);background-clip:content-box;visibility:hidden;opacity:0;border-radius:2px;display:block;}#diigolet-highlight-share.show{opacity:1;visibility:visible;}#diigolet-highlight-share-top{height:30px;vertical-align:middle;background-color:#39baf6;line-height:30px;padding:0 10px;font-size:14px;color:white;text-align:left;border-radius:2px 2px 0 0;}.diigolet-question-mark{height:12px;width:12px;background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/q-mark.png");cursor:pointer;position:relative;display:inline-block;margin:9px 7px 0 6px;}.diigolet-question-mark-tip{padding:5px;position:absolute;bottom:139%;left:-82px;display:none;width:180px;color:#7f8d99;border-radius:2px;box-shadow:0 0 0 2px rgba(0,0,0,0.2);background:#fff;font:normal 12px/14px Arial,helvetica,sans-serif;}#diigolet-highlight-share-close{float:right;height:16px;width:16px;background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/win-close.png") 50% 50% no-repeat;margin-top:7px;opacity:.5;cursor:pointer;}#diigolet-highlight-share-close:hover{opacity:1;}#diigolet-highlight-container{border-radius:0 0 2px 2px;border-width:0 1px 1px 1px;border-color:rgba(0,0,0,0.08);border-style:solid;display:block;}#diigolet-highlight-main{padding:10px 10px;}#diigolet-highlight-share-textarea{border:1px solid #d7d7d7;outline:none;width:372px;height:42px;max-width:374px;line-height:18px;-webkit-transition:border-color 200ms ease;font:12px/14px Arial;min-height:42px;padding:3px 3px;resize:vertical;box-sizing:content-box;}#diigolet-highlight-share-textarea:disabled{background-color:#eee;}#diigolet-highlight-share-textarea:focus{border:1px solid #aaa;}.clearfloat:after{display:block;clear:both;content:"";visibility:hidden;height:0;}.clearfloat{zoom:1;}#diigolet-highlight-footer{padding:0 10px 10px 10px;position:relative;display:block;}#diigolet-highlight-footer a{float:right;}#diigolet-highlight-share-copybtn{height:24px;width:60px;line-height:24px;cursor:pointer;text-align:center;color:white;border-radius:2px;border:1px solid #066ec1;font-size:12px;text-decoration:none;border-radius:2px;border:1px solid #85a0a6;color:#85a0a6;font-size:12px;text-align:center;}#diigolet-highlight-share-copybtn:active{background:#85a0a6;color:#fff;}#diigolet-highlight-share-cancelbtn{color:#999;height:12px;font-size:12px;margin:6px 14px 0 0;text-decoration:none;border:none!important;}#diigolet-highlight-share-cancelbtn:hover{text-decoration:underline;}#diigolet-highlight-footer .diigolet-highlight-social-btn{float:left!important;height:26px;width:26px;margin-right:12px;}#diigolet-highlight-share-twitter{background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/highlight-share.png");}#diigolet-highlight-share-facebook{background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/highlight-share.png");background-position:-26px 0;}#diigolet-highlight-share-copySuccess{position:absolute;top:0;right:85px;padding:5px 10px;background:#fff1a8;color:black;border-radius:3px;line-height:18px;font-size:12px;-webkit-transition:all .3s;opacity:0;-webkit-transform-style:preserve-3d;-webkit-transform:rotateY(-70deg);}#diigolet-highlight-share-copySuccess.show{-webkit-transform:rotateY(0deg);opacity:1;}#diigo-annotationList{background-color:#fff;width:423px;font-family:Arial,Helvetica,sans-serif;-webkit-border-radius:0;cursor:default;z-index:2147483646;box-shadow:0 1px 3px rgba(0,0,0,0.08);background-clip:content-box;border-radius:2px;position:fixed;top:52px;left:0;-webkit-animation:slideInRight 200ms ease;}#diigo-annotationList-btn{height:20px;width:20px;background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/warning-orphanHighlight.png");position:fixed;right:0;top:55px;cursor:pointer;z-index:1000001;}#diigo-annotationList-top{height:30px;vertical-align:middle;background-color:#39baf6;line-height:30px;padding:0 10px;font-size:14px;color:#fff;text-align:left;border-radius:2px 2px 0 0;text-indent:5px;display:block;}#diigo-annotationList-top b{height:12px;width:14px;background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/list-icon.png");float:left;margin-top:10px;margin-left:-4px;display:block;}#diigo-annotationList-close{float:right;height:16px;width:16px;background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/win-close.png") 50% 50% no-repeat;margin-top:7px;opacity:.5;cursor:pointer;}#diigo-annotationList-close:hover{opacity:1;}#diigo-annotationList-toolbar{height:30px;font:normal 12px/30px arial,Helvetica;display:block;}#diigo-annotationList-toolbar span{float:left;color:#333;margin-left:10px;}#diigo-annotationList-toolbar a{float:right;margin-right:10px;text-decoration:none;color:#0072d6;}#diigo-annotationList-box{border-radius:0 0 2px 2px;border-width:0 1px 1px 1px;border-color:rgba(0,0,0,0.08);border-style:solid;padding:5px 6px 0 6px;position:relative;max-height:300px;overflow:auto;}#diigo-annotationList-box .diigo-annotationList-item{margin-bottom:8px;position:relative;background-color:#f9f9f9;}#diigo-annotationList-box .diigo-annotationList-item.diigo-orphan .diigo-annotationList-highlight,#diigo-annotationList-box .diigo-annotationList-item.diigo-orphan .diigo-annotationList-sticky{padding-right:19px;}.diigo-annotationList-item .diigo-annotationList-orphan-warning{height:19px;width:19px;background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/orphan-warning.png");position:absolute;top:0;right:0;opacity:.65;}.diigo-orphan-warning{height:15px;width:15px;background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/orphan-warning-small.png");float:left;opacity:.65;margin-right:4px;margin-top:7px;}#diigo-annotationList-box .diigo-annotationList-highlight{padding:6px 6px;font:normal 12px/14px arial,Helvetica;color:#333;border-left-style:solid;border-left-width:4px;border-bottom:1px solid #eee;position:relative;word-wrap:break-word;white-space:normal;word-break:break-all;}#diigo-annotationList-box .diigo-annotationList-item.diigo-yellow .diigo-annotationList-highlight{border-left-color:#ffba01;}#diigo-annotationList-box .diigo-annotationList-item.diigo-blue .diigo-annotationList-highlight{border-left-color:#6eaaf5;}#diigo-annotationList-box .diigo-annotationList-item.diigo-green .diigo-annotationList-highlight{border-left-color:#7bbd3f;}#diigo-annotationList-box .diigo-annotationList-item.diigo-pink .diigo-annotationList-highlight{border-left-color:#ff9c9c;}#diigo-annotationList-box .diigo-annotationList-sticky{padding:6px 6px 6px 26px;font:normal 12px/14px arial,Helvetica;color:#333;background-color:#f9f9f9;border-left-style:solid;border-left-width:4px;border-left-color:#ddd;border-bottom:1px solid #eee;position:relative;word-wrap:break-word;white-space:normal;word-break:break-all;}#diigo-annotationList-box .diigo-annotationList-item.diigo-yellow .diigo-annotationList-sticky .diigo-anntationList-floatIcon{background-position:0 -16px;}#diigo-annotationList-box .diigo-annotationList-item.diigo-blue .diigo-annotationList-sticky .diigo-anntationList-floatIcon{background-position:0 -32px;}#diigo-annotationList-box .diigo-annotationList-item.diigo-green .diigo-annotationList-sticky .diigo-anntationList-floatIcon{background-position:0 -48px;}#diigo-annotationList-box .diigo-annotationList-item.diigo-pink .diigo-annotationList-sticky .diigo-anntationList-floatIcon{background-position:0 -64px;}.diigo-annotationList-item .diigo-annotationList-item-action{position:absolute;right:1px;bottom:1px;font:normal 10px/12px arial,Helvetica;display:none;z-index:10000;}.diigo-annotationList-item .diigo-annotationList-item-btn{background-color:rgba(0,0,0,0.3);padding:2px;color:#fff;cursor:pointer;z-index:1;opacity:.8;float:left;margin-left:5px;}.diigo-annotationList-item .diigo-annotationList-item-btn:hover{opacity:1;}.diigo-annotationList-commentItem{padding:5px 6px;background-color:#f9f9f9;word-break:break-all;border-left-style:solid;border-left-width:4px;border-left-color:#ddd;border-bottom:1px solid #eee;font:normal 12px/14px arial,Helvetica;}.diigo-annotationList-item:hover .diigo-annotationList-item-action{display:block;}.diigo-anntationList-floatIcon{background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/float_note_icon.png");height:16px;width:16px;position:absolute;left:5px;top:5px;}#diigo-annotationList-main{position:relative;}#diigo-annotationList-notification{height:30px;width:150px;border:2px solid rgba(0,0,0,0.15);position:absolute;left:50%;top:50%;background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/success.png") 5px 50% no-repeat;text-indent:26px;font:normal 12px/30px arial,Helvetica;background-color:#fff;border-radius:2px;-webkit-transform:translate(-50%,-50%);background-clip:content-box;z-index:1;display:none;}#diigo-annotationList-noItem{padding:10px;font-weight:bold;}.diigo-customize-scrollbar::-webkit-scrollbar{width:6px;}.diigo-customize-scrollbar::-webkit-scrollbar-track-piece{background-color:transparent;}.diigo-customize-scrollbar::-webkit-scrollbar-thumb:vertical{height:20px;background-color:#ccc;}.diigo-customize-scrollbar::-webkit-scrollbar-thumb:hover{background-color:#aaa;}.diigolet-highlight-selected{-webkit-animation:highlight 800ms ease-in-out;}#diigo-ext-tutorial-wrapper{position:fixed;bottom:0;right:0;left:0;top:0;background:rgba(0,0,0,0.8);text-align:center;font-family:arial,Helvetica;z-index:10000;font-size:16px!important;visibility:hidden;opacity:0;transition:opacity .2s linear;}#diigo-ext-tutorial-wrapper.active{visibility:visible;opacity:1;}#diigo-ext-tutorial-panel{display:inline-block;width:805px;height:664px;border-radius:5px;background:white;vertical-align:middle;position:relative;transform:scale(0.95);transition:transform .2s linear;}#diigo-ext-tutorial-wrapper.active #diigo-ext-tutorial-panel{transform:scale(1);}#diigo-ext-tutorial-panel .diigo-ext-tutorial-btn{display:block;height:36px;width:36px;background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/img/tutorial/back_icon.png");position:absolute;top:300px;transition:transfrom 200ms ease;}#diigo-ext-tutorial-panel .diigo-ext-tutorial-btn:active{transform:scale(0.95);}#diigo-ext-tutorial-panel #diigo-ext-tutorial-prev{left:-64px;display:none;}#diigo-ext-tutorial-panel #diigo-ext-tutorial-next{-webkit-transform:rotate(180deg);right:-64px;}#diigo-ext-tutorial-panel #diigo-ext-tutorial-next:active{transform:scale(0.95) rotate(180deg);}#diigo-ext-tutorial-panel #diigo-ext-tutorial-close{background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/img/tutorial/close_icon.png");right:-64px;display:none;}#diigo-ext-tutorial-banner{height:169px;border-radius:5px 5px 0 0;background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/img/tutorial/bg.png"),#4e8df7;color:white;position:relative;overflow:hidden;}#diigo-ext-tutorial-banner-text{height:65px;position:relative;top:38px;transform:translate3d(0,-80px,0);opacity:0;transition:transform .5s cubic-bezier(0.77,0,0.175,1) .2s,opacity .5s cubic-bezier(0.77,0,0.175,1) .2s;}#diigo-ext-tutorial-banner-text>div{font-size:19px;}#diigo-ext-tutorial-banner-text span{line-height:47px;font-size:24px;font-weight:600;}#diigo-ext-tutorial-wrapper::after{display:inline-block;height:100%;margin-left:-0.05em;content:"";vertical-align:middle;}#diigo-ext-tutorial-container{height:495px;border-radius:0 0 5px 5px;position:relative;}.diigo-ext-tutorial-slide{visibility:hidden;opacity:0;position:absolute;left:0;right:0;transition:opacity 600ms ease-in-out;}#diigo-ext-tutorial-wrapper.active .diigo-ext-tutorial-slide.active{visibility:visible;opacity:1;}.diigo-ext-tutorial-slide .left,.diigo-ext-tutorial-slide .right{float:left;}.diigo-ext-tutorial-slide .left{width:350px;}.diigo-ext-tutorial-slide .right{width:400px;text-align:left;color:#757575;}.diigo-ext-tutorial-slide .right>div{width:360px;line-height:20px;}#diigo-tutorial-image1{height:347px;width:297px;background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/img/tutorial/save.png");margin:22px 0 0 83px;}#diigo-tutorial-image2{height:421px;width:186px;background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/img/tutorial/screenshot.png");margin:22px 0 0 83px;}#diigo-tutorial-image3{height:312px;width:537px;background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/img/tutorial/highlighted.png");margin:75px 0 0 25px;}.diigo-ext-tutorial-3 .left{width:581px;}.diigo-ext-tutorial-3 .right{width:auto;}.diigo-ext-tutorial-3 .right>div{width:194px;}#diigo-tutorial-image4{height:302px;width:261px;background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/img/tutorial/outliner.png");margin:83px 0 0 62px;}.diigo-ext-tutorial-4 .left{width:350px;}.diigo-ext-tutorial-4 .right{width:auto;}.diigo-ext-tutorial-4 .right>div{width:375px;}#diigo-ext-tutorial-elem1{position:absolute;left:138px;bottom:0;height:80px;width:74px;background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/img/tutorial/spaceman.png");transform:translate3d(0,80px,0);transition:transform 600ms cubic-bezier(0.77,0,0.175,1);}#diigo-ext-tutorial-elem2{position:absolute;right:97px;bottom:79px;height:48px;width:48px;background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/img/tutorial/moon.png");transform:scale(0);transition:transform .5s cubic-bezier(0.77,0,0.175,1);}#diigo-ext-tutorial-elem3{position:absolute;right:97px;bottom:-34px;height:118px;width:125px;background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/img/tutorial/rocket.png");transform:translate3d(100px,84px,0);transition:transform .5s cubic-bezier(0.77,0,0.175,1);}#diigo-ext-tutorial-wrapper.active.step4 #diigo-ext-tutorial-elem1,#diigo-ext-tutorial-wrapper.active.step4 #diigo-ext-tutorial-elem2,#diigo-ext-tutorial-wrapper.active.step4 #diigo-ext-tutorial-elem3{transform:translate3d(0,0,0);transform:scale(1);}#diigo-ext-tutorial-wrapper.active.step2 #diigo-ext-tutorial-elem1{transform:translate3d(0,0,0);}#diigo-ext-tutorial-wrapper.active.step3 #diigo-ext-tutorial-elem2,#diigo-ext-tutorial-wrapper.active.step3 #diigo-ext-tutorial-elem1{transform:translate3d(0,0,0);}#diigo-ext-tutorial-wrapper.active #diigo-ext-tutorial-banner-text{transform:translate3d(0,0,0);opacity:1;}#diigo-code-clipper{height:24px;width:24px;background:red;position:absolute;opacity:.5;cursor:pointer;}#diigo-code-clipped{position:absolute;display:inline-block;padding:0 4px;font-size:12px;border-radius:2px;text-align:center;color:white;background:rgba(0,0,0,0.5);}#diigo-code-clipper .clipped-area{display:none;}#diigo-code-clipper.clipped{pointer-events:none;font-size:12px;display:inline-block;width:auto;}#diigo-code-clipper.clipped .clipped-area{display:block;}#diigo-code-clipper:hover{opacity:1;}#d3df-sidebar{border:1px #ccc solid;z-index:99997;}#d3df-sidebar div.heading{padding:3px;font-size:13px;border-top:1px #E8EEF7 solid;font-weight:bold;zoom:1;}#d3df-sidebar div.popOut{width:16px;height:16px;background:transparent url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/popout.gif) no-repeat scroll left top;cursor:pointer;}#d3df-sidebar div.popOut.popIn{background-image:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/popin.gif);}#d3df-sidebar div.popOut.close{background-image:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/close1.gif);}#d3df-sidebar div.heading a.add{background:transparent url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigoletIconv1.gif) no-repeat scroll left -172px;padding-left:18px;display:block;float:right;font-weight:normal;}#d3df-sidebar a.togglePanel{background:transparent url(https://www.diigo.com/images/v2/eoc.gif) no-repeat scroll left top;display:block;float:right;width:16px;height:16px;}#d3df-sidebar a.togglePanel.collapsed{background-position:left bottom;}#d3df-sidebar ul,#d3df-sidebar ul li{list-style:none;overflow:hidden;zoom:1;}#d3df-sidebar li.highlight a.highlight{overflow:hidden;height:24px;zoom:1;}#d3df-sidebar ul.highlights li{margin:1px;}#d3df-sidebar ul.comments li{margin:1px;padding:2px;}#d3df-sidebar div.noComments{font-size:11px;text-align:center;padding:15px 5px;}#d3df-sidebar p.commentBody,#d3df-sidebar p.commentBody a{font-size:11px;}#d3df-sidebar a.avatar{float:left;margin-right:3px;}#d3df-sidebar a.avatar img{padding:1px;border:1px #CCC solid;width:32px;height:32px;}#d3df-sidebar .commentInfo{font-size:12px;}#d3df-sidebar .commentInfo a{border-bottom:1px dotted #999;}#d3df-sidebar a.highlight{line-height:24px;padding-left:18px;display:block;background:transparent url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigoletIconv1.gif) no-repeat scroll left -192px;}#d3df-sidebar a.floatNote{padding-left:16px;background:transparent url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/diigoletIconv1.gif) no-repeat scroll left -144px;}#d3df-sidebar a.highlight .jumpTo{line-height:24px;padding-left:5px;font-size:12px;font-style:italic;}#d3df-sidebar.themeDefault .bgColor1{background-color:#C3D9FF;}#d3df-sidebar.themeDefault .bgColor2{background-color:#E8EEF7;}#d3df-sidebar.themeDefault .bgColor3{background-color:#FFF;}#d3df-sidebar.themeDefault .color1{color:#999;}#d3df-sidebar.themeDefault .color2{color:#333;}@media screen{body.diigoHiPen-yellow{cursor:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/ietoolbar-images/highlighter-orange.cur) 4 15,text!important;}body.diigoHiPen-blue{cursor:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/ietoolbar-images/highlighter-blue.cur) 4 15,auto!important;}body.diigoHiPen-green{cursor:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/ietoolbar-images/highlighter-green.cur) 4 15,text!important;}body.diigoHiPen-pink{cursor:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/ietoolbar-images/highlighter-pink.cur) 4 15,text!important;}}.diigolet.notice{font:bold 13px/1.5 Helvetica,Arial,sans-serif;position:fixed;top:5px;left:0;width:100%;text-align:center;z-index:2147483647;height:1px;-webkit-animation:fadeIn 400ms ease;}.diigolet.notice>div{border:1px solid #fad42e;background:#fea;border-radius:5px;color:#000;display:inline-block;padding:5px 10px 5px 5px;-webkit-box-shadow:rgba(0,0,0,0.3) 0 1px 1px;}.diigolet.notice>div>b{display:inline-block;height:16px;width:16px;margin:2px 3px 0 0;background:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/icons.png) 0 -80px no-repeat;float:left;}.diigolet.notice>div>p>a{font-size:12px;}.diigolet.notice>div>p{float:left;max-width:420px;}.diigolet.notice>div.alert{background:#fef6f3;border-color:#cd0a0a;}.diigolet.notice>div.alert p #retry{margin-left:3px;text-decoration:underline;}.diigolet.notice>div.alert>b{background-position:-16px -80px;}.diigolet.notice>div.info>b{background-position:-32px -80px;}.diigolet.notice>div.wait>b{background:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/processing.gif) no-repeat scroll left 0 transparent;}.diigolet.notice div #close{display:block;height:12px;width:12px;background:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/close.png);float:right;margin-left:10px;margin-top:3px;}.diigolet.notice div #close:hover{background-position:0 -12px;}#diigolet-panel-panel{z-index:2147483641;}#diigolet-panel-panel.notSignedIn .signedIn{display:none;}#diigolet-panel-panel.signedIn .notSignedIn{display:none;}#diigolet-panel-panel{height:36px;border-top-left-radius:19px;border-bottom-left-radius:19px;font:normal 12px/1.5 Helvetica,Arial,sans-serif;position:fixed;left:5px;top:5px;background-color:#fff;white-space:nowrap;border:1px solid #ccc;-webkit-user-select:none;background-clip:content-box;box-shadow:0 2px 10px rgba(0,0,0,.2);}#diigolet-panel-panel:hover #diigolet-panel-space{background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/toolbar-icon.png") -379px 0 no-repeat;opacity:.4;}#diigolet-panel-panel.fold #diigolet-panel-logo{opacity:1;width:28px;}#diigolet-panel-panel.fold #diigolet-panel-main{width:0;border-radius:0;}#diigolet-panel-panel.orphanHighlight.fold #diigolet-panel-logo{background-position:-84px 0;}#diigolet-panel-panel.orphanHighlight.fold #diigolet-panel-logo:hover{background-position:-112px 0;}.clearfloat:after{display:block;clear:both;content:"";visibility:hidden;height:0;}.clearfloat{zoom:1;}#diigolet-panel-main{height:36px;display:inline-block;background-color:rgba(255,255,255,1);border-radius:19px 0 0 19px;overflow:hidden;-webkit-transition:left 100ms ease-in-out;}#diigolet-panel-logo{display:inline-block;width:0;height:36px;border-top-left-radius:19px;border-bottom-left-radius:19px;background-image:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/di.png");background-position:0 0;background-color:#fff;opacity:0;cursor:pointer;}#diigolet-panel-logo:hover{background-position:-28px 0;}#diigolet-panel-space{width:12px;height:36px;display:inline-block;background-color:#fff;}#diigolet-panel-panel .diigolet-panel-btn{height:36px;float:left;}#diigolet-panel-panel .diigolet-panel-btn>b{height:36px;width:36px;display:block;cursor:pointer;margin:0 auto;-webkit-transition:background-color 200ms ease;}#diigolet-panel-panel .diigolet-panel-btn>b:hover{background-color:#E7F0FF;}#diigolet-panel-panel .diigolet-panel-btn>b:active{-webkit-transform:scale(.9);}#diigolet-panel-fold{height:36px;float:left;cursor:pointer;width:19px;background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/toolbar-icon.png") 0 0 no-repeat;}#diigolet-panel-fold:hover{background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/toolbar-icon.png") -38px 0 no-repeat;}#diigolet-panel-Highlight{width:48px;}#diigolet-panel-btnHighlight{width:34px;height:36px;float:right;}#diigolet-panel-btnHighlight>b{height:36px;width:36px;display:block;cursor:pointer;-webkit-transition:background-color 200ms ease,border-radius 200ms ease;background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/toolbar-icon.png") -105px 0 no-repeat;}#diigolet-panel-Highlight.pen #diigolet-panel-btnHighlight>b{height:36px;width:36px;margin:0;}#diigolet-panel-Highlight:not(.pen) #diigolet-panel-btnHighlight>b:hover{background-color:#E7F0FF!important;}#diigolet-panel-btnHighlight>b:active{-webkit-transform:scale(.9);}#diigolet-panel-Highlight.pen #diigolet-panel-btnHighlight>b{background-color:#E7F0FF;-webkit-transform:scale(0.9);}#diigolet-panel-btnHighlight.yellow>b{background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/toolbar-icon.png") -73px 0 no-repeat;}#diigolet-panel-btnHighlight.blue>b{background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/toolbar-icon.png") -105px 0 no-repeat;}#diigolet-panel-btnHighlight.green>b{background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/toolbar-icon.png") -137px 0 no-repeat;}#diigolet-panel-btnHighlight.pink>b{background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/toolbar-icon.png") -169px 0 no-repeat;}#diigolet-panel-hightlight-dropdown.yellow>b{background-color:#ffb000;}#diigolet-panel-hightlight-dropdown.blue>b{background-color:#39abed;}#diigolet-panel-hightlight-dropdown.green>b{background-color:#7c0;}#diigolet-panel-hightlight-dropdown.pink>b{background-color:#f6b;}#diigolet-panel-hightlight-dropdown{width:14px;height:36px;float:right;background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/toolbar-icon.png") -360px 0 no-repeat;cursor:pointer;}#diigolet-panel-hightlight-dropdown:hover{background-color:#E7F0FF;}#diigolet-panel-hightlight-dropdown>b{height:5px;width:5px;border-radius:12px;display:block;margin-top:16px;margin-left:5px;cursor:pointer;}#diigolet-panel-btnStickyNote{width:42px;}#diigolet-panel-btnStickyNote b{background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/toolbar-icon.png") -234px -1px no-repeat;}#diigolet-panel-btnBookmark{width:42px;}#diigolet-panel-btnBookmark b{background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/toolbar-icon.png") -296px -1px no-repeat;}#diigolet-panel-btnBookmark.diigo-research-mode b{background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/toolbar-icon.png") -485x -1px no-repeat;}#diigolet-panel-btnBookmark.saved b{background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/toolbar-icon.png") -328px -1px no-repeat;}#diigolet-panel-btnAnnotationList b{background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/toolbar-icon.png") -419px -1px no-repeat;}#diigolet-panel-panel.orphanHighlight #diigolet-panel-btnAnnotationList b{background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/toolbar-icon.png") -451px -1px no-repeat;}#diigolet-panel-orphanHighlight{width:46px;}#diigolet-panel-orphanHighlight b{background:url("chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/toolbar-icon.png") -266px -1px no-repeat;}#diigolet-panel-colorPicker{display:none;position:absolute;left:15px;top:41px;width:91px;background-color:#fff;box-shadow:0 1px 4px rgba(0,0,0,.35);border-radius:2px;padding:5px 0;-webkit-animation:diigo-dropdown .15s ease-in 1;}#diigolet-panel-colorPicker.dropdownShown{display:block;}#diigolet-panel-colorPicker-arrow{border:5px solid;border-top-color:transparent;border-right-color:transparent;border-bottom-color:#fff;border-left-color:transparent;position:absolute;left:40px;top:-9px;}#diigolet-panel-colorPicker li{font-weight:normal;display:block;padding-right:10px!important;padding-left:10px!important;text-decoration:none!important;line-height:26px;height:26px;color:#434343;min-width:60px;width:71px;background:none!important;border:none!important;-webkit-transition:background-color 200ms ease;}#diigolet-panel-colorPicker li:hover{background-color:#e8e8e8!important;color:#434343!important;text-decoration:none!important;}#diigolet-panel-colorPicker li span{display:inline-block;width:12px;height:12px;border-radius:7px;margin-right:5px;vertical-align:middle;margin-bottom:3px;}#diigolet-panel-colorPicker li span b{width:4px;height:4px;background:#606060;margin-top:4px;margin-left:4px;border-radius:2px;}#diigolet-panel-colorPicker li.selected span b{display:block;}#diigolet-panel-colorPicker li.yellow span{background:#fde200;border:1px solid #b0a224;}#diigolet-panel-colorPicker li.blue span{background:#7db3f9;border:1px solid #63799a;}#diigolet-panel-colorPicker li.green span{background:#86ca25;border:1px solid #718b49;}#diigolet-panel-colorPicker li.pink span{background:#ff9b9a;border:1px solid #ae657a;}.diigolet .moreActionShare b{background:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/icons.png) 0 -96px no-repeat;}#diigolet-dialog-share{background-color:#fcfbf7;border-radius:2px;font:normal 13px/1.5 Helvetica,Arial,sans-serif;position:fixed;left:5px;top:7px;box-shadow:0 1px 3px rgba(0,0,0,.08);white-space:nowrap;width:520px;z-index:2147483646;display:block;}#diigolet-dialog-share *{white-space:normal;}#diigolet-dialog-share-title{height:30px;vertical-align:middle;background-color:#39baf6;line-height:30px;padding:0 10px;font-size:14px;color:white;text-align:left;border-radius:2px 2px 0 0;display:block;}#diigolet-dialog-share-closeBtn{background:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/images/win-close.png) 50% 50% no-repeat;float:right;height:16px;margin-left:10px;width:16px;margin-top:7px;}#diigolet-dialog-share-content{border-radius:0 0 2px 2px;border-width:1px 1px 1px 1px;border-color:rgba(0,0,0,.08);border-style:solid;display:block;}#diigolet-dialog-share-social{padding:10px;}#diigolet-dialog-share-social .social-item{height:50px;width:100px;border-radius:3px;background:red;margin:10px 20px 10px 0;display:block;float:left;}#diigolet-share-shareToTabs{background-color:#fcfbf7;list-style-type:none;padding:0 5px;margin:0;height:30px;line-height:30px;border-left:1px solid rgba(0,0,0,.08);border-right:1px solid rgba(0,0,0,.08);}#diigolet-share-shareToTabs li{display:inline-block;line-height:22px;height:24px;margin-top:6px;}#diigolet-share-shareToTabs li a{text-decoration:none;border-bottom-color:#3669a8;border-top-left-radius:5px;border-top-right-radius:5px;color:#000;opacity:.8;display:block;padding:0 5px;}#diigolet-share-shareToTabs a:hover{opacity:1;}#diigolet-share-shareToTabs a.current{border-radius:2px 2px 0 0;border-width:1px 1px 0 1px;border-color:rgba(0,0,0,.08);border-style:solid;border-bottom:1px solid #fcfbf7;color:#000;opacity:1;z-index:0;position:relative;top:1px;}#diigolet-share-shareToTabs a.current:hover{color:#222;}#diigolet-share-shareToTabs li b{display:inline-block;width:16px;height:16px;vertical-align:text-bottom;margin-right:3px;}.diigolet .shareToTwitter b{background:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/icons.png) -16px -96px no-repeat;}.diigolet .shareToFacebook b{background:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/icons.png) -32px -96px no-repeat;}.diigolet .shareToGplus b{background:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/icons.png) -48px -96px no-repeat;}.diigolet .shareToEmail b{background:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/icons.png) 0 -112px no-repeat;}.diigolet .getAnnotatedLink b{background:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/icons.png) -16px -112px no-repeat;}.diigolet .twitterDesc{color:#777;font-size:13px;line-height:20px;}#diigolet-twitter-saveBtn{display:block;line-height:24px;cursor:pointer;text-align:center;color:white;border-radius:2px;border:1px solid #066ec1;font-size:12px;text-decoration:none;border-radius:2px;border:1px solid #85a0a6;color:#85a0a6;font-size:12px;text-align:center;height:20px;width:50px;line-height:20px;float:right;}#diigolet-twitter-saveBtn:active{background:#85a0a6;color:#fff;}#diigolet-twitter-cancelBtn{color:#999;height:12px;font-size:12px;margin:1px 8px 0 6px;text-decoration:none;float:right;}#diigolet-twitter-cancelBtn:hover{text-decoration:underline;}#diigolet-email-saveBtn{display:block;line-height:24px;cursor:pointer;text-align:center;color:white;border-radius:2px;border:1px solid #066ec1;font-size:12px;text-decoration:none;border-radius:2px;border:1px solid #85a0a6;color:#85a0a6;font-size:12px;text-align:center;height:20px;width:50px;line-height:20px;float:right;margin-top:4px;}#diigolet-email-saveBtn:active{background:#85a0a6;color:#fff;}#diigolet-email-cancelBtn{color:#999;height:12px;font-size:12px;margin:6px 14px 0 0;text-decoration:none;float:right;}#diigolet-email-cancelBtn:hover{text-decoration:underline;}#diigolet-annotatedLink-saveBtn{display:block;line-height:24px;cursor:pointer;text-align:center;color:white;border-radius:2px;border:1px solid #066ec1;font-size:12px;text-decoration:none;border-radius:2px;border:1px solid #85a0a6;color:#85a0a6;font-size:12px;text-align:center;height:20px;width:50px;line-height:20px;float:right;}#diigolet-annotatedLink-saveBtn:active{background:#85a0a6;color:#fff;}#diigolet-annotatedLink-cancelBtn{color:#999;height:12px;font-size:12px;margin:2px 8px 0 6px;text-decoration:none;float:right;}#diigolet-annotatedLink-cancelBtn:hover{text-decoration:underline;}#diigolet-share-twitterLeftChars{color:#999;float:right;font-size:20px;font-weight:700;line-height:20px;}#diigolet-share-twitterLeftChars.full{color:#F00;}#diigolet-dialog-share .inputTxt{border:1px solid #7F9DB9;font:normal 12px/1.5 Arial,Helvetica,sans-serif;border:1px solid #d7d7d7;-webkit-transition:border-color 200ms ease;outline:none;}#diigolet-dialog-share .inputTxt:focus{border:1px solid #AAA;}#diigolet-dialog-share-twitterMsg{height:54px;width:492px;}#diigolet-dialog-share .buttonRow{margin-top:5px;text-align:right;display:block;}#diigolet-dialog-share .buttonRow input{margin-left:5px;padding:1px 6px;}#diigolet-dialog-share input.defaultAction{font-weight:700;}#diigolet-dialog-share-twitter{padding:10px;display:block;}#diigolet-dialog-share-facebook{padding:5px;font-size:20px;height:100px;line-height:100px;text-align:center;}#diigolet-dialog-share-gPlus{padding:5px;font-size:20px;height:100px;line-height:100px;text-align:center;}#diigolet-dialog-share-gBuzz iframe{border:none;height:340px;width:100%;overflow:hidden;}#diigolet-dialog-share-email{padding:10px;display:block;}#diigolet-dialog-share-email>table{width:100%;border-width:0;margin-bottom:5px;}#diigolet-dialog-share-email>table td{padding:2px 0;}#diigolet-dialog-share-email label{font-weight:700;}#diigolet-dialog-share-email-to,#diigolet-dialog-share-email-subject{width:100%;}#diigolet-dialog-share-email-message{height:72px;width:100%;}#diigolet-dialog-share-email-quotes-checker{font-weight:400!important;float:right;}#diigolet-dialog-share-email-quotes-checker input{margin-right:2px;vertical-align:text-bottom;}#diigolet-dialog-share-email-quotes{border:1px solid #bbb;border-radius:3px;width:100%;max-height:150px;overflow-y:scroll;}#diigolet-aidlog-share-email-quotes-content{margin:5px 10px 10px 10px;}#diigolet-dialog-share-annotatedLink{padding:10px;display:block;}.diigolet .annotatedLinkInfo{border:1px solid #fad42e;background:#fea;border-radius:5px;color:#000;display:inline-block;padding:0 0 0 20px!important;position:relative;margin-bottom:10px!important;}.diigolet .annotatedLinkInfo b{display:inline-block;height:16px;width:16px;margin-right:3px;background:url(chrome-extension://lhidgfaliccjjbgkabchckabpdamkphg/diigolet/chrome-panel-images/icons.png) -32px -80px no-repeat;position:absolute;left:1px;top:1px;}#diigolet-dialog-share-annotatedLink-value{font-weight:700!important;font-size:13px!important;padding:2px;width:496px;}#diigolet-dialog-share-annotatedLink-value.loading{color:#ccc;font-style:italic;}#diigolet-dialog-share-annotatedLink-optLinks{float:left;}.diigolet .autocompleteContacts{border:1px solid #d9d9d9;border-top-color:#999;border-left-color:#999;width:380px;}.diigolet .recInput{font:12px verdana;border-width:0;float:left;margin:2px;padding-top:2px;}.diigolet .recItem{border:1px solid #7B9EBD;padding:0 2px;background-color:#F0F5FE;float:left;margin:2px 2px 0 0;}.diigolet .recInputSizer{position:absolute;visibility:hidden;left:0;bottom:0;font:11px verdana;}.diigolet .accTip{position:absolute;border:1px solid #ddd;border-top:none;background-color:#f5f5f5;font-size:11px;color:#777;text-align:left;padding:2px 0;text-indent:5px;z-index:8998;}.diigolet .accNotice{position:absolute;border:1px solid #ffd324;border-top:none;background-color:#fff6bf;font-size:11px;color:#600;text-align:left;padding:2px 0;text-indent:5px;z-index:8999;}.diigolet .accList{position:absolute;border:1px solid #999;border-top:none;background-color:#fff;font:10px verdana;color:#777;text-align:left;z-index:9000;line-height:18px;}.diigolet .accList .cItem{border-bottom:1px solid #ddd;background-color:#fff;cursor:pointer;padding:2px;color:#333;}.diigolet .accList .cItem b{font-size:11px;font-weight:normal;color:#000;}.diigolet .accList .cItem i,.recItem i{font-size:7pt;color:#090;font-style:normal;margin-right:2px;}.diigolet .accList div strong{background-color:#FFFADB;padding:0 2px;}.diigolet .accList div.hover{background-color:#E0ECFF;text-decoration:none;}.diigolet .recItem a{color:#999;font-family:Verdana,Arial,Helvetica,sans-serif;font-size:12px;font-weight:bold;line-height:16px;margin:0 1px 0 3px;}.diigolet .recItem a:hover{color:#333;text-decoration:none;}.diigolet .cItem span.extraDesc{float:none;font-weight:normal;color:#777;margin-left:10px;font-style:italic;}.diigolet .cItem span.extraDesc .keywordStrong{color:#000;font-style:italic;background-color:#fff;}.diigolet .cItem span.keywordStrong{float:none;font-weight:bold;}';
ANNOTATION_TYPE_ICON=9;A.urls={getUserBookmarksPageURL:function(a){return"https://www.diigo.com/user/"+(a||l.user)},getCreateGroupURL:function(){return"https://groups.diigo.com/create"},getCreateListURL:function(){return"https://www.diigo.com/bookmark_list/new_list"},getGroupURL:function(a){return a?"https://groups.diigo.com/groups/"+a:"https://groups.diigo.com"},getGroupHome:function(){return"https://groups.diigo.com/user/"+l.user},getListHome:function(){return"https://www.diigo.com/list/"+l.user},
getNetwork:function(){return"https://www.diigo.com/network/"+l.user},getHotBookmark:function(){return"https://www.diigo.com/buzz/hot"},getUserHomepageURL:function(a){return this.getUserProfileURL(a)},getUserProfileURL:function(a){a=a||l.user;return"https://www.diigo.com/profile/"+a},getSignOutURL:function(){return"https://www.diigo.com/sign-out"},getSignInURL:function(){return"https://www.diigo.com/sign-in"},getFeedbackURL:function(){return"https://www.diigo.com/common/feedback"},getFollowOnTwitterURL:function(){return"https://www.twitter.com/diigo"},
getRatingURL:function(){return"https://chrome.google.com/extensions/detail/oojbgadfejifecebmdnhhkbhdjaphole"}};A.handlers={tb_showDropDownMenu:function(a,c){$("#diigolet-help,#diigolet-toolbar .dropdownMenu").hide();"#diigolet-tb-signInMenu"==c&&l.signedIn||(a=$(a.target),a=a.add(a.parents("a")).filter(".diigoletButton"),$.browser.msie&&9<=$.browser.version?(tbar=$("#diigolet-toolbar"),Ma($(c).css({left:a.offset().left,top:$(document).scrollTop()+25}).show())):Ma($(c).css({left:a.offset().left}).show()))},
tb_viewComments:function(){Na.popOut({top:35,left:3})},tb_signIn:function(){l.signedIn?C.signOut():C.signIn()},hideToolbar:function(){ia.hide()},showHelp:function(a){$("#diigolet-toolbar .dropdownMenu").hide();$.browser.msie&&9<=$.browser.version?(tbar=$("#diigolet-toolbar"),Ma(ia.jHelpTip.css({top:tbar.offset().top+tbar.height()-5}).show())):Ma(ia.jHelpTip.show(),500)},hideHelp:function(){$("#diigolet-help").hide()},mouseOnBorder:function(a){ia.show()},OnTwitterMsgChange:function(){},bookmark:function(){ua()&&
(Da.shown?Da.close():Da.show())},overHighlight:function(){l.isHighlightPen||($("#diigolet-button-highlight").toggleClass(l.mouseClass,!0),$("#diigolet-button-highlight-dropdown").toggleClass(l.mouseClass,!0))},outHighlight:function(){l.isHighlightPen||($("#diigolet-button-highlight").toggleClass(l.mouseClass,!1),$("#diigolet-button-highlight-dropdown").toggleClass(l.mouseClass,!1))},dropDownColorMenu:function(){$("#diigolet-help,#diigolet-toolbar .dropdownMenu").hide();var a=$("#diigolet-button-highlight");
$.each(l.defaultColors,function(c,d){X("diigolet-colorMenu-"+d).toggleClass("colorchecked",!1)});l.penColor&&0<l.penColor.length?X("diigolet-colorMenu-"+l.penColor).toggleClass("colorchecked",!0):X("diigolet-colorMenu-yellow").toggleClass("colorchecked",!0);$.browser.msie&&9<=$.browser.version?Ma($("#diigolet-tb-colorMenu").css({left:a.offset().left,top:$(document).scrollTop()+25}).show()):Ma($("#diigolet-tb-colorMenu").css({left:a.offset().left}).show())},diigoTwitterit:function(){ua()},bmOnSubmitAndClose:function(a){aa.submitAndClose()},
bmCancel:function(){aa.hide(!0)},highlight:function(a,c,d){if(ua()){a=Z.checkSelection();E("[highlight]",a);if(a.ok){E("[highlight] Making a text highlight");var f=S.add({user:l.user,realName:l.realName,content:a.html,type:0,nth:a.nth},{},c,d);$.browser.msie&&document.selection.empty()}else a.pen?diigolet.handle(!0,"TogglePen"):l.notify(a.msg);chrome.runtime.sendMessage({name:"doHighlight"});"undefined"===typeof l.permissions.annPermission||l.permissions.annPermission.annotationPermission||(ha.init(),
ha.show("highlight"));return f}},TogglePen:function(){var a=l.isHighlightPen=!l.isHighlightPen;E("[highlight] togglePen",a);ia.onHighlightPenModeChanged(a);P.onHighlightPenModeChanged(a);var c=$(document.body);c.removeClass(ta(l.defaultColors,function(d){return"diigoHiPen-"+d}).join(" "));a&&c.addClass("diigoHiPen-"+l.penColor)},toggleAnnotationList:function(){fa.shown?fa.hide():fa.show()},ChangeColor:function(a,c){l.penColor=c;P.onHighlightColorChanged(c,!0);ka.changeColor(c);ia.onHighlightColorChanged(c);
chrome.runtime.sendMessage({name:"changeColor",color:c});l.isHighlightPen&&$(document.body).removeClass(ta(l.defaultColors,function(d){return"diigoHiPen-"+d}).join(" ")).addClass("diigoHiPen-"+l.penColor)},highlightAndComment:function(a,c,d){(a=A.handle(a,"highlight",c,d))&&a.jumpHere(!1,!0)},showHideHighlight:function(a){l.toggleSilent()},addStickyNote:function(a){ua()&&!K.isEditing()&&S.add({user:l.user,realName:l.realName,content:"",type:2},{dontSave:!0}).jumpHere(!1,!0)},hlmenu_mousedown:function(){return $.browser.opera},
dlgIC_del_ic:function(a,c,d){K.onclick_del_ic(a,c,d)},sb_del_pc:function(a,c,d){Na.onclick_del_pc(a,c,d)}};A.handle=function(a,c){a=$.event.fix(a||window.event);a.preventDefault();return A.handle2.apply(null,[c,a].concat([].slice.call(arguments,2)))};A.handle2=function(a){var c=[].slice.call(arguments,1);return A.handlers[a].apply(null,c)};var va=ma.extend({constructor:function(a){M(this,{url:"",urlId:"",b_id:"",title:"",description:"",user:"",unread:!1,mode:0,tags:[],alert:!1,onlyInGroup:!1,groups:[],
lists:[],outliners:[],datetime:null,saved:!1,toAddToBookmarkLists:null,toShareToGroups:null,toShareExistingAnnotations:!1},a||{})},getTitle:function(){return Ta(this.title||document.title||document.location.href)},addGroups:function(a){var c=this;O(a,function(d){var f=Ka(c.groups,function(h){return h.name==d.name});-1==f?(c.groups.push(d),l.fireEvent("bm_addGroups",[c,d.name])):d.user&&(c.groups[f].user=d.user)})},getGroupNamesSharedByMe:function(){return zb(this.groups,function(a){return a.user==
l.user?a.name:null})},inList:function(a){return yb(this.lists,function(c){return c.id==a})}});va.fromDocument=function(){var a=document;return new va({url:a.location.href,title:a.title||a.location.href,mode:R.getFromCache("prefs.bookmark.privateByDefault","b")?2:0})};va.readlater=function(){var a=document;return new va({url:a.location.href,title:a.title||a.location.href,mode:R.getFromCache("prefs.bookmark.privateByDefault","b")?2:0,unread:!0})};var Ua=!1,rb=!1,ub;A.openURL=function(a){T.send({name:"createTab",
details:{url:a}})};var l={generated:!1,chromeTabId:null,isSignedIn:!1,autoLoad:!1,keywords:[],orphanHighlights:[],googleSearchSentence:"",autoShowHighlightIcon:!1,chromeExtensionID:null,user:"",userId:null,realName:"",userLevel:0,isHighlightPen:!1,penColor:"yellow",mouseClass:"mouseovered",defaultColors:["yellow","blue","green","pink"],signedIn:!1,launchMode:{normal:0==diigoletLaunchMode,permalink:3==diigoletLaunchMode,pagePlayer:5==diigoletLaunchMode},permalinkParams:null,silent:!1,bookmark:new va,
groupTagsDict:{},recommendedTagsLoaded:!1,recommendedTags:[],selectionResult:null,annotations:[],pageComments:[],currentHighlight:"",myTags:[],myTagsWithCount:[],myBmLists:[],myGroups:[],myContacts:[],permissions:{capture:!0,image:!0,highlight:!0,premium:!0,snapshot:!0},isCommented:function(){return this.isAnnotated()},isAnnotated:function(){return this.bookmark.annotated||0<this.pageComments.length||0<this.annotations.length},toggleSilent:function(a){a=void 0===a?!this.silent:a;a!=this.silent&&((this.silent=
a)?(this.unpaintAllAnnotations(),$(".diigo-scrollmarker").hide()):(this.paintAllAnnotations(),$(".diigo-scrollmarker").show()))},notify:function(a,c,d){E(a);Q.notifyInfo(a,{timeout:c})},resetData:function(a){this.bookmark=va.fromDocument();a&&(this.chromeExtensionID=a.extensionID,this.chromeTabId=a.tabId,M(this,a.globalData));l.launchMode.permalink&&(l.permalinkParams={user:window.diigo_permalink_user,key:window.diigo_permalink_key,mode:diigo_permalink_mode,url:diigo_bookmark_url,legacy:diigo_permalink_legacy});
window.diigo_bookmark_url&&(this.bookmark.url=window.diigo_bookmark_url)},reset:function(a){this.resetData(a)},paintAllAnnotations:function(){O(this.annotations,function(f){if(f.user==l.user||f.onlyInGroup)f.paint(),$(".id_"+f.id).on("dragstart",function(h){h=h.originalEvent;var k="";$(".id_"+f.id).each(function(){if($(this).hasClass("diigoHighlight")){if(0<$(this).find(".diigoIcon").length){var m=$(this).clone();m.find(".diigoIcon").remove();m.find(".diigoHighlightCommentLocator").remove();m=$(m).html()}else m=
$(this).html();"A"==$(this).parent()[0].tagName&&(m='<a href="'+$(this).parent().attr("href")+'">'+m+"</a>");k+=m+" "}});h.dataTransfer.setData("text/plain",k);h.dataTransfer.setData("text/diigoHighlight",k);h.dataTransfer.setDragImage(N(k),-10,-10)})});for(var a=$(".diigoHighlight"),c=[],d=0;d<a.length;d++)c[d]=a[d].className.match(/id(\w)+/g)[0];a=U(c);for(d=0;d<=a.length;d++)1==$("."+a[d]).length?$("."+a[d]).scrollmarker():(c=$("."+a[d]),$(c[0]).scrollmarker());0!=l.orphanHighlights.length?$("#diigolet-panel-panel").addClass("orphanHighlight"):
$("#diigolet-panel-panel").removeClass("orphanHighlight")},unpaintAllAnnotations:function(){O(this.annotations,function(a){a.unpaint()})}};({mixin:function(a){wa(a,this,["addEventListener","removeEventListener","fireEvent","_resetEvents"]);a._resetEvents()},addEventListener:function(a,c){this._events[a]||(this._events[a]=[]);a=this._events[a];-1==a.indexOf(c)&&a.push(c)},removeEventListener:function(a,c){var d=this._events[a];if(d)if(2==arguments.length){var f=d.indexOf(c);-1<f&&d.splice(f)}else delete this._events[a]},
_resetEvents:function(){this._supressEvents=!1;this._events={}},fireEvent:function(a,c){if(!this._supressEvents){E("[event]",a);var d=this._events[a];if(d)for(var f=0,h,k=d.length;h=d[f],f<k;f++)("function"==typeof h?h:h["on"+a]).apply(h,c)}}}).mixin(l);var bc={docScroll:function(){return[Mb.scrollLeft(),Mb.scrollTop()]},docSize:function(){return[qb.width(),qb.height()]}};A.run=function(a,c){R.updateCache(a.preloadedPrefs);qa();0==$("#diigolet-panel-panel").length&&O([P,aa,K,ea,Q,Y,Aa],function(d){d.init()});
c&&"autoshow"==c?P.show("fold"):P.show();l.signedIn&&(E("aaaa"),Xa());0==l.generated?(l.reset(a),l.signedIn&&(Xa(),a.shoudLoadMyStuff&&C.loadMyStuff()),a.loadBookmarkResult?(E("[bookmark info already loaded]",a.loadBookmarkResult),C.cb_bm_loadBookmark_success(a.loadBookmarkResult,"showbar")):a.shouldLoadBookmarkByMyself&&l.signedIn&&C.loadBookmark("showbar")):(l.unpaintAllAnnotations(),l.paintAllAnnotations(),S.sort(),P.adjustPosition());0==$("#diigolet-csm").length&&(ka.init(),pb());O([aa,K,ia,ka,
ea,Na,P,Q,Y],function(d){if(d.j){var f=function(h){return function(){Ua=h.clickedOn=!0}}(d);d.j.unbind(".pay4sin").bind("mouseup.pay4sin",f).bind("mousedown.pay4sin",f).bind("keydown.pay4sin",function(h){h.stopPropagation()})}});Nb.afterRun();c&&"stickynote"==c&&(A.stickyNoteByContextMenu=!0,A.handlers.addStickyNote())};A.chromeRun=function(a,c){function d(){if(!$.isReady){var f=chrome.i18n.getMessage("pageStillLoading");document.body?(qa(),qa=function(){},Q.init(),Q.notify(f,"info",{timeout:3E3})):
(E("body is null. will retry"),setTimeout(d,500))}}Ba(a.extensionID);(function(){var f=window.location.href;return".pdf"==f.substring(f.length-4)&&0<$('embed[type="application/pdf"]').length?!0:!1})()?A.chromeActuallyRun(c):A.started?$.isReady||d():(A.started=!0,a.logLevel&&(A.logLevel=a.logLevel),Oa(window.location.href)?window.top!=window.self?E("[BUG] I don't run in a frame"):($.isReady||(E("DOM not ready."),a.userClick&&d()),$(function(){E("DOM is ready.");A.chromeActuallyRun(c)})):alert(chrome.i18n.getMessage("alertUnsupportedPage")))};
A.chromeActuallyRun=function(a){Ea.makeSnapshot();A.Messenger.send({name:"initialData"},function(c){E("initialData",c);A.run(c,a);A.ready=!0})};A.runAway=function(){l.reset();O([aa,K,Na],function(){v.destroy()});delete window.diigolet};var Ia={hasCacheUpload:function(){return!!l.permissions.snapshot},onPrivilegeChange:function(){aa.refreshPremium()}},Ea={getDocumentSource:function(){var a=document,c=document.doctype,d="";c&&(d="<!DOCTYPE html PUBLIC",c.publicId&&(d+=' "'+c.publicId+'"'),c.systemId&&
(d+=' "'+c.systemId+'"'),d+=">");a=a.documentElement;a=a.outerHTML?a.outerHTML:XMLSerializer?(new XMLSerializer).serializeToString(a):"<html>"+document.innerHTML+"</html>";return d+a},removeDiigoStuffFromHtml:function(a){a=a.replace(/<style[^<>]*id="diigolet-chrome-css"(?:.|\s)*?<\/style>/,"");a=a.replace(/<div[^<>]*id="diigolet-notice"(?:.|\s)*?<\/div>/,"");a=a.replace(/ id="dummybodyid"/,"");/"diigo/i.test(a)&&E("html still contains diigo");return a},makeSnapshot:function(){var a=this.getDocumentSource();
this.html=this.removeDiigoStuffFromHtml(a);this.text=document.body.innerText;"application/pdf"==$("embed").attr("type")&&(this.ispdf=!0,this.pdfurl=$("embed").attr("src"))},uploadCache:function(a){Ia.hasCacheUpload()?(A.Messenger.send({name:"uploadCache",details:{text:this.text,html:this.html,urlMD5:l.bookmark.urlId,groups:a.groups,ispdf:this.ispdf,pdfurl:this.pdfurl}}),Q.notifyWait(chrome.i18n.getMessage("upload_uploading"),{timeout:8E3})):(ha.init(),ha.show("cache"))},uploadDidFail:function(a){a=
a||{};a.overQuota&&(l.permissions.snapshot=!1,A.Messenger.send({name:"updateGlobalData",details:{permissions:l.permissions}}),Ia.onPrivilegeChange());Q.notifyAlert(a.msg||chrome.i18n.getMessage("upload_error"),{timeout:8E3})},uploadDidSucceed:function(){Q.notifyOK(chrome.i18n.getMessage("upload_success"))}},Ob={uploadMHTML:function(a){Ia.hasCacheUpload()?A.Messenger.send({name:"importMHTML",details:{link_id:a.link_id,mhtml_upload_url:a.mhtml_upload_url,charset:document.charset,blob:this.blob,tabid:a.tabid}}):
(ha.init(),ha.show("acache"))},uploadDidSucceed:function(a){(a=a.visit_url)?Q.notifyOK("Upload succeeded! <a href="+a+' target="_blank">check it out</a>'):Q.notifyOK(chrome.i18n.getMessage("upload_success"))}},Nb={afterRun:function(){this.fixOpenTracker()},fixOpenTracker:function(){$("script[src*=opentracker]").length&&window.addEventListener("mousedown",function(a){a=$(a.target);a.is("a")||(a=a.parents("a").eq(0));a.is("[href*=javascript:void]")&&a.parents(".diigolet").length&&a.attr("href","javascript:void('ot_evt(')")},
!0)}};$(document).ready(function(){$(document).on("click","#screenshot, #text-screenshot",function(){na.initSelectedCapture()});$("#screenshot").click(function(){l.permissions.pdfPermission.pdfPermission?na.initSelectedCapture():diigoModal.show("upgrade")});$("#text-screenshot").click(function(){na.initSelectedCapture()});$('<div id="diigo-chrome-installed"></div>').appendTo(document.body).hide();$("#installDiigoChromeExtension").hide()});window.Ctx=l;var Pb={quoteTag:function(a){a=a.replace(/"/g,
"'").replace(/\s+/g," ").replace(/^\s+|\s+$/g,"");a.match(/\s+|,/)&&(a='"'+a+'"');return a},parseTags:function(a,c){function d(){0<f.length&&(h.push(f.join("")),f.length=0)}for(var f=[],h=[],k=!1,m=0,q=a.length,n;n=a.charAt(m),m<q;m++)'"'==n?k?(k=!1,d()):k=!0:k?f.push(n):/\s/.test(n)||","==n?d():f.push(n);d();c&&(h=zb(Ab(h),function(t){return Ta(t)||null}));return h},unparseTags:function(a,c){c=c||" ";return ta(a,function(d){return this.quoteTag(d)},this).join(c)}};M(A,Pb);var S=ma.extend({constructor:function(a){a=
a||{};M(this,{id:null,user:"",mode:2,content:"",comments:[],saved:!1,datetime:"",painted:!1,paintedSuccessfully:!1,type:null,groups:[],onlyInGroup:!1,extra:{}},a);this.extra=M({nth:1},this.extra||{})},paint:function(){l.silent||1==this.extra.code||(this.constructor.paint(this),this.painted=!0)},unpaint:function(){this.paintedSuccessfully&&this.constructor.unpaint(this);this.painted=this.paintedSuccessfully=!1},del:function(a){return(this.constructor.del?this.constructor:S).del(this,a)},canDelete:function(a){return this.user==
l.user&&0==this.getComments(a).length},canAddComments:function(){if(this.isPrivate()&&this.user!=l.user)return!1;this.isPublic();return!0},addGroups:function(a){var c=this;O(a,function(d){-1==Ka(c.groups,function(f){return f.idInGroup==d.idInGroup})&&(c.groups.push(d),l.fireEvent("ann_add",[c,d.name]))});this.paint()},getPageOffset:function(){var a=0==this.type?$("em."+Z.HIGHLIGHT_ID_CLASS+this.id):$("."+Z.HIGHLIGHT_TYPE_CLASS+this.type+"."+Z.HIGHLIGHT_ID_CLASS+this.id);if(0>=a.size())return{left:0,
top:0};var c=window,d=0,f=0,h=0,k=0;a.parents("div").filter(function(m){"relative"==c.getComputedStyle(this,null).getPropertyValue("position")&&(d+=$(this).offset().left,f+=$(this).offset().top,h+=$(this).scrollLeft(),k+=$(this).scrollTop())});return(a=a.offset())?{left:a.left-d+h,top:a.top-f+k}:{left:0,top:0}},getComments:function(a){return bb(this.comments,function(c){return c.matchFilter(a)})},jumpHere:function(a,c,d){E("[Annotation] jump here");0==arguments.length&&(a=!0);if(this.paintedSuccessfully){var f=
0==this.type?$("em."+la.HIGHLIGHT_ID_CLASS+this.id):this.getEle();if(0==f.size())l.notify("No corresponding text is found on the page. This page has probably been changed since you highlighted it.");else{if(a){var h=f.eq(0).offset();window.scrollTo(h.left,h.top-40)}f=f.eq(f.size()-1);h=f.offset();e={pageX:h.left,pageY:h.top+f.height()+15};K.hide();(c||0<this.comments.length)&&K.show(e,this,c?"add":"view",400)}}else l.notify("No corresponding text is found on the page. This page has probably been changed since you highlighted it.")},
activate:function(a){}});M(S,{add:function(a,c,d,f){E("[Annotation] add",a,c);c=M({dontPaint:!1,dontSave:!1,dontSort:!1},c||{});switch(a.type){case 0:var h=$a;break;case 1:h=ya;break;case 2:h=tb;break;case 4:h=$a;break;default:return null}a=new h(a);E("[Annotation] add: new ctor(ann) returned");a.saved||(a.id||(l.bookmark.urlId||(l.bookmark.urlId=La(window.location.href)),a.id="video"==d?La(a.content):La(a.content+a.user+l.bookmark.urlId+a.nth)),a.extra.nth=a.nth,"undefined"!==typeof a.code&&(a.extra.code=
a.code),a.extra.color=f?f:l.penColor);l.annotations.push(a);if(!c.dontPaint){a.paint();var k="id_"+a.id;0!=$("."+k).length&&(1<$("."+k).length?(f=$("."+k)[0],$(f).scrollmarker()):$("."+k).scrollmarker());$("."+k).on("dragstart",function(m){m=m.originalEvent;var q="";$("."+k).each(function(){if($(this).hasClass("diigoHighlight")){if(0<$(this).find(".diigoIcon").length){var n=$(this).clone();n.find(".diigoIcon").remove();n=$(n).text()}else n=$(this).text();"A"==$(this).parent()[0].tagName&&(n='<a href="'+
$(this).parent().attr("href")+'"">'+n+"</a>");q+=n+" "}});m.dataTransfer.setData("text/plain",q);m.dataTransfer.setData("text/diigoHighlight",q);m.dataTransfer.setDragImage(N(q),-10,-10)});fa.j&&0==a.type&&fa.add(a)}a.paintedSuccessfully&&!c.dontSort&&S.sort();a.saved||c.dontSave||(E("save to server"),C.addAnnotation(a,d));a.onlyInGroup||l.fireEvent("ann_add",[a]);a.groups&&O(a.groups,function(m){l.fireEvent("ann_add",[a,m.name])});return a},del:function(a,c){a=this.find(a);if(c){var d=Ka(a.groups,
function(f){return f.name==c&&f.user==l.user});a.saved&&C.deleteAnnotation(a,a.groups[d].idInGroup);a.groups.splice(d,1);l.fireEvent("ann_del",[a,c])}else{if(a.onlyInGroup)throw"Annotation.del: onlyInGroup!";a.onlyInGroup=!0;a.mode=3;a.saved&&C.deleteAnnotation(a,null);l.fireEvent("ann_del",[a])}a.onlyInGroup&&0==a.groups.length?(a.unpaint(),l.annotations.splice(l.annotations.indexOf(a),1)):a.paint();$("#id_"+a.id).remove();fa.editItem("remove",a);return a},find:function(a){a=a.id||a;return Sa(l.annotations,
function(c){return c.id==a})},findByInlineComment:function(a){var c=a.id||a;return Sa(l.annotations,function(d){return Sa(d.comments,function(f){return f.id==c})})},sort:function(){l.annotations.sort(function(a,c){return a.paintedSuccessfully?c.paintedSuccessfully?0<a.extra.top-c.extra.top?1:0==a.extra.top-c.extra.top?a.extra.left-c.extra.left:-1:-1:1})}});var $a=S.extend({constructor:function(a){this.base(a||{})}});M($a,{paint:function(a){a=S.find(a);Za.paint(a)},unpaint:function(a){a=S.find(a);
Za.unpaint(a)}});var ya=S.extend({constructor:function(a){a=a||{};this.base(a);this.type=1;this.extra=M({},this.extra||{});a=l.bookmark.url;if(!this.content)if(this._focusedNode)this.content=da('<img src="#{0}" title="#{1}" alt="#{2}" />',[ya.makeAbsUrl(this._focusedNode.src,a),this._focusedNode.title,this._focusedNode.alt]);else throw"Must specify either content or _focusedNode for image highlight";this.extra.imageUrl||(this.extra.imageUrl=ya.makeAbsUrl((this.content.match(/<img.*?\s+src=['"]?(.*?)['"]?[\s>]/im)||
[])[1]||"",a));if(!this.extra.imageUrl)throw"invalid imageUrl";if(!this.saved&&this._focusedNode)for(var c=ya.makeRelUrl(this.extra.imageUrl,a),d=ya.makeAbsUrl(this.extra.imageUrl,a),f=document.getElementsByTagName("img"),h=0,k=0,m=f.length,q;q=f[k],k<m;k++)if(-1<q.src.indexOf(c)&&d==ya.makeAbsUrl(q.src,a)&&(h++,q==this._focusedNode)){this.extra.nth=h;break}},getEle:function(){var a=$("img."+la.HIGHLIGHT_ID_CLASS);if(0==a.size())for(var c=ya.makeRelUrl(this.extra.imageUrl,l.bookmark.url),d=ya.makeAbsUrl(this.extra.imageUrl,
l.bookmark.url),f=document.getElementsByTagName("img"),h=0,k=0,m=f.length,q;q=f[k],k<m;k++)if(-1<q.src.indexOf(c)&&d==ya.makeAbsUrl(q.src,l.bookmark.url)&&(h++,h==this.extra.nth))return $(q);return a}});M(ya,{paint:function(a){function c(k,m){$(k).addClass(Z.HIGHLIGHT_ICON_CLASS).addClass(Z.HIGHLIGHT_ID_CLASS+m.id).addClass(Z.HIGHLIGHT_TYPE_CLASS+ANNOTATION_TYPE_ICON).addClass("ImageIcon").toggleClass("public",m.isPublic()&&0<f.length).toggleClass("private",m.isPrivate()&&0<f.length).toggleClass("group",
m.inAnyGroups()&&0<f.length).toggleClass("diigoHighlightcommented",0<f.length);0<f.length?($(k).html("<span class='"+Z.HIGHLIGHT_ID_CLASS+m.id+" "+Z.HIGHLIGHT_ICON_CLASS+" "+Z.HIGHLIGHT_TYPE_CLASS+ANNOTATION_TYPE_ICON+"'>"+f.length+"</span>"),$(k).attr("title",ea.tipMsg(m)),m=m.getPageOffset(),$(k).css({left:m.left,top:m.top})):($(k).html(""),$(k).attr("title",""));return k}a=S.find(a);var d=a.getEle();if(d){var f=a.comments;d.addClass(la.HIGHLIGHT_CLASS).addClass(la.HIGHLIGHT_ID_CLASS+a.id).addClass(la.HIGHLIGHT_TYPE_CLASS+
a.type).removeClass("yellow blue green pink").addClass(a.extra.color&&0<a.extra.color.length?a.extra.color:"yellow").toggleClass("diigoHighlightcommented",0<f.length);if(0<d.size()){var h=d.offset();a.extra.top=h.top;a.extra.left=h.left}a.painted=!0;a.paintedSuccessfully=0<d.size();0>=$("div."+Z.HIGHLIGHT_ID_CLASS+a.id).size()&&0<d.size()?(h=$(Fa.createElement("div")),h.insertBefore(d),c(h,a)):c("div."+Z.HIGHLIGHT_ID_CLASS+a.id,a)}},unpaint:function(a){a=S.find(a);var c=a.getEle();c&&c.removeClass(la.HIGHLIGHT_ID_CLASS+
a.id).removeClass(la.HIGHLIGHT_CLASS).removeClass("diigoHighlightcommented").removeClass("public").removeClass("group")},getBaseUrl:function(a,c){c=a.replace(/:\/\//,"123")[(c?"i":"lastI")+"ndexOf"]("/");0<c&&(a=a.slice(0,c));return a+"/"},makeRelUrl:function(a,c){if(!/^[a-zA-Z]+:\/\/|^\//.test(a))return a;"/"==a.charAt(0)&&(a=a.replace("/",this.getBaseUrl(a,!0)));return a.replace(this.getBaseUrl(c,!1),"")},makeAbsUrl:function(a,c){if(0<a.indexOf("://"))return a;var d="/"==a.charAt(0);return this.getBaseUrl(c,
d)+(d?a.slice(1):a)}});var tb=S.extend({constructor:function(a){a=a||{};this.base(a);this.saving=!1;this.id||(this.id=La(Math.random()+Math.random()+(new Date).getTime().toString()));this.type=2},fixExtra:function(){var a=5*bb(l.annotations,function(k){return 2==k.type}).length,c=$(document),d=c.scrollTop(),f=c.scrollLeft(),h=c.height();c=c.width();this.extra=M({left:a+f+10,top:a+d+50},this.extra||{},{winWidth:c,winHeight:h})},getEle:function(){return $("."+la.HIGHLIGHT_ID_CLASS+this.id)}});M(tb,
{paint:function(a){E("[FloatNote] paint: called");a=S.find(a);a.fixExtra();if(a.painted){var c=a.getEle();if(c){c.removeClass("diigoadd yellow blue green pink").addClass(a.extra.color);var d=K.getCommentsInfo(a.comments);"onlyPrivate"==d||"noComment"==d?c.removeClass("group").addClass("private"):c.removeClass("private").addClass("group");setTimeout(function(){0<(K.getCommentCount("group",a.comments)||"")&&c.find("span").text(K.getCommentCount("group",a.comments)).show()},100)}}else c=$(kb).addClass(la.HIGHLIGHT_CLASS).addClass(la.HIGHLIGHT_ID_CLASS+
a.id).addClass(la.HIGHLIGHT_TYPE_CLASS+a.type).css({left:a.extra.left,top:a.extra.top}).appendTo(document.body),1==A.stickyNoteByContextMenu&&(c.css({left:A.rightClickPos.x,top:A.rightClickPos.y}),A.stickyNoteByContextMenu=!1),c.find("span").text(K.getCommentCount("group",a.comments)||""),0==K.getCommentCount("group",a.comments)&&c.find("span").hide(),d=K.getCommentsInfo(a.comments),"onlyPrivate"==d||"noComment"==d?c.addClass("private"):c.addClass("group"),c.addClass(a.extra.color),this.bindEvents(a),
a.paintedSuccessfully=!0;a.painted=!0},unpaint:function(a){a=S.find(a);var c=a.getEle();c&&(c.unbind().remove(),a.painted=a.paintedSuccessfully=!1)},bindEvents:function(a){a=S.find(a);var c=a.getEle();c.mouseout(function(d){if(d.relatedTarget==this.firstChild)return!1});new $.Draggable(c,{cursor:"default",beforeDrag:function(){Ua=!0;l.draggingFloatNote=!0;E("[FloatNote] before drag: cancel show");a.saved&&!K.isEditing()&&K.hide()},afterDrag:function(d){E("[FloatNote] after drag");a.extra.left=parseInt(c.css("left"));
a.extra.top=parseInt(c.css("top"));l.draggingFloatNote=!1;a.user==l.user&&a.saved&&(C.updateExtra(a),S.sort());$(".id_"+a.id).scrollmarker()}})}});var ab=ma.extend({constructor:function(a){M(this,{id:null,user:"",mode:2,saved:!1,datetime:"",groups:[],onlyInGroup:!1},a||{});!this.onlyInGroup||0<this.id||(this.id=Math.random().toString().substr(2))},del:function(a){return this.constructor.del(this,a)},canDelete:function(){return l.signedIn&&l.user&&l.user==this.user},addGroups:function(a){var c=this;
O(a,function(d){-1==Ka(c.groups,function(f){return f.idInGroup==d.idInGroup})&&(c.groups.push(d),l.fireEvent((c instanceof Ca?"pc":"ic")+"_add",[c,d.name]))})}}),Ca=ab.extend({constructor:function(a){this.base(a)}});M(Ca,{add:function(a){a instanceof this||(a=new this(a));l.pageComments.push(a);if(!a.saved)throw"[PageComment] add: adding an unsaved comment is probably and error";l.fireEvent("pc_add",[a]);return a},del:function(a,c){a=this.find(a);if(c){var d=Ka(a.groups,function(f){return f.name==
c&&f.user==l.user});a.saved&&C.deletePageComment(a,a.groups[d].idInGroup);a.groups.splice(d,1);l.fireEvent("pc_del",[a,c])}else{if(a.onlyInGroup)throw"PageComment.del: onlyInGroup!";a.onlyInGroup=!0;a.mode=3;a.saved&&C.deletePageComment(a,null);l.fireEvent("pc_del",[a])}a.onlyInGroup&&0==a.groups.length&&l.pageComments.splice(l.pageComments.indexOf(a),1);return a},find:function(a){a=a.id||a;return Sa(l.pageComments,function(c){return c.id==a})}});var za=ab.extend({constructor:function(a){a=M({annotationId:null},
a);this.base(a);if(!this.annotationId)throw"[InlineComment ctr] must specify annotationId";},getAnnotation:function(){this.annotation||(this.annotation=S.find(this.annotationId));return this.annotation}});M(za,{add:function(a){a instanceof this||(a=new this(a));ann=a.getAnnotation();0<ann.getComments("_noGroups").length?a.mode!=ann.mode&&3!=a.mode&&(a.mode=ann.mode):a.mode!=ann.mode&&3!=a.mode&&(ann.mode=a.mode,l.fireEvent("ann_changeMode",[ann]));ann.comments.push(a);ann.paintedSuccessfully&&ann.paint();
l.fireEvent("ic_add",[a]);return a},edit:function(a,c){a=this.find(a);a.content=c;ann.paintedSuccessfully&&ann.paint();l.fireEvent("ic_edit",[a])},del:function(a,c){a=this.find(a);E("[InlineComment.del]",a,c,a.onlyInGroup?"onlyInGroup":"");var d=function(){k&&k()};if(c){var f=Ka(a.groups,function(m){return m.name==c&&m.user==l.user});a.saved&&C.deleteInlineComment(a,a.groups[f].idInGroup,d);a.groups.splice(f,1);l.fireEvent("ic_del",[a,c])}else{if(a.onlyInGroup)throw"InlineComment.del: onlyInGroup!";
a.onlyInGroup=!0;a.mode=3;a.saved&&C.deleteInlineComment(a,null,d);l.fireEvent("ic_del",[a])}if(a.onlyInGroup&&0==a.groups.length){var h=a.getAnnotation();h.comments.splice(h.comments.indexOf(a),1);h.isPublic()&&0==h.getComments("_smasher").length&&(h.mode=2,l.fireEvent("ann_changeMode",[h]));h.paintedSuccessfully&&h.paint();d=h.getComments(c?c:"_smasher");if(2==h.type&&0==d.length)var k=function(){h.del(c)}}return a},find:function(a){a=a.id||a;var c=S.findByInlineComment(a);return c?Sa(c.comments,
function(d){return d.id==a}):null}});O([va,S,ab],function(a){a.implement({isPublic:function(){return 0==this.mode&&!this.onlyInGroup},isPrivate:function(){return 2==this.mode&&!this.onlyInGroup},inGroup:function(c,d){return yb(this.groups,function(f){return f.name==c&&(d?f.user==d:!0)})},inAnyGroups:function(){return 0<this.groups.length},matchFilter:function(c){return"_all"==c?this.isPublic()||this.isPrivate()||this.inAnyGroups():"_smasher"==c?this.isPublic()||this.isPrivate():"_public"==c?this.isPublic():
"_private"==c?this.isPrivate():this.inGroup(c)}})});var C={count:3,transId:1,callbacks:{},callback:function(a,c,d,f){if(a){var h=a.transId,k=a.cmd;E("[WebAPI response]",k,a.code,a,a.result)}if(a){if(this["cb_"+k])this["cb_"+k](a);if(1==a.code&&this["cb_"+k+"_success"])this["cb_"+k+"_success"](a.result,f);if(0==a.code&&this["cb_"+k+"_failure"])this["cb_"+k+"_failure"](a.result,a.status,f)}if((0==c||500==c)&&this["cb_"+d+"_failure"])this["cb_"+d+"_failure"](c,f);if(this.callbacks[h])this.callbacks[h](a.result);
delete this.callbacks[h]},invoke:function(a,c,d,f){var h=this.transId++;d&&(this.callbacks[h]=d);E("[WebAPI request]",a,c);var k=this;A.Messenger.send({name:"WebAPI",details:{cmd:a,data:c,transId:h,isInGroup:/group.diigo.(.*)\/item\/pdf/.test(window.location.href)}},function(m){k.callback(m.resp,m.status,m.cmd,f)})},createList:function(a){this.invoke("list_create",{title:a,mode:2})},cb_list_create_success:function(a){l.outliners.push(a.list);l.outliners.sort(function(c,d){return c.title>d.title?1:
-1});chrome.runtime.sendMessage({name:"listCreateSuccess",data:a.list});aa.shown&&(aa.updateLists(),$("#diigo-list").find("select").find("option[value="+a.list.id+"]").attr("selected",!0),$("#diigo-list-addBtn").removeClass("processing"),$("#diigo-list-addInput").val(""),$("#diigo-list-add").hide(),$("#diigo-list").show());0<$("#diigosc-savepopup").length&&(na.updateLists(),$("#diigosc-lists").find("option[value="+a.list.id+"]").attr("selected",!0),$("#diigosc-list-addBtn").removeClass("processing"),
$("#diigosc-list-addInput").val(""),$("#diigosc-list-add").hide(),$("#diigosc-lists-and-groups").find("select").show());chrome.runtime.sendMessage({name:"listCreateSuccessAndUpdateLists",lists:l.myBmLists,newlist:a.list,outliners:l.outliners});Va({type:"listCreateSuccessAndUpdateLists",lists:l.myBmLists,newlist:a.list,outliners:l.outliners})},cb_list_create_failure:function(a,c){500==a?Q.notifyAlert(chrome.i18n.getMessage("server_error"),{timeout:0}):0==a&&Q.notifyAlert(chrome.i18n.getMessage("network_error"),
{timeout:0});aa.shown&&$("#diigo-list-addBtn").removeClass("processing");0<$("#diigosc-savepopup").length&&$("#diigosc-list-addBtn").removeClass("processing");chrome.runtime.sendMessage({name:"listCreateFailureAndUpdateLists"});Va({type:"listCreateFailureAndUpdateLists"})},uploadImage:function(a,c,d,f,h,k,m,q,n){f=a.dataURL.slice(("data:image/"+k+";base64,").length);var t="outliner"==c;t&&(c="image");b=atob(f);c={type:c,title:a.title,description:"",mode:a.mode,src_url:a.src_url,src_title:a.src_title,
src_description:"",src_unread:!1,file_type:k,file_name:m,single_item:a.single_item,file_md5:La(b),shareit:!1,twitterit:d,tags:a.tags,extra:h};E(a.list,a.groups);0!=a.list&&-1!=a.list&&(c.lists=a.list);0!=a.groups&&-1!=a.list&&(c.groups=a.groups);d=function(r){t&&(pa.port.postMessage({type:"upload-image-done",resp:r,image_src:a.image_src}),vb.hide())};"undefined"!==typeof n&&(d=l.bookmark,c.mode=n["private"]?d.mode=2:d.mode=0,c.unread=n.unread?d.unread=!0:d.unread=!1,c.description=d.description=n.description,
c.tags=d.tags=n.tags,c.lists=d.toAddToBookmarkLists=n.shareLists||[n.outliner],c.groups=d.toShareToGroups=n.shareGroups||[n.group],d=function(){Q.notifyOK("Bookmark saved in research mode.")});c.file_content=f;this.invoke("upload_file",c,d,q)},cb_upload_file_success:function(a,c){pa.opened||Q.notifyOK(chrome.i18n.getMessage("upload_success"));C.loadMyStuff("permissions");if(0==l.generated)T.send({name:"initialData"},function(f){R.updateCache(f.preloadedPrefs);l.reset(f);l.signedIn&&f.shoudLoadMyStuff&&
C.loadMyStuff();c&&(f.loadBookmarkResult.saved=!0);f.loadBookmarkResult?(E("[bookmark info already loaded]",f.loadBookmarkResult),C.cb_bm_loadBookmark_success(f.loadBookmarkResult)):f.shouldLoadBookmarkByMyself&&l.signedIn&&C.loadBookmark()});else if(c&&0==l.bookmark.saved){var d=l.bookmark;d.saved=!0;d.url=a.src_url;d.urlId=a.src_urlId;d.datetime=a.datetime;T.send({name:"bookmarkChanged",details:{saved:!0}});P.shown&&P.updateUI()}},cb_upload_file_failure:function(a,c){500==a?Q.notifyAlert(chrome.i18n.getMessage("server_error"),
{timeout:0}):0==a&&Q.notifyAlert(chrome.i18n.getMessage("network_error"),{timeout:0})},loadBookmark:function(a){var c={url:l.bookmark.url,what:"bookmarkInfo annotations pageComments",permalinkParams:l.launchMode.permalink?l.permalinkParams:null};c.permalinkParams&&(c.url=c.permalinkParams.url);callback=function(){};this.invoke("bm_loadBookmark",c,callback,a)},cb_bm_loadBookmark_success:function(a,c){var d=l.bookmark;0==l.generated&&(d.loaded=!0,wa(d,a,"url urlId annotated groups saved b_id".split(" ")),
d.saved&&a.bookmarkInfo&&wa(d,a.bookmarkInfo,"title mode tags unread alert description datetime onlyInGroup lists outliners".split(" ")),l._supressEvents=!0,a.pageComments&&O(Ub(a.pageComments),function(f){Ca.add(M({saved:!0},f))}),a.annotations&&(l.annotations=[],O(a.annotations,function(f){var h=S.add(wa({saved:!0},f,"id user realName mode type content datetime extra groups onlyInGroup".split(" ")),{dontPaint:!0,dontSort:!0});O(f.comments,function(k){za.add(M({saved:!0,annotationId:h.id},k))})})),
l.generated=!0,T.handlers.getCtx());l.unpaintAllAnnotations();window.Ctx=l;"showbar"==c&&(l.paintAllAnnotations(),S.sort());l._supressEvents=!1;"showbar"==c&&P.updateUI();aa.bookmarkLoaded();"prepareCtx"!=c&&T.send({name:"bookmarkChanged",details:{saved:d.saved}});1==l.bookmark.saved&&chrome.runtime.sendMessage({name:"saved"})},saveBookmark:function(a,c,d,f){A.Messenger.send({name:"updateBrowserActionIconToDoing"});var h=l.bookmark,k={url:h.url,mode:h.mode,title:h.title,tags:h.tags,description:h.description,
unread:h.unread,groups:h.toShareToGroups,shareExistingAnnotations:h.toShareExistingAnnotations,lists:h.toAddToBookmarkLists};h.url||(k.url=window.location.href,k.title=document.title);var m;if(a){if(m=a.pageComment)k.pageComment={content:m.content,mode:m.mode,groups:m.groups,justForGroups:m.justForGroups},k.groups=m.groups;if(m=a.annotation)if(k.annotation={id:m.id,content:m.content,type:m.type,groups:m.groups,extra:m.extra},k.groups=m.groups,m=a.annotation.inlineComment)k.annotation.inlineComment=
{mode:m.mode,content:m.content,groups:m.groups,justForGroups:m.justForGroups},k.groups=m.groups;a.mode&&(k.mode=a.mode);a.unread&&(k.unread=a.unread)}"undefined"!=typeof f&&(k.mode=!0===f._private?h.mode=2:h.mode=0,k.unread=!0===f.unread?h.unread=!0:h.unread=!1,k.description=h.description=f.description,k.tags=h.tags=f.tags,k.lists=h.toAddToBookmarkLists=f.shareLists||[f.outliner],k.groups=h.toShareToGroups=f.shareGroups||[f.group]);this.invoke("bm_saveBookmark",k,c,d);h.toAddToBookmarkLists=null;
h.toShareToGroups=null;h.toShareExistingAnnotations=!1},cb_bm_saveBookmark_success:function(a,c,d){function f(q){var n=q.split("-");q=parseInt(n[2]).toString(36);var t=parseInt(n[0]).toString(36);n=parseInt(n[1]).toString(36);return t+"/"+n+"/"+q}this.count=3;var h,k=l.bookmark;k.saved=!0;k.url=a.url;k.urlId=a.urlId;k.b_id=a.b_id;k.datetime=a.datetime;k.alert=a.alert;if(0<a.groups.length){k.addGroups(a.groups);var m=a.groups[0].access_mode;!m||5!=m&&6!=m||(m=f(a.groups[0].idInGroup),l.notify('Site archived in Teams. <br><a target="_blank" id="team_url" href="https://team.diigo.com/site/text_view/'+
m+'">Click here to go directly to the team clean reader page.</a>',3E4))}a.lists&&a.lists.forEach(function(q){k.lists.push(q)});(h=a.pageComment)&&Ca.add({id:h.id,user:h.user,realName:h.realName,mode:h.mode,datetime:h.datetime,content:h.content,userOnline:h.userOnline,groups:h.groups,onlyInGroup:h.onlyInGroup,saved:!0});if(h=a.annotation)m=S.find(h.id),m.saved=!0,h.groups&&m.addGroups(h.groups),(h=a.annotation.inlineComment)&&za.add({id:h.id,annotationId:h.annotationId,user:h.user,realName:h.realName,
mode:h.mode,datetime:h.datetime,content:h.content,userOnline:h.userOnline,groups:h.groups,onlyInGroup:h.onlyInGroup,saved:!0});if(h=a.result_shareExisting)O(h.pageComments,function(q){var n=Ca.find(q.id);n&&n.addGroups(q.groups)}),O(h.annotations,function(q){var n=S.find(q);n&&(n.addGroups(q.groups),q.inlineComments&&O(q.inlineComments,function(t){var r=za.find(t.id);r&&r.addGroups(t.groups)}))});P.shown&&P.updateUI();k.saved&&T.send({name:"bookmarkChanged",details:{saved:!0}});"qsave"==c?(l.generated=
!0,chrome.runtime.sendMessage({name:"showToolbar",type:"qsave",tabId:d}),chrome.runtime.sendMessage({name:"popupclose"})):"showbar"==c?(P.show(),l.toggleSilent(!1),l.unpaintAllAnnotations(),l.paintAllAnnotations(),S.sort()):"readlater"==c?R.get("prefs.autoCloseReadLater",function(q){"true"==q&&chrome.runtime.sendMessage({name:"closeTab"})}):"video"==c&&(a.annotation?(c=a.annotation.id,$("."+c).addClass("success").find("#diigo-video-loading-text").text("Success!"),$("."+c).delay(800).fadeOut(function(){var q=
$(this).data("diigo-target");$(q).attr("diigo-clipping","false");$(this).remove()})):($("#diigo-video-collector-loading").addClass("success").find("#diigo-video-loading-text").text("Success!"),$("#diigo-video-collector-loading").delay(800).fadeOut(function(){var q=$("#diigo-video-collector-loading").data("diigo-target");$(q).attr("diigo-clipping","false");$(this).remove()})));a.annotation&&a.annotation.annPermission&&(l.permissions.annPermission=a.annotation.annPermission,chrome.runtime.sendMessage({name:"updatePermission",
type:"highlight",data:a.annotation.annPermission}))},cb_bm_saveBookmark_failure:function(a,c){0<this.count?(this.saveBookmark(null,function(){},c),--this.count):(500==a?Q.notifyAlert(chrome.i18n.getMessage("bookmark_server_error"),{timeout:0}):0==a&&Q.notifyAlert(chrome.i18n.getMessage("bookmark_network_error"),{timeout:0}),$(".diigolet.notice>div.alert p #retry").unbind("click"),$(".diigolet.notice>div.alert p #retry").click(function(d){d.preventDefault();C.saveBookmark(null,function(){},c);Q.hide()}),
T.send({name:"bookmarkChanged",details:{saved:l.bookmark.saved}}))},deleteBookmark:function(a,c){a.urlId||alert("a");this.invoke("bm_deleteBookmark",{urlId:a.urlId},c)},cb_bm_deleteBookmark_success:function(a){var c=l.bookmark=va.fromDocument();c.loaded=!0;l.fireEvent("bm_del",[c]);l.pageComments.filter(function(d){return d.user==l.user&&!d.onlyInGroup}).forEach(function(d){d.saved=!1;Ca.del(d)});l.annotations.filter(function(d){return d.user==l.user&&!d.onlyInGroup}).forEach(function(d){d.saved=
!1;d.del()});l.annotations.forEach(function(d){d.comments.forEach(function(f){f.user!=l.user||f.onlyInGroup||(f.saved=!1,za.del(f))})});P.shown&&P.updateUI();T.send({name:"bookmarkChanged",details:{saved:!1}});a.annPermission&&(l.permissions.annPermission=a.annPermission,chrome.runtime.sendMessage({name:"updatePermission",type:"highlight",data:a.annPermission}))},addAnnotation:function(a,c){var d={urlId:l.bookmark.urlId,id:a.id,content:a.content,type:a.type,extra:a.extra,groups:2==a.type?null:l.bookmark.getGroupNamesSharedByMe()};
a._toAddInlineComment&&(d.inlineComment=a._toAddInlineComment,delete a._toAddInlineComment);if(l.bookmark.saved)"small"==c&&chrome.runtime.sendMessage({name:"showToolbar"}),h=function(){},this.invoke("annotation_add",d,h,c);else{var f=this,h=function(){};chrome.storage.local.get(null,function(k){if(k.researchMode)h=function(){Q.notifyOK("Bookmark saved using remembered settings.")},"video"==c?f.saveBookmark({annotation:d},h,"video",k.researchModeData):f.saveBookmark({annotation:d},h,"qsave",k.researchModeData);
else if("video"==c)f.saveBookmark({annotation:d},h,"video");else{var m={annotation:d};"true"==k["prefs.bookmark.privateByDefault"]&&(m.mode=2);"true"==k["prefs.bookmark.unreadByDefault"]&&(m.unread=!0);f.saveBookmark(m,h,"qsave")}})}},cb_annotation_add_success:function(a,c){E(c,a);"video"==c&&($("."+a.id).addClass("success").find("#diigo-video-loading-text").text("Success!"),$("."+a.id).delay(800).fadeOut(function(){var d=$(this).data("diigo-target");$(d).attr("diigo-clipping","false");$(this).remove()}));
c=S.find(a.id);c.saving=!1;c.saved=!0;c.onlyInGroup=a.onlyInGroup;a.groups&&c.addGroups(a.groups);a.__bookmark_groups&&l.bookmark.addGroups(a.__bookmark_groups);a.inlineComment&&this.cb_ic_add_success(a.inlineComment);a.annPermission&&(l.permissions.annPermission=a.annPermission,chrome.runtime.sendMessage({name:"updatePermission",type:"highlight",data:a.annPermission}));fa.j&&2==c.type&&fa.add(c)},deleteAnnotation:function(a,c){var d={urlId:l.bookmark.urlId};c?d.idInGroup=c:d.id=a.id;this.invoke("annotation_delete",
d)},cb_annotation_delete_success:function(a){a.annPermission&&(l.permissions.annPermission=a.annPermission,chrome.runtime.sendMessage({name:"updatePermission",type:"highlight",data:a.annPermission}))},cb_annotation_add_failure:function(a,c){"video"==c&&$("."+a.id).addClass("fail").find("#diigo-video-loading-text").html('Failed!<a href="#">Retry</a>')},addPageComment:function(a){a={urlId:a.urlId,mode:a.mode,content:a.content,justForGroups:a.justForGroups,groups:a.groups};l.bookmark.saved?this.invoke("pc_add",
a):this.saveBookmark({pageComment:a})},cb_pc_add_success:function(a){Ca.add({id:a.id,user:a.user,realName:a.realName,mode:a.mode,datetime:a.datetime,content:a.content,userOnline:a.userOnline,groups:a.groups,onlyInGroup:a.onlyInGroup,saved:!0});(a=a.__bookmark_groups)&&l.bookmark.addGroups(a)},deletePageComment:function(a,c){var d={urlId:l.bookmark.urlId};c?d.idInGroup=c:d.id=a.id;this.invoke("pc_delete",d)},addInlineComment:function(a){""==l.bookmark.urlId&&(l.bookmark.urlId=La(window.location.href));
a={urlId:l.bookmark.urlId,annotationId:a.annotationId,mode:a.mode,content:a.content,justForGroups:a.justForGroups,groups:a.groups};a.justForGroups&&(a.urlId=l.bookmark.urlId);this.invoke("ic_add",a)},cb_ic_add_success:function(a){za.add({id:a.id,annotationId:a.annotationId,user:a.user,realName:a.realName,mode:a.mode,datetime:a.datetime,datetime2:a.datetime2,content:a.content,userOnline:a.userOnline,groups:a.groups,onlyInGroup:a.onlyInGroup,saved:!0});a.__annotation_groups&&S.find(a.annotationId).addGroups(a.__annotation_groups);
a.__bookmark_groups&&l.bookmark.addGroups(a.__bookmark_groups)},deleteInlineComment:function(a,c,d){var f={urlId:l.bookmark.urlId};c?f.idInGroup=c:f.id=a.id;this.invoke("ic_delete",f,d)},cb_ic_delete_success:function(){},editInlineComment:function(a,c){""==l.bookmark.urlId&&(l.bookmark.urlId=La(window.location.href));this.invoke("ic_edit",{id:a,urlId:l.bookmark.urlId,content:c})},cb_ic_edit_success:function(a){za.edit(a.id,a.content)},loadMyStuff:function(a){this.invoke("user_loadMyStuff",{what:a||
"myTags myGroups myProfile myBookmarkLists myContacts permissions"})},cb_user_loadMyStuff_success:function(a){a.myTags&&(l.myTags=a.myTags);a.myTagsWithCount&&(l.myTagsWithCount=a.myTagsWithCount);a.myGroups&&(l.myGroups=a.myGroups,aa.updateGroups(),chrome.runtime.sendMessage({name:"updateGroups",data:a.myGroups}));a.myList&&(l.myBmLists=a.myList,l.outliners=a.outliners,aa.updateLists(),chrome.runtime.sendMessage({name:"updateLists",data:{list:a.myList,outliners:a.outliners}}));a.myProfile&&(l.realName=
a.myProfile.realName);a.myContacts&&(l.myContacts=a.myContacts,Y.onMyContactsUpdate());a.permissions&&(l.permissions=a.permissions,Ia.onPrivilegeChange());A.Messenger.send({name:"updateGlobalData",details:{myTags:l.myTags,myTagsWithCount:l.myTagsWithCount,myGroups:l.myGroups,myBmLists:l.myBmLists,outliners:l.outliners,realName:l.realName,myContacts:l.myContacts,permissions:l.permissions}})},updateExtra:function(a){a={urlId:l.bookmark.urlId,id:a.id,idsInGroup:ta(bb(a.groups,function(c){return c.user==
l.user}),function(c){return c.idInGroup}),extra:a.extra};this.invoke("annotation_updateExtra",a)},loadRecommendedTags:function(a,c,d){this.invoke("bm_loadRecommendedTags",{url:a,title:c},d)},cb_bm_loadRecommendedTags_success:function(a){l.recommendedTagsLoaded=!0;l.recommendedTags=a.tags},loadGroupTagsDictionary:function(a,c){this.invoke("bm_loadGroupTagsDictionary",{groups:a},c)},cb_bm_loadGroupTagsDictionary_success:function(a){$.each(a,function(c,d){l.groupTagsDict[c]=d});chrome.runtime.sendMessage({name:"updateGroupTag",
data:l.groupTagsDict})},signIn:function(){this.invoke("user_signIn",{})},cb_user_signIn_success:function(a){a.signedIn&&C.loadBookmark()},signOut:function(){this.invoke("user_signOut",{})},cb_user_signOut_success:function(a){Hb()},makeAnnotatedLink:function(a,c,d){this.invoke("share_makeAnnotatedLink",{url:a,mode:c},d)},makeAnnotatedLinkWithHighlight:function(a,c,d,f){this.invoke("share_makeAnnotatedLink",{url:a,mode:c,annId:d},f)},shareBookmark:function(a,c){this.invoke("share_bookmark",a,c)},cb_share_bookmark_success:function(a){}},
ia={shown:!1,j:null,init:function(){var a=this;a.create();a.j.find("a.diigoletButton,#diigolet-tb-btnHide").bind("focus",function(){this.blur()});a.jHelpTip=X("diigolet-help");a.j.find(".diigoletButton,._hoverAndHideDropdown").bind("mouseover",function(c){a.jHelpTip.hide();c=$(this).attr("id");"diigolet-button-highlight"!=c&&"diigolet-button-highlight-dropdown"!=c&&($(this).is(".hover")||a.j.find(".dropdownMenu").hide())})},destroy:function(){},onSignIn:function(){this.updateUI()},onSignOut:function(){this.updateUI()},
show:function(){this.shown||(this.shown=!0,this.j.slideDown())},hide:function(){this.shown&&(this.shown=!1,this.jHelpTip.hide(),this.j.slideUp())},updateUsername:function(a){a=a||l.user;$("a#diigolet-tb-btnMyBookmarks").attr({href:A.urls.getUserBookmarksPageURL(a)});this.showInfo(l.signedIn?"<em>Welcome "+a+"</em>":'<em><a href="#" title="Sign in into Diigo.com" onclick="return diigolet.handle(event, \'tb_signIn\')">Sign in</a> to add annotations or <a href="https://www.diigo.com/sign-up" title="Create a Diigo account" target="_blank">Create a Diigo account now</a> (free!)</em>',
null)},updateUI:function(){l.signedIn?$("#diigolet-tb-btnSignIn b b").hide():$("#diigolet-tb-btnSignIn b b").show();$("#diigolet-tb-btnMyBookmarks").hide();this.updateUsername();$("#diigolet-tb-btnComment").toggleClass("commented",l.isCommented());$("#diigolet-tb-btnBookmark").toggleClass("saved",l.bookmark.saved)},create:function(){var a=da(eb,{DIIGOLET_VERSION:A.version,URL_DIIGO:"https://www.diigo.com"});try{var c=this.j=$(a).css({position:$.browser.supportPositionFixed?"fixed":"absolute"}).appendTo(document.body).hide()}catch(d){}setTimeout(function(){$("#diigolet-tb-shadow").addClass("ie6")},
5E3);this.showInfo("Loading...",null);$.browser.opera&&($("#diigolet-button-highlight").hide(),$("#diigolet-button-highlight-dropdown").hide());$("._diigomenu").click(function(d){var f;className=$(d.target).attr("class");0<=className.indexOf("URL_MY_LIBRARY")?f=A.urls.getUserBookmarksPageURL():0<=className.indexOf("URL_MY_LIST")?f=A.urls.getListHome():0<=className.indexOf("URL_MY_GROUP")?f=A.urls.getGroupHome():0<=className.indexOf("URL_NETWORK")?f=A.urls.getNetwork():0<=className.indexOf("URL_HOT_BOOKMARK")&&
(f=A.urls.getHotBookmark());A.openURL(f);return!1});l.launchMode.permalink?($("#diigolet-tb-forward").show(),$("a._forwardPageUrl",c).attr({href:l.bookmark.url}),a=l.permalinkParams.user,$("a._forwardUserUrl",c).attr({href:a?"https://www.diigo.com/user/"+a:"https://www.diigo.com"}).text(a||"Diigo"),$("a._myBookmarks, a._info",c).hide()):l.launchMode.sandbox&&$("a._myBookmarks, a._info",c).hide()},showInfo:function(a,c){var d=this;this.j.find("span._info").html(a);null!=c&&setTimeout(function(){d.updateUsername()},
c)},notify:function(a,c,d){c=void 0==c?4E3:c;if($.browser.msie&&9<=$.browser.version){tbar=$("#diigolet-toolbar");var f=$("#diigolet-notify").css({top:tbar.offset().top+tbar.height()-5}).show()}else f=$("#diigolet-notify").show();f.find("span").html(a);f.toggleClass("right",1==d);clearTimeout(f[0].timerId);c&&(f[0].timerId=setTimeout(function(){f.fadeOut("slow")},c))},onHighlightPenModeChanged:function(a){$("#diigolet-button-highlight").find("b b").text(a?"Highlighter":"Highlight").end().add("#diigolet-button-highlight-dropdown").toggleClass("checked",
a).toggleClass(l.mouseClass,!a)},onHighlightColorChanged:function(a){$("#diigolet-button-highlight").removeClass(l.defaultColors.join(" ")).addClass(a);O(l.defaultColors,function(c){$("#diigolet-colorMenu-"+c).removeClass("colorchecked")});$("#diigolet-colorMenu-"+a).addClass("colorchecked")}};ia.refresh=ia.updateUI;var P={shown:!1,j:null,init:function(){var a=this;this.j||a.create();$(window).resize(function(){a.adjustPosition()})},destroy:function(){},onSignIn:function(){this.updateUI();this.adjustPosition()},
onSignOut:function(){this.updateUI()},adjustPosition:function(){var a=this.j,c=$(window),d=c.width();c=c.height();parseInt(a.css("left"));var f=parseInt(a.css("top")),h=a.outerWidth(),k=a.outerHeight();a.css("left",d=d-h+1);c<f+k&&a.css("top",f=c-k);0>f&&a.css("top",1);0>d&&a.css("left",1)},show:function(a){var c=this;this.shown||(this.shown=!0,"fold"==a&&this.j.addClass("fold"),this.j.show(),this.updateUI(),R.get("prefs.lastUsedColor",function(d){l.penColor=d;P.onHighlightColorChanged(d,!1);l.isHighlightPen&&
$(document.body).removeClass(ta(l.defaultColors,function(f){return"diigoHiPen-"+f}).join(" ")).addClass("diigoHiPen-"+l.penColor)}),Aa.diigoImageClipMode=!0,$(window).on("resize",function(){c.adjustPosition()}),0==l.bookmark.saved&&chrome.storage.local.get(null,function(d){!0===d.researchMode&&$("#diigolet-panel-btnBookmark").addClass("diigo-research-mode")}),$("#FN-private-editor").is(":visible")&&setTimeout(function(){$("#FN-private-editor").focus()},0))},hide:function(){if(this.shown)return this.shown=
!1,$("#diigolet-panel-panel").hide(),$("body").unbind("mousemove",Aa.onMousmove),1!=ub&&(Aa.diigoImageClipMode=!1),l.isHighlightPen=!1,$(document.body).removeClass(ta(l.defaultColors,function(a){return"diigoHiPen-"+a}).join(" ")),ia.onHighlightPenModeChanged(!1),P.onHighlightPenModeChanged(!1),!1},remove:function(){if(this.j)return $("body").unbind("mousemove",Aa.onMousmove),1!=ub&&(Aa.diigoImageClipMode=!1),l.isHighlightPen=!1,$(document.body).removeClass(ta(l.defaultColors,function(a){return"diigoHiPen-"+
a}).join(" ")),ia.onHighlightPenModeChanged(!1),P.onHighlightPenModeChanged(!1),!1},updateUsername:function(a){},updateUI:function(){var a=$("#diigolet-panel-btnBookmark").toggleClass("saved",l.bookmark.saved);l.bookmark.saved&&a.attr("title","Saved. Click to reorganize")},updateStatus:function(a){a?$("#diigolet-panel-status").text("Saving..."):$("#diigolet-panel-status").text("Saved")},create:function(){this.j=$(lb).eq(0).appendTo(document.body);var a=this;$("#diigolet-panel-guideToHighlight").hide();
$("#diigolet-panel-btnHighlightContainer").addClass("signedIn");$("#diigolet-panel-moreBtn ul li:gt(1)").hide();$("#diigolet-panel-version").text("(v"+A.version+")");$("#diigolet-panel-closeBtn").click(function(){a.hide();l.toggleSilent(!0);l.isHighlightPen=!1;$(document.body).removeClass(ta(l.defaultColors,function(c){return"diigoHiPen-"+c}).join(" "));ia.onHighlightPenModeChanged(!1);P.onHighlightPenModeChanged(!1);return!1});$("#diigolet-panel-btnBookmark>b").click(function(c){A.handle(c,"bookmark");
return!1});$("#diigolet-panel-btnHighlight>b").on("mousedown",function(c){c.preventDefault()});$("#diigolet-panel-btnHighlight>b").click(function(c){c.preventDefault();A.handle(c,"highlight");return!1});$("#diigolet-panel-fold").on("click",function(){a.fold()});$("#diigolet-panel-logo").on("click",function(){a.unfold()});$("#diigolet-panel-btnStickyNote>b").click(function(c){c.preventDefault();A.handle(c,"addStickyNote");return!1});$("#diigolet-panel-btnAnnotationList>b").click(function(c){c.preventDefault();
A.handle(c,"toggleAnnotationList")});$("#diigolet-panel-colorPicker li").click(function(c){var d=$(this).attr("diigocolor");0!==window.getSelection().toString().length?A.handle(c,"highlight","normal",d):A.handle(c,"ChangeColor",d);c.preventDefault()});$("#diigolet-panel-btnShare").click(function(){Y.show();return!1});$("#diigolet-panel-moreBtn li._signIn").click(function(){l.signedIn&&l.user?sb("signOut"):Ib()});$("#diigolet-panel-signInToSave").click(function(){Ib();return!1});$("#diigolet-panel-hightlight-dropdown").mousedown(function(c){c.preventDefault()});
$("#diigolet-panel-hightlight-dropdown").on("click",function(c){var d=$("#diigolet-panel-colorPicker").toggleClass("dropdownShown"),f=function(){d.removeClass("dropdownShown").unbind("mouseleave",f);$(document.body).unbind("click",f)};d.hasClass("dropdownShown")?setTimeout(function(){$(document.body).one("click",f)},13):f()});$("#diigolet-panel-moreBtn").click(function(){var c=$(".optList",this).toggleClass("dropdownShown"),d=function(){c.removeClass("dropdownShown").unbind("mouseleave",d);$(document.body).unbind("click",
d)};c.hasClass("dropdownShown")?setTimeout(function(){$(document.body).one("click",d)},13):d()});$("#diigolet-panel-feedback").click(function(){var c=$(".optList",this).toggleClass("dropdownShown"),d=function(){c.removeClass("dropdownShown").unbind("mouseleave",d);$(document.body).unbind("click",d)};c.hasClass("dropdownShown")?setTimeout(function(){$(document.body).one("click",d)},13):d()});new $.Draggable(a.j,{handle:"#diigolet-panel-space",axis:"y",cursor:"n-resize",afterDrag:function(){a.adjustPosition()}})},
showInfo:function(a,c){},notify2:function(a,c,d){},onHighlightColorChanged:function(a,c){$("#diigolet-panel-colorPicker li").each(function(){var d=$(this);d.toggleClass("selected",d.attr("diigocolor")==a)});$("#diigolet-panel-btnHighlight")[0].className=a},onHighlightPenModeChanged:function(a){$("#diigolet-panel-Highlight").toggleClass("pen",a)},notify:function(a,c,d){V(a)},fold:function(){var a=this,c=parseInt(this.j.css("left")),d=$("#diigolet-panel-main").find(".diigolet-panel-btn").length,f=0;
3==d?f=121:4==d&&(f=161);this.j.addClass("fold").animate({left:c+f+"px"},150,function(){$("#diigolet-panel-main").css("width","0px");a.adjustPosition()});l.isHighlightPen=!1;$(document.body).removeClass(ta(l.defaultColors,function(h){return"diigoHiPen-"+h}).join(" "));ia.onHighlightPenModeChanged(!1);P.onHighlightPenModeChanged(!1);return!1},unfold:function(){var a=this,c=parseInt(this.j.css("left")),d=$("#diigolet-panel-main").find(".diigolet-panel-btn").length,f=0;3==d?f=121:4==d&&(f=161);$("#diigolet-panel-main").css("width",
f+30+"px");this.j.removeClass("fold").animate({left:c-f+"px"},150,function(){a.adjustPosition()})}};P.refresh=P.updateUI;var la,Z,Za=la=Z={HIGHLIGHT_CLASS:"diigoHighlight",HIGHLIGHT_ICON_CLASS:"diigoIcon",HIGHLIGHT_ID_CLASS:"id_",HIGHLIGHT_TYPE_CLASS:"type_",isHighlightElement:function(a){try{if(1==a.nodeType&&a.className&&(-1<a.className.indexOf(this.HIGHLIGHT_CLASS)||-1<a.className.indexOf(this.HIGHLIGHT_ICON_CLASS))){var c={type:-1,ids:[]};c.type=Number(a.className.match(new RegExp(this.HIGHLIGHT_TYPE_CLASS+
"(\\d)"))[1]);Vb(a.className,new RegExp(this.HIGHLIGHT_ID_CLASS+"([^\\s]+)(?:\\s|$)","img"),function(d){c.ids.push(d[1])});c.ids=c.ids.slice(0,1);return c}return!1}catch(d){E(d)}},tagBlackList:",applet,area,base,basefont,bdo,button,frame,frameset,iframe,head,hr,img,input,link,map,meta,noframes,noscript,optgroup,option,param,script,select,style,textarea,title,",docHtml:"",docTxt:"",docTxtOffsetList:[],domSnapshot:function(){var a=this;a.docTxt="";a.docTxtOffsetList=[];var c=!1;(new xa(document.body,
function(d){if(3==d.nodeType){var f=d.nodeValue.replace(/\s+/mg," ");0!=f.length&&(/^\s$/m.test(f)?c||(a.docTxt+=" ",c=!0):(c&&(f=f.replace(/^\s+/m,"")),a.docTxtOffsetList.push({offset:a.docTxt.length,node:d,length:f.length}),a.docTxt+=f,c=/\s$/m.test(f)))}},{filter:function(d){return a.domSnapshotNodeFilter(d)}})).walk()},domSnapshotNodeFilter:function(a){return 3==a.nodeType?!0:1!=a.nodeType||a.tagName&&-1<this.tagBlackList.indexOf(","+a.tagName.toLowerCase()+",")?!1:!a.className||/(^|\s)diigoHighlight(\s|$)/.test(a.className)?
!0:/(^|\s)diigolet(\s|$)/.test(a.className)?!1:!0},isHighlightableNode:function(a){return 3==a.nodeType||1==a.nodeType&&-1==Z.tagBlackList.indexOf(","+a.tagName.toLowerCase()+",")},findOffset:function(a,c,d,f){a=a.nodeValue;var h=a.replace(/\s+/g,"");if(d)for(c=c.slice(0,h.length-f),h=a.length-c.length;h>=f;h--){if(-1<a.slice(h).replace(/\s+/g,"").indexOf(c))return h}else for(c=c.slice(Math.max(0,c.length-f-1)),h=f;h<=a.length;h++)if(-1<a.slice(0,h).replace(/\s+/g,"").indexOf(c))return h;return d?
a.length:0},findOffset2:function(a,c,d,f,h){var k={};if(d==h){var m=d.node.nodeValue;for(c-=d.offset;c<m.length;c++)if(0==m.slice(c).replace(/\s+/mg," ").indexOf(a)){k.startOffset=c;break}if(void 0!==k.startOffset)for(c=k.startOffset+a.length;c<=m.length;c++)if(-1<m.slice(k.startOffset,c).replace(/\s+/mg," ").indexOf(a)){k.endOffset=c;break}}else{m=d.node.nodeValue;var q=a.slice(0,d.offset+d.length-c);for(c-=d.offset;c<=m.length-q.length;c++)if(0==m.slice(c).replace(/\s+/mg," ").indexOf(q)){k.startOffset=
c;break}if(void 0!==k.startOffset)for(m=h.node.nodeValue,q=a.slice(a.length-(f-h.offset+1)),c=f-h.offset+1;c<=m.length;c++)if(-1<m.slice(0,c).replace(/\s+/mg," ").indexOf(q)){k.endOffset=c;break}}return k},findOccurrences:function(a,c,d){for(var f=[],h,k=0,m=0;-1<(h=c.indexOf(a,k))&&!(m++,k=h+1,f.push(h),void 0!=d&&m>=d););return f},seek:function(a,c){c=c||1;a=this.html2txt(a);var d=-1,f=this.findOccurrences(a,this.docTxt,c);f.length>=c?d=f[c-1]:0<f.length&&(d=f[f.length-1]);if(-1==d)return null;
c=d+a.length-1;for(var h=this.docTxtOffsetList,k,m,q,n,t,r=void 0,w=0,G=h.length;f=h[w],w<G;w++){if(d==f.offset||d>f.offset&&(w+1==h.length||d<h[w+1].offset))k=f.node,r=f;if(c==f.offset||c>f.offset&&(w+1==h.length||c<h[w+1].offset)){m=f.node;q=f;n=this.findOffset2(a,d,r,c,q);q=n.startOffset;n=n.endOffset;break}}if(k&&m){for(d=k;d=d.parentNode;){a:{for(f=m;f=f.parentNode;)if(f==d){f=!0;break a}f=!1}if(f){t=d;break}}if(!t)return null}return k&&m?{startNode:k,endNode:m,startOffset:q,endOffset:n,endIndex:c,
commonAncestor:t,txt:a}:null},paint:function(a){function c(u,x){$(u).addClass(Z.HIGHLIGHT_CLASS).addClass(m).addClass(Z.HIGHLIGHT_TYPE_CLASS+x.type).removeClass("yellow blue green pink").addClass(x.extra.color&&0<x.extra.color.length?x.extra.color:"yellow");return u}function d(u){var x=$(u.parentNode);x.hasClass(Z.HIGHLIGHT_CLASS)?x.addClass(m):$(u).wrap(c(Fa.createElement("em"),k))}function f(u,x){$(u).addClass(Z.HIGHLIGHT_ICON_CLASS).addClass(m).addClass(Z.HIGHLIGHT_TYPE_CLASS+ANNOTATION_TYPE_ICON).addClass("TextIcon").toggleClass("public",
x.isPublic()&&0<q.length).toggleClass("private",x.isPrivate()&&0<q.length).toggleClass("group",x.inAnyGroups()&&0<q.length&&("onlyGroup"==K.getCommentsInfo(x.comments)||"both"==K.getCommentsInfo(x.comments))).toggleClass("diigoHighlightcommented",0<q.length).removeClass("diigoadd yellow blue green pink").addClass(x.extra.color).css({bottom:"0px"});0<q.length?($(u).html("<span class='"+m+" "+Z.HIGHLIGHT_ICON_CLASS+" "+Z.HIGHLIGHT_TYPE_CLASS+ANNOTATION_TYPE_ICON+"'>"+q.length+"</span>"),$(u).attr("title",
ea.tipMsg(x)),h.adjustIconBg(x)):($(u).html(""),$(u).attr("title",""));return u}var h=this,k=S.find(a),m=Z.HIGHLIGHT_ID_CLASS+k.id,q=k.comments;if(k.paintedSuccessfully)c("em."+m,k),f("div."+m,k),$("em."+m).filter(":last").toggleClass("diigoHighlightcommented",0<q.length);else{k.painted=!0;this.domSnapshot();var n=this.seek(k.content,k.extra.nth);if(n){k.prettyTxt=this.html2txt_pretty(k.content);if(n.startNode===n.endNode)n.endOffset<=n.startOffset&&(n.startOffset=n.endOffset-n.txt.length),a=n.startNode.splitText(n.startOffset),
n=a.splitText(n.endOffset-n.startOffset),d(n.previousSibling||a);else{var t=n.startNode.splitText(n.startOffset),r=n.endNode.splitText(n.endOffset).previousSibling,w=!1,G=[];(new xa(n.commonAncestor,function(u){w||u!==t||(w=!0);w&&3==u.nodeType&&0<u.nodeValue.replace(/(^\s+|\s+$)/mg,"").length&&G.push(u);if(w&&u===r)throw w=!1,xa.$end;},{filter:this.isHighlightableNode})).walk();O(G,function(u){d(u)})}a=$("em."+m);k.paintedSuccessfully=0<a.size();if(0==k.type&&0>=$("div."+m).size()&&0<a.size()){n=
$(Fa.createElement("div"));var F=$(Fa.createElement("span"));F.addClass("diigoHighlightCommentLocator");var L=a.filter(":last");L.toggleClass("diigoHighlightcommented",0<q.length);F.appendTo(L);n.appendTo(F);f(n,k)}0<a.size()&&(a=a.offset(),k.extra.top=a.top,k.extra.left=a.left);this.adjustColor(k);return k.paintedSuccessfully}k.onlyInGroup||l.orphanHighlights.push(k)}},adjustIconBg:function(a){var c=window,d;try{$("em."+Z.HIGHLIGHT_ID_CLASS+a.id).parents().filter(function(f){f=c.getComputedStyle(this,
null).getPropertyValue("background-color");if("transparent"!=f)throw d=f,"end";return!1})}catch(f){}$("div.diigoIcon.diigoHighlightcommented.private."+Z.HIGHLIGHT_ID_CLASS+a.id).attr("style","background-color:"+d+" !important")},adjustColor:function(a){function c(d){var f=d.r/255,h=d.g/255;d=d.b/255;return.2126*(.03928>=f?f/12.92:Math.pow((f+.055)/1.055,2.4))+.7152*(.03928>=h?h/12.92:Math.pow((h+.055)/1.055,2.4))+.0722*(.03928>=d?d/12.92:Math.pow((d+.055)/1.055,2.4))}a=S.find(a);$("em."+Z.HIGHLIGHT_ID_CLASS+
a.id).each(function(d,f){d=$(f);f=H.parseColor(d.css("backgroundColor"));var h=H.parseColor(d.css("color"));var k=c(h),m=c(f);k>m?(h=k,k=m):h=m;f=2.5<(h+.05)/(k+.05)?null:.5<c(f)?"#000000":"#FFFFFF";f&&d.css("color",f)})},unpaint:function(a){a=S.find(a).id;var c=Z.HIGHLIGHT_ID_CLASS+a;$("em."+c).each(function(d,f){d=$(f);d.removeClass(c);d.find("div.diigoIcon."+c).remove();for(var h;h=f.firstChild;)f.parentNode.insertBefore(h,f);d.remove()})},isTextSelected:function(){return window.getSelection?0<
Ta(String(window.getSelection())).length:$.browser.msie?"Text"==document.selection.type&&0<Ta(document.selection.createRange().text).length:!1},checkSelection:function(){var a,c={ok:!1,txt:"",html:"",msg:"",pen:!1},d=null;if(!this.isTextSelected())return c.msg="The number of highlighted non white space characters needs to be between 5 and 2000. Please select some text and try again.",c.pen=!0,c;if(window.getSelection){var f=window.getSelection();if(f.removeAllRanges){c.html=this.range2html(a=f.getRangeAt(0));
if(!function(m){if(m.collapsed)return!1;m=[m.startContainer,m.endContainer];for(var q=0;q<m.length;q++){var n=$(m[q]);if(n.is(".diigoHighlight,.diigolet")||0<n.parents(".diigoHighlight,.diigolet").length)return!1}return!0}(a))return E("[H] checkRange returned false. selection not highlightable"),c.msg="Selection cannot be highlighted.",c;d=a.endContainer}else c.html=String(f)}else c.html=$.browser.msie?this.range2html(document.selection.createRange()):document.getSelection();c.txt=this.html2txt(c.html);
if(3E3<c.txt.length)return c.msg="The number of highlighted non white space characters needs to be between 5 and 2000. Please select some text and try again.",c;if(0<$("<div></div>").html(c.html).find(".diigoHighlight,.diigolet").size())return c.msg="Selection cannot be highlighted.",c;c.ok=!0;if(d){var h=this,k="";(new xa(document.body,function(m){if(3==m.nodeType){var q=m.nodeValue;m==d&&(q=q.slice(0,a.endOffset));k+=q}if(m==d)throw xa.$end;},{filter:function(m){return h.domSnapshotNodeFilter(m)}})).walk();
k=k.replace(/\s+/mg," ");f=h.findOccurrences(c.txt,k);c.nth=f.length}else c.nth=1;return c},range2html:function(a){a=void 0==a.htmlText?$("<div></div>").append(a.cloneContents()).html():a.htmlText;return this.stripScripts(a)},stripScripts:function(a){return a.replace(/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/img,"")},html2txt:function(a){a=$("<div></div>").html(this.stripScripts(a));var c=this,d="";(new xa(a[0],function(f){3==f.nodeType&&(d+=f.nodeValue)},{filter:function(f){return 3==f.nodeType||
1==f.nodeType&&-1==c.tagBlackList.indexOf(","+f.tagName.toLowerCase()+",")}})).walk();a.remove();return d.replace(/\s+/mg," ").replace(/^\s|\s$/mg,"")},html2txt_pretty:function(a){a=$("<div></div>").html(this.stripScripts(a)).appendTo(document.body);if(window.getSelection&&window.getSelection().removeAllRanges){var c=document.createRange();c.selectNode(a[0]);var d=this.range2txt(c);c.detach()}else $.browser.msie?(a.hide().appendTo(document.body),c=document.body.createTextRange(),c.moveToElementText(a[0]),
d=this.range2txt(c)):d=this.node2txt(a[0]);a.remove();return d},node2txt:function(a){var c="",d=3;(new xa(a,function(f){3==f.nodeType&&0==$(f).parents("script,style,noscript").size()&&(c+=(3==d?"":"\n")+f.nodeValue);d=f.nodeType})).walk();return this.normalizeTxt(c)},range2txt:function(a){if(window.getSelection){var c=window.getSelection();c.removeAllRanges?c.removeAllRanges():c.collapse();c.addRange(a);a=c.toString();c.removeAllRanges?c.removeAllRanges():c.collapse()}else $.browser.msie?a=a.text:
(a="",alert("Browser not supported!"));return this.normalizeTxt(a)},normalizeTxt:function(a){return cb(Ta(a),/\s+/,function(c){return c[0].match(/[\r\n]/)?"\n":" "}).replace(/[\r\n]+/g,"\n")}};xa.$end=Error("end walking");xa.prototype.walk=function(){this._walk(this.node,this.func)};xa.prototype._walk=function(a,c){var d=this.options;if(!this.end&&d.filter(a)){try{c(a)}catch(f){if(f===xa.$end){this.end=!0;return}throw f;}for(a=d.reverse?a.lastChild:a.firstChild;a;)this._walk(a,c),a=d.reverse?a.previousSibling:
a.nextSibling}};var K={j:null,shown:!1,showMode:"view",dragging:!1,backupContent:"",editInterval:null,tempObj:{},saveInterval:null,privateEditing:!1,filterMode:"_all",ann:null,init:function(){if(0===$("#diigolet-dlg-sticky").length){var a=this;a.create();a.groupEditor.init();setTimeout(function(){a.j.bind("mouseleave",function(c){a.dragging||l.draggingFloatNote||a.isEditing()||a.scheduleHide()}).bind("mouseenter",function(c){a.dragging||l.draggingFloatNote||a.cancelHide()})},13);$(".IconFeild").mouseover(function(){a.showActionDropdown()}).click(function(){return!1});
X("diigolet-dlg-sticky-close").click(function(){if(a.privateEditing){var c=$("#FN-private-saveBtn");c.addClass("notify");setTimeout(function(){c.removeClass("notify")},600)}else return a.hide(),!1});$(".FN-switcher").on("click",function(c){"FN-switcher-private"==c.target.id||"FN-switcher-private"==c.target.parentNode.id?a.switchTab("private"):("FN-switcher-group"==c.target.id||"FN-switcher-group"==c.target.parentNode.id)&&a.switchTab("group")});$("#diigolet-dlg-sticky-addTab").on("click",function(){if(1!=
$("#FN-group-content-postform").find("button").prop("disabled")&&1!=$("#FN-group-post").prop("disabled"))if(a.j.hasClass("onlyPrivate")){if($("#FN-content-footer").find("#editing").is(":visible"))if($("#FN-private-editor").val().match(/^\s*$/))$("#FN-private-cancelBtn").trigger("click"),a.j.removeClass("onlyPrivate").addClass("groupNew"),a.switchTab("group");else{var c=$("#FN-private-saveBtn");c.addClass("notify");setTimeout(function(){c.removeClass("notify")},600)}else a.j.removeClass("onlyPrivate").addClass("groupNew"),
a.switchTab("group");$("#FN-current-group").find("span").text("+Share to a new group")}else{a.j.removeClass("onlyGroup");a.switchTab("private");var d=document.querySelector("#FN-private-editor");wb.init(d,200)}});$("#diigolet-dlg-sticky-currentColor").on("click",function(c){c.stopPropagation();$("#diigolet-dlg-sticky-colorPicker").toggle()});$("#FN-current-group").on("click",function(c){c.stopPropagation();1!=$("#FN-group-content-postform").find("button").prop("disabled")&&1!=$("#FN-group-post").prop("disabled")&&
$("#FN-group-menu").toggle()});$(document).on("click",function(){$("#diigolet-dlg-sticky-colorPicker").hide();$("#FN-group-menu").hide()});$("#diigolet-dlg-sticky-color").find(".dlg-colorItem").on("click",function(){var c=$(this).attr("color");a.updateColor(c,"click")});$("#FN-group-menu").on("click","li",function(c){if("FN-group-share-new"==c.target.id){a.j.addClass("groupNew");var d=$("#FN-group-share").empty();d.append(H.dom.buildOne("option",{value:0},["Choose a group"]));d.append(H.dom.buildOne("option",
{value:-1},[Array(20).join("-")]));O(l.myGroups,function(f){0==$("#FN-group-ul").find('li[data-dgroupname="'+f.name+'"]').length&&d.append(H.dom.buildOne("option",{value:f.name},[f.displayName]))});$("#FN-current-group").find("span").text("+Share to a new group");$("#FN-group-post").focus()}else c={name:$(this).attr("data-dGroupName"),displayName:$(this).text()},a.j.removeClass("groupNew"),a.switchGroup(c)});$("#FN-group-share").empty().unbind().change(function(){$("#FN-post-form").removeClass("notEdit")});
$("#FN-post-form").find("button").on("click",function(){a.shareToNewGroup()});$("#FN-post-form").find("a").on("click",function(){0<$("#FN-group-content-container").find(".FN-group-content-section").length?(a.j.removeClass("groupNew"),$("#FN-group-ul").find("li").eq(0).trigger("click"),$("#FN-group-post").val(""),$("#FN-group-share").val(0)):a.hide()});$("#FN-group-content-container").on("click",".FN-group-comment-item-delete",function(c){c=$(this).parent().parent().attr("data-cid");var d=$("#FN-current-group").find("span").attr("data-group");
A.handle(event,"dlgIC_del_ic",c,d)});$("#FN-private-delete").on("click",function(c){var d=$(this).attr("data-cid");A.handle(c,"dlgIC_del_ic",d);a.j.hasClass("onlyPrivate")&&(2==a.ann.type&&a.ann.unpaint(),a.hide())});$("#FN-private-editor").on("input propertychange",function(){var c=$("#FN-private-editor").val();a.backupContent!=c&&(a.privateEditing=!0,a.privateEditOn(!0))}).focus(function(){a.backupContent=$("#FN-private-editor").val()});$("#FN-private-saveBtn").on("click",function(){$("#FN-private-editor").val().match(/^\s*$/)||
(a.ann.onlyInGroup||!a.ann.saved||0==a.getCommentCount("private",a.ann.comments)?a.addPrivateComment():a.uploadPrivateComment(),a.privateEditOn(!1),a.privateEditing=!1)});$("#FN-private-cancelBtn").on("click",function(){$("#FN-private-editor").val(a.backupContent);a.privateEditOn(!1);a.privateEditing=!1});$("#FN-group-content-postform").find("textarea").focus(function(){$("#FN-group-content-postform").addClass("active")});$("#FN-group-content-postform").find("a").on("click",function(){$("#FN-group-content-postform").removeClass("active");
$("#FN-group-content-postform").find("textarea").val("")});$("#FN-private-editor").on("keydown",function(c){83==c.which&&(c.ctrlKey||c.metaKey)&&(c.preventDefault(),$("#FN-private-saveBtn").trigger("click"))});l.addEventListener("ic_add",a);l.addEventListener("ic_del",a);l.addEventListener("ann_del",a);l.addEventListener("ic_edit",a);new $.Draggable(a.j,{handle:"._dragHandle"})}},destroy:function(){},create:function(){this.j=$(gb).css({position:"absolute"}).appendTo(Fa.body).hide();$.browser.ieBelow7&&
this.j.addClass("diigoletFNIEPatch")},updateColor:function(a,c){$("#diigolet-dlg-sticky-color").find(".dlg-colorItem").removeClass("colorchecked");this.j.removeClass("yellow blue green pink").addClass(a);$("#diigolet-dlg-"+a).addClass("colorchecked");"click"==c&&(this.ann.extra&&"undefined"!=this.ann.extra?this.ann.extra.color=a:this.ann.extra={color:a},C.updateExtra(this.ann),this.ann.paint(),a="id_"+this.ann.id,1<$("."+a).length?(a=$("."+a)[0],$(a).scrollmarker()):$("."+a).scrollmarker(),fa.editItem("changeColor",
this.ann))},showEditSticky:function(a){this.groupEditor.show()},show:function(a,c,d,f){return this.show_(a.pageX,a.pageY,c,d,f)},show_:function(a,c,d,f,h){var k=this;k.ann=d;k.updateColor(d.extra.color||"yellow");f=f||"view";k.cancelHide();k.cancelShow();E("[IC] showing...");k.j.find("ul.diigoletFNDropdown").hide();void 0===f?f=k.showMode:k.showMode=f;var m=k.getCommentsInfo(d.comments);"onlyPrivate"==m?(k.switchTab("private"),k.j.removeClass("onlyGroup").addClass("onlyPrivate")):"onlyGroup"==m?(k.switchTab("group"),
k.j.removeClass("onlyPrivate").addClass("onlyGroup")):"both"==m&&(k.j.removeClass("onlyPrivate onlyGroup"),k.switchTab("private"));ka.hide();ea.j&&ea.hide();var q=k.j.toggleClass("editing","view"!=f);q.find("._menuItem_deleteSticky").showHide(d.canDelete(k.filterMode));setTimeout(function(){k.refreshComments();var n=k.getGroups(d.comments);0<n.length&&($("#FN-current-group>span").text(n[0].displayName),k.switchGroup(n[0]));n=ea.tipMsg(k.ann);k.j.find("span.personalText").text(n);k.j.find("span.personalText").attr("title",
n);80<n.length?($(".footText").addClass("multipalCol"),$(".footText").removeClass("singleCol")):($(".footText").addClass("singleCol"),$(".footText").removeClass("multipalCol"));d.user==l.user?($(".IconFeild").show().hide(),$(".footText").addClass("myCommentSpan"),$(".footText").removeClass("notMyCommentSpan")):($(".IconFeild").hide(),$(".footText").addClass("notMyCommentSpan"),$(".footText").removeClass("myCommentSpan"));k.shown&&"view"!=f||k.updatePos({pageX:a,pageY:c});q.show();k.shown=!0;"add"===
f&&(P.shown&&$("#FN-private-editor").focus(),k.switchTab("private"),k.j.removeClass("onlyGroup").addClass("onlyPrivate").addClass("groupNew"),$("#FN-group-ul").empty(),$("#FN-current-group").find("span").text("+Share to a new group"),k.privateEditing=!0,k.privateEditOn(!0));$("#diigolet-dlg-sticky-color").show();n=document.querySelector("#FN-private-editor");wb.init(n,200);k.ifMoreThanOnePrivateComment(d.comments)&&(n=$("#FN-private-editor").val(),k.mergePrivateComments(n));var t=$("#FN-group-share").empty();
t.append(H.dom.buildOne("option",{value:0},["Choose a group"]));t.append(H.dom.buildOne("option",{value:-1},[Array(20).join("-")]));O(l.myGroups,function(r){0==$("#FN-group-ul").find('li[data-dgroupname="'+r.name+'"]').length&&t.append(H.dom.buildOne("option",{value:r.name},[r.displayName]))});k.j.hasClass("onlyPrivate")?$("#diigolet-dlg-sticky-addTab").attr("title","Add a group note"):$("#diigolet-dlg-sticky-addTab").attr("title","Add a private note")},h)},mergePrivateComments:function(a){for(var c=
this.ann,d=c.comments.length,f=[],h=0;h<d;h++)2===c.comments[h].mode&&f.push(c.comments[h].id);a={annotationId:c.id,mode:2,content:a};2!=c.type||c.saved?0!=c.type||c.saved?C.addInlineComment(a):(c._toAddInlineComment=a,c.saving=!0,C.addAnnotation(c)):(c._toAddInlineComment=a,c.saving=!0,C.addAnnotation(c));setTimeout(function(){for(var k=0;k<f.length;k++){var m=za.find(f[k]),q=m.getAnnotation();q.comments.splice(q.comments.indexOf(m),1);C.deleteInlineComment(m)}},200)},shareToNewGroup:function(){var a=
$("#FN-post-form"),c=a.find("textarea"),d=c.val(),f=a.find("select"),h=f.val();d.match(/^\s*$/)?(c.addClass("notify"),setTimeout(function(){c.removeClass("notify")},600)):0==h||-1==h?(f.addClass("notify"),setTimeout(function(){f.removeClass("notify")},600)):(d={annotationId:K.ann.id,mode:void 0,content:d},h&&(d.justForGroups=!0,d.groups=[h]),h=S.find(d.annotationId),2!=h.type||h.saved?0!=h.type||h.saved?C.addInlineComment(d):(h._toAddInlineComment=d,h.saving=!0,C.addAnnotation(h)):(h._toAddInlineComment=
d,h.saving=!0,C.addAnnotation(h)),a.find("button").prop("disabled",!0),a.find("textarea").prop("disabled",!0))},addPrivateComment:function(){var a=$("#FN-private-editor").val();if(!a.match(/^\s*$/)){a={annotationId:K.ann.id,mode:2,content:a};var c=S.find(a.annotationId);2!=c.type||c.saved&&!c.onlyInGroup?0!=c.type||c.saved&&!c.onlyInGroup?C.addInlineComment(a):(c._toAddInlineComment=a,c.saving=!0,C.addAnnotation(c)):(c._toAddInlineComment=a,c.saving=!0,C.addAnnotation(c))}},hide:function(){this.cancelHide();
this.cancelShow();if(this.shown){this.reSetIcWindow();this.j.hide();this.shown=!1;var a=this.ann;a.activate(!1);!a||2!=a.type||a.saved||a.saving||a.deleted||a.del();this.ann=null;this.backupContent=""}},reSetIcWindow:function(){$("#diigolet-dlg-sticky-colorPicker").hide();$("#FN-private-editor").blur();$("#FN-private-editor").val("");$("#FN-private-datetime").text("");$("#FN-private-delete").hide();this.switchTab("private");$("#FN-group-menu").hide();$("#FN-group-content-postform").find("textarea").val("");
this.j.removeClass("groupNew");$("#FN-group-content-postform").find("textarea,button").prop("disabled",!1);$("#FN-post-form").find("textarea,button").prop("disabled",!1);$("#FN-group-post").val("");$("#FN-group-ul").empty();$("#FN-group-content-container").empty()},showActionDropdown:function(){var a=this.j.find("div.IconFeild").offset(),c=X("diigolet-annMenu");c.find("#diigolet-annMenu-add").hide();c.find("#diigolet-annMenu-del").hide();c.find("#diigolet-annMenu-tip").hide();var d=ea.ann=this.ann;
2==d.type?(c.find("._onlyMy").hide(),c.find("#diigolet-annMenu-My").show()):(c.find("._onlyMy").show(),$.each(l.defaultColors,function(f,h){X("diigolet-context-"+h).toggleClass("colorchecked",!1)}),d.extra&&d.extra.color&&0<d.extra.color.length?X("diigolet-context-"+d.extra.color).toggleClass("colorchecked",!0):X("diigolet-context-yellow").toggleClass("colorchecked",!0));c.find("#diigolet-annMenu-tip-before").hide();c.css({top:a.top+20,left:a.left});Ma(c.show(),13)},uploadPrivateComment:function(){var a=
$("#FN-private-editor").val(),c=$("#FN-private-delete").attr("data-cid");a!=this.backupContent&&C.editInlineComment(c,a)},switchGroup:function(a){$("#FN-group-content-container").find(".FN-group-content-section").hide();$('.FN-group-content-section[data-dgroup="'+a.name+'"]').show();$("#FN-current-group").find("span").text(a.displayName).attr("data-group",a.name)},switchTab:function(a){var c=$("#diigolet-dlg-sticky-content");"private"===a?c.removeClass("group").addClass("private"):(c.removeClass("private").addClass("group"),
$("#FN-group-post").focus())},privateEditOn:function(a){!0===a?$("#FN-content-footer").find("#editDone").hide().end().find("#editing").show():!1===a&&$("#FN-content-footer").find("#editing").hide().end().find("#editDone").show()},refreshComments:function(){var a=this.ann.getComments(this.filterMode);this.updatePrivateComments(a);this.updateGroupComments(a)},showNoComments:function(){0==this.ann.getComments(this.filterMode).length&&this.j.find("div.diigoletFNContent").html('<span class="noComments">There are no sticky notes yet.</span>')},
updatePos:function(a){"none"==this.j.css("display")&&this.j.css({left:-999,top:-999,display:"block"});var c=this.ann,d=this.j.find("div.diigoletFNContent");d.css({height:""});214<d.height()?d.height(214):d.css({height:""});var f=2!=c.type?a.pageX-8:parseInt(c.getEle().css("left"))+20;a=2!=c.type?a.pageY-8:parseInt(c.getEle().css("top"))+20;d=this.j;c=$(document).scrollLeft();var h=$(document).scrollTop(),k=c+$(window).width()-d.width()-10,m=h+$(window).height()-d.height()-10;f>k&&(f=k);f<c&&(f=c);
a>m&&(a=m);a<h&&(a=h);d.css({left:f,top:a})}};M(K,{showDelay:200,showTimer:null,hideDelay:300,hideTimer:null,cancelShow:function(){clearTimeout(this.showTimer);this.showTimer=null},cancelHide:function(){clearTimeout(this.hideTimer);this.hideTimer=null},aboutToShow:function(){return this.shown||this.showTimer},aboutToHide:function(){return!this.shown||this.hideTimer},scheduleShow:function(a,c){var d=this,f={pageX:a.pageX-10,pageY:a.pageY-10};d.cancelHide();d.cancelShow();d.showTimer=setTimeout(function(){d.show(f,
c)},d.showDelay)},scheduleHide:function(){var a=this;a.cancelHide();a.cancelShow();a.hideTimer=setTimeout(function(){a.hide()},a.hideDelay)}});M(K,{eleId_ic:function(a){return"diigolet-dlgIC-ic_"+a.id},_labelsHtml:function(a){var c=this.filterMode,d="",f="";a.canDelete()&&(f='<a href="javascript:void(0)" class="del"><img diigoonclick="#{ONCLICK}" title="Delete" src="https://www.diigo.com/client/ietoolbar/spacer.gif" style="width:12px;height:12px;cursor:pointer" alt="" /></a>');!a.isPublic()||"_all"!=
c&&"_public"!=c||a.user!=l.user||(d+='<label class="_public"><span>Public</span>DEL</label>'.replace("DEL",da(f,{ONCLICK:"diigolet.handle(event, 'dlgIC_del_ic', '"+a.id+"')"})));!a.isPrivate()||"_all"!=c&&"_private"!=c||(d+='<label class="_private"><span>Private</span>DEL</label>'.replace("DEL",da(f,{ONCLICK:"diigolet.handle(event, 'dlgIC_del_ic', '"+a.id+"')"})));O(a.groups,function(h){if(c==h.name||"_all"==c)d+=da('<label class="_#{GROUP_NAME}"><a href="#{GROUP_URL}" class="link">#{GROUP_DISPLAY_NAME}</a>#{DEL}</label>',
{GROUP_NAME:h.name,GROUP_DISPLAY_NAME:h.displayName,GROUP_URL:A.urls.getGroupURL(h.name),DEL:da(f,{ONCLICK:"diigolet.handle(event, 'dlgIC_del_ic', '"+a.id+"', '"+h.name+"')"})})});return d},addInlineComment:function(a){if(2==a.mode)/minute|day|hour/.test(a.datetime)?$("#FN-private-datetime").text(""):$("#FN-private-datetime").text(a.datetime.replace("on ","")),$("#FN-private-delete").attr("data-cid",a.id).show();else{var c=a.groups[0].name,d=a.groups[0].displayName;a=this.generateGroupItem(a);this.j.hasClass("groupNew")?
($("#FN-group-content-container").append('<div class="FN-group-content-section" data-dgroup="'+c+'"></div>'),$("#FN-group-ul").append('<li data-dGroupName="'+c+'" title="'+d+'">'+d+"</li>"),this.j.removeClass("groupNew"),this.switchGroup({name:c,displayName:d}),$("#FN-group-post").val(""),$("#FN-post-form").find("button,textarea").prop("disabled",!1),$("#FN-group-share").val(0),this.ann.paint()):($("#FN-group-content-container")[0].scrollTop=$("#FN-group-content-container")[0].scrollHeight,K.groupEditor.remove());
$('.FN-group-content-section[data-dgroup="'+c+'"]').append(a)}},editInlineComment:function(a){/minute|day|hour/.test(a.datetime)?$("#FN-private-datetime").text(""):$("#FN-private-datetime").text(a.datetime.replace("on ",""))},getCommentsInfo:function(a){var c=0,d=0,f=a.length,h;for(h=0;h<f;h++)2==a[h].mode?c++:3==a[h].mode&&d++;return 0==c&&0==d?"noComment":0<c&&0==d?"onlyPrivate":0==c&&0<d?"onlyGroup":"both"},ifMoreThanOnePrivateComment:function(a){var c=0,d=a.length,f;if(0===d)return!1;for(f=0;f<
d;f++)2==a[f].mode&&c++;return 1<c?!0:!1},updatePrivateComments:function(a){var c=a.length,d="",f="",h=this.getCommentCount("private",a),k;if(1<=h)for(k=0;k<c;k++){if(2===a[k].mode){d+=a[k].content.replace(/\n$/,"");1<h&&(d+="["+a[k].datetime+"]\n");f=a[k].datetime;var m=a[k].id}}else if(0==h)return;$("#FN-private-editor").val(d);this.backupContent=d;""!=f&&m&&(/minute|day|hour/.test(f)||$("#FN-private-datetime").text(f.replace("on ","")),$("#FN-private-delete").attr("data-cid",m).show())},updateGroupComments:function(a){var c=
{},d="",f=[];if(0!=a.length){for(var h=0;h<a.length;h++)if(3===a[h].mode){f.push(a[h]);for(var k=0;k<a[h].groups.length;k++)c[a[h].groups[k].name]=a[h].groups[k].displayName}a=$("#FN-group-ul").empty();for(g in c)a.append('<li data-dGroupName="'+g+'" title="'+c[g]+'">'+c[g]+"</li>"),d+='<div class="FN-group-content-section" data-dgroup="'+g+'"></div>';$("#FN-group-content-container").empty().append(d);for(c=0;c<f.length;c++)for(d=f[c].groups,a=0;a<d.length;a++)h=this.generateGroupItem(f[c]),$('.FN-group-content-section[data-dgroup="'+
d[a].name+'"]').append(h)}},generateGroupItem:function(a){var c=a.realName.trim()?a.realName:a.user;return da('<div class="FN-group-comment-item" data-cid="#{ID}"><div class="FN-group-comment-item-tbar"><a href="#" class="FN-group-comment-name">#{USERNAME}</a><span class="FN-group-comment-item-time">#{DATETIME}</span>#{DELETE}</div><div class="FN-group-comment-item-content">#{CONTENT}</div></div>',{ID:a.id,USERNAME:c,CONTENT:a.content,DATETIME:a.datetime,DELETE:l.user==a.user?'<a class="FN-group-comment-item-delete">delete</a>':
""})},getGroups:function(a){for(var c=[],d=0;d<a.length;d++)if(3==a[d].mode)for(var f=0;f<a[d].groups.length;f++){var h={};h.displayName=a[d].groups[f].displayName;h.name=a[d].groups[f].name;c.push(h)}a=c.concat();for(c=0;c<a.length;++c)for(d=c+1;d<a.length;++d)JSON.stringify(a[c])===JSON.stringify(a[d])&&a.splice(d--,1);return a},getCommentCount:function(a,c){var d=c.length,f=0;if("private"===a)var h=2;else"group"===a&&(h=3);for(a=0;a<d;a++)c[a].mode===h&&f++;return f},privateCommentAddSuccessful:function(a){},
removeInlineComment:function(a,c){$("#diigolet-dlg-sticky-content").hasClass("private")&&(this.switchTab("group"),this.j.removeClass("onlyPrivate").addClass("onlyGroup"),$("#FN-private-editor").val(""),$("#FN-private-delete").hide(),$("#FN-private-datetime").text(""));$('.FN-group-comment-item[data-cid="'+a.id+'"]').remove();0==$('.FN-group-content-section[data-dgroup="'+c+'"]').find(".FN-group-comment-item").length&&($('.FN-group-content-section[data-dgroup="'+c+'"]').remove(),$("#FN-group-ul").find('li[data-dgroupname="'+
c+'"]').remove());0==$("#FN-group-content-container").find(".FN-group-content-section").length&&(this.j.removeClass("onlyGroup").addClass("onlyPrivate"),this.switchTab("private"));0!=$("#FN-group-ul").find("li").length&&$("#FN-group-ul").find("li").trigger("click")},onclick_del_ic:function(a,c,d){za.del(c,d);a&&(a.stopPropagation(),a.preventDefault())},onic_add:function(a,c){this.addInlineComment(a,c);fa.editItem("addInlineComment",null,a)},onic_del:function(a,c){this.removeInlineComment(a,c);fa.editItem("delInlineComment",
null,a)},onann_del:function(a,c){a==this.ann&&0==a.comments.length&&(a.deleted=!0,this.hide())},onic_edit:function(a){this.editInlineComment(a);fa.editItem("updateStickyNote",null,a)}});M(K,{NO_PUBLIC_STICKY_NOTES_ALLOWED:!0,isEditing:function(){return""!=$("#FN-group-content-postform").find("textarea").val()||""!=$("#FN-group-post").val()||this.ifChooseGroup()||this.privateEditing||$("#FN-group-content-postform").hasClass("active")},ifChooseGroup:function(){var a=$("#FN-group-share").val();return null!=
a&&0!=a&&-1!=a},groupEditor:{jEdit:null,init:function(){var a=this;a.jEdit=K.j.find("#FN-group-content-postform");a.jEdit.find("button").click(function(){a.submitGroupComment()});a.jEdit.find("textarea").keypress(function(c){13==c.keyCode&&c.ctrlKey&&a.submitGroupComment()})},submitGroupComment:function(){var a=this,c=a.jEdit.find("textarea").val();if(c){var d=$("#FN-current-group").find("span").attr("data-group");c={annotationId:K.ann.id,mode:void 0,content:c};d&&(c.justForGroups=!0,c.groups=[d]);
d=S.find(c.annotationId);2!=d.type||d.saved?0!=d.type||d.saved?C.addInlineComment(c):(d._toAddInlineComment=c,d.saving=!0,C.addAnnotation(d)):(d._toAddInlineComment=c,d.saving=!0,C.addAnnotation(d));$("#FN-group-content-postform").find("textarea,button").prop("disabled",!0)}else a.jEdit.find("textarea").addClass("notify"),setTimeout(function(){a.jEdit.find("textarea").removeClass("notify")},600)},remove:function(){this.jEdit[0].parentNode&&($("#FN-group-content-postform").find("textarea,button").prop("disabled",
!1),this.jEdit.find("textarea").val(""),this.jEdit.removeClass("active"))},show:function(){var a=$(".diigoletFNPriSlct").empty(),c=K.ann,d=K.filterMode;"_all"!=d&&"_public"!=d||c&&(c.onlyInGroup||0!=c.getComments("_private").length)||K.NO_PUBLIC_STICKY_NOTES_ALLOWED||a.append('<option value="_public">Public</option>');"_all"!=d&&"_private"!=d||c&&(c.onlyInGroup||0!=c.getComments("_public").length)||a.append('<option value="_private">Private</option>');O(l.myGroups,function(h){("_all"==d||d==h.name)&&
(c&&(c.user!=l.user||c.onlyInGroup)?c.inGroup(h.name):1)&&a.append(H.dom.buildOne("option",{value:h.name},[h.displayName]))});"_all"==d&&c&&c.isPrivate()&&a.val("_private");if(0==a.find("option").length)K.j.find(".diigoletFNComment").hide();else{K.j.find(".diigoletFNComment").show();var f=this.jEdit.find("textarea").val("");setTimeout(function(){f.focus()},500);K.j.find("._stickyTitle").html("Add Sticky Note")}}}});var aa={tagListNames:["recent","recommend","group"],shown:!1,ele:null,init:function(){this.create()},
destroy:function(){},show:function(a,c){if(!(!l.signedIn||this.shown&&this.j.is(":visible"))){this.shown=!0;K.hide();this.j.show();var d=this;if(l.recommendedTagsLoaded)d.showRecommendedTags(l.recommendedTags);else{d.showTagList("recommend",null);var f=l.bookmark,h=f.getTitle();h+=l.googleSearchSentence;C.loadRecommendedTags(f.url,h,function(){E(l.keywords);0<l.keywords.length&&(l.recommendedTags=U($.merge(l.keywords,l.recommendedTags)));d.showRecommendedTags(l.recommendedTags)})}R.getUserData("tagsUsedLastTime",
function(k){k=k?JSON.parse(k):[];d.showTagList("recent",k)});a&&c?this.syncData("saveLink",!0,a,c):this.syncData("data->form",!0);d.refreshPremium();$("#Diigo-Bookmark-uploadCache").find(".op-checkbox-container").removeClass("checked");$("#Diigo-Bookmark-Tag-Input").focus();d.showPromotionMessage();/https:\/\/www.hnsearch.com\/search/.test(window.location.href)&&$("#Diigo-Bookmark-Url,#Diigo-Bookmark-Title,#Diigo-Bookmark-Description,#Diigo-Bookmark-Tag").bind("focus",function(){$(window).unbind("keypress");
var k=this;$(window).bind("keypress",function(m){m.preventDefault();var q=$(k).val();$(k).focus().val(q+String.fromCharCode(m.charCode))})})}},showPromotionMessage:function(){var a=this;A.Messenger.send({name:"pickPromotionMessage"},function(c){if(a.shown&&c){var d=$("#diigolet-cross-promotion");d.empty().append($("<a>",{href:c.url,target:"_blank",html:c.content}).click(function(){d.hide();A.Messenger.send({name:"promotionMessageClicked",details:{id:c.id}})})).show()}})},_tagContainerIdForTagListName:function(a){return"#diigolet-bm-tagListContainer-"+
a},showTagList:function(a,c){var d=this,f=$(d._tagContainerIdForTagListName(a));if("group"==a)f.show(),f.find(".tagButton").remove();else if("recommend"==a&&0<f.find(".tagButton").length)return;if(c)if(0==c.length)f.hide();else{"group"==a&&f.find(".loading").hide();var h=l.bookmark,k=l.myTags;f.find(".tagButton").remove();O(c,function(m,q){q=$(H.dom.buildOne("div",{id:"diigolet-tag-"+a+"-"+d.escapeTagForElementId(m),"class":"tagButton",tag:m},[m])).appendTo(f.show());q.toggleClass("selected",0<=$.inArray(m,
h.tags)).toggleClass("inused",0<=$.inArray(m,k));q.click(function(){d.toggleTag(m);return!1})})}},showRecommendedTags:function(a){this.showTagList("recommend",a)},escapeTagForElementId:function(a){return encodeURIComponent(a).replace(/[.%:]/g,"")},toggleTag:function(a,c){var d=$("#Diigo-Bookmark-Tag-Input"),f=A.parseTags(d.val(),!0),h=$.inArray(a,f);void 0===c?0<=h?f.splice(h,1):f.push(a):c?-1==h&&f.push(a):0<=h&&f.splice(h,1);a=A.unparseTags(f);a.length&&(a+=" ");d.val(a);this.placeCursorAtLast(d[0]);
this.updateTagStates()},updateTagStates:function(){var a=this,c=$("#Diigo-Bookmark-Tag-Input"),d=A.parseTags(c.val(),!0);$("#Diigo-Bookmark-Tag-Cloud").find(".Diigo-Bookmark-Tag-item").each(function(){var f=$(this),h=f.text();-1!=$.inArray(h,d)?f.addClass("selected"):f.removeClass("selected")});a.tagListNames.forEach(function(f){$(a._tagContainerIdForTagListName(f)).find("div.tagButton").each(function(){var h=$(this),k=h.attr("tag");-1!=$.inArray(k,d)?h.addClass("selected"):h.removeClass("selected")})})},
showGroupTags:function(){var a=this;a.showTagList("group",null);var c=null,d=$("#diigo-group").find("select").val();-1!=d&&(c=d);c?C.loadGroupTagsDictionary([c],function(){a.showTagList("group",l.groupTagsDict[c])}):a.showTagList("group",[])},selectAllTags:function(a){var c=this;$(c._tagContainerIdForTagListName(a)).find(".tagButton").each(function(){c.toggleTag($(this).addClass("selected").text(),!0)})},placeCursorAtLast:function(a){var c=this,d=a.value.length;setTimeout(function(){c.placeInputCursor(a,
d)},13)},placeInputCursor:function(a,c){a.focus();a.createTextRange?(a=a.createTextRange(),a.move("character",c),a.select()):0<=a.selectionStart&&(a.focus(),a.setSelectionRange(c,c))},hide:function(a){this.shown&&(this.shown=!1,$("#diigolet-tagForward").hide(),$("#Diigo-Bookmark-Url").removeClass("fold").removeClass("unfold"),a||this.syncData("form->data"))},remove:function(){this.j&&this.j.remove()},create:function(){var a=this;a.j=(new Xb(fb)).css({position:$.browser.supportPositionFixed?"fixed":
"absolute"}).hide().appendTo(Fa.body).hide();$("#diigolet-bm-tagListContainer-recent").find("a").on("click",function(){a.selectAllTags("recent")});$("#diigolet-dlgBm-btnSave").click(function(d){1==a.j.data("data-ifSaveLink")?a.saveThisLink():A.handle(d,"bmOnSubmitAndClose","bookmark")});$("#diigolet-dlgBm-btnSaveandmore").click(function(d){A.handle(d,"bmOnSubmitAndClose","bookmark");d=encodeURIComponent($("#Diigo-Bookmark-Title").val());var f=encodeURIComponent($("#Diigo-Bookmark-Url").val()),h=encodeURIComponent($("#Diigo-Bookmark-Tag").val());
window.open("https://www.diigo.com/toolbar/saved?t="+d+"&url="+f+"&tags="+h)});var c=navigator.userAgent.toLowerCase();-1==c.indexOf("macintosh")&&-1==c.indexOf("mac os x")||$("#list-group select").css("text-indent","7px");$("#Diigo-Bookmark-Title").find("#link-icon").on("click",function(){var d=$("#Diigo-Bookmark-Url");d.hasClass("unfold")?d.addClass("fold").removeClass("unfold"):d.addClass("unfold").removeClass("fold")}).Gtooltip({position:"top"});$("#Diigo-Bookmark-Title-Input,#Diigo-Bookmark-Url-Input").on("focus",
function(){$(this).parent().find(".diigo-alert-tip").hide()}).on("input",function(){$(this).parent().find(".diigo-alert-tip").hide()});$("#Diigo-Bookmark-Options,#Diigo-Bookmark-checkShareExisting").find(".op-checkbox-container").on("click",function(){$(this).toggleClass("checked")});$("#Diigo-Bookmark-Title-Input,#Diigo-Bookmark-Description-Input,#Diigo-Bookmark-Tag-Input").on("focus",function(){$(this).parent().addClass("focus")}).on("blur",function(){$(this).parent().removeClass("focus")});$("#diigolet-tagForward-remove").Gtooltip();
$("#Diigo-Bookmark-Tag-Input").bind("input",function(){a.updateTagStates()});$("#Diigo-Bookmark-Tag-dropdown").on("click",function(){$(this).toggleClass("cloud");"none"==$("#Diigo-Bookmark-Tag-Cloud").css("display")?($("#Diigo-Bookmark-Tag-suggestion").hide(),$("#Diigo-Bookmark-Tag-Cloud").show()):($("#Diigo-Bookmark-Tag-suggestion").show(),$("#Diigo-Bookmark-Tag-Cloud").hide())});$("#diigolet-dlgBm-btnCancel").click(function(d){A.handle(d,"bmCancel")});a.j.css({left:$(window).width()-a.j.outerWidth()-
5,right:""});new $.Draggable(a.j,{handle:"._dragHandle",afterDrag:function(){a.adjustPosition()}});a.j.bind("keydown",function(d){13==d.keyCode?("textarea"!=d.target.tagName.toLowerCase()||d.ctrlKey)&&A.handle(d,"bmOnSubmitAndClose","bookmark"):27==d.keyCode&&A.handle(d,"bmCancel")});$("#diigo-list-addInput").on("focus",function(){$("#diigo-list-add .diigo-alert-tip").hide()});$("#diigo-w-upgrade").on("click",function(d){d.preventDefault();window.open("https://www.diigo.com/premium");$("#diigo-list-add-tip").hide();
$("#diigo-list").show()});$("#diigo-w-cancel").on("click",function(d){d.preventDefault();$("#diigo-list-add-tip").hide();$("#diigo-list").show()});$("#diigo-list-addBtn").on("click",function(){if(!$(this).hasClass("processing")){var d=$("#diigo-list-addInput").val(),f=$("#diigo-list-add .diigo-alert-tip"),h=[],k=l.myBmLists.length,m;for(m=0;m<k;m++)h.push(l.myBmLists[m].title);d.match(/^\s*$/)?f.show().find("span").text("Input a name"):-1!==$.inArray(d,h)?f.show().find("span").text("Name existed !"):
($(this).addClass("processing"),C.createList(d))}});$("#diigo-list-addCancel").on("click",function(){$("#diigo-list-add .diigo-alert-tip").hide();$("#diigo-list-add").hide();$("#diigo-list").show();$("#diigo-list-addInput").val("")});$("#diigolet-tagForward-remove").click(function(d){d.preventDefault();if(!l.isAnnotated()||confirm("Removing this as a bookmark will also remove your annotations on this page. Do you want to continue?"))C.deleteBookmark(l.bookmark),a.hide(),P.hide()})},adjustPosition:function(){var a=
this.j,c=$(window),d=c.width();c=c.height();var f=parseInt(a.css("left")),h=parseInt(a.css("top"));a.outerWidth();a.outerHeight();d<f+100&&a.css("left",f=d-100);c<h+100&&a.css("top",h=c-100);-10>h&&a.css("top",-10);-150>f&&a.css("left",-150)},isURL:function(a){return/^(https|http|ftp|rtsp|mms)+:\/\//.test(a)?!0:!1},buildTagCloud:function(a,c){document.getElementById("Diigo-Bookmark-Tag-Eidt").href="https://www.diigo.com/cloud/"+l.user;if(0==l.myTagsWithCount.length){a=document.getElementById(a);var d=
document.createElement("span");d.id="no-tag";d.innerHTML="No tags";a.appendChild(d)}else if(!(0<$("#Diigo-Bookmark-Tag-Cloud-Container").find("a").length)){var f=this,h=Kb(),k=h.topTags,m=h.maxCount;d=h.a;var q=h.b,n=h.c,t=k.length;h=document.createDocumentFragment();for(var r=0;r<t;r++){var w=document.createElement("a");w.className=c;w.href="#";w.innerText=k[r].name;var G=k[r].count;G==m&&(w.style.fontSize="20px",w.style.fontWeight="bold");d.forEach(function(F){G==F&&(w.style.fontSize="18px",w.style.fontWeight=
"bold")});q.forEach(function(F){G==F&&(w.style.fontSize="16px",w.style.fontWeight="bold")});n.forEach(function(F){G==F&&(w.style.fontSize="16px",w.style.fontWeight="regular")});h.appendChild(w);w.addEventListener("click",function(F){F.preventDefault();f.toggleTag(this.innerText)})}a=document.getElementById(a);a.appendChild(h)}},syncData:function(a,c,d,f){var h=this,k=l.bookmark;if("data->form"==a){$("#diigolet-tagForward-remove").toggle(k.saved).attr("data-gtooltip","Saved "+k.datetime+". Click to remove");
this.j.data("data-ifSaveLink",!1);1==k.saved&&$("#diigolet-tagForward-topBar").find(".topBar-title").text("Edit bookmark");$("#Diigo-Bookmark-Url-Input").val(k.url);if(c||k.saved)$("#Diigo-Bookmark-Title-Input").val(k.getTitle()),a=A.unparseTags(k.tags),$("#Diigo-Bookmark-Tag-Input").val(a+" "),2==k.mode?$("#Diigo-Bookmark-Privacy").find(".op-checkbox-container").addClass("checked"):$("#Diigo-Bookmark-Privacy").find(".op-checkbox-container").removeClass("checked"),1==k.unread?$("#Diigo-Bookmark-Unread").find(".op-checkbox-container").addClass("checked"):
$("#Diigo-Bookmark-Unread").find(".op-checkbox-container").removeClass("checked");$("#Diigo-Bookmark-uploadCache").show();h.buildTagCloud("Diigo-Bookmark-Tag-Cloud-Container","Diigo-Bookmark-Tag-item");h.updateTagStates();a=$("#Diigo-Bookmark-Description-Input");c=H.dom.getSelection();Ya(a.val())?Ya(k.description)?Ya(c)||a.val('"'+c+'"'):a.val(k.description):(a.val(""),k.saved&&!Ya(k.description)&&a.val(k.description));h.updateGroups();h.updateLists();0==k.saved?chrome.storage.local.get(null,function(m){1==
m.researchMode?($("#diigolet-tagForward-topBar").find(".focus-research-tip").show(),h.fillReasearchModeData(m)):$("#diigolet-tagForward-topBar").find(".focus-research-tip").hide()}):$(".focus-research-tip").remove()}else"form->data"==a?(k.url=$("#Diigo-Bookmark-Url-Input").val(),k.title=$("#Diigo-Bookmark-Title-Input").val(),k.tags=A.parseTags($("#Diigo-Bookmark-Tag-Input").val(),!0),k.mode=$("#Diigo-Bookmark-Privacy").find(".op-checkbox-container").hasClass("checked")?2:0,k.unread=$("#Diigo-Bookmark-Unread").find(".op-checkbox-container").hasClass("checked"),
k.description=$("#Diigo-Bookmark-Description-Input").val(),a=$("#diigo-group").find("select").val(),"-1"==a||"-2"==a||"0"==a?k.toShareToGroups=[]:(k.toShareToGroups=[a],k.toShareExistingAnnotations=$("#Diigo-Bookmark-checkShareExisting").find(".op-checkbox-container").hasClass("checked")),a=$("#diigo-list").find("select").val(),k.toAddToBookmarkLists="-1"==a||"-2"==a||"0"==a?[]:[a]):"saveLink"==a&&(this.j.data("data-ifSaveLink",!0),d&&f&&($("#Diigo-Bookmark-Url-Input").val(f),$("#Diigo-Bookmark-Title-Input").val(d),
$("#diigolet-tagForward-topBar>span").text("Save to Diigo")),$("#Diigo-Bookmark-Description-Input").val(""),$("#Diigo-Bookmark-Tag-Input").val(""),A.Messenger.send({name:"initialData"},function(m){"true"==m.preloadedPrefs["prefs.bookmark.privateByDefault"]?$("#Diigo-Bookmark-Privacy").find(".op-checkbox-container").addClass("checked"):$("#Diigo-Bookmark-Privacy").find(".op-checkbox-container").removeClass("checked")}),$("#Diigo-Bookmark-uploadCache").hide(),h.buildTagCloud("Diigo-Bookmark-Tag-Cloud-Container",
"Diigo-Bookmark-Tag-item"),h.updateTagStates(),h.updateGroups(!0),h.updateLists(!0))},fillReasearchModeData:function(a){a=a.researchModeData;a["private"]?$("#Diigo-Bookmark-Privacy").find(".op-checkbox-container").addClass("checked"):$("#Diigo-Bookmark-Privacy").find(".op-checkbox-container").removeClass("checked");a.unread&&$("#Diigo-Bookmark-Unreadr").find(".op-checkbox-container").addClass("checked");$("#Diigo-Bookmark-Description-Input").val(a.description);var c=Pb.unparseTags(a.tags);$("#Diigo-Bookmark-Tag-Input").val(c);
this.updateTagStates();a.shareLists.length&&$("#diigo-list").find("select").val(a.shareLists[0]);a.shareGroups.length&&$("#diigo-group").find("select").val(a.shareGroups[0])},updateLists:function(a){j=$("#diigo-list").find("select").empty().unbind().removeClass("processing");j.append(H.dom.buildOne("option",{value:0},["Add to an Outliner"]));j.append(H.dom.buildOne("option",{value:-1},[Array(20).join("-")]));$(H.dom.buildOne("option",{value:-2},["Create an Outliner..."])).appendTo(j);j.append(H.dom.buildOne("option",
{value:-1},[Array(20).join("-")]));O(l.outliners,function(c){a?j.append(H.dom.buildOne("option",{value:c.id},[c.title])):j.append(H.dom.buildOne("option",{value:c.id},[c.title+(l.bookmark.inList(c.id)?" (added)":"")]))});j.append(H.dom.buildOne("option",{value:-1},[Array(20).join("-")]));l.myBmLists.length&&(j.append(H.dom.buildOne("option",{value:-8},["Add to a List"])),j.append(H.dom.buildOne("option",{value:-1},[Array(20).join("-")])),O(l.myBmLists,function(c){a?j.append(H.dom.buildOne("option",
{value:c.id},[c.title])):j.append(H.dom.buildOne("option",{value:c.id},[c.title+(l.bookmark.inList(c.id)?" (added)":"")]))}));j.append(H.dom.buildOne("option",{value:-1},[Array(20).join("-")]));$(H.dom.buildOne("option",{value:-3},["Refresh"])).appendTo(j);j.change(function(){var c=j.val();-2==c?(!0===l.permissions.createOutliner?($("#diigo-list").hide(),$("#diigo-list-add").show(),$("#diigo-list-addInput").focus()):($("#diigo-list-add-tip").show(),$("#diigo-list").hide()),j.val(0)):-3==c&&($(this).addClass("processing"),
C.loadMyStuff("myGroups myBookmarkLists"),j.val(-1))});j.val(0).change()},updateGroups:function(a){var c=this,d=l.myGroups.filter(function(k){return 5>k.access_mode}),f=l.myGroups.filter(function(k){return 5<=k.access_mode}),h=$("#diigo-group").find("select").empty().unbind().removeClass("processing");0<f.length&&(h.append(H.dom.buildOne("option",{value:0},["Share to a Team"])),h.append(H.dom.buildOne("option",{value:-1},[Array(20).join("-")])),O(f,function(k){a?h.append(H.dom.buildOne("option",{value:k.name},
[k.displayName])):h.append(H.dom.buildOne("option",{value:k.name},[k.displayName+(l.bookmark.inGroup(k.name)?" (shared)":"")]))}),h.append(H.dom.buildOne("option",{value:-1},[Array(20).join("-")])));h.append(H.dom.buildOne("option",{value:0},["Share to a group"]));h.append(H.dom.buildOne("option",{value:-1},[Array(20).join("-")]));$(H.dom.buildOne("option",{value:-2},["Create a Group..."])).appendTo(h);h.append(H.dom.buildOne("option",{value:-1},[Array(20).join("-")]));O(d,function(k){a?h.append(H.dom.buildOne("option",
{value:k.name},[k.displayName])):h.append(H.dom.buildOne("option",{value:k.name},[k.displayName+(l.bookmark.inGroup(k.name)?" (shared)":"")]))});h.append(H.dom.buildOne("option",{value:-1},[Array(20).join("-")]));$(H.dom.buildOne("option",{value:-3},["Refresh"])).appendTo(h);h.change(function(){var k=h.val();-2==k?(A.openURL(A.urls.getCreateGroupURL()),h.val(-1)):-3==k?($(this).addClass("processing"),C.loadMyStuff("myGroups myBookmarkLists"),h.val(0)):-1!=k&&0!=k&&(c.afterGroupSelectionChange(),c.showGroupTags())});
h.val(0).change()},afterGroupSelectionChange:function(){var a="-1"!=$("#diigo-group").find("select").val()&&"0"!=$("#diigo-group").find("select").val();X("Diigo-Bookmark-checkShareExisting").showHide(a&&l.isAnnotated())},submitAndClose:function(a){a=!0;var c=$("#Diigo-Bookmark-Url-Input").val();$("#Diigo-Bookmark-Title-Input").val().match(/^\s*$/)&&(a=!1,$("#Diigo-Bookmark-Title").find(".diigo-alert-tip").show());this.isURL(c)&&!c.match(/^\s*$/)||1!=a||(a=!1,$("#Diigo-Bookmark-Url").find(".diigo-alert-tip").show());
if(a){this.syncData("form->data");a=l.bookmark.tags;0<a.length&&R.setUserData({tagsUsedLastTime:JSON.stringify(a.slice(0,8))});var d=function(){};$("#Diigo-Bookmark-uploadCache").find(".op-checkbox-container").hasClass("checked")&&function(f){d=function(){E("[DlgBookmark] bookmark saved. will upload cache");Ea.uploadCache({groups:f})}}(l.bookmark.toShareToGroups);C.saveBookmark(null,d,"showbar");A.ready=!0;this.hide();$("#Diigo-Bookmark-checkShareExisting").find(".op-checkbox-container").removeClass("checked")}},
saveThisLink:function(){var a={},c=!0,d=$("#Diigo-Bookmark-Url-Input").val();$("#Diigo-Bookmark-Title-Input").val().match(/^\s*$/)&&(c=!1,$("#Diigo-Bookmark-Title").find(".diigo-alert-tip").show());this.isURL(d)&&!d.match(/^\s*$/)||1!=c||(c=!1,$("#Diigo-Bookmark-Url").find(".diigo-alert-tip").show());c&&(a.url=$("#Diigo-Bookmark-Url-Input").val(),a.title=$("#Diigo-Bookmark-Title-Input").val(),a.tags=A.parseTags($("#Diigo-Bookmark-Tag-Input").val(),!0),a.mode=$("#Diigo-Bookmark-Privacy").find(".op-checkbox-container").hasClass("checked")?
2:0,a.unread=$("#Diigo-Bookmark-Unread").find(".op-checkbox-container").hasClass("checked"),a.description=$("#Diigo-Bookmark-Description-Input").val(),c=$("#diigo-list").find("select").val(),a.lists="-1"==c||"-2"==c||"0"==c?[]:[c],c=$("#diigo-group").find("select").val(),a.groups="-1"==c||"-2"==c||"0"==c?[]:[c],a.shareExistingAnnotations=!1,chrome.runtime.sendMessage({name:"saveThisLink",data:a}),this.hide(!0))},bookmarkLoaded:function(){var a=this;a.shown&&(a.syncData("data->form"),O(l.bookmark.tags,
function(c){a.toggleTag(c,!0)}))},refreshPremium:function(){var a=$("#Diigo-Bookmark-uploadCache"),c=a.next("label");Ia.hasCacheUpload()?(a.removeAttr("disabled"),c.attr("title","Upload a copy of the page")):(a.attr("disabled","disabled").attr("checked",!1),c.attr("title","Upload a copy of the page (Quota exceeded. Go premium to re-enable.)"))}},Na={j:null,floating:!1,container:null,init:function(){this.create();l.addEventListener("ic_add",this);l.addEventListener("ic_del",this);l.addEventListener("pc_add",
this);l.addEventListener("pc_del",this);l.addEventListener("ann_add",this);l.addEventListener("ann_del",this)},destroy:function(){},create:function(){var a=da(hb,{URL_DIIGO:"https://www.diigo.com"});this.container=$(l.launchMode.threeDForum?"#diigo-3dforum":"#diigolet-annotationSummary");a=this.j=$(a).appendTo(this.container);a.find("div.addComment").hide();l.launchMode.threeDForum||(a.find("span._inlineCommentsTitle").text("Sticky Notes"),a.find("a.add").eq(0).hide(),a.find("div.popOut").addClass("close"))},
onSignIn:function(){this.j.find("a._signIn").hide()},onSignOut:function(){},togglePanel:function(a,c){var d=$({inline:"#d3df-togglePanelInline",page:"#d3df-togglePanelPage"}[a]);a=$({inline:"#d3df-inlineCommentBox",page:"#d3df-pageCommentBox"}[a]);var f=!d.is(".collapsed");c=void 0!==c?c:!f;c!=f&&(d.toggleClass("collapsed",!c),a[c?"slideDown":"slideUp"]())},popOut:function(a){var c=this.j.find("div.popOut"),d=c.is(".popIn");c.toggleClass("popIn",!d);c.attr("title",d?"Pop out and pin":"Pop in");l.launchMode.threeDForum||
c.attr("title","close");c=this.j;if(d)c.appendTo(this.container).css({position:"static",left:"",top:"",width:""}).find("._dragHandle").css({cursor:""}),c[0].draggable.destroy();else{var f=a||c.offset();c.css({position:"absolute",left:f.left,top:f.top,width:260}).appendTo(document.body);$.browser.supportPositionFixed&&(a?c.css({position:"fixed"}):(a=bc.docScroll(),c.css({position:"fixed",left:f.left-a[0],top:f.top-a[1]})));new $.Draggable(c,{handle:"._dragHandle"});l.toggleSilent(!1)}this.floating=
!d;this.adjustSize()},showEditPageCommentBox:function(a){if(ua()){a=void 0!==a?a:!0;$("#d3df-sidebar div.addComment")[a?"show":"hide"]();this.togglePanel("page",!0);X("diigolet-sb-txtpc").val("");var c=X("diigolet-sb-selpc").empty();c.append('<option value="_public">Public</option>');c.append('<option value="_private">Private</option>');O(l.myGroups,function(d){c.append(H.dom.buildOne("option",{value:d.name},[d.displayName]))});c.val("_private")}else C.signIn()},refresh:function(){this.refreshComments()},
refreshComments:function(){this.refreshPageComments();this.refreshInlineComments()},refreshPageComments:function(){var a=this,c="";O(l.pageComments,function(d){c+=da('<li class="bgColor3"><a class="avatar" href="#{DIIGO_URL}/user/#{USER}" title="#{USER}" target="_blank"><img alt="#{USER}" src="https://resources.diigo.com/resources_mana/user_avatar?user_name=#{USER}&amp;size=48"\n              /></a><span class="commentInfo color1"><a href="#{DIIGO_URL}/user/#{USER}" target="_blank" class="color1">#{USER} </a\n                >#{DATE}\n              </span><p class="labelList">#{LABELS_HTML}</p><p class="commentBody color2">#{CONTENT}</p></li>\n',
{USER:d.user,CONTENT:H.content2Html(d.content),DIIGO_URL:"https://www.diigo.com",DATE:d.datetime,LABELS_HTML:a._labelsHtml(d)})});$("#d3df-pageCommentList").html(c||'<li class="bgColor3 color1"><div class="noComments">No comments yet</div></li>\n');this.j.find("._pageCommentCount").text(l.pageComments.length+"");this.adjustSize()},refreshInlineComments:function(){S.sort();var a="",c,d,f=0;O(l.annotations,function(k){if(0==k.type||2==k.type||1==k.type)d="",O(k.comments,function(m){f++;d+=da('<li class="bgColor3"><a class="avatar" href="#{DIIGO_URL}/user/#{USER}" title="#{USER}" target="_blank"><img alt="#{USER}" src="https://resources.diigo.com/resources_mana/user_avatar?user_name=#{USER}&amp;size=48"\n                /></a><span class="commentInfo color1"><a href="#{DIIGO_URL}/user/#{USER}" target="_blank" class="color1">#{USER} </a\n                  >#{DATE}\n                </span><p class="commentBody"><a class="color2" href="#" onclick="diigolet.devil(\'Sidebar\').jumpToHighlight(\'#{HIGHLIGHT_ID}\');return false;">#{CONTENT}</a\n                  ></p></li>\n',
{HIGHLIGHT_ID:k.id,USER:m.user,CONTENT:H.content2Html(m.content),DIIGO_URL:"https://www.diigo.com",DATE:m.datetime})}),c=da('<li class="highlight"><a class="highlight headingColor2 #{FLOAT_NOTE_CLASS}" href="#" onclick="diigolet.devil(\'Sidebar\').jumpToHighlight(\'#{ID}\');return false;"><span class="jumpTo color1" style="float: right">...Jump to</span><em style="font-style: italic; line-height: 24px; width: 80%" class="color2">#{CONTENT}</em\n              ></a><ul class="comments bgColor1">\n              #{COMMENTS}\n</ul></li>\n',
{ID:k.id,FLOAT_NOTE_CLASS:2==k.type?"floatNote":"",CONTENT:H.content2Html(k.prettyTxt||Za.html2txt_pretty(k.content)),COMMENTS:d}),a+=c});var h='<li class="bgColor3 color1"><div class="noComments">No comments yet</div></li>\n';l.launchMode.threeDForum||(h=h.replace("No comments","No sticky notes"));$("#d3df-inlineCommentBox").html(a||h);this.j.find("._inlineCommentCount").text(f+"");this.adjustSize()},adjustSize:function(){$("#d3df-inlineCommentBox,#d3df-pageCommentList").each(function(a){a=$(this);
a.height("").height(180<a.height()?180:"")})},addCommentSubmit:function(){var a=X("diigolet-sb-txtpc").val();if(0>=a.length||500<a.length)alert("Comment length should < 500 characters");else{var c=X("diigolet-sb-selpc").val(),d,f;"_private"==c?d=2:"_public"==c?d=0:f=c;a={urlId:l.bookmark.urlId,mode:d,content:a};f&&(a.justForGroups=!0,a.groups=[f]);C.addPageComment(a);this.showEditPageCommentBox(!1)}},jumpToHighlight:function(a){l.toggleSilent(!1);(a=S.find(a))&&a.jumpHere(!0,!1)},onpc_del:function(a,
c){var d=this;setTimeout(function(){d.refreshPageComments()},100)},onpc_add:function(a,c){this.refreshPageComments()},onic_add:function(a,c){this.refreshInlineComments()},onic_del:function(a,c){var d=this;setTimeout(function(){d.refreshInlineComments()},100)},onann_add:function(a,c){this.refreshInlineComments()},onann_changeMode:function(a){this.refreshInlineComments()},onann_del:function(a,c){var d=this;setTimeout(function(){d.refreshInlineComments()},100)}};M(Na,{filterMode:"_all",_labelsHtml:function(a){var c=
a.annotationId?"ic":"pc",d=this.filterMode,f="",h=a.canDelete()?'<a href="javascript:void(0)" class="del" onclick="#{ONCLICK};"><img title="Delete" src="https://www.diigo.com/client/ietoolbar/spacer.gif" style="width:12px;height:12px;cursor:pointer" alt="" /></a>':"";!a.isPublic()||"_all"!=d&&"_public"!=d||a.user!=l.user||(f+='<label class="_public"><span>Public</span>DEL</label>'.replace("DEL",da(h,{ONCLICK:da("diigolet.handle(event, 'sb_del_#{0}', '#{1}')",[c,a.id])})));!a.isPrivate()||"_all"!=
d&&"_private"!=d||(f+='<label class="_private"><span>Private</span>DEL</label>'.replace("DEL",da(h,{ONCLICK:da("diigolet.handle(event, 'sb_del_#{0}', '#{1}')",[c,a.id])})));O(a.groups,function(k){if(d==k.name||"_all"==d)f+=da('<label class="_#{GROUP_NAME}"><a href="#{GROUP_URL}" class="link">#{GROUP_DISPLAY_NAME}</a>#{DEL}</label>',{GROUP_NAME:k.name,GROUP_DISPLAY_NAME:k.displayName,GROUP_URL:A.urls.getGroupURL(k.name),DEL:da(h,{ONCLICK:da("diigolet.handle(event, 'sb_del_#{0}', '#{1}', '#{2}')",[c,
a.id,k.name])})})});return f},onclick_del_pc:function(a,c,d){Ca.del(c,d)}});var ka={j:null,direction:"normal",shown:!1,init:function(){this.j||this.create()},create:function(){this.j=$(ib).css({position:"absolute"}).hide().appendTo(Fa.body).hide();var a=$("#diigolet-csm-highlight"),c=$("#diigolet-csm-highlightAndComment");R.get("prefs.lastUsedColor",function(m){$("#diigolet-csm").addClass(m)});a.click(function(m){""!=window.getSelection().toString()&&T.send({name:"initialData"},function(q){0==l.generated&&
(R.updateCache(q.preloadedPrefs),l.reset(q),l.signedIn&&q.shoudLoadMyStuff&&C.loadMyStuff(),q.loadBookmarkResult?(E("[bookmark info already loaded]",q.loadBookmarkResult),C.cb_bm_loadBookmark_success(q.loadBookmarkResult,"prepareCtx")):q.shouldLoadBookmarkByMyself&&l.signedIn&&C.loadBookmark());if(""==q.globalData.user)l.notify('Please <a href="#" title="Sign in into Diigo.com" id="signIn">sign in</a> first.',1E3);else return R.get("prefs.lastUsedColor",function(n){P.shown?A.handle(m,"highlight",
"normal",n):A.handle(m,"highlight","small",n)}),!1})});this.j.find(".diigolet-csm-coloritem").click(function(m){var q=$(this).data("color"),n=$(this).parent().parent().attr("id");T.send({name:"initialData"},function(t){0==l.generated&&(R.updateCache(t.preloadedPrefs),l.reset(t),l.signedIn&&t.shoudLoadMyStuff&&C.loadMyStuff(),t.loadBookmarkResult?(E("[bookmark info already loaded]",t.loadBookmarkResult),C.cb_bm_loadBookmark_success(t.loadBookmarkResult,"prepareCtx")):t.shouldLoadBookmarkByMyself&&
l.signedIn&&C.loadBookmark());if(""==t.globalData.user)l.notify('Please <a href="#" title="Sign in into Diigo.com" id="signIn">sign in</a> first.',1E3);else return P.shown?"diigolet-csm-highlight-wrapper"==n?A.handle(m,"highlight","normal",q):"diigolet-csm-highlightAndComment-wrapper"==n&&A.handle(m,"highlightAndComment","normal",q):"diigolet-csm-highlight-wrapper"==n?A.handle(m,"highlight","small",q):"diigolet-csm-highlightAndComment-wrapper"==n&&A.handle(m,"highlightAndComment","small",q),!1})});
c.click(function(m){""!=window.getSelection().toString()&&T.send({name:"initialData"},function(q){0==l.generated&&(R.updateCache(q.preloadedPrefs),l.reset(q),l.signedIn&&q.shoudLoadMyStuff&&C.loadMyStuff(),q.loadBookmarkResult?(E("[bookmark info already loaded]",q.loadBookmarkResult),C.cb_bm_loadBookmark_success(q.loadBookmarkResult,"prepareCtx")):q.shouldLoadBookmarkByMyself&&l.signedIn&&C.loadBookmark());if(""==q.globalData.user)l.notify('Please <a href="#" title="Sign in into Diigo.com" id="signIn">sign in</a> first.',
1E3);else return R.get("prefs.lastUsedColor",function(n){P.shown?A.handle(m,"highlightAndComment","normal",n):A.handle(m,"highlightAndComment","small",n);return!1}),!1})});var d,f,h,k;this.j.find(".csm-btn").hover(function(m){var q=$(this).find(".csm-action");m=q.attr("id");"diigolet-csm-highlight"==m?(null!=h&&clearTimeout(h),d=setTimeout(function(){q.parent().find(".diigolet-csm-color").animate({height:21},200);q.parent().find(".diigolet-csm-coloritem").animate({height:7},200)},500)):"diigolet-csm-highlightAndComment"==
m&&(null!=k&&clearTimeout(k),f=setTimeout(function(){q.parent().find(".diigolet-csm-color").animate({height:21},200);q.parent().find(".diigolet-csm-coloritem").animate({height:7},200)},500));q.addClass("editing")},function(m){var q=$(this).find(".csm-action");m=q.attr("id");"diigolet-csm-highlight"==m?(null!=d&&clearTimeout(d),h=setTimeout(function(){q.parent().find(".diigolet-csm-color").animate({height:0},200);q.parent().find(".diigolet-csm-coloritem").animate({height:0},200);q.removeClass("editing")},
500)):"diigolet-csm-highlightAndComment"==m&&(null!=f&&clearTimeout(f),k=setTimeout(function(){q.parent().find(".diigolet-csm-color").animate({height:0},200);q.parent().find(".diigolet-csm-coloritem").animate({height:0},200);q.removeClass("editing")},350))});$("#diigolet-csm .diigolet-csm-color").mousedown(function(m){m.preventDefault();m.stopPropagation()});$("#diigolet-csm-search").click(function(m){m=window.getSelection().toString();A.Messenger.send({name:"searchDiigoGoogle",details:{text:m}});
return!1})},changeColor:function(a){document.getElementById("diigolet-csm").className=a},show:function(a){var c=this;document.createRange();(new Date).getTime();Math.random().toString().substr(2);0<window.getSelection().toString().length&&(this.j.show().css({left:a.pageX+3,top:a.pageY+3}).show(),chrome.storage.local.get(null,function(d){!0===d.researchMode&&!1===l.bookmark.saved?c.j.addClass("diigo-researchMode"):c.j.removeClass("diigo-researchMode")}),this.shown=!0)},hide:function(){this.j.hide();
$("#diigolet-csm .diigolet-csm-color").animate({height:0},200);$("#diigolet-csm .diigolet-csm-coloritem").animate({height:0},200);this.shown=!1}},ea={j:null,ann:null,p:null,tempAnnId:null,showDelay:350,showTimer:null,hideDelay:350,hideTimer:null,shown:!1,cancelShow:function(){clearTimeout(this.showTimer);this.showTimer=null},cancelHide:function(){clearTimeout(this.hideTimer);this.hideTimer=null},aboutToShow:function(){return this.shown||this.showTimer},aboutToHide:function(){return!this.shown||this.hideTimer},
scheduleShow:function(a,c){var d=this,f=$(a.target).offset(),h=$(a.target).width(),k={pageX:a.pageX,pageY:a.pageY,offsetTop:f.top,offsetLeft:f.left,width:h};d.cancelHide();d.cancelShow();d.showTimer=setTimeout(function(){d.show(k,c)},d.showDelay)},scheduleHide:function(){var a=this;a.cancelHide();a.cancelShow();a.hideTimer=setTimeout(function(){a.hide()},a.hideDelay)},init:function(){var a=this;a.create();setTimeout(function(){a.j.bind("mouseleave",function(){a.scheduleHide();a.p&&(a.p.scheduleHide(),
a.p.scheduleToggleEdit(!1))}).bind("mousemove",function(){a.cancelHide();a.p&&(a.p.cancelHide(),a.p.cancelToggleEdit())}).bind("mouseenter",function(){a.cancelHide();a.p&&(a.p.cancelHide(),a.p.cancelToggleEdit())})},13);X("diigolet-annMenu-add").click(function(c){if(ua())return K.show_(c.pageX,c.pageY,a.ann,"add"),c.preventDefault(),!1});X("diigolet-annMenu-share").on("click",function(c){cc.show(a.ann,c.pageX,c.pageY);a.hide()});X("diigolet-annMenu-My").click(function(c){A.openURL(A.urls.getUserBookmarksPageURL());
return!1});$("#diigolet-annMenu-color").on("click",function(c){c.preventDefault();$("#diigolet-annMenu-colorPicker").toggle();return!1});$("#diigolet-annMenu-more").on("click",function(c){c.preventDefault();$("#diigolet-annMenu-moreThings").toggle();return!1});$("#diigolet-context-yellow,#diigolet-context-blue,#diigolet-context-green,#diigolet-context-pink").click(function(c){c=$(this).attr("color");a.ann.extra&&"undefined"!=a.ann.extra?a.ann.extra.color=c:a.ann.extra={color:c};C.updateExtra(a.ann);
a.ann.paint();var d="id_"+a.ann.id;1<$("."+d).length?(d=$("."+d)[0],$(d).scrollmarker()):$("."+d).scrollmarker();fa.editItem("changeColor",a.ann);$(".ann-colorItem").removeClass("colorchecked");X("diigolet-annMenu-currentColor").removeClass("yellow blue green pink").addClass(c);$("#diigolet-context-"+c).addClass("colorchecked");return!1});X("diigolet-annMenu-del").click(function(c){var d=a.ann;d.onlyInGroup||d.del();O(ta(d.groups,function(f){return f.name}),function(f){d.del(f)});a.hide();c.preventDefault();
return!1});X("diigolet-annMenu-copy-highlights").click(function(c){A.Messenger.send({name:"copy",details:{html:a.ann.content}});a.hide();c.preventDefault();return!1})},create:function(){this.j=$(jb).css({position:"absolute"}).hide().appendTo(Fa.body).hide()},show:function(a,c){c.id!=this.tempAnnId&&(this.cancelHide(),this.cancelShow(),ka.shown&&ka.hide(),this.ann=c,this.buildMenu(),this.j.hasClass("onlyMy")?this.j.css({left:curcorX-55,top:curcorY-35}).show():this.j.css({left:curcorX-31,top:curcorY-
35}).show(),this.shown=!0,this.tempAnnId=c.id)},hide:function(){this.cancelHide();this.cancelShow();this.shown=!1;this.j.hide();$("#diigolet-annMenu-colorPicker").hide();$("#diigolet-annMenu-moreThings").hide();this.tempAnnId=null},buildMenu:function(){var a=this.ann;X("diigolet-annMenu-del").showHide(a.canDelete());a.user==l.user?($("._onlyMy").show(),this.j.addClass("onlyMy")):($("._onlyMy").hide(),this.j.removeClass("onlyMy"));$.each(l.defaultColors,function(c,d){X("diigolet-context-"+d).toggleClass("colorchecked",
!1)});a.extra&&a.extra.color&&0<a.extra.color.length?(X("diigolet-annMenu-currentColor").removeClass("yellow blue green pink").addClass(a.extra.color),X("diigolet-context-"+a.extra.color).toggleClass("colorchecked",!0)):X("diigolet-context-yellow").toggleClass("colorchecked",!0);X("diigolet-annMenu-tip-before").show();X("diigolet-annMenu-tip").show();X("diigolet-annMenu-tip").html(this.tipMsg(a))},tipMsg:function(a){var c="#{MODE} #{WHAT} by #{REALNAME}",d={REALNAME:a.realName.trim()?a.realName:a.user};
d.WHAT=a.type==A.ANNOTATION_TYPE_FLOATNOTE?"floating sticky note":"highlight";a.isPublic()?d.MODE="Public":a.isPrivate()?d.MODE="Personal":d.MODE="Group";a.inAnyGroups()&&(c+=", shared to group #{GROUPS}",a=Ab(ta(a.groups,function(f){return f.displayName})),d.GROUPS=1==a.length?a[0]:a.slice(0,a.length-1).join(", ")+" and "+a[a.length-1]);return da(c,d)}},Ga={j:null,ann:null,showDelay:200,showTimer:null,hideDelay:300,hideTimer:null,editDelay:350,editTimer:null,shown:!1,cancelShow:function(){clearTimeout(this.showTimer);
this.showTimer=null},cancelHide:function(){clearTimeout(this.hideTimer);this.hideTimer=null},aboutToShow:function(){return this.shown||this.showTimer},aboutToHide:function(){return!this.shown||this.hideTimer},scheduleShow:function(a,c){var d=this,f={screenX:a.screenX,screenY:a.screenY};d.cancelHide();d.cancelShow();d.showTimer=setTimeout(function(){d.show(f,c)},d.showDelay)},scheduleHide:function(){var a=this;a.cancelHide();a.cancelShow();a.hideTimer=setTimeout(function(){a.hide()},a.hideDelay)},
hideCallback:function(){this.shown=!1;this.ann=null;ea.aboutToShow()&&ea.scheduleHide()},showMenu:function(a,c,d){c.cancelHide();c.cancelToggleEdit();if(c.ann)if(0==c.ann.comments.length)try{var f=ea.ann!=c.ann;ea.p=c;f||!ea.shown||d?ea.scheduleShow(a,c.ann):ea.cancelHide()}catch(h){throw h;}else f=K.ann!=c.ann,K.isEditing()||(!f&&K.shown||d?K.cancelHide():K.scheduleShow(a,c.ann))},reset:function(a){var c=this;this.removeEditMode();this.hide();this.ann=a;this.j=$("div."+Z.HIGHLIGHT_ID_CLASS+a.id).bind("mouseout",
function(){c.scheduleHide()}).bind("click",function(d){c.showMenu(d,c,!0)}).bind("mousemove",function(d){c.showMenu(d,c,!1)})},show:function(a,c){ka.shown&&ka.hide();0>=c.comments.length&&(0==c.type?this.j.css({top:-23}):(a=c.getPageOffset(),this.j.css({left:a.left,top:a.top})));this.j.show();this.shown=!0},scheduleToggleEdit:function(a){try{var c=this;null==this.ann||0>=this.ann.comments.length||(a?(c.j=$("div."+Z.HIGHLIGHT_ID_CLASS+c.ann.id),c.j.toggleClass("edit",!0)):(c.cancelToggleEdit(),c.editTimer=
setTimeout(function(){c.removeEditMode()},c.editDelay)))}catch(d){}},removeEditMode:function(){this.ann&&0<this.ann.comments.length&&(this.j.toggleClass("edit",!1),this.ann=null)},cancelToggleEdit:function(){clearTimeout(this.editTimer);this.editTimer=null},hide:function(){this.cancelHide();this.cancelShow();this.shown=!1}},vb={j:null,k:null,v:null,init:function(){this.j||this.create()},create:function(){this.j=$('<div id="diigo-video-capture"><div id="diigo-video-capture-container"><div id="diigo-video-capture-logo"></div>Capture</div></div>').appendTo("body").hide();
this.k=$('<div id="diigo-video-capture-wrapper"><div id="diigo-video-capture-wrapper-tip">Drag to outliner or <span id="diigo-video-capture-upload">Upload</span></div><div id="diigo-video-capture-wrapper-close">Close</div></div>').appendTo("body");this.bindEvents()},hide:function(){this.k&&this.v[0]&&(this.k.find("img").remove(),this.k.removeClass("show"),this.v[0].play())},isSupported:function(a){return/youtube|aol|yahoo|myspace|vimeo|dailymotion|56\.com|youku|tudou|stupidvideos|metacafe/.test(a.toLowerCase())?
!0:!1},showView:function(a,c){var d=this;d.k.find("#diigo-video-capture-loading").remove();var f=d.v.offset().left,h=d.v.offset().top,k=d.v.width(),m=d.v.height();d.k.css({left:f,top:h,width:k,height:m});if("loading"==a)$('<div id="diigo-video-capture-loading">Processing ...</div>').appendTo(d.k),d.k.addClass("show"),d.k.find("#diigo-video-capture-wrapper-tip").hide();else if("done"==a){var q=$('<img class="diigo-video-capture-temp-img" />').css({left:0,top:0,width:d.v.width()});q.appendTo(d.k);q.on("load",
function(){$(this).addClass("animation");var n=Math.floor(.8*k),t=Math.floor((k-n)/2);setTimeout(function(){q.css({left:t,top:20,width:n,opacity:1});d.k.addClass("show");d.k.find("#diigo-video-capture-wrapper-tip").show()},0)});q.attr("src",c)}},bindEvents:function(){var a=this;$(document).on("mouseenter","video",function(){a.v||(a.v=$(this));var c=a.v.offset().left,d=a.v.offset().top;a.v.width();R.get("prefs.showVideoCapture",function(f){"true"===f&&a.j.css({left:c+5+"px",top:d+5+"px"}).show()})}).on("mouseleave",
"video",function(c){c.relatedTarget&&"diigo-video-capture"==c.relatedTarget.id||a.j.hide()});a.k.find("#diigo-video-capture-wrapper-close").on("click",function(){a.k.find("img").remove();a.k.removeClass("show").css("top","-1000px");a.v[0].play()});a.k.find("#diigo-video-capture-upload").on("click",function(){chrome.runtime.sendMessage({name:"uploadImageToDiigo",src:{srcUrl:a.k.find("img").attr("src")},type:"attach"});a.hide()});a.j.on("click",function(){a.v[0].pause();try{var c=document.createElement("canvas"),
d=c.getContext("2d");c.width=a.v.width();c.height=a.v.height();d.drawImage(a.v[0],0,0,c.width,c.height);var f=c.toDataURL();a.showView("done",f)}catch(k){console.log(k);c=document.createElement("canvas");d=c.getContext("2d");c.width=a.v.width();c.height=a.v.height();var h=document.createElement("video");h.width=a.v.width();h.height=a.v.height();h.crossOrigin="Anonymous";h.src=a.v[0].currentSrc;h.currentTime=a.v[0].currentTime;a.showView("loading");h.addEventListener("canplay",function(){d.drawImage(h,
0,0,c.width,c.height);var m=c.toDataURL();a.showView("done",m);h=null})}})}},dc={init:function(){this.buildButton();this.bindEvent()},bindEvent:function(){var a=this,c=document.getElementById("annotations");c&&(new MutationObserver(function(d){d.forEach(function(f){if("kp-notebook-annotations-pane"==f.target.id)a.onBookChange()})})).observe(c,{attributes:!0,subtree:!0,childList:!0,characterData:!0})},onBookChange:function(){console.log("Book changed!");this.buildButton()},buildButton:function(){var a=
this,c=$("#kp-notebook-highlights-count").parent(),d=$('<div id="diigo-import-btn">Import to Diigo</div>');0==c.find("#diigo-import-btn").length&&(c.append(d),d.on("click",function(){if(l.permissions.importKindle){var f=a.getBookInfo();console.log(f);Q.init();Q.notifyWait("Importing your book ...");chrome.runtime.sendMessage({name:"importKindle",data:f})}else ha.init(),ha.show("kindle")}))},getBookInfo:function(){var a=$("h3.kp-notebook-metadata").text(),c=$("h3.kp-notebook-metadata").next(".kp-notebook-metadata").text(),
d=[];$("#kp-notebook-annotations>div.a-row.a-spacing-base").each(function(){var f=$(this),h={},k=f.find("#annotationHighlightHeader").text().toLowerCase();h.content=f.find("#highlight").text();h.note=f.find("#note").text();h.content&&(k&&k.match(/(.*)\s(highlight|surlignement)/)&&k.match(/(page|location|emplacement):\s(.*)/)?(h.color=k.match(/(.*)\s(highlight|surlignement)/)[1],h.page=k.match(/page:\s(.*)/)?k.match(/page:\s(.*)/)[1]:"",h.location=k.match(/location:\s(.*)/)?k.match(/location:\s(.*)/)[1]:
"",h.emplacement=k.match(/emplacement:\s(.*)/)?k.match(/emplacement:\s(.*)/)[1]:""):(h.color="yellow",h.location="0"),d.push(h))});return{title:a,author:c,annotations:d}}},ec="screenshot qsavebookmark readlater qdeletebookmark ifbookmark getCtx saveImageToDiigo prepareCtx createList contextmenuHighlight SignedIn bookmarkLoaded share refreshBookmarkInfo googleSearchRecommend annotate showTutorial toggleOutlinerSidebar openOutliner closeOutliner showOutlinerIcon hideOutlinerIcon addAnnotation getRecommendedTags editItem".split(" ");
chrome.runtime.onMessage.addListener(function(a,c,d){if(l.chromeExtensionID==c.id||"run"==a.name){if(!a.fromTabId||l.chromeTabId!=a.fromTabId)A.Messenger.onMessage(a,d)}else if(-1!==$.inArray(a.name,ec))A.Messenger.onMessage(a,d)});var T=A.Messenger={noop:function(){},send:function(a,c){a.tabId=l.chromeTabId;chrome.runtime.sendMessage(a,c||this.noop)},onMessage:function(a,c){if("dataURL"!=a.name&&this.handlers[a.name])this.handlers[a.name](a,c)},handlers:{run:function(a,c){c=a.details.type;Lb()?"autoshow"!==
c&&chrome.runtime.sendMessage({name:"openPdf",url:window.location.href}):A.version!=a.details.version?(a=navigator.platform.match(/Mac/)?"\u2318?+ R":"F5",alert(chrome.i18n.getMessage("refreshAfterUpdate",[chrome.i18n.getMessage("extName"),a]))):A.ready&&"autoshow"!=c?P.shown?"stickynote"==c?(A.stickyNoteByContextMenu=!0,A.handlers.addStickyNote()):"highlight"!=c&&"qsave"!=c&&(P.hide(),l.toggleSilent(!0)):(P.show(),l.toggleSilent(!1),"stickynote"==c?(A.stickyNoteByContextMenu=!0,A.handlers.addStickyNote(!0)):
"highlight"==c&&A.handlers.highlight()):A.chromeRun(a.details,a.details.type)},signIn:function(a,c){a=a.details;try{var d=a.user;E("onSignIn",d||"username unknown","will loadMyStuff: ",!1);l.bookmark.loaded||C.loadBookmark();l.reset();l.user=d;l.signedIn=!0;Xa()}catch(f){}},signOut:function(a,c){Hb()},notifyError:function(a,c){0==a.code?Q.notifyAlert(chrome.i18n.getMessage("network_error"),{timeout:0}):500==a.code&&Q.notifyAlert(chrome.i18n.getMessage("server_error"),{timeout:0});T.send({name:"bookmarkChanged",
details:{saved:l.bookmark.saved}})},checkVersion:function(a,c){T.send({name:"initialData"},function(d){A.version!=d.version&&(d=navigator.platform.match(/Mac/)?"\u2318?+ R":"F5",alert(chrome.i18n.getMessage("refreshAfterUpdate",[chrome.i18n.getMessage("extName"),d])))})},saveBookmarkSuccess:function(a,c){c=l.bookmark;var d=a.ctx;c.title=d.title;c.tags=d.tags;c.mode=d.mode;c.unread=d.unread;c.description=d.description;c=d.tags;0<c.length&&R.setUserData({tagsUsedLastTime:JSON.stringify(c.slice(0,8))});
C.cb_bm_saveBookmark_success(a.data,"qsave",a.ctx.tabId);d.cache&&($("#diigolet-notice").css("opacity","0"),$("#diigolet-panel-panel").css("opacity","0"),Ob.uploadMHTML({mhtml_upload_url:a.data.mhtml_upload_url,link_id:a.data.link_id,tabid:a.ctx.tabId}),setTimeout(function(){Ea.uploadCache({groups:d.groups})},200))},copy:function(a,c){function d(h){var k=document.createElement("textarea");document.body.appendChild(k);k.value=h;k.select();document.execCommand("copy");document.body.removeChild(k)}function f(h){var k=
document.createElement(k);k.innerHTML=h;document.body.appendChild(k);h=window.getSelection();h.removeAllRanges();h.selectAllChildren(k);document.execCommand("copy");h.removeAllRanges();document.body.removeChild(k)}a=a.content;a.text?d(a.text):a.html&&f(a.html)},globalDataChanged:function(a,c){a=a.details.changes;M(l,a);a.myTags&&Fb();a.myGroups&&aa.updateGroups();a.myBmLists&&aa.updateLists();if(a.myContacts)Y.onMyContactsUpdate();if(a.permissions)Ia.onPrivilegeChange()},bookmarkLoaded:function(a,
c){l.bookmark.loaded||C.cb_bm_loadBookmark_success(a.details)},prepareCtx:function(a,c){T.send({name:"initialData"},function(d){R.updateCache(d.preloadedPrefs);l.reset(d);l.signedIn&&d.shoudLoadMyStuff&&C.loadMyStuff();d.loadBookmarkResult?(E("[bookmark info already loaded]",d.loadBookmarkResult),C.cb_bm_loadBookmark_success(d.loadBookmarkResult,"prepareCtx")):d.shouldLoadBookmarkByMyself&&l.signedIn&&C.loadBookmark()})},myStuffLoaded:function(a,c){C.cb_user_loadMyStuff_success(a.details)},twitterSignIn:function(a,
c){Y.tabs.twitter.onTwitterSignIn(a.details)},twitterSignOut:function(a,c){Y.tabs.twitter.onTwitterSignOut()},prefsChanged:function(a,c){R.updateCache(a.details)},uploadDidSucceed:function(a,c){Ea.uploadDidSucceed(a.details)},uploadDidFail:function(a,c){Ea.uploadDidFail(a.details)},example:function(a,c){Y.tabs.twitter.onTwitterSignIn(a.details)},screenshot:function(a,c){na.initSelectedCapture()},qsavebookmark:function(a,c){l.bookmark=va.fromDocument();C.saveBookmark(null,function(){},"qsave")},savebookmark:function(a,
c){A.Messenger.send({name:"updateBrowserActionIconToDoing"});c=a.data;l.bookmark.description=c.description;l.bookmark.mode=c.mode;l.bookmark.toShareToGroups=c.shareGroups;l.bookmark.toAddToBookmarkLists=c.shareLists;l.bookmark.toShareExistingAnnotations=c.shareAnnotations;l.bookmark.tags=c.tags;0<c.tags.length&&R.setUserData({tagsUsedLastTime:JSON.stringify(c.tags.slice(0,8))});l.bookmark.title=c.title;l.bookmark.url=c.url;l.bookmark.unread=c.unread;var d=function(){};a.cache&&function(f){d=function(){E("[DlgBookmark] bookmark saved. will upload cache");
Ea.uploadCache({groups:f})}}(l.bookmark.toShareToGroups);C.saveBookmark(null,d,"qsave")},readlater:function(a,c){ua()&&(a=a.ifUnread,l.bookmark?l.bookmark.unread=a?!1:!0:l.bookmark=va.readlater(),a=function(){},1==l.bookmark.unread?C.saveBookmark(null,a,"readlater"):C.saveBookmark(null,a))},annotate:function(){Qb.open()},toggleOutlinerSidebar:function(){pa.toggle()},openOutliner:function(){pa.open()},closeOutliner:function(){pa.close(!0)},showOutlinerIcon:function(){pa.showIcon()},hideOutlinerIcon:function(){pa.hideIcon()},
share:function(a,c){Oa(window.location.href)?T.send({name:"initialData"},function(d){Ba(d.extensionID);A.version!=d.version?(d=navigator.platform.match(/Mac/)?"\u2318?+ R":"F5",alert(chrome.i18n.getMessage("refreshAfterUpdate",[chrome.i18n.getMessage("extName"),d]))):(Q.init(),qa(),Y.init(),Y.show())}):alert(chrome.i18n.getMessage("alertUnsupportedPage"))},contextmenuHighlight:function(a,c){ua()&&T.send({name:"initialData"},function(d){0==l.generated&&(R.updateCache(d.preloadedPrefs),l.reset(d),l.signedIn&&
d.shoudLoadMyStuff&&C.loadMyStuff(),d.loadBookmarkResult?(E("[bookmark info already loaded]",d.loadBookmarkResult),C.cb_bm_loadBookmark_success(d.loadBookmarkResult,"prepareCtx")):d.shouldLoadBookmarkByMyself&&l.signedIn&&C.loadBookmark());if(""==d.globalData.user)l.notify('Please <a href="#" title="Sign in into Diigo.com" id="signIn">sign in</a> first.',1E3);else return A.handlers.highlight(),!1})},contextmenuStickynote:function(a,c){ua()&&A.handlers.addStickyNote()},refreshBookmarkInfo:function(a,
c){T.send({name:"initialData"},function(d){l.generated=!1;R.get("prefs.autoload",function(f){"true"==f?C.cb_bm_loadBookmark_success(d.loadBookmarkResult,"showbar"):C.cb_bm_loadBookmark_success(d.loadBookmarkResult);setTimeout(function(){l.bookmark.saved||(l.bookmark.title=document.title?document.title:window.location.href)},100);0<$("#diigolet-panel-panel").length&&(P.updateUI(),aa.hide(),aa.syncData("data->form"));0<$("#diigo-orphanHighlight").length&&($("#diigo-orphanHighlight").remove(),Rb.init())})})},
refreshBookmark:function(){window.Ctx=l;T.send({name:"initialData"},function(a){l.generated=!1;l.bookmark.saved?(C.cb_bm_loadBookmark_success(a.loadBookmarkResult,"showbar"),l.bookmark.saved||(l.bookmark.title=document.title?document.title:window.location.href),0<$("#diigolet-panel-panel").length&&(P.updateUI(),aa.syncData("data->form")),0<$("#diigo-orphanHighlight").length&&($("#diigo-orphanHighlight").remove(),Rb.init())):A.run(a,"autoshow")})},researchModeWin:function(){researchModeWin.show()},
googleSearchRecommend:function(a,c){a=a.googleSearchKeyWord;E(a);void 0!=a&&(/\+/.test(a)?(a=a.split("+"),5<a.length?l.googleSearchSentence=a.join(" "):l.keywords=a):/\s/.test(a)?(a=a.split(" "),5<a.length?l.googleSearchSentence=a.join(" "):l.keywords=a):l.keywords.push(a),E(l.keywords))},createList:function(a,c){C.createList(a.data)},refreshOutliner:function(a,c){chrome.runtime.sendMessage({name:"initialData"},function(d){l.myBmLists=d.globalData.myBmLists;l.outliners=d.globalData.outliners})},refreshMyStuff:function(a,
c){C.loadMyStuff("myGroups myBookmarkLists")},loadGroupTagsDictionary:function(a,c){C.loadGroupTagsDictionary([a.groupName])},makeSnapshot:function(a,c){Ea.makeSnapshot()},showWindow:function(a,c){if(!Oa(window.location.href))alert(chrome.i18n.getMessage("alertUnsupportedPage"));else if(ua()){if("data"in a)var d=null==a.data.linkTitle?A.templinkTitle:a.data.linkTitle,f=a.data.url;0==$("#diigolet-panel-panel").length?(Q.init(),qa(),T.send({name:"initialData"},function(h){A.version!=h.version?(h=navigator.platform.match(/Mac/)?
"\u2318?+ R":"F5",alert(chrome.i18n.getMessage("refreshAfterUpdate",[chrome.i18n.getMessage("extName"),h]))):A.version==h.version&&(Ba(h.extensionID),R.updateCache(h.preloadedPrefs),Ea.makeSnapshot(),qa(),O([P,aa,K,ka,ea,Y],function(k){k.init()}),P.show(),P.hide(),Da.show(d,f))})):Da.show(d,f)}},qdeletebookmark:function(a,c){if(!l.isAnnotated()||confirm("Removing this as a bookmark will also remove your annotations on this page. Do you want to continue?"))C.deleteBookmark(l.bookmark),aa.hide(),P.hide()},
saveImageToDiigo:function(a,c){if(void 0!==a.data)if(!Oa(window.location.href))alert(chrome.i18n.getMessage("alertUnsupportedPage"));else if("undefined"!==typeof l.permissions.imagePermission&&!l.permissions.imagePermission.imagePermission)ha.init(),ha.show("image");else if(ua()){c=a.data;var d=l.bookmark.title?l.bookmark.title:document.title,f=l.bookmark.url?l.bookmark.url:window.location.href,h=[],k=l.bookmark.title?l.bookmark.title:document.title,m=a.dtype;if("tag"==a.type)na.showSavePupop("image",
c,m);else if("attach"==a.type||"outliner"==a.type){var q={dataURL:c,title:d,tags:h,mode:2,src_url:f,src_title:k,single_item:!1};a.image_src&&(q.image_src=a.image_src);var n="outliner"==a.type?"outliner":"image";chrome.storage.local.get(null,function(t){!0===t.researchMode&&!1===l.bookmark.saved?C.uploadImage(q,n,!1,f,{},m,"",!0,t.researchModeData):C.uploadImage(q,n,!1,f,{},m,"",!0);Ba(chrome.runtime.id);qa();"outliner"!=a.type&&(Q.init(),Q.notifyWait(chrome.i18n.getMessage("uploadimage_uploading")))})}}},
showTutorial:function(){fc.show()},ifbookmark:function(a,c){T.send({name:"initialData"},function(d){console.log("initial data",d);R.updateCache(d.preloadedPrefs);1!=l.generated&&(l.reset(d),l.signedIn&&d.shoudLoadMyStuff&&C.loadMyStuff(),d.loadBookmarkResult?(E("[bookmark info already loaded]",d.loadBookmarkResult),C.cb_bm_loadBookmark_success(d.loadBookmarkResult)):d.shouldLoadBookmarkByMyself&&l.signedIn&&C.loadBookmark());chrome.runtime.sendMessage({name:"isSaved",data:{saved:l.bookmark.saved,
unread:l.bookmark.unread}});var f=l.bookmark,h=window.getSelection().toString();R.getUserData("tagsUsedLastTime",function(k){k=k?JSON.parse(k):[];chrome.runtime.sendMessage({name:"sendCtx",data:{generated:l.generated,bm:f,lists:l.myBmLists,outliners:l.outliners,groups:l.myGroups,mytag:l.myTags,myTagsWithCount:l.myTagsWithCount,permissions:l.permissions,selection:h,lastUsedTags:k,isAnnotated:0<l.annotations.length}})})});return!0},getCtx:function(a,c){var d=l.bookmark,f=window.getSelection().toString();
R.getUserData("tagsUsedLastTime",function(h){h=h?JSON.parse(h):[];chrome.runtime.sendMessage({name:"sendCtx",data:{generated:l.generated,bm:d,lists:l.myBmLists,groups:l.myGroups,outliners:l.outliners,mytag:l.myTags,myTagsWithCount:l.myTagsWithCount,permissions:l.permissions,selection:f,lastUsedTags:h,isAnnotated:0<l.annotations.length}})})},getRecommendedTags:function(a,c){l.recommendedTagsLoaded?chrome.runtime.sendMessage({name:"sendRetags",data:l.recommendedTags}):(a=l.bookmark,C.loadRecommendedTags(a.url,
a.getTitle(),function(){chrome.runtime.sendMessage({name:"sendRetags",data:l.recommendedTags})}))},getGroupTags:function(a,c){var d=a.groupName;l.groupTagsDict[d]?chrome.runtime.sendMessage({name:"sendGtags",data:l.groupTagsDict[d]}):C.loadGroupTagsDictionary([d],function(){chrome.runtime.sendMessage({name:"sendGtags",data:l.groupTagsDict[d]})})},redirect:function(a,c){window.location.href=a.url},isOutlinerSidebarOpened:function(a,c){c({opened:pa.opened,outlinerId:pa.outlinerId})},kindleImportSuccess:function(a,
c){Q.notifyInfo('Import <b>"'+a.title+'"</b> successfully!')},kindleImportFailed:function(a,c){Q.notifyAlert('Import <b>"'+a.title+'"</b> failed!')},updateNoticeAndToolboar:function(a){a&&a.status&&("hidden"==a.status?($("#diigolet-notice").css("opacity","0"),$("#diigolet-panel-panel").css("opacity","0")):($("#diigolet-notice").css("opacity","1"),$("#diigolet-panel-panel").css("opacity","1")))},addAnnotation:function(a){a.annotation&&(fa&&fa.j||fa.init(),fa.add(a.annotation))},saveMHTMLSuccess:function(a){Ob.uploadDidSucceed(a.result)},
editItem:function(a){a.annotation&&fa&&fa.j&&("remove"==a.cmd||"changeColor"==a.cmd?fa.editItem(a.cmd,a.annotation):fa.editItem(a.cmd,null,a.annotation))},showMHTMLinfo:function(){Ia.hasCacheUpload()||(ha.init(),ha.show("acache"))},getMhtml:function(a){}}},R={cache:{},updateCache:function(a){var c=this;O(a,function(d,f){c.cache[f]=d})},getFromCache:function(a,c){a=this.cache[a];"b"==c?a="true"==a:"n"==c&&(a=Number(a));return a},get:function(a,c){T.send({name:"getPrefs",details:{keys:a}},c)},set:function(a,
c){T.send({name:"setPrefs",details:{data:a}},c)},getUserData:function(a,c){T.send({name:"getUserData",details:{keys:a}},c)},setUserData:function(a,c){T.send({name:"setUserData",details:{data:a}},c)}};R.get("prefs.autoloadBookmarkStatus",function(a){"true"==a?(l.autoLoad=!0,T.send({name:"initialData"},function(c){R.updateCache(c.preloadedPrefs);l.reset(c);l.signedIn&&c.shoudLoadMyStuff&&C.loadMyStuff();c.loadBookmarkResult?(E("[bookmark info already loaded]",c.loadBookmarkResult),C.cb_bm_loadBookmark_success(c.loadBookmarkResult,
"prepareCtx")):c.shouldLoadBookmarkByMyself&&l.signedIn&&C.loadBookmark()})):T.send({name:"initialData"},function(c){l.user=c.globalData.user;l.realName=c.globalData.realName})});T.send({name:"getLastFocusedWindow"});R.get("prefs.autoImageClipper",function(a){"maps.google.com"!=window.location.hostname&&"true"==a&&Oa(window.location.href)&&(Q.init(),Ba(chrome.runtime.id),qa(),Aa.init(),ub=Aa.diigoImageClipMode=!0)});vb.init();/https:\/\/[\S]*\.amazon\.[\S]*\/notebook/.test(window.location.href)&&
dc.init();R.get("prefs.autoShowHighlightIcon",function(a){E(window.location.hostname);"mail.google.com"!=window.location.hostname&&"docs.google.com"!=window.location.hostname&&"true"==a&&(l.autoShowHighlightIcon=!0,Oa(window.location.href)&&1==l.autoShowHighlightIcon&&(Jb(),$(document).ready(function(){Jb()})))});$(document).bind("keydown",function(a){R.get("prefs.shortcutBookmark prefs.shortcutBookmarkCtrl prefs.shortcutBookmarkAlt prefs.shortcutBookmarkKey prefs.shortcutReadlater prefs.shortcutReadlaterCtrl prefs.shortcutReadlaterAlt prefs.shortcutReadlaterKey prefs.shortcutAnnotate prefs.shortcutAnnotateCtrl prefs.shortcutAnnotateAlt prefs.shortcutAnnotateKey prefs.shortcutAnnotateArticle prefs.shortcutAnnotateArticleCtrl prefs.shortcutAnnotateArticleAlt prefs.shortcutAnnotateArticleKey prefs.shortcutAnnotatePDF prefs.shortcutAnnotatePDFCtrl prefs.shortcutAnnotatePDFAlt prefs.shortcutAnnotatePDFKey prefs.shortcutAnnotateScreenshot prefs.shortcutAnnotateScreenshotCtrl prefs.shortcutAnnotateScreenshotAlt prefs.shortcutAnnotateScreenshotKey prefs.shortcutOpenOutlinerSidebar prefs.shortcutOpenOutlinerSidebarCtrl prefs.shortcutOpenOutlinerSidebarAlt prefs.shortcutOpenOutlinerSidebarKey".split(" "),
function(c){c&&("true"==c["prefs.shortcutBookmark"]&&ra(c["prefs.shortcutBookmarkCtrl"])==a.ctrlKey&&ra(c["prefs.shortcutBookmarkAlt"])==a.altKey&&String.fromCharCode(a.keyCode)==c["prefs.shortcutBookmarkKey"]?T.send({name:"initialData"},function(d){A.version!=d.version?(d=navigator.platform.match(/Mac/)?"\u2318?+ R":"F5",alert(chrome.i18n.getMessage("refreshAfterUpdate",[chrome.i18n.getMessage("extName"),d]))):(Q.init(),qa(),""==d.globalData.user?l.notify('Please <a href="#" title="Sign in into Diigo.com" id="signIn">sign in</a> first.',
1E3):(0==l.generated&&C.cb_bm_loadBookmark_success(d.loadBookmarkResult,"prepareCtx"),R.updateCache(d.preloadedPrefs),Ea.makeSnapshot(),0==$("#diigolet-panel-panel").length&&O([P,aa,K,ka,ea,Y],function(f){f.init()}),Da.show(),A.ready=!0,Xa()))}):"true"==c["prefs.shortcutReadlater"]&&ra(c["prefs.shortcutReadlaterCtrl"])==a.ctrlKey&&ra(c["prefs.shortcutReadlaterAlt"])==a.altKey&&String.fromCharCode(a.keyCode)==c["prefs.shortcutReadlaterKey"]?T.send({name:"initialData"},function(d){A.version!=d.version?
(d=navigator.platform.match(/Mac/)?"\u2318?+ R":"F5",alert(chrome.i18n.getMessage("refreshAfterUpdate",[chrome.i18n.getMessage("extName"),d]))):(Q.init(),qa(),""==d.globalData.user?l.notify('Please <a href="#" title="Sign in into Diigo.com" id="signIn">sign in</a> first.',1E3):(0==l.generated&&C.cb_bm_loadBookmark_success(d.loadBookmarkResult,"prepareCtx"),l.bookmark?l.bookmark.unread=!0:l.bookmark=va.readlater(),C.saveBookmark(null,function(){},"readlater")))}):"true"==c["prefs.shortcutAnnotate"]&&
ra(c["prefs.shortcutAnnotateCtrl"])==a.ctrlKey&&ra(c["prefs.shortcutAnnotateAlt"])==a.altKey&&String.fromCharCode(a.keyCode)==c["prefs.shortcutAnnotateKey"]?T.send({name:"initialData"},function(d){A.version!=d.version?(d=navigator.platform.match(/Mac/)?"\u2318?+ R":"F5",alert(chrome.i18n.getMessage("refreshAfterUpdate",[chrome.i18n.getMessage("extName"),d]))):(Q.init(),Ba(chrome.runtime.id),qa(),""==d.globalData.user?l.notify('Please <a href="#" title="Sign in into Diigo.com" id="signIn">sign in</a> first.',
1E3):(0==l.generated&&C.cb_bm_loadBookmark_success(d.loadBookmarkResult,"prepareCtx"),0==$("#diigolet-panel-panel").length?(O([P,aa,K,ka,ea,Y],function(f){f.init()}),P.show(),pb(),Nb.afterRun(),A.ready=!0,Xa()):(P.show(),l.toggleSilent(!1)),l.unpaintAllAnnotations(),l.paintAllAnnotations(),S.sort(),P.adjustPosition()))}):"true"==c["prefs.shortcutAnnotateArticle"]&&ra(c["prefs.shortcutAnnotateArticleCtrl"])==a.ctrlKey&&ra(c["prefs.shortcutAnnotateArticleAlt"])==a.altKey&&String.fromCharCode(a.keyCode)==
c["prefs.shortcutAnnotateArticleKey"]?Qb.open():"true"==c["prefs.shortcutAnnotatePDF"]&&ra(c["prefs.shortcutAnnotatePDFCtrl"])==a.ctrlKey&&ra(c["prefs.shortcutAnnotatePDFAlt"])==a.altKey&&String.fromCharCode(a.keyCode)==c["prefs.shortcutAnnotatePDFKey"]?chrome.runtime.sendMessage({name:"openPdf",url:window.location.href}):"true"==c["prefs.shortcutAnnotateScreenshot"]&&ra(c["prefs.shortcutAnnotateScreenshotCtrl"])==a.ctrlKey&&ra(c["prefs.shortcutAnnotateScreenshotAlt"])==a.altKey&&String.fromCharCode(a.keyCode)==
c["prefs.shortcutAnnotateScreenshotKey"]?na.initSelectedCapture():"true"==c["prefs.shortcutOpenOutlinerSidebar"]&&ra(c["prefs.shortcutOpenOutlinerSidebarCtrl"])==a.ctrlKey&&ra(c["prefs.shortcutOpenOutlinerSidebarAlt"])==a.altKey&&String.fromCharCode(a.keyCode)==c["prefs.shortcutOpenOutlinerSidebarKey"]&&pa.toggle())})});$(document).on("mousedown","a",function(a){3==a.which&&(A.templinkTitle=$(a.target).text())});$(document).on("mousedown",function(a){3==a.which&&(A.rightClickPos={x:a.pageX,y:a.pageY})});
R.get("prefs.outlinerIcon",function(a){"true"==a&&pa.init()});window.addEventListener("message",function(a){switch(a.data.type){case "ifbookmark":T.send({name:"initialData"},function(c){R.updateCache(c.preloadedPrefs);1!=l.generated&&(l.reset(c),l.signedIn&&c.shoudLoadMyStuff&&C.loadMyStuff(),c.loadBookmarkResult?(E("[bookmark info already loaded]",c.loadBookmarkResult),C.cb_bm_loadBookmark_success(c.loadBookmarkResult)):c.shouldLoadBookmarkByMyself&&l.signedIn&&C.loadBookmark());var d=l.bookmark,
f=window.getSelection().toString();R.getUserData("tagsUsedLastTime",function(h){h=h?JSON.parse(h):[];Va({type:"sendCtx",data:{generated:l.generated,bm:d,lists:l.myBmLists,outliners:l.outliners,groups:l.myGroups,mytag:l.myTags,myTagsWithCount:l.myTagsWithCount,permissions:l.permissions,selection:f,lastUsedTags:h,isAnnotated:0<l.annotations.length}})})});break;case "getRecommendedTags":l.recommendedTagsLoaded?Va({type:"sendRetags",data:l.recommendedTags}):(a=l.bookmark,C.loadRecommendedTags(a.url,a.getTitle(),
function(){Va({type:"sendRetags",data:l.recommendedTags})}));break;case "closeWin":Da.close();break;case "qdeletebookmark":if(!l.isAnnotated()||confirm("Removing this as a bookmark will also remove your annotations on this page. Do you want to continue?"))C.deleteBookmark(l.bookmark),Da.close(),P.hide();break;case "loadGroupTagsDictionary":C.loadGroupTagsDictionary([a.data.groupName],function(c){Va({type:"updateGroupTag",data:c})});break;case "onload":if(/(.*).diigo.com/.test(window.location.href))break;
a.data.outlinerId?(R.set({openedOutlinerId:a.data.outlinerId}),pa.outlinerId=a.data.outlinerId):(R.set({openedOutlinerId:""}),pa.outlinerId=null);R.set({"prefs.outlinerFrameUrl":a.data.url});break;case "start-upload-image":chrome.runtime.sendMessage({name:"uploadImageToDiigo",src:a.data.src,type:"outliner"});vb.hide();break;case "showMHTMLinfo":Ia.hasCacheUpload()||(ha.init(),ha.show("acache"),Da.close());break;case "createList":C.createList(a.data.data)}},!1);var Q={j:null,init:function(){var a=
this;a.inited||(a.inited=!0,a.create(),["info","alert","OK","wait"].forEach(function(c){a["notify"+c[0].toUpperCase()+c.substr(1)]=function(d,f){return a.notify(d,c,f)}}))},create:function(){(this.j=$(nb).eq(0).appendTo(document.body).hide()).children().eq(0).siblings().remove()},destroy:function(){this.j.remove()},hide:function(){this.j.hide()},notify:function(a,c,d){d=d||{};var f=this.j;d=void 0==d.timeout?4E3:d.timeout;f.children("div:first").attr("class",c).children("p:first").html(a);f.show();
f.children("div:first").children("p:first").children("a").click(function(){"team_url"==!$(this).attr("id")&&window.open("https://www.diigo.com/sign-in?referInfo="+encodeURIComponent("/images/diigo-logo.png#SIGNED_IN"))});f.children("div:first").children("span:first").click(function(){f.fadeOut()});f[0].timerId&&(clearTimeout(f[0].timerId),f[0].timerId=null);d&&(f[0].timerId=setTimeout(function(){f.fadeOut("slow")},d))}},ha={j:null,shown:!1,init:function(){this.create()},create:function(){1!=this.shown&&
(this.j=$('<div id="diigo-premium-warning-wrapper"> <div id="diigo-premium-warning"><div id="diigo-premium-close">+</div><div id="diigo-premium-warning-content"><div id="diigo-premium-warning-top"><div id="diigo-premium-warning-icon">!</div><div id="diigo-new-feature"></div><span id="diigo-premium-warning-title"></span></div><div id="diigo-premium-warning-main"><div id="diigo-premium-warning-text"></div></div><div id="diigo-premium-warning-bottom"><div id="diigo-premium-upgrade">Upgrade Now!</div></div></div></div></div>').eq(0).appendTo(document.body.parentNode).hide())},
destroy:function(){this.j.remove();this.shown=!1},show:function(a){var c=this,d=l.permissions,f=d.servicePlanName;switch(a){case "image":var h='<span class="num red">'+d.imagePermission.imageUsedCount+"</span>";d='<span class="num green">'+d.imagePermission.imageQuota+"</span>";h="Your image number is over quota: "+d+" images for "+f+" Plan, you have "+h+" images.";var k="Over Quota";break;case "highlight":h='<span class="num red">'+d.annPermission.annotationUsedCount+"</span>";d='<span class="num green">'+
d.annPermission.annotationQuota+"</span>";h="Your highlight number is over quota: "+d+" highlights for "+f+" Plan, you have "+h+" highlights.";k="Over Quota";break;case "cache":h="This feature is not available on your current plan. Please upgrade your plan to gain access to this feature.";k="Feature Not Available";break;case "kindle":h="This feature is not available on your current plan. Please upgrade your plan to gain access to this feature.";k="Feature Not Available";break;case "acache":h="\u201cAdvanced Cache\u201d feature will help you backup the page completely. It packs all HTML, CSS, Images of the page together into one single file.   Even webpages that are password-protected, like webpages in your school library, can be saved.",
k="Advanced Cache"}c.j.find("#diigo-premium-warning-title").text(k);c.j.find("#diigo-premium-warning-text").html(h);"acache"==a?($("#diigo-premium-upgrade").text("Upgrade to unlock it now!"),$("#diigo-new-feature").show(),$("#diigo-premium-warning-icon").hide(),a="cache"):($("#diigo-premium-upgrade").text("Upgrade Now!"),$("#diigo-new-feature").hide(),$("#diigo-premium-warning-icon").show());1!=c.shown&&(c.j.show(),c.shown=!0,c.j.find("#diigo-premium-upgrade").click(function(){chrome.runtime.sendMessage({name:"googleEvent",
msg:{eventType:"Chrome extension",action:"Click upgrade from over quota",label:a}});window.open("https://www.diigo.com/premium?f=chrome_ext_oq_"+a)}),c.j.find("#diigo-premium-close").click(function(){c.destroy()}))}};var Sb={create:function(a,c){function d(){this.initialize.apply(this,arguments)}1==arguments.length&&"function"!=typeof a&&(c=a,a=null);d.superclass=a;d.subclasses=[];if(a){var f=function(){};f.prototype=a.prototype;d.prototype=new f;a.subclasses.push(d)}c&&Sb.extend(d,c);d.prototype.initialize||
(d.prototype.initialize=function(){});return d.prototype.constructor=d},extend:function(a,c){var d=a.superclass&&a.superclass.prototype,f;for(f in c){var h=c[f];if(d&&"function"==typeof h&&"$super"==H.func.argumentNames(h)[0]){var k=h;h=H.extend(H.func.wrap(function(m){return function(){return d[m].apply(this,arguments)}}(f),k),{valueOf:function(){return k},toString:function(){return k.toString()}})}a.prototype[f]=h}return a}};var ja=Sb.create({initialize:function(a){var c=this;a.maxRecipients&&(c.maxRecipients=
a.maxRecipients,c.maxRecipientsTipTemp="MAX Recipients "+c.maxRecipients);c.scanType=a.scanType||"all";c.maxHeight=a.maxHeight||200;c.width=a.width||414;c.recItemsId=[];c.tipTemp="Start typing a friend's name or email address.";c.recBox=$(a.rec);c.recBox.css({font:"12px verdana",padding:"0 0 2px 2px",width:c.width});if(!c.recInput){c.recInput=$('<input class="recInput" maxlength=255/>');c.recBox.append(c.recInput);c.recInputSizer=$('<div class="recInputSizer"/>');c.recBox.append(c.recInputSizer);
var d=$("<div />");d.css({clear:"both"});c.recBox.append(d)}c.setContacts(a.contacts,!0);c.tip||(c.tip=$("<div />"),c.tip.css({width:c.recBox.width()-2+"px"}),c.recBox.parent().append(c.tip),c.tip.hide());c.contactList||(c.contactList=$("<div class='accList'/>"),c.contactList.css({width:c.recBox.width()-2+"px"}),c.contactListInner=$("<div />"),c.contactListInner.css({position:"relative",overflow:"auto",padding:"2px"}),c.contactList.append(c.contactListInner),c.recBox.parent().append(c.contactList),
c.contactList.hide());c.recBox.click(function(){c.recInput.css({visibility:"visible"});c.recInput.trigger("focus")});c.recBox.reset=function(){c.recInput.trigger("blur");c.recBox.find(".recItem").each(function(){$(this).remove()});c.recItemsId.length=0};c.recInput.focus(function(){c.showTip();c.recInput.reset();c.currentItem=-1});c.recInput.reset=function(){c.recInput.val("");var f=ja.getTextSize(c.recInput.val(),c.recInputSizer);c.recInput.css({width:f+30+"px",visibility:"visible"})};c.recInput.blur(function(){c.wrapItem();
c.hideTip();c.recInput.css({visibility:"hidden"});setTimeout(function(){c.hideContacts()},300)});c.recInput.keydown(function(f){if(window.event)var h=window.event.keyCode;else f&&(h=f.which);switch(h){case 9:case 40:return c.hoverItem(c.currentItem+1),!1;case 38:return c.hoverItem(c.currentItem-1),!1;case 8:""==c.recInput.val()&&c.recInput.prev()&&(f=c.recInput.prev().attr("cIndex"),$("#recItemRemove_"+f).trigger("click"));break;case 13:return c.wrapItem(),c.recInput.reset(),c.hideContacts(),c.showTip(),
!1;case 32:return c.wrapItem(),c.recInput.reset(),c.hideContacts(),c.showTip(),!1}f=ja.getTextSize(c.recInput.val(),c.recInputSizer);f>c.recBox.width()-50&&(f=c.recBox.width()-50);c.recInput.css({width:f+30+"px"})});c.recInput.keyup(function(f){f=f.keyCode;(105>=f&&48<=f||8==f)&&c.scanContacts()})},clearAll:function(){this.recBox.reset()},setContacts:function(a,c){c||this.clearAll();a=JSON.parse(JSON.stringify(a));ja.contacts=a;ja.contactListsID=[];for(a=0;a<ja.contacts.length;a++)"list"==ja.contacts[a].type&&
ja.contactListsID.push(a)},showNotice:function(){this.tip.attr({"class":"accNotice"});this.tip.html(this.maxRecipientsTipTemp);this.tip.css({width:this.recBox.width()-2+"px"});this.tip.show()},showTip:function(){this.tip.attr({"class":"accTip"});this.tip.html(this.tipTemp);this.tip.css({width:this.recBox.width()-2+"px"});this.tip.show()},hideTip:function(){this.tip.hide()},scanContacts:function(){this.match=[];var a=this.recInput.val().replace(/\s+/g,"&");if(0>=a.length)return this.hideContacts(),
!1;a=new RegExp("&"+a,"i");for(var c=0;c<ja.contacts.length;c++){var d="",f=ja.contacts[c];if("all"==this.scanType||this.scanType==f.type){switch(f.type){case "list":d="&"+f.extra.title.replace(/\s+/,"&")+"&"+f.extra.note;break;case "friend":d="&"+f.extra.real_name.replace(/\s+/,"&")+"&"+f.id;break;case "user":d="&"+f.id.replace(/\s+/,"&")+"&"+f.extra.email;break;case "email":d="&"+f.id}a.test(d)&&this.match.push(c)}}0<this.match.length?this.showContacts():this.hideContacts()},showContacts:function(){this.recInput.val();
this.contactListInner.html("");this.contactListInner.css({height:"auto",width:this.recBox.width()-6+"px"});for(var a=this,c=0;c<this.match.length;c++){var d=this.match[c],f=ja.contacts[d],h=$("<div id=cI_"+c+' class="cItem"/>');switch(f.type){case "list":h.html("<b><i>list</i>"+this.h(f.extra.title)+"</b>"+f.extra.note);break;case "friend":str="<b>"+this.h(f.extra.real_name)+"</b><span class='extraDesc'>(";f.id&&(str+=this.h(f.id)+" on Diigo");f.extra.location&&(str+=", "+f.extra.location);f.extra.sex&&
(str+=" "+f.extra.sex);str+=")</span>";h.html(str);break;case "user":h.html("<b>"+this.h(f.extra.email)+"</b>");break;case "email":h.html("<b>"+this.h(f.id)+"</b>")}h.attr("cIndex",d);h.bind("mouseover",{index:c},function(k){a.hoverItem(k.data.index)});h.bind("mouseout",{index:c},function(k){a.outItem(k.data.index)});h.click(function(){a.wrapItem()});this.contactListInner.append(h)}this.contactList.show();this.contactListInner.height()>this.maxHeight&&this.contactListInner.css({height:this.maxHeight+
"px"});this.hoverItem(0)},hideContacts:function(){this.contactList.hide();this.currentItem=-1},h:function(a){if(0>=a.length)return"";var c=this.recInput.val();return a.replace(eval("/"+c+"/i"),"<span class='keywordStrong'>"+c+"</span>")},hoverItem:function(a){0<=this.currentItem&&this.outItem(this.currentItem);this.currentItem=a>this.match.length-1?this.match.length-1:-1>a?-1:a;var c=$("#cI_"+this.currentItem);if(c[0]){c[0].className+=" hover";if(0==this.currentItem)return this.contactListInner[0].scrollTop=
0,!1;if(this.currentItem==this.match.length-1)return this.contactListInner[0].scrollTop=2E3,!1;a=this.contactListInner[0].scrollTop;var d=a+this.contactListInner.height(),f=c.offset().top;c=f+c.height();f<a?this.contactListInner[0].scrollTop-=a-f:c>d&&(this.contactListInner[0].scrollTop+=c-d)}},outItem:function(a){if(0<=this.currentItem){var c=$("#cI_"+this.currentItem);c[0]&&(c[0].className=c[0].className.replace(/\s?hover/gi,""))}this.currentItem=-1;a=$("#cI_"+a);a[0]&&(a[0].className=a[0].className.replace(/\s?hover/gi,
""))},wrapItem:function(a){if("undefined"==typeof a){a=this.recInput.val();if(0>=a.length)return this.currentItem=-1,!1;-1==this.currentItem?(emailR=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,emailR.test(a)?ja.contacts.push({type:"email",id:a}):ja.contacts.push({type:"friend",id:a,extra:{real_name:a}}),a=ja.contacts.length-1):a=$("#cI_"+this.currentItem).attr("cIndex")}var c=ja.contacts[a];if(-1!=this.recItemsId.indexOf(a))return this.hideContacts(),this.recBox.trigger("click"),!1;if(this.maxRecipients&&
this.recItemsId.length>this.maxRecipients)return this.hideContacts(),this.showNotice(),!1;var d="";if(c)switch(c.type){case "list":d="<i>list</i>"+c.extra.title;break;case "friend":d=c.extra.real_name;break;case "user":d=c.extra.email;break;case "email":d=c.id}c=$('<span class="recItem" id="recItem_'+a+'"></span>').html(d);d=$('<a class="recItemRemove" href="javascript:void(0);" id="recItemRemove_'+a+'"></a>').html("x");c.append(d);c.attr("cIndex",a);c.insertBefore(this.recInput);var f=this;$("#recItemRemove_"+
a).bind("click",{index:a},function(h){f.removeRecItem(h.data.index)});this.recBox.trigger("click");this.recItemsId.push(a)},removeRecItem:function(a){$("#recItem_"+a).remove();this.recItemsId=this.recItemsId.slice(a,1);this.recBox.trigger("click")},getRecItems:function(){if(this.recItemsId&&0!=this.recItemsId.length){for(var a=[],c=[],d=[],f=0;f<this.recItemsId.length;f++){var h=ja.contacts[this.recItemsId[f]];switch(h.type){case "friend":a.push(h.id);break;case "list":d.push(h.id);break;case "user":c.push(h.extra.email);
break;case "email":c.push(h.id)}}return{friends:a,emails:c,lists:d}}return null},setDefault:function(a){this.wrapItem(a)},getRecOriItems:function(){if(this.recItemsId&&0!=this.recItemsId.length){for(var a=[],c=0;c<this.recItemsId.length;c++)a.push(ja.contacts[this.recItemsId[c]]);return a}return null}});ja.getTextSize=function(a,c){c.innerHTML=a.replace(/ /g,"&nbsp;");return 500<c.offsetWidth?500:c.offsetWidth};var Ja={cache:{},get2:function(a,c,d){var f=this,h;if(h=f.cache[c])return d&&d(h),h;C.makeAnnotatedLink(a,
c,function(k){d&&d(f.cache[c]=k.url)})},get:function(a,c){return this.get2(a,3,c)}},Y={shown:!1,j:null,tabs:{},init:function(){if(!(0<$("#diigolet-dialog-share").length)){var a=this;a.create();$(window).resize(function(){a.shown&&a.adjustPosition()});O(a.tabs,function(c){c.init()})}},destroy:function(){},onSignIn:function(){this.updateUI()},onSignOut:function(){this.hide()},adjustPosition:function(){var a=this.j,c=$(window),d=c.width();c=c.height();var f=parseInt(a.css("left")),h=parseInt(a.css("top")),
k=a.outerWidth(),m=a.outerHeight();d<f+k&&a.css("left",f=d-k);c<h+m&&a.css("top",h=c-m);0>h&&a.css("top",1);0>f&&a.css("left",1)},show:function(){var a=this;a.shown||R.get("share.lastOpenedTab",function(c){a.shown=!0;a.j.show();a.adjustPosition();a.changeTab(c||"twitter")})},hide:function(){this.shown&&(this.shown=!1,this.j.hide(),O(this.tabs,function(a){a.shown=!1}))},updateUsername:function(a){},updateUI:function(){},create:function(){var a=this,c=a.j=$(mb).eq(0).appendTo(document.body).hide();
$("#diigolet-dialog-share-closeBtn").click(function(){a.hide()});c.css("left",($(window).width()-c.outerWidth())/2);$("#diigolet-share-shareToTabs li a").click(function(){a.changeTab($(this).attr("diigotab"))});new $.Draggable(c,{handle:"._dragHandle",afterDrag:function(){a.adjustPosition()}})},changeTab:function(a){this.tab&&($("#diigolet-share-tab-"+this.tab).removeClass("current"),$("#diigolet-dialog-share-"+this.tab).hide());$("#diigolet-share-tab-"+a).addClass("current");$("#diigolet-dialog-share-"+
a).show();this.tab=a;this.tabs[a].show();R.set({"share.lastOpenedTab":a})}};Y.tabs.twitter={connectedToTwitter:!1,init:function(){var a=this;a.j=$("#diigolet-dialog-share-twitter");a.jMsg=$("#diigolet-dialog-share-twitterMsg").val("").bind("input",$.proxy(a.updateCountDown,a));a.j.find("#diigolet-twitter-cancelBtn").click(function(){Y.hide()});a.j.find("#diigolet-twitter-saveBtn").click(function(){a.trySend()});$("#diigolet-dialog-share-twitter-signedIn>a").click(function(){T.send({name:"twitterChangeUser"});
return!1});$("#diigolet-dialog-share-twitter-notSignedIn").click(function(){T.send({name:"twitterConnect"});return!1})},show:function(){var a=this;a.shown||(a.shown=!0,a.jMsg.val("Preparing for your tweet. Please wait..."),a.defaultMsg(),T.send({name:"twitterCheckAuthentication"},function(c){console.log(c);a.updateTwitterSignInStatus(c)}))},updateTwitterSignInStatus:function(a){this.connectedToTwitter=!!a;$("#diigolet-dialog-share-twitter-signedIn").toggle(!!a);$("#diigolet-dialog-share-twitter-notSignedIn").toggle(!a);
a&&$("#diigolet-dialog-share-twitter-signedIn>span").text(a.screen_name)},updateCountDown:function(){var a=140-this.jMsg[0].value.length;$("#diigolet-share-twitterLeftChars").text(a).toggleClass("full",0>=a)},defaultMsg:function(){function a(m){c.shortenUrl(m,function(q){c.jMsg.val(c.composeMessage(f,q,h));c.updateCountDown()})}var c=this,d=l.bookmark,f=d.title,h=d.description,k=d.url;0<l.pageComments.length||0<l.annotations.length?Ja.get(d.url,function(m){c.jMsg.val(c.composeMessage(f,m,h));c.updateCountDown()}):
a(k);c.updateCountDown()},composeMessage:function(a,c,d){return a+" "+c},shortenUrl:function(a,c){T.send({name:"shortenUrl",details:{url:a}},c)},trySend:function(){if(!this.connectedToTwitter)return function(c){c=$(c);for(var d=0;3>d;d++)c.fadeOut(150).fadeIn(150)}("#diigolet-dialog-share-twitter-notSignedIn"),!1;var a=Ta(this.jMsg.val());if(140<a.length)return alert("Your message is too long!"),!1;if(0==a.length)return alert("Please input message!"),!1;Q.notifyInfo("Sending your tweet...");T.send({name:"twitterSend",
details:{status:a}},function(c){E(c);c&&c.id?Q.notifyOK("Your tweet is sent!"):Q.notifyAlert("An error has occurred. Your tweet was not sent.")})},onTwitterSignIn:function(a){this.updateTwitterSignInStatus(a)},onTwitterSignOut:function(){this.updateTwitterSignInStatus(null)}};Y.tabs.facebook={init:function(){},show:function(){Ja.get(l.bookmark.url,function(a){a=l.bookmark.getTitle();T.send({name:"openWindow",details:{url:"https://www.facebook.com/sharer.php?src=bm&v=4&i=1267884404&"+ac({u:l.bookmark.url,
t:a}),name:"sharer",features:"toolbar=0,status=0,resizable=1,width=626,height=436"}})})}};Y.tabs.gPlus={init:function(){},show:function(){Ja.get(l.bookmark.url,function(a){T.send({name:"openWindow",details:{url:"https://plus.google.com/share?url="+a,name:"sharer",features:"toolbar=1,status=0,resizable=1,scrollbars=1,width=700,height=453"}})})}};Y.tabs.gBuzz_viaGoogleReaderDeprecated={init:function(){this.jframe=$("#diigolet-dialog-share-gBuzz>iframe")},show:function(){function a(){var f=window.getSelection();
if(0<f.rangeCount){var h=document.createElement("div");h.appendChild(f.getRangeAt(0).cloneContents());return h.innerHTML}return""}function c(f){var h=l.bookmark.getTitle(),k={url:l.bookmark.url,title:h,srcUrl:A.urls.getUserBookmarksPageURL(),srcTitle:"Diigo",snippet:""};f&&(k.snippet+=A.AnnotationFormatter.format({mode:1}));k.snippet+=a()+"<br/>";f&&(k.snippet+=da('<a style="padding-left:2em;" title="#{0}" href="#{1}">#{2}</a><br />',[h,f,"View the annotated version on Diigo"]));var m=$('<form action="https://www.google.com/reader/link" method="POST" accept-charset="utf-8"></form>').attr({target:"diigolet-GR________link_bookmarklet_frame"}).appendTo(document.body);
$.each(k,function(q,n){var t=document.createElement("input");$(t).attr({type:"hidden",name:q,value:n}).appendTo(m)});m.submit().remove()}var d=chrome.runtime.getURL("share-gbuzz-loading.html");this.jframe.attr("src",d);0<l.pageComments.length||0<l.annotations.length?Ja.get(l.bookmark.url,function(f){c(f)}):c(null)}};Y.tabs.gBuzz={init:function(){this.jframe=$("#diigolet-dialog-share-gBuzz>iframe")},show:function(){function a(){var f=window.getSelection();if(0<f.rangeCount){var h=document.createElement("div");
h.appendChild(f.getRangeAt(0).cloneContents());return h.innerHTML}return""}function c(f){var h=l.bookmark.getTitle(),k={url:l.bookmark.url,title:h,srcUrl:A.urls.getUserBookmarksPageURL(),srcTitle:"Diigo",snippet:""};f&&(k.snippet+=A.AnnotationFormatter.format({mode:1}));k.snippet+=a()+"<br/>";f&&(k.snippet+=da('<a style="padding-left:2em;" title="#{0}" href="#{1}">#{2}</a><br />',[h,f,"View the annotated version on Diigo"]));var m=$('<form action="https://www.google.com/reader/link" method="POST" accept-charset="utf-8"></form>').attr({target:"diigolet-GR________link_bookmarklet_frame"}).appendTo(document.body);
$.each(k,function(q,n){var t=document.createElement("input");$(t).attr({type:"hidden",name:q,value:n}).appendTo(m)});m.submit().remove()}var d=chrome.runtime.getURL("share-gbuzz-loading.html");this.jframe.attr("src",d);0<l.pageComments.length||0<l.annotations.length?Ja.get(l.bookmark.url,function(f){c(f)}):c(null)}};Y.tabs.email={init:function(){var a=this;a.j=$("#diigolet-dialog-share-email");a.jCheckQuotes=$("#diigolet-dialog-share-email-quotes-checker>input");a.jTxtTo=$("#diigolet-dialog-share-email-to");
a.jSubject=$("#diigolet-dialog-share-email-subject");a.jTxtMsg=$("#diigolet-dialog-share-email-message");a.jQuotes=$("#diigolet-aidlog-share-email-quotes-content");a.j.find("#diigolet-email-cancelBtn").click(function(){Y.hide()});a.j.find("#diigolet-email-saveBtn").click(function(){a.trySend()});a.jCheckQuotes.attr("checked","checked").change(function(){$(this).is(":checked")?(a.preview(),a.jQuotes.parent().show()):a.jQuotes.parent().hide()})},show:function(){this.jTxtTo[0].focus();this.jSubject.val(l.bookmark.getTitle());
this.jCheckQuotes.change();this.pikuInited||(this.initAutocompleteContacts(),this.pikuInited=!0)},preview:function(){var a=this,c=a.jCheckQuotes.is(":checked");a.jQuotes.html(c?a.composeMessage():"");c&&(0<l.pageComments.length||0<l.annotations.length?Ja.get(l.bookmark.url,function(d){a.updateURL(d)}):a.updateURL(l.bookmark.url))},updateURL:function(a){E("[Share] updating annotated link",a);this.jQuotes.find("a.diigoAnnotatedLink").attr("href",a)},composeMessage:function(a){var c="";a&&(c+="<p>"+
a+"</p>");if(!this.jCheckQuotes.is(":checked"))return c;a=0<l.pageComments.length||0<l.annotations.length?Ja.get(l.bookmark.url)||"DIIGO_PERMALINK":l.bookmark.url;a=da('<p><a class="diigoAnnotatedLink" href="#{1}" title="#{0}">#{0}</a></p>',[l.bookmark.getTitle(),a]);return c+='<p><strong>Quotes:</strong></p><blockquote style="border-left: 2px solid #eee; padding-left: 1em; margin-left: 1em;">'+a+A.AnnotationFormatter.format({mode:1,includePageComments:!0})+"</blockquote>"},trySend:function(){var a=
Ha.string.strip(this.jSubject.val());if(!a)return Q.notifyAlert("Please input subject"),!1;a={toAllFriends:!1,toUsers:[],toEmails:[],toLists:[],mode:2,subject:a,body:this.composeMessage(Ha.string.stripTags(this.jTxtMsg.val()))};this.jCheckQuotes.is(":checked")&&(a.bookmarkUrl=l.bookmark.url);var c=this.piku.getRecItems();if(!c)return Q.notifyAlert("Please input recipients"),!1;a.toUsers=c.friends;a.toEmails=c.emails;a.toLists=c.lists;l.myContacts=JSON.parse(JSON.stringify(ja.contacts));A.Messenger.send({name:"updateGlobalData",
details:{myContacts:l.myContacts}});C.shareBookmark(a,function(d){1==d.code?(Q.notifyOK("Message sent"),Y.hide()):Q.notifyAlert("Message not sent")});return!0},getMessageBody:function(){return this.jTxtMsg.val()}};DlgShare_piku={onMyContactsUpdate:function(){this.piku&&this.piku.setContacts(l.myContacts)},initAutocompleteContacts:function(){this.piku=new ja({rec:"#forwardTo",contacts:l.myContacts,maxRecipients:20,width:"100%",maxHeight:180,scanType:"all"})}};M(Y.tabs.email,DlgShare_piku);Y.onMyContactsUpdate=
function(){Y.tabs.email.onMyContactsUpdate()};A.AnnotationFormatter={format:function(a){a=M({mode:3,includePageComments:!1,onlyPrivate:!1},a||{});var c=2==(a.mode&2),d=1==(a.mode&1);E("[AnnotationFormatter] format mode:",a.mode,"includeOthers",c,"includePrivate",d);var f="";a.includePageComments&&(f+="<ul>"+l.pageComments.filter(function(h){return(c?!0:h.user==l.user)&&(d?!0:2!=h.mode)}).map(function(h){return'<li style="line-height:150%;margin-bottom:.6em;">'+Ha.string.stripTags(h.content)+"</li>"}).join("\n")+
"</ul>");return f+="<ul>"+l.annotations.filter(function(h){return 1==a.onlyPrivate?h.user==l.user&&0==h.onlyInGroup:(c?!0:h.user==l.user)&&(d?!0:2!=h.mode)}).map(function(h){var k="";0==h.type?k=Ha.string.stripTags(h.content):1==h.type?k=Ha.string.evalTpl('<img src="#{0}" title="#{1}" alt="#{1}">(image)',[h.extra.imageUrl,""]):2==h.type?k='<img src="https://www.diigo.com/images/v2/float_note.gif" />(floating sticky note)':3==h.type?k="(flash movie)"+h.content:4==h.type&&(k="(video)"+h.content);return Ha.string.evalTpl('<li style="line-height:150%;margin-bottom:.6em;">#{0} #{1} #{2}</li>',
[k,"","<ul>"+h.comments.filter(function(m){return(c?!0:m.user==l.user)&&(d?!0:2!=m.mode)}).map(function(m){return'<li style="line-height:150%;margin-bottom:.6em;">'+Ha.string.stripTags(m.content)+Ha.string.evalTpl(' <span style="font-size:11px;color:#aaa">comment by <a href="#{0}">#{1}</a></span>',[A.urls.getUserHomepageURL(m.user),m.realName])+"</li>"}).join("\n")+"</ul>"])}).join("\n")+"</ul>"}};Y.tabs.annotatedLink={init:function(){this.j=$("#diigolet-dialog-share-annotatedLink");this.j.find("#diigolet-annotatedLink-cancelBtn").click(function(){Y.hide()});
this.j.find("#diigolet-annotatedLink-saveBtn").click(function(){var a=$("#diigolet-dialog-share-annotatedLink-value").val();A.Messenger.send({name:"copy",details:{text:a}})});this.jInput=$("#diigolet-dialog-share-annotatedLink-value").focus(function(){var a=this;setTimeout(function(){a.select()},13)})},show:function(){var a=this;a.shown=!0;a.jInput=$("#diigolet-dialog-share-annotatedLink-value").addClass("loading").val(chrome.i18n.getMessage("share_loadingAnnotatedLink"));Ja.get(l.bookmark.url,function(c){a.jInput.removeClass("loading").val(c);
$("#diigolet-dialog-share-annotatedLink-optLinks a:first").attr("href",c)})}};var na={editMode:!1,drawColor:"red",fontSize:14,actions:[],reTagShown:!1,luTagShown:!1,initTool:"",initSelectedCapture:function(){function a(u){F=document.getElementById("draw-canvas");F.getContext("2d");L=document.getElementById("bgcanvas");L.getContext("2d");"diigosc-text-btn"==u?($("#diigosc-colorpanel").addClass("text-mode"),$("#bgcanvas").css("cursor","text")):$("#diigosc-colorpanel").hasClass("text-mode")&&($("#diigosc-colorpanel").removeClass("text-mode"),
$("#bgcanvas").css("cursor","crosshair"));if(1==n.editMode)"diigosc-tag-btn"==u?Pa({type:"saveWithTag"}):"diigosc-attach-btn"==u?Pa({type:"saveAttach"}):n.diigoscDraw(u);else{var x=$("#diigolet_screenshot_center").width(),y=$("#diigolet_screenshot_center").height(),z=$("#diigolet_screenshot_center").offset().top,B=$("#diigolet_screenshot_center").offset().left;$("#diigosc-savepanel").hasClass("up")?($("#diigosc-editpanel").hide(),setTimeout(function(){chrome.runtime.sendMessage({name:"capture",target:u,
cw:x,ch:y,ct:z,cl:B})},50)):chrome.runtime.sendMessage({name:"capture",target:u,cw:x,ch:y,ct:z,cl:B})}}function c(u){h(G,"left",u.pageX+5+"px");h(G,"top",u.pageY+5+"px")}function d(u){if(0==u.button){var x=function(ba){0!=ba.pageX-z&&0!=ba.pageY-B||0!=$("#diigolet_screenshot_center").width()||(h(wrapper,"background-color","rgba(0,0,0,0)"),J.children[0].textContent="200 X 200",k(z-100,B-100,200,200),m(z-100,B-100,200,200));wrapper.removeEventListener("mousedown",d,!1);wrapper.removeEventListener("mousemove",
y,!1);wrapper.removeEventListener("mouseup",x,!1);h(document.getElementById("diigosc-editpanel"),"display","block");h(J,"display","block");f();ba=-(195-I)/2;190>I?h(oa,"right",ba+"px"):h(oa,"right","0px");q()},y=function(ba){h(wrapper,"background-color","rgba(0,0,0,0)");I=ba.pageX-z;D=ba.pageY-B;J.children[0].textContent=Math.abs(I)+" X "+Math.abs(D);k(z,B,I,D);m(z,B,I,D)};wrapper.removeEventListener("mousemove",c,!1);h(G,"display","none");u.preventDefault();var z=u.pageX,B=u.pageY,D,I,J=document.getElementById("diigolet_screenshot_size"),
oa=document.getElementById("diigosc-editpanel");wrapper.addEventListener("mousemove",y,!1);wrapper.addEventListener("mouseup",x,!1)}}function f(){var u=$("#diigolet_screenshot_center").offset().top-30,x=$("#diigolet_screenshot_center").offset().left,y=$("#diigolet_screenshot_center").width(),z=$("#diigolet_screenshot_center").height(),B=$("#diigolet_screenshot_center").offset().top-document.scrollingElement.scrollTop;93<document.scrollingElement.scrollTop+window.innerHeight-$("#diigolet_screenshot_center").offset().top-
z?(z=$("#diigolet_screenshot_center").offset().top+z+6,$("#diigosc-colorpanel").hasClass("up")&&($("#diigosc-colorpanel").removeClass("up"),$("#diigosc-savepanel").removeClass("up"))):(z=93<B?$("#diigolet_screenshot_center").offset().top-36:u+z,$("#diigosc-colorpanel").addClass("up"),$("#diigosc-savepanel").addClass("up"));y=x+(y-248);h(document.getElementById("diigolet_screenshot_size"),"left",x+"px");h(document.getElementById("diigolet_screenshot_size"),"top",u+"px");h(document.getElementById("diigosc-editpanel"),
"left",y+"px");h(document.getElementById("diigosc-editpanel"),"top",z+"px")}function h(u,x,y){u.style.setProperty(x,y)}function k(u,x,y,z){var B=document.documentElement.scrollHeight,D=document.documentElement.scrollWidth,I=0<=y?u+y:u,J=0<=z?x:x+z,oa=0<=y?D-u-y:D-u;x=0<=z?x+z:x;u=0<=y?D-u:D-u-y;y=B-x;D-=u;B-=J;z=document.getElementById("diigolet_screenshot_top");var ba=document.getElementById("diigolet_screenshot_right"),ca=document.getElementById("diigolet_screenshot_bottom"),W=document.getElementById("diigolet_screenshot_left");
h(z,"width",I+"px");h(z,"height",J+"px");h(ba,"width",oa+"px");h(ba,"height",x+"px");h(ca,"width",u+"px");h(ca,"height",y+"px");h(W,"width",D+"px");h(W,"height",B+"px")}function m(u,x,y,z){u=0<=y?u:u+y;x=0<=z?x:x+z;var B=document.getElementById("diigolet_screenshot_center");h(B,"width",Math.abs(y)+"px");h(B,"height",Math.abs(z)+"px");h(B,"top",x+"px");h(B,"left",u+"px")}function q(){var u=document.getElementById("diigolet_screenshot_center");dragresize=new DragResize("dragresize",{maxLeft:document.documentElement.scrollWidth-
5,maxTop:document.documentElement.scrollTop+window.innerHeight,minTop:document.documentElement.scrollTop});var x=document.getElementById("diigolet_screenshot_size");document.getElementById("diigosc-editpanel");dragresize.isElement=function(y){if(y.className&&-1<y.className.indexOf("drsElement"))return!0};dragresize.isHandle=function(y){if(y.className&&-1<y.className.indexOf("drsMoveHandle"))return!0};dragresize.ondragmove=function(y,z){y=dragresize.elmX;z=dragresize.elmY;var B=dragresize.elmW,D=dragresize.elmH;
x.children[0].textContent=Math.abs(B)+" X "+Math.abs(D);k(y,z,B,D);m(y,z,B,D);f()};dragresize.apply(wrapper);dragresize.select(u)}if(!(0<$("#diigosc-all").length))if(!Oa(window.location.href,!0)&&!/chrome-extension:\/\/.*\/pdf\/viewer.html/.test(window.location.href))alert(chrome.i18n.getMessage("alertUnsupportedPage"));else if("undefined"!==typeof l.permissions.imagePermission&&!l.permissions.imagePermission.imagePermission)ha.init(),ha.show("image");else if(!(0<$("#diigosc-all").length)){var n=
this,t='<div id="diigosc-sc" ondragstart="return false;" ondrop="return false;"><iframe id="diigo-screenshot-frame" src="'+chrome.runtime.getURL("")+'screenshot-frame.html"></iframe><canvas id="bgcanvas"height="0"width="0"></canvas><canvas id="draw-canvas"height="0"width="0"></canvas><span id="diigosc-select-tip"style="display:none">Click and drag to select</span><div id="diigolet_screenshot_wrapper"><div id="diigolet_screenshot_top"></div><div id="diigolet_screenshot_right"></div><div id="diigolet_screenshot_bottom"></div><div id="diigolet_screenshot_left"></div><div id="diigolet_screenshot_center"class="drsElement drsMoveHandle"></div><div id="diigolet_screenshot_size"style="min-width:70px;"><span>0 X 0</span></div><div id="diigosc-editpanel"><div id="diigosc-rect"class="diigosc-editpanel-btn"title="rectangle"><div id="diigosc-rect-btn"></div></div><div id="diigosc-round"class="diigosc-editpanel-btn"title="ellipse"><div id="diigosc-round-btn"></div></div><div id="diigosc-text"class="diigosc-editpanel-btn"title="text"><div id="diigosc-text-btn"></div></div><div id="diigosc-arrow"class="diigosc-editpanel-btn"title="arrow"><div id="diigosc-arrow-btn"></div></div><div id="diigosc-sep"class="diigosc-editpanel-btn"></div><div id="diigosc-undo"class="diigosc-editpanel-btn"title="undo"><div id="diigosc-undo-btn"class="disable"></div></div><div id="diigosc-sep"class="diigosc-editpanel-btn"></div><div id="diigosc-cancel"class="diigosc-editpanel-btn"title="cancel"><div id="diigosc-cancel-btn"></div></div><div id="diigosc-save"class="diigosc-editpanel-btn"title="save"><div id="diigosc-save-btn"></div></div><div id="diigosc-colorpanel"><div id="diigosc-triangle"></div><div id="colorpanel"><div id="current-color"><div class="capture-red"></div></div><div class="color-cell"><div class="capture-black"></div></div><div class="color-cell"><div class="capture-gray"></div></div><div class="color-cell"><div class="capture-red"></div></div><div class="color-cell"><div class="capture-orange"></div></div><div class="color-cell"><div class="capture-yellow"></div></div><div class="color-cell"><div class="capture-green"></div></div><div class="color-cell"><div class="capture-white"></div></div><div class="color-cell"><div class="capture-light-gray"></div></div><div class="color-cell"><div class="capture-cyan"></div></div><div class="color-cell"><div class="capture-blue"></div></div><div class="color-cell"><div class="capture-purple"></div></div><div class="color-cell"><div class="capture-pink"></div></div></div><div id="fontSize"><div id="sep"></div><div class="font-cell"id="small"></div><div class="font-cell current" id="middle"></div><div class="font-cell"id="large"></div></div></div><div id="diigosc-savepanel"><div id="diigosc-triangle"></div><div id="diigosc-tag-btn" class="diigosc-savepanel-btn">Tag as a stand-alone image</div><div id="diigosc-attach-btn" class="diigosc-savepanel-btn">Attach it to the bookmark</div></div></div>';
docH=document.documentElement.scrollHeight;docW=document.documentElement.scrollWidth;if(!document.getElementById("diigolet_screenshot_wrapper")){var r=document.createElement("div");document.body.parentNode.appendChild(r);r.innerHTML+=t;r.id="diigosc-all";var w=$(window).scrollTop();$("html").css("overflow","hidden");P.shown&&P.adjustPosition();$(window).bind("scroll",function(){$(window).scrollTop(w);return!1})}$("body").addClass("unselectable");wrapper=document.getElementById("diigolet_screenshot_wrapper");
h(wrapper,"display","none");h(wrapper,"width",document.documentElement.scrollWidth+"px");h(wrapper,"height",document.documentElement.scrollHeight+"px");h(wrapper,"display","block");document.body.addEventListener("keydown",function(u){27==u.keyCode&&n.removeSelected()},!1);wrapper.addEventListener("mousedown",d,!1);var G=document.getElementById("diigosc-select-tip");G.style.display="block";wrapper.addEventListener("mousemove",c,!1);var F,L;$(".diigosc-editpanel-btn div").bind("click",function(u){function x(){0<
$("#diigosc-savepanel").length&&$("#diigosc-savepanel").hide()}u=u.target.id;"diigosc-undo-btn"!=u&&($(".diigosc-editpanel-btn").removeClass("selected"),$(this).parent().addClass("selected"));switch(u){case "diigosc-rect-btn":x();$("#diigosc-colorpanel").show().addClass("run");$("#diigosc-triangle").css("left","15px");a(u);n.initTool="rect";Qa.changeTool(n.initTool);break;case "diigosc-round-btn":x();$("#diigosc-colorpanel").show().addClass("run");$("#diigosc-triangle").css("left","44px");a(u);n.initTool=
"ellipse";Qa.changeTool(n.initTool);break;case "diigosc-text-btn":x();$("#diigosc-colorpanel").show().addClass("run");$("#diigosc-triangle").css("left","75px");a(u);n.initTool="text";Qa.changeTool(n.initTool);break;case "diigosc-arrow-btn":x();$("#diigosc-colorpanel").show().addClass("run");$("#diigosc-triangle").css("left","105px");a(u);n.initTool="big_head_arrow";Qa.changeTool(n.initTool);break;case "diigosc-undo-btn":$("#diigosc-undo-btn").hasClass("disable")||(Qa.undo(),n.undo());break;case "diigosc-cancel-btn":n.removeSelected();
break;case "diigosc-save-btn":0<$("#diigosc-colorpanel").length&&$("#diigosc-colorpanel").hide(),$("#diigosc-savepanel").show().addClass("play")}});$("#diigosc-savepanel .diigosc-savepanel-btn").click(function(u){a(u.target.id)});$(".color-cell div").click(function(u){u=$(u.target).attr("class").substring(8);switch(u){case "red":u="#fe0000";break;case "black":u="#000000";break;case "gray":u="#7f7f7f";break;case "orange":u="#fe9800";break;case "yellow":u="#fefe00";break;case "green":u="#00FF00";break;
case "white":u="#ffffff";break;case "light-gray":u="#bfbfbf";break;case "cyan":u="#00fefe";break;case "blue":u="#0000fe";break;case "purple":u="#9800fe";break;case "pink":u="#febfca"}n.drawColor=u;Qa.changeColor(n.drawColor);$("#current-color div").css("background-color",u)});$("#fontSize .font-cell").click(function(u){u=u.target.id;$(".text-mode #fontSize .current").removeClass("current");$(this).addClass("current");switch(u){case "small":n.fontSize=14;break;case "middle":n.fontSize=24;break;case "large":n.fontSize=
36}Qa.changeFontSize(n.fontSize)})}},removeSelected:function(){document.body.removeEventListener("keydown",this.selectedKeyDown,!1);this.reInit();$("#diigosc-privatecheck").find(".op-checkbox-container").off("click");$("#diigosc-all").empty().remove();$("#diigosc-savepopup-all").empty().remove();this.editMode=!1;$("html").css("overflow","auto");$(window).unbind("scroll");$("body").removeClass("unselectable")},reInit:function(){this.editMode=!1;this.drawColor="red";this.fontSize=14;this.actions=[];
this.luTagShown=this.reTagShown=!1},diigoscDraw:function(a){function c(n){function t(){E("newLine");$('<input class="diigosc-textinput"></input>').appendTo("#diigosc-sc").css({top:G+"px",left:F+"px",width:"20px",color:f.drawColor,"font-size":f.fontSize+"px"}).focus().autoGrowInput({comfortZone:20,minWidth:20,maxWidth:maxW}).keydown(function(L){if($(this).width()+10>maxW&&48<=L.keyCode||parseInt($(this).css("top"))-startT+38>maxH&&13==L.keyCode)return!1;var u=L.target,x=L.keyCode;E(x);13==x&&(G+=18,
t());8!=x||u.value||($(u).prev().prev().focus().end().end().next().remove().end().remove(),G-=18);38==x&&$(u).prev().prev().focus();40==x&&$(u).next().next().focus();L.stopPropagation()})}var r=$("#bgcanvas").width(),w=$("#bgcanvas").height();f.saveText();var G=startT=n.y-10,F=n.x;maxW=r-(F-offsetX);maxH=w-(G-offsetY);1==textFlag&&t();2==textFlag&&(textFlag=1)}function d(n,t){function r(F,L){function u(){m.clearRect(0,0,B,D);m.beginPath();var I=B-8,J=D-8,oa=I/2*.5522848,ba=J/2*.5522848,ca=4+I,W=4+
J;I=4+I/2;J=4+J/2;m.moveTo(4,J);m.bezierCurveTo(4,J-ba,I-oa,4,I,4);m.bezierCurveTo(I+oa,4,ca,J-ba,ca,J);m.bezierCurveTo(ca,J+ba,I+oa,W,I,W);m.bezierCurveTo(I-oa,W,4,J+ba,4,J);m.closePath();m.stroke()}function x(){function I(W,sa,Ra){return[sa*Math.cos(W)-Ra*Math.sin(W),sa*Math.sin(W)+Ra*Math.cos(W)]}m.clearRect(0,0,B,D);m.beginPath();var J=w<y?4:B-4,oa=G<z?4:D-4,ba=B-J,ca=D-oa;m.moveTo(J,oa);m.lineTo(ba,ca);m.stroke();(function(W){m.beginPath();m.moveTo(W[0][0],W[0][1]);for(p in W)0<p&&m.lineTo(W[p][0],
W[p][1]);m.lineTo(W[0][0],W[0][1]);m.fill()})(function(W,sa,Ra){var Tb=[];for(p in W)Tb.push([W[p][0]+sa,W[p][1]+Ra]);return Tb}(function(W,sa){var Ra=[];for(p in W)Ra.push(I(sa,W[p][0],W[p][1]));return Ra}([[4,0],[-10,-5.5],[-10,5.5]],Math.atan2(ca-oa,ba-J)),ba,ca))}var y=F,z=L;F=Math.min(y,w)-4;L=Math.min(z,G)-4;var B=Math.abs(y-w)+8,D=Math.abs(z-G)+8;$("#draw-canvas").css({left:F+"px",top:L+"px",cursor:"crosshair"}).attr({width:B,height:D});m.strokeStyle=f.drawColor;m.fillStyle=f.drawColor;m.lineWidth=
4;switch(n){case "diigosc-rect-btn":m.clearRect(0,0,B,D);m.strokeRect(4,4,B-8,D-8);break;case "diigosc-round-btn":u();break;case "diigosc-arrow-btn":x()}}var w=t.x,G=t.y;$(this).mousemove(function(F){F.preventDefault();r(F.pageX,F.pageY)}).mouseup(function(F){$(this).unbind("mousemove  mouseup");$("#draw-canvas").unbind("mousedown");F=document.getElementById("draw-canvas");1==f.editMode&&0!=F.width*F.height&&f.enableUndo();$.Draggable(F)})}var f=this;textFlag=1;var h=document.getElementById("bgcanvas"),
k=document.getElementById("draw-canvas"),m=k.getContext("2d"),q=h.getContext("2d");h=document.getElementById("bgcanvas");offsetX=h.offsetLeft;offsetY=h.offsetTop;$("#draw-canvas").unbind("mousedown");$("#bgcanvas").unbind().click(function(n){"diigosc-text-btn"==a&&c({x:n.pageX,y:n.pageY})}).mousedown(function(n){0!=k.width*k.height?(f.saveAction({type:"draw"}),q.drawImage(k,parseInt($(k).css("left"))-offsetX,parseInt($(k).css("top"))-offsetY)):0==f.actions.length&&f.saveAction({type:"draw"});$("#draw-canvas").attr({width:0,
height:0});n={x:n.pageX,y:n.pageY};switch(a){case "diigosc-text-btn":break;default:d(a,n)}})},saveText:function(){var a=this,c=$("#diigosc-sc").find('input[class="diigosc-textinput"]');if(c.length){var d="";c.each(function(){d+=this.value});d&&(a.enableUndo(),a.saveAction({type:"draw"}),textFlag=2,c.each(function(){var f=this.value;if(f){var h=parseInt($(this).css("left")),k=parseInt($(this).css("top")),m=document.getElementById("bgcanvas").getContext("2d");m.font="bold "+a.fontSize+"px/18px Arial,Helvetica,sans-serif";
m.fillStyle=$(this).css("color");m.fillText(f,h-offsetX,k+18-offsetY)}$(this).next().remove().end().remove()}))}},undo:function(){var a=document.getElementById("draw-canvas");a.getContext("2d");var c=document.getElementById("bgcanvas").getContext("2d");0!=this.actions.length&&(0!=a.width*a.height?($(a).attr({width:0,height:0}),1==this.actions.length&&this.disableUndo()):(a=this.actions.pop(),1==this.actions.length&&this.disableUndo(),c.putImageData(a.data,0,0)))},enableUndo:function(){$("#diigosc-undo div").removeClass("disable").addClass("enable")},
disableUndo:function(){$("#diigosc-undo div").removeClass("enable").addClass("disable")},saveAction:function(a){var c=document.getElementById("bgcanvas");document.getElementById("draw-canvas").getContext("2d");var d=c.getContext("2d"),f=c.width;c=c.height;switch(a.type){case "draw":this.actions.push({type:"draw",data:d.getImageData(0,0,f,c)})}},showSavePupop:function(a,c,d){function f(){var u=$("#diigosc-lists").empty().unbind();u.append(H.dom.buildOne("option",{value:0},["Add to an Outliner"]));
u.append(H.dom.buildOne("option",{value:-5},[Array(20).join("-")]));$(H.dom.buildOne("option",{value:-2},["Create an Outliner..."])).appendTo(u);u.append(H.dom.buildOne("option",{value:-5},[Array(20).join("-")]));O(l.outliners,function(x){u.append(H.dom.buildOne("option",{value:x.id},[x.title]))});u.append(H.dom.buildOne("option",{value:-5},[Array(20).join("-")]));l.myBmLists.length&&(u.append(H.dom.buildOne("option",{value:-8},["Add to a List"])),u.append(H.dom.buildOne("option",{value:-5},[Array(20).join("-")])),
O(l.myBmLists,function(x){u.append(H.dom.buildOne("option",{value:x.id},[x.title]))}));u.append(H.dom.buildOne("option",{value:-5},[Array(20).join("-")]));$(H.dom.buildOne("option",{value:-3},["Refresh"])).appendTo(u);u.change(function(){var x=u.val();-2==x?(!0===l.permissions.createOutliner?($("#diigosc-lists-and-groups").find("select").hide(),$("#diigosc-list-add").show().find("input").focus()):($("#diigosc-list-add-tip").show(),$("#diigosc-lists-and-groups").find("select").hide()),u.val(0)):-3==
x&&(C.loadMyStuff("myGroups myBookmarkLists"),u.val(0))});u.val(0).change()}function h(){var u=$("#diigosc-groups").empty().unbind();u.append(H.dom.buildOne("option",{value:0},["Share to a Group"]));u.append(H.dom.buildOne("option",{value:-5},[Array(20).join("-")]));$(H.dom.buildOne("option",{value:-2},["Create a Group..."])).appendTo(u);u.append(H.dom.buildOne("option",{value:-5},[Array(20).join("-")]));O(l.myGroups,function(x){u.append(H.dom.buildOne("option",{value:x.name},[x.displayName]))});
u.append(H.dom.buildOne("option",{value:-5},[Array(20).join("-")]));$(H.dom.buildOne("option",{value:-2},["Create a Group..."])).appendTo(u);$(H.dom.buildOne("option",{value:-3},["Refresh"])).appendTo(u);u.change(function(){var x=u.val();-2==x?(A.openURL(A.urls.getCreateGroupURL()),u.val(-1)):-3==x&&(C.loadMyStuff("myGroups myBookmarkLists"),u.val(-1));0!=x&&-1!=x&&-2!=x&&-3!=x&&($("#diigosc-group-tag").show(),l.groupTagsDict[x]?k("group",l.groupTagsDict[x]):C.loadGroupTagsDictionary([x],function(){k("group",
l.groupTagsDict[x])}))});u.val(0).change()}function k(u,x){"recommended"==u?$("#diigosc-recommended-tag .diigo-tags-container .loading").hide():"group"==u&&($("#diigosc-group-tag .diigo-tags-container .loading").hide(),$("#diigosc-group-tag .diigo-tags-container").empty());var y=x.length;0==y&&$("#diigosc-"+u+"-tag").hide();for(var z=0;z<y;z++){var B=document.createElement("div");B.className="diigo-tag";B.title=x[z];B.textContent=x[z];$("#diigosc-"+u+"-tag .diigo-tags-container").append(B);$(B).click(function(D){D=
$(this).text();$(this).toggleClass("selected");m(D)})}}function m(u,x){var y=$("#diigosc-tag-input"),z=A.parseTags(y.val(),!0),B=$.inArray(u,z);void 0===x?0<=B?z.splice(B,1):z.push(u):x?-1==B&&z.push(u):0<=B&&z.splice(B,1);u=A.unparseTags(z);u.length&&(u+=" ");y.val(u);t(y[0]);q()}function q(){var u=$("#diigosc-tag-input"),x=A.parseTags(u.val(),!0);$("#diigosc-tag-cloud").find(".diigosc-tag-cloud-item").each(function(){var y=$(this),z=y.text();-1!=$.inArray(z,x)?y.addClass("selected"):y.removeClass("selected")});
$("#diigosc-last-used-tag .diigo-tags-container,#diigosc-recommended-tag .diigo-tags-container").find(".diigo-tag").each(function(){var y=$(this),z=y.text();-1!=$.inArray(z,x)?y.addClass("selected"):y.removeClass("selected")})}function n(u,x){document.getElementById("diigosc-tag-edit").href="https://www.diigo.com/cloud/"+l.user;if(0==l.myTagsWithCount.length){u=document.getElementById(u);var y=document.createElement("span");y.id="no-tag";y.textContent="No tags";u.appendChild(y)}else{var z=Kb(),B=
z.topTags,D=z.maxCount;y=z.a;var I=z.b,J=z.c,oa=B.length;z=document.createDocumentFragment();for(var ba=0;ba<oa;ba++){var ca=document.createElement("a");ca.className=x;ca.href="#";ca.innerText=B[ba].name;var W=B[ba].count;W==D&&(ca.style.fontSize="20px",ca.style.fontWeight="bold");y.forEach(function(sa){W==sa&&(ca.style.fontSize="18px",ca.style.fontWeight="bold")});I.forEach(function(sa){W==sa&&(ca.style.fontSize="16px",ca.style.fontWeight="bold")});J.forEach(function(sa){W==sa&&(ca.style.fontSize=
"16px",ca.style.fontWeight="regular")});z.appendChild(ca);ca.addEventListener("click",function(sa){sa.preventDefault();m(this.innerText)})}u=document.getElementById(u);u.appendChild(z)}}function t(u){var x=u.value.length;setTimeout(function(){u.focus();if(u.createTextRange){var y=u.createTextRange();y.move("character",x);y.select()}else 0<=u.selectionStart&&(u.focus(),u.setSelectionRange(x,x))},13)}var r=this;chrome.runtime.getURL("");if("screenshot"==a){var w=document.getElementById("bgcanvas"),
G=document.getElementById("draw-canvas");G.getContext("2d");var F=w.getContext("2d");w=$("#bgcanvas").offset();offsetX=w.left;offsetY=w.top;w=document.getElementById("bgcanvas");G=document.getElementById("draw-canvas");r.saveText();0!=G.width*G.height&&(r.saveAction({type:"draw"}),F.drawImage(G,parseInt($(G).css("left"))-offsetX,parseInt($(G).css("top"))-offsetY),$(G).attr({width:0,height:0}))}na.updateLists=f;$("#diigosc-sc").hide();if(0<$("#diigosc-savepopup-all").length)$("#diigosc-savepopup-all").show(),
$("#diigosc-savepopup").fadeIn();else{var L=document.createElement("div");L.id="diigosc-savepopup-all";$.parseHTML('<div id="diigosc-savepopup-wrapper"></div><div id="diigosc-savepopup"style="display:none;"><div id="diigosc-content"><div id="diigosc-content-top"class="_dragHandle"><div id="diigosc-icon"></div>Save to Diigo</div><div id="diigosc-content-middle"><div id="diigosc-container"><div id="diigosc-thumbnail"><img src=""><div id="diigosc-reedit"></div></div><div id="diigosc-forms"><div id="diigosc-title"><input type="text"id="diigosc-title-input"><span id="diigosc-tag-permission"></span></div><div id="diigosc-tags"><div id="diigosc-tag-input-wrapper"><div id="diigosc-tag-input-dropdown"></div><input id="diigosc-tag-input"type="text"placeholder="Input or select tags"></div><div id="diigosc-tag-cloud"><div>Select from your top 100 tags:</div><div id="diigosc-tag-cloud-container"></div><div><a id="diigosc-tag-edit"href=""target="_blank">Edit tags>></a></div></div></div><div id="diigosc-last-used-tag"><div title="Click to select all"id="diigosc-lu-tag"class="tagListHeader">Recent Use:</div><div class="diigo-tags-container"></div></div><div id="diigosc-recommended-tag"><div id="diigosc-re-tag"class="tagListHeader">Recommended:</div><div class="diigo-tags-container"><div class="loading"></div></div></div><div id="diigosc-group-tag"><div title="Click to select all"id="diigosc-gr-tag"class="tagListHeader">Group dictionary:</div><div class="diigo-tags-container"><div class="loading"></div></div></div><div id="diigosc-lists-and-groups"><div id="diigosc-list-add-tip">You have reach the limit of outliner. <a href="" id="diigosc-w-cancel">Cancel</a><a href="" id="diigosc-w-upgrade">Upgrade</a></div><div id="diigosc-list-add"><div class="diigo-alert-tip"><span>Name existed!</span><div class="diigo-alert-tip-arrow"></div></div><input type="text"id="diigosc-list-addInput"><div id="diigosc-list-addBtn"><span class="label">Create</span><span class="spinner"></span></div><a id="diigosc-list-addCancel">Cancel</a></div><select id="diigosc-lists"style="width:146px"><option value="-1">Add to a List</option></select><select id="diigosc-groups"style="width:146px"><option value="-1">Share to a Group</option></select></div></div></div></div><div id="diigosc-content-bottom"><div id="diigosc-privatecheck"><div class="op-checkbox-container"title="Make this image private"><div class="op-checkbox"></div><div class="op-label">Private</div></div></div><a href="javascript:void(0)">cancel</a><div id="diigosc-saveBtn">Save</div></div></div></div></div>').forEach(function(u){L.appendChild(u)});
document.body.parentNode.appendChild(L);F=[];l.myTagsWithCount.sort(function(u,x){return u.count<x.count?1:-1});w=l.myTagsWithCount.length;for(G=0;G<w;G++)F[G]=l.myTagsWithCount[G].name;E(F);new Gb("#diigosc-tag-input",{resultsClass:"diigosc ac_results2",data:F,mode:"multiple",multipleSeparator:" ,",onItemSelect:function(){aa.clickedOn=!0},id:"diigsc-ac"});n("diigosc-tag-cloud-container","diigosc-tag-cloud-item");$("#diigosc-savepopup-all").show();$("#diigosc-savepopup-wrapper").css("width",document.documentElement.scrollWidth+
"px").css("height",document.documentElement.scrollHeight+"px");$("#diigosc-savepopup").fadeIn("fast")}F=(document.documentElement.clientWidth-514)/2;$("#diigosc-savepopup").css("left",F+"px");F=document.getElementById("diigosc-savepopup");$.Draggable(F,{handle:"._dragHandle"});$("#diigosc-savepopup").css("top",document.documentElement.scrollTop+"px");F=document.documentElement.scrollTop+150;$("#diigosc-savepopup").animate({top:F+"px",opacity:1},300);$("#diigosc-thumbnail img").attr("src",c);(function(){var u=
document.title,x=window.location.href;$("#diigosc-title-input").val(u);T.send({name:"initialData"},function(y){"true"==y.preloadedPrefs["prefs.bookmark.privateByDefault"]&&$("#diigosc-privatecheck").find(".op-checkbox-container").addClass("checked")});$("#diigosc-privatecheck").find(".op-checkbox-container").on("click",function(){$(this).toggleClass("checked")});$("#diigosc-lu-tag").on("click",function(){$("#diigosc-last-used-tag").find(".diigo-tag").each(function(){m($(this).addClass("selected").text(),
!0)})});f();h();R.getUserData("tagsUsedLastTime",function(y){y=y?JSON.parse(y):[];0==r.luTagShown&&(k("last-used",y),r.luTagShown=!0)});0==r.reTagShown&&(l.recommendedTagsLoaded?(k("recommended",l.recommendedTags),r.reTagShown=!0):C.loadRecommendedTags(x,u,function(){k("recommended",l.recommendedTags);r.reTagShown=!0}))})();"image"==a&&$("#diigosc-reedit").hide();$("#diigosc-title-input").blur(function(u){0==$(this).val().length&&$(this).val("Title is needed!").css("color","red")}).focus(function(u){"Title is needed!"==
$(this).val()&&$(this).val("").css("color","black")});$("#diigosc-tag-input").focus(function(){$(this).parent().addClass("active")}).blur(function(){$(this).parent().removeClass("active")}).bind("input",q);$("#diigosc-tag-input-dropdown").click(function(u){u.stopPropagation();$(this).parent().toggleClass("opened")});$("#diigosc-tag-cloud").click(function(u){u.stopPropagation()});$(document).bind("click",function(u){$("#diigosc-tag-input-wrapper").removeClass("opened")});$("#diigosc-content-bottom").find("a").click(function(){r.removeSelected()});
$("#diigosc-reedit").click(function(){$("#diigosc-savepopup-all,#diigosc-savepopup").hide();$("#diigosc-sc").fadeIn();$("#diigosc-tag-input-dropdown").unbind("click");$("#diigosc-privatecheck").find(".op-checkbox-container").off("click")});$("#diigosc-lu-tag").click(function(){for(var u=$("#diigosc-last-used-tag").find(".diigo-tags-container").find(".diigo-tag"),x=u.length,y=0;y<x;y++)$("#myTags").tagit("createTag",u[y].title)});$("#diigosc-re-tag").click(function(){for(var u=$("#diigosc-recommended-tag").find(".diigo-tags-container").find(".diigo-tag"),
x=u.length,y=0;y<x;y++)$("#myTags").tagit("createTag",u[y].title)});$("#diigosc-list-addInput").on("focus",function(){$("#diigosc-list-add .diigo-alert-tip").hide()});$("#diigosc-w-upgrade").on("click",function(u){u.preventDefault();window.open("https://www.diigo.com/premium");$("#diigosc-list-add-tip").hide();$("#diigosc-lists-and-groups").find("select").show()});$("#diigosc-w-cancel").on("click",function(u){u.preventDefault();$("#diigosc-list-add-tip").hide();$("#diigosc-lists-and-groups").find("select").show()});
$("#diigosc-list-addBtn").on("click",function(){if(!$(this).hasClass("processing")){var u=$("#diigosc-list-addInput").val(),x=$("#diigosc-list-add .diigo-alert-tip"),y=[],z=l.myBmLists.length,B;for(B=0;B<z;B++)y.push(l.myBmLists[B].title);u.match(/^\s*$/)?x.show().find("span").text("Input a name"):-1!==$.inArray(u,y)?x.show().find("span").text("Name existed !"):($(this).addClass("processing"),C.createList(u))}});$("#diigosc-list-addCancel").on("click",function(){$("#diigosc-list-add .diigo-alert-tip").hide();
$("#diigosc-list-add").hide();$("#diigosc-lists-and-groups").find("select").show();$("#diigosc-list-addInput").val("")});$("#diigosc-saveBtn").click(function(u){var x=$("#diigosc-title-input").val();""==x&&$("#diigosc-title-input").trigger("blur");if(0!=x.length&&"Title is needed!"!=x){var y=A.parseTags($("#diigosc-tag-input").val(),!0);0<y.length&&R.setUserData({tagsUsedLastTime:JSON.stringify(y.slice(0,8))});var z=$("#diigosc-lists").val(),B=$("#diigosc-groups").val();u=window.location.href;"undefined"!==
typeof DiigoData&&(u=DiigoData.bookmark.url);var D=document.title,I=$("#diigosc-privatecheck").find(".op-checkbox-container").hasClass("checked")?2:0;x={dataURL:"screenshot"==a?$("#diigosc-thumbnail").find("img").attr("src"):c,title:x,tags:y,mode:I,src_url:u,src_title:D,single_item:!0,list:z,groups:B};E(x);"screenshot"==a?C.uploadImage(x,"capture",!1,u,{},"png","",!1):C.uploadImage(x,"image",!1,u,{},d,"",!1);Ba(chrome.runtime.id);qa();Q.init();Q.notifyWait(chrome.i18n.getMessage("uploadimage_uploading"),
{timeout:0});r.reInit();r.removeSelected()}})},attachToBookmark:function(a){var c=this;if(!a){var d=document.getElementById("bgcanvas"),f=document.getElementById("draw-canvas");f.getContext("2d");var h=d.getContext("2d");d=$("#bgcanvas").offset();offsetX=d.left;offsetY=d.top;d=document.getElementById("bgcanvas");f=document.getElementById("draw-canvas");c.saveText();0!=f.width*f.height&&(c.saveAction({type:"draw"}),h.drawImage(f,parseInt($(f).css("left"))-offsetX,parseInt($(f).css("top"))-offsetY),
$(f).attr({width:0,height:0}))}h=l.bookmark.title?l.bookmark.title:document.title;var k=l.bookmark.url?l.bookmark.url:window.location.href;0<$(".displayBookmark").length&&(d=$("iframe[name=article]").contents()[0],k=$(d).find(".original_link a").attr("href"));var m={dataURL:a,title:h,tags:l.bookmark.tags?l.bookmark.tags:[],mode:2,src_url:k,src_title:l.bookmark.title?l.bookmark.title:document.title,single_item:!1};if(0<l.bookmark.groups.length){var q=[];l.bookmark.groups.forEach(function(n){q.push(n.name)});
m.groups=q}chrome.storage.local.get(null,function(n){var t=$(".displayPDF").find("iframe").contents()[0];if(t){if($(t).find("#extension-data")){var r=$(t).find("#extension-data").attr("saved"),w=$(t).find("#extension-data").attr("url");t=t.title;"true"==r&&(m.src_url=w.replace(/preview/,"www"),m.src_title=m.title=t,C.uploadImage(m,"capture",!1,k,{},"png","",!0))}}else"undefined"===typeof DiigoData||DiigoData.bookmark.saved?("undefined"!==typeof DiigoData&&(m.src_url=DiigoData.bookmark.server_url),
!0===n.researchMode&&!1===l.bookmark.saved?C.uploadImage(m,"capture",!1,k,{},"png","",!0,n.researchModeData):C.uploadImage(m,"capture",!1,k,{},"png","",!0)):diigoNetwork.pdfCreateItem({},DiigoData,function(){DiigoData&&(m.src_url=DiigoData.bookmark.server_url);!0===n.researchMode&&!1===l.bookmark.saved?C.uploadImage(m,"capture",!1,k,{},"png","",!0,n.researchModeData):C.uploadImage(m,"capture",!1,k,{},"png","",!0)});Ba(chrome.runtime.id);qa();Q.init();Q.notifyWait(chrome.i18n.getMessage("uploadimage_uploading"),
{timeout:0});c.reInit();c.removeSelected()})}};chrome.runtime.onMessage.addListener(function(a,c,d){if("dataURL"==a.name){var f=a.cw,h=a.ch,k=a.ct,m=a.cl;$("#bgcanvas").attr("width",f);$("#bgcanvas").attr("height",h);$("#bgcanvas").css("top",k+"px");$("#bgcanvas").css("left",m+"px");na.editMode=!0;var q=document.getElementById("bgcanvas"),n=q.getContext("2d"),t=document.createElement("img");document.getElementById("diigolet_screenshot_center");var r=k-document.documentElement.scrollTop,w=m-document.documentElement.scrollLeft;
t.onload=function(){n.drawImage(t,w*window.devicePixelRatio,r*window.devicePixelRatio,f*window.devicePixelRatio,h*window.devicePixelRatio,0,0,f,h);$("#diigolet_screenshot_center").hide();$("#diigosc-editpanel").show();$("#diigolet_screenshot_wrapper>div").css("background-color","rgba(0,0,0,0.7)");var G=q.toDataURL();Pa({type:"init",dataUrl:G,initTool:na.initTool});$("#diigo-screenshot-frame").css({top:k+"px",left:m+"px",width:f+"px",height:h+"px"}).show();"diigosc-tag-btn"==a.target?na.showSavePupop("screenshot",
G):"diigosc-attach-btn"==a.target&&na.attachToBookmark(G)};t.src=a.dataURL}});window.addEventListener("message",function(a){switch(a.data.type){case "canUndo":a.data.canUndo?na.enableUndo():na.disableUndo();break;case "saveWithTag":na.showSavePupop("screenshot",a.data.dataURL);break;case "saveAttach":na.attachToBookmark(a.data.dataURL)}});var Qa={changeTool:function(a){Pa({type:"changeTool",tool:a})},changeColor:function(a){Pa({type:"changeColor",color:a})},changeFontSize:function(a){Pa({type:"changeFontSize",
size:a})},undo:function(){Pa({type:"undo"})}};jQuery.Draggable=function(a,c){function d(r){m=!1;k(document).bind("mousemove",f).bind("mouseup",h);n=r.pageX;t=r.pageY;return!1}function f(r){m||q.beforeDrag(r);if(!r.undraggable){m=!0;var w=parseInt(a.css("left")),G=parseInt(a.css("top")),F=r.pageX-n,L=r.pageY-t;"y"==q.axis?F=0:"x"==q.axis&&(L=0);a.css({left:w+F,top:G+L});q.onDrag(w,G,F,L);n=r.pageX;t=r.pageY;return!1}}function h(r){k(document).unbind("mousemove",f).unbind("mouseup",h);return m?(q.afterDrag(r),
!1):!0}var k=jQuery,m=!1;a=this.ele=k(a);a[0]._draggable&&a[0]._draggable.destroy();a[0]._draggable=this;var q=this.options=k.extend({handle:"",cursor:"move",axis:"",onDrag:function(){return!0},beforeDrag:function(){},afterDrag:function(){}},c||{});q.handle=q.handle?k(q.handle,a):a;q.handle.css({cursor:q.cursor});var n,t;this.destroy=function(){q.handle.unbind("mousedown",d)};q.handle.bind("mousedown",d)};(function(a){a.fn.autoGrowInput=function(c){c=a.extend({maxWidth:1E3,minWidth:0,comfortZone:70},
c);this.filter("input:text").each(function(){var d=c.minWidth||a(this).width(),f="",h=a(this),k=a("<tester/>").css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:h.css("fontSize"),fontFamily:h.css("fontFamily"),fontWeight:h.css("fontWeight"),letterSpacing:h.css("letterSpacing"),whiteSpace:"nowrap"});k.insertAfter(h);a(this).bind("keyup keydown blur update",function(){if(f!==(f=h.val())){var m=f.replace(/&/g,"&amp;").replace(/\s/g,"&nbsp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");
k.html(m);m=k.width();m=m+c.comfortZone>=d?m+c.comfortZone:d;var q=h.width();(m<q&&m>=d||m>d&&m<c.maxWidth)&&h.width(m)}})});return this}})(jQuery);var Aa={diigoImageClipMode:!1,imageSrc:"",shown:!1,init:function(){this.create()},create:function(){var a=this;if(!(0<$("#diigo-image-clipper").length)){var c=document.createElement("div");c.id="diigo-image-clipper";c.innerHTML='<div id="diigo-image-menu"><div id="diigo-logo"></div><div id="diigo-save-and-tag"class="diigo-action" title="Tag as a stand-alone item"></div>\x3c!----\x3e<div id="diigo-attach"class="diigo-action" title="Attach it to the page URL"></div></div>';
document.body.parentNode.appendChild(c);$(c).css("position","absolute");a.bindMouseOver();$("#diigo-save-and-tag").click(function(){a.saveAndTagOnClick()});$("#diigo-attach").click(function(){a.attachToBookmarkOnClick()});var d;$("#diigo-image-menu").bind("mouseenter",function(){null!=d&&clearTimeout(d);$("#diigo-image-menu").animate({width:"63px"},200)}).bind("mouseleave",function(f){d=setTimeout(function(){$("#diigo-image-menu").animate({width:"18px"},200)},500)})}},bindMouseOver:function(){var a=
this,c;$(document).bind("mousemove",function(d){if("IMG"==d.target.tagName){if(a.diigoImageClipMode){a.imageSrc=d.target.src;d=d.target;var f=$(d).offset().left,h=$(d).offset().top,k=$(d).width(),m=$(d).height();0==a.shown&&(200<=k||200<=m)&&(c=h+m>document.body.scrollTop+window.innerHeight?setTimeout(function(){$("#diigo-image-clipper").css("top",h+"px").css("left",f+k-22+"px").show()},350):setTimeout(function(){$("#diigo-image-clipper").css("top",h+m-24+"px").css("left",f+k-22+"px").show()},350),
a.shown=!0)}}else if("AREA"==d.target.tagName){if(d=$('img[usemap="#'+d.target.parentNode.name+'"]'),a.imageSrc=d[0].src,f=d.offset().left,h=d.offset().top,k=d.width(),m=d.height(),200<=k||200<=m)h+m>document.body.scrollTop+window.innerHeight?$("#diigo-image-clipper").css("top",h+"px").css("left",f+k-22+"px").show():$("#diigo-image-clipper").css("top",h+m-24+"px").css("left",f+k-22+"px").show()}else"diigo-save-and-tag"!=d.target.id&&"diigo-attach"!=d.target.id&&"diigo-image-menu"!=d.target.id&&"diigo-logo"!=
d.target.id&&(null!=c&&clearTimeout(c),1==a.shown&&($("#diigo-image-menu").css("width","18px"),$("#diigo-image-clipper").hide(),a.shown=!1))})},saveAndTagOnClick:function(){ua()&&("undefined"===typeof l.permissions.imagePermission||l.permissions.imagePermission.imagePermission?chrome.runtime.sendMessage({name:"saveImageToDiigo",details:{srcUrl:Aa.imageSrc},Type:"tag"}):(ha.init(),ha.show("image")))},attachToBookmarkOnClick:function(){ua()&&("undefined"===typeof l.permissions.imagePermission||l.permissions.imagePermission.imagePermission?
chrome.runtime.sendMessage({name:"saveImageToDiigo",details:{srcUrl:Aa.imageSrc},Type:"attach"}):(ha.init(),ha.show("image")))}};(function(a){var c,d;a.fn.Gtooltip=function(f){var h={fontSize:12,bgColor:"black",fColor:"white",position:"bottom",content:""};return this.each(function(){function k(){t.text(q.data("gtooltip"));var w=q.offset().left;var G=q.offset().top,F=q.width(),L=q.height(),u=n.width(),x=n.height(),y=navigator.userAgent.toLowerCase();y=-1!=y.indexOf("macintosh")||-1!=y.indexOf("mac os x")||
-1!=y.indexOf("linux")?!0:!1;switch(m.position){case "bottom":var z=y?-9:-10;var B=parseInt((u+2)/2);var D=w-parseInt((u+14-F)/2);var I=G+L+5;break;case "top":z=y?22:23,B=parseInt((u+2)/2),D=w-parseInt((u+14-F)/2),I=G-x-15}0>=D?(D=w,B=(F-10)/2):D>=window.innerWidth-u&&(D=w+F-u-12,B=w-D+(F-10)/2);w=z;n.css("left",D).css("top",I);r.css({left:B,top:w});"top"==m.position?r.css("-webkit-transform","rotate(180deg)"):"bottom"==m.position&&r.css("-webkit-transform","rotate(360deg)");n.addClass("show")}var m=
a.extend(h,f||{}),q=a(this);if(0==a("#gtooltip").length){var n=a('<div id="gtooltip"></div>').appendTo(a("body"));var t=a('<div id="gtooltip-content"></div>').appendTo(n);var r=a('<div id="gtooltip-arrow"></div>').appendTo(n)}else n=a("#gtooltip"),t=a("#gtooltip-content"),r=a("#gtooltip-arrow");q.hover(function(){n.hasClass("show")?(clearTimeout(d),k()):c=setTimeout(function(){k()},350)},function(){null!=c&&clearTimeout(c);d=setTimeout(function(){n.removeClass("show")},100)}).on("click",function(){null!=
c&&clearTimeout(c);n.hasClass("show")&&n.removeClass("show")})})}})(jQuery);(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):"undefined"!==typeof module&&module.exports?module.exports=a(require("jquery")):a(jQuery)})(function(a){function c(h){return!h.nodeName||-1!==a.inArray(h.nodeName.toLowerCase(),["iframe","#document","html","body"])}function d(h){return a.isFunction(h)||a.isPlainObject(h)?h:{top:h,left:h}}var f=a.scrollTo=function(h,k,m){return a(window).scrollTo(h,k,
m)};f.defaults={axis:"xy",duration:0,limit:!0};a.fn.scrollTo=function(h,k,m){"object"===typeof k&&(m=k,k=0);"function"===typeof m&&(m={onAfter:m});"max"===h&&(h=9E9);m=a.extend({},f.defaults,m);k=k||m.duration;var q=m.queue&&1<m.axis.length;q&&(k/=2);m.offset=d(m.offset);m.over=d(m.over);return this.each(function(){function n(x){var y=a.extend({},m,{queue:!0,duration:k,complete:x&&function(){x.call(r,G,m)}});w.animate(F,y)}if(null!==h){var t=c(this),r=t?this.contentWindow||window:this,w=a(r),G=h,
F={};switch(typeof G){case "number":case "string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(G)){G=d(G);break}G=t?a(G):a(G,r);case "object":if(0===G.length)return;if(G.is||G.style)var L=(G=a(G)).offset()}var u=a.isFunction(m.offset)&&m.offset(r,G)||m.offset;a.each(m.axis.split(""),function(x,y){var z="x"===y?"Left":"Top",B=z.toLowerCase(),D="scroll"+z,I=w[D](),J=f.max(r,y);L?(F[D]=L[B]+(t?0:I-w.offset()[B]),m.margin&&(F[D]-=parseInt(G.css("margin"+z),10)||0,F[D]-=parseInt(G.css("border"+z+"Width"),10)||
0),F[D]+=u[B]||0,m.over[B]&&(F[D]+=G["x"===y?"width":"height"]()*m.over[B])):(y=G[B],F[D]=y.slice&&"%"===y.slice(-1)?parseFloat(y)/100*J:y);m.limit&&/^\d+$/.test(F[D])&&(F[D]=0>=F[D]?0:Math.min(F[D],J));!x&&1<m.axis.length&&(I===F[D]?F={}:q&&(n(m.onAfterFirst),F={}))});n(m.onAfter)}})};f.max=function(h,k){var m="x"===k?"Width":"Height";k="scroll"+m;if(!c(h))return h[k]-a(h)[m.toLowerCase()]();m="client"+m;var q=h.ownerDocument||h.document;h=q.documentElement;q=q.body;return Math.max(h[k],q[k])-Math.min(h[m],
q[m])};a.Tween.propHooks.scrollLeft=a.Tween.propHooks.scrollTop={get:function(h){return a(h.elem)[h.prop]()},set:function(h){var k=this.get(h);if(h.options.interrupt&&h._last&&h._last!==k)return a(h.elem).stop();var m=Math.round(h.now);k!==m&&(a(h.elem)[h.prop](m),h._last=this.get(h))}};return f});(function(a,c){a.fn.scrollmarker=function(d){return this.each(function(){new a.scrollmarker(this,d)})};a.scrollmarker=function(d,f){this.options=f||{};this.marker=null;this.place=a(d);this.place.data("scrollmarker",
this);this.init()};a.scrollmarker.fn=a.scrollmarker.prototype={scrollmarker:"0.0.1"};a.scrollmarker.fn.extend=a.scrollmarker.extend=a.extend;a.scrollmarker.fn.extend({init:function(){var d=this,f=this.place.attr("class").match(/id_([\w]+)/)[0];0!=a("#"+f).length&&a("#"+f).remove();this.marker=a('<div class="diigo-scrollmarker" title="Diigo highlight marker"><div class="inner"></div></div>').attr("id",f).appendTo(a("body")).click(function(){d.locate()}).addClass(this.options.markerClass||this.place.data("scrollmarker-class"));
this.place.hasClass("blue")?this.marker.addClass("blue"):this.place.hasClass("green")?this.marker.addClass("green"):this.place.hasClass("pink")?this.marker.addClass("pink"):this.marker.addClass("yellow");a(window).resize(function(){d.position()});this.position()},position:function(){var d=this.place.offset().top;this.marker.height();var f=a(document).height(),h=a(window).height();navigator.userAgent.toLowerCase();-1<navigator.platform.indexOf("Mac")?(d=d/f*h,f=16):(d=d/f*(h-34)+17,f=0);50>d&&(d=50);
this.marker.css({position:"fixed",top:d,right:f})},locate:function(){var d=this;a(document).scrollTo(this.place.offset().top-50,300,function(){var f=d.place[0].className.match(/(id_.*)\stype/)[1];a("."+f).addClass("diigolet-highlight-selected");setTimeout(function(){a("."+f).removeClass("diigolet-highlight-selected")},800)})},remove:function(){this.marker.remove();delete this.marker;this.place.data("scrollmarker",null);delete this.place}})})(jQuery);var wb=function(){return{init:function(a,c){if(!0!==
a.attributes["data-autoTextarea"]){var d=this;this.minHeight=parseFloat(getComputedStyle(a).height);0!=!!this.minHeight&&(c&&(this.maxHeight=c),a.addEventListener("input",function(){d.adjustHeight(a,c)}),a.addEventListener("propertychange",function(){d.adjustHeight(a,c)}),a.addEventListener("focus",function(){d.adjustHeight(a,c)}),a.attributes["data-autoTextarea"]=!0)}},adjustHeight:function(a,c){"undefined"==typeof c&&(c=this.maxHeight);var d=parseFloat(getComputedStyle(a).paddingTop)+parseFloat(getComputedStyle(a).paddingBottom);
a._length!==a.value.length&&(a._length=a.value.length,a.style.height=this.minHeight+"px",a.scrollHeight>this.minHeight&&(c&&a.scrollHeight>c?(c-=d,a.style.overflowY="auto"):(c=a.scrollHeight-d,a.style.overflowY="hidden"),a.style.height=c+"px"))}}}(),cc=function(a){return{enabled:!1,init:function(){var c=this;c.create();c.textarea=document.getElementById("diigolet-highlight-share-textarea");a.init(c.textarea,500);$("#diigolet-highlight-share-close").on("click",function(){c.hide()});$("#diigolet-highlight-footer").on("click",
"a",function(d){if(c.enable)if(d=d.target.id,"diigolet-highlight-share-copybtn"===d)d=c.editor.val(),A.Messenger.send({name:"copy",details:{text:d}}),c.tip.addClass("show"),setTimeout(function(){c.tip.removeClass("show")},1500);else if("diigolet-highlight-share-cancelbtn"===d)c.hide();else if("diigolet-highlight-share-twitter"===d)T.send({name:"openWindow",details:{url:"https://twitter.com/intent/tweet?text="+encodeURIComponent(c.editor.val())+" @diigo",name:"sharer",features:"toolbar=1,status=0,resizable=1,scrollbars=1,width=700,height=453"}});
else if("diigolet-highlight-share-facebook"===d){d=encodeURIComponent(document.title);var f=encodeURIComponent(c.ann.prettyTxt),h=encodeURIComponent(c.url);T.send({name:"openWindow",details:{url:"https://www.facebook.com/sharer.php?s=100&p[title]="+d+'&p[summary]="'+f+'"&p[url]='+h+"&p[images][0]=https://www.diigo.com/images/v6/logo.png",name:"sharer",features:"toolbar=1,status=0,resizable=1,scrollbars=1,width=700,height=453"}})}});$("#diigolet-highlight-share-top").find(".diigolet-question-mark").hover(function(){$(this).find(".diigolet-question-mark-tip").fadeIn()},
function(){$(this).find(".diigolet-question-mark-tip").fadeOut()})},create:function(){this.j=$('<div id="diigolet-highlight-share" class="diigolet"><div id="diigolet-highlight-share-top" class="_dragHandle"><span>Link to this highlight</span><b class="diigolet-question-mark"><b class="diigolet-question-mark-tip">The special link below will take people straight to this highlight.\n          </b></b\n        >\x3c!--<div id="diigolet-highlight-share-close"></div>--\x3e</div><div id="diigolet-highlight-container"><div id="diigolet-highlight-main"><textarea name="diigolet-highlight-share" id="diigolet-highlight-share-textarea"></textarea></div><div id="diigolet-highlight-footer" class="clearfloat"><a href="javascript:void(0)" id="diigolet-highlight-share-copybtn">Copy</a\n          ><a href="javascript:void(0)" id="diigolet-highlight-share-cancelbtn">Cancel</a\n          ><a href="javascript:void(0)" id="diigolet-highlight-share-twitter" class="diigolet-highlight-social-btn" title="share to twitter"></a><a href="javascript:void(0)" id="diigolet-highlight-share-facebook" class="diigolet-highlight-social-btn" title="share to facebook"></a><span id="diigolet-highlight-share-copySuccess">Copied successfully!</span\n          ></div></div></div>\n').eq(0).appendTo(document.body);
this.editor=this.j.find("#diigolet-highlight-share-textarea");this.tip=this.j.find("#diigolet-highlight-share-copySuccess");var c=document.getElementById("diigolet-highlight-share");$.Draggable(c,{handle:"._dragHandle"})},show:function(c,d,f){var h=this;h.ann=c;this.j||h.init();h.j.css({top:f,left:d});h.j.addClass("show");h.disable();C.makeAnnotatedLinkWithHighlight(l.bookmark.url,3,c.id,function(k){h.build(c.prettyTxt,k.url)})},build:function(c,d){this.enable();this.url=d;content='"'+c+'"\n '+d;
this.j.find("#diigolet-highlight-share-textarea").val(content);a.adjustHeight(this.textarea)},disable:function(){this.enabled=!1;this.j.find("#diigolet-highlight-share-textarea").val("Loading......").prop("disabled",!0)},enable:function(){this.enabled=!0;this.j.find("#diigolet-highlight-share-textarea").prop("disabled",!1)},hide:function(){this.j.removeClass("show")}}}(wb),Rb={j:null,k:null,init:function(){var a=this;this.j=$('<div id="diigo-orphanHighlight"><div id="diigo-orphanHighlight-top" class="_dragHandle"><span\n          >The current page no longer contains the following highlights</span\n        >\x3c!--<b class="diigolet-question-mark"><b class="diigolet-question-mark-tip">Even if the page you did highlight before has changed, you can still see your highlights.\n        </b></b>--\x3e<div id="diigo-orphanHighlight-close"></div></div><div id="diigo-orphanHighlight-main"><div id="diigo-orphanHighlight-notification">Added to clipboard</div><div id="diigo-orphanHighlight-box" class="diigo-customize-scrollbar"></div></div></div>\n').appendTo($("body")).hide();
this.k=$('<div id="diigo-orphanHighlight-btn" title="Orphan highlights"></div>').appendTo($("body")).on("click",function(){a.show()});for(var c=l.orphanHighlights,d=0;d<c.length;d++)a.add(c[d]);$("#diigo-orphanHighlight-close").on("click",function(){a.hide()});new $.Draggable(a.j,{handle:"._dragHandle"})},add:function(a){var c=$('<div class="diigo-orphanHighlight-item diigo-'+a.extra.color+'"><span class="diigo-orphanHighlight-item-content"></span><div class="diigo-orphanHighlight-item-copy" title="Copy this highlight">Copy</div></div>');
c.find(".diigo-orphanHighlight-item-content").html(a.content);c.appendTo($("#diigo-orphanHighlight-box"));c.find(".diigo-orphanHighlight-item-copy").on("click",function(){var d=$(this).parent().find(".diigo-orphanHighlight-item-content").text();A.Messenger.send({name:"copy",details:{text:d}});$("#diigo-orphanHighlight-notification").fadeIn().delay(1E3).fadeOut()});$("#diigo-orphanHighlight-top").find(".diigolet-question-mark").hover(function(){$(this).find(".diigolet-question-mark-tip").fadeIn()},
function(){$(this).find(".diigolet-question-mark-tip").fadeOut()})},show:function(){this.j.css({left:$(window).width()-this.j.outerWidth()-10+"px",top:"78px"});this.j.show()},hide:function(){this.j.hide()}},fa={j:null,k:null,shown:!1,init:function(){var a=this;this.j=$('<div id="diigo-annotationList"><div id="diigo-annotationList-top" class="_dragHandle"><b></b><span>Annotations</span><div id="diigo-annotationList-close"></div></div><div id="diigo-annotationList-main"><div id="diigo-annotationList-notification">Added to clipboard</div><div id="diigo-annotationList-box" class="diigo-customize-scrollbar"></div></div><div id="diigo-annotationList-toolbar"><span\n          ><b class="diigo-orphan-warning"></b> Some highlighted text now\n          missing on this page.</span\n        ><a id="diigo-annotationList-copyall" href="#">Copy all</a></div></div>\n').appendTo($("body")).hide();
for(var c=l.annotations,d=0;d<c.length;d++)a.add(c[d]);a.updatecontent();0===l.orphanHighlights.length&&$("#diigo-annotationList-toolbar").find("span").toggle(0<l.orphanHighlights.length);$("#diigo-annotationList-close").on("click",function(){a.hide()});$("#diigo-annotationList-copyall").on("click",function(f){f.preventDefault();var h=A.AnnotationFormatter.format({mode:1,onlyPrivate:!0});C.makeAnnotatedLink(l.bookmark.url,3,function(k){k&&k.url&&A.Messenger.send({name:"copy",details:{html:'"'+h+'"\n '+
k.url}})});$("#diigo-annotationList-notification").fadeIn().delay(1E3).fadeOut()});new $.Draggable(a.j,{handle:"._dragHandle"})},add:function(a){function c(k){var m=$(".id_"+k)[0];$(document).scrollTo($(m).offset().top-50,300,function(){$(m).addClass("diigolet-highlight-selected");setTimeout(function(){$(m).removeClass("diigolet-highlight-selected")},800)})}var d=null;if(0==a.onlyInGroup&&a.user==l.user){$("#diigo-annotationList-noItem").remove();if(0==a.type){d=a.extra.color;d=$('<div class="diigo-annotationList-item diigo-'+
d+'" data-ann-id="'+a.id+'"><div class="diigo-annotationList-highlight"><span class="diigo-annotationList-item-content"></span><div class="diigo-annotationList-item-action"><div class="diigo-annotationList-item-copy diigo-annotationList-item-btn" title="Copy this highlight">Copy</div><div class="diigo-annotationList-item-delete diigo-annotationList-item-btn" title="Delete this highlight">Delete</div></div></div><div class="diigo-annotationList-commentContainer"></div></div>');d.find(".diigo-annotationList-item-content").text(la.html2txt_pretty(a.content));
console.log(la.html2txt_pretty(a.content));this.isOrphanHighlight(a)&&(d.addClass("diigo-orphan"),d.append('<div class="diigo-annotationList-orphan-warning"></div>'));if(a.comments.length){var f=d.find(".diigo-annotationList-commentContainer");a.comments.forEach(function(k,m,q){$('<div class="diigo-annotationList-commentItem" data-cid="'+k.id+'">'+k.content+"</div>").appendTo(f)});d.append(f)}d.appendTo($("#diigo-annotationList-box"));d.find(".diigo-annotationList-item-copy").on("click",function(k){k.stopPropagation();
var m=$(this).parent().parent().find(".diigo-annotationList-item-content").text();$(this).parent().parent().find(".diigo-annotationList-commentItem").each(function(){m+="\n"+$(this).text()});C.makeAnnotatedLink(l.bookmark.url,3,function(q){q&&q.url&&A.Messenger.send({name:"copy",details:{text:'"'+m+'"\n '+q.url}})});$("#diigo-annotationList-notification").fadeIn().delay(1E3).fadeOut()});var h=this;d.find(".diigo-annotationList-item-delete").on("click",function(k){k.stopPropagation();a.onlyInGroup||
(S.find(a.id)?S.find(a.id).del():h.editItem("remove",a),document.getElementById("diigo-reader-frame").contentWindow.postMessage({type:"removeAnnotation",data:{ann:a.id}},"*"));O(ta(a.groups,function(m){return m.name}),function(m){a.del(m)})});d.on("click",function(){c(a.id)})}else 2==a.type&&(d=a.extra.color,d=$('<div class="diigo-annotationList-item diigo-'+d+'" data-ann-id="'+a.id+'"><div class="diigo-annotationList-sticky"><div class="diigo-anntationList-floatIcon"></div><span class="diigo-annotationList-item-content"></span><div class="diigo-annotationList-item-action"><div class="diigo-annotationList-item-copy" title="Copy this highlight">Copy</div><div class="diigo-annotationList-item-delete diigo-annotationList-item-btn" title="Delete this highlight">Delete</div></div></div></div>'),
d.find(".diigo-annotationList-item-content").html($("<div>").text(a.comments[0].content).html()),d.appendTo($("#diigo-annotationList-box")),d.find(".diigo-annotationList-item-copy").on("click",function(k){k.stopPropagation();k=$(this).parent().find(".diigo-annotationList-item-content").text();A.Messenger.send({name:"copy",details:{text:k}});$("#diigo-annotationList-notification").fadeIn().delay(1E3).fadeOut()}),h=this,d.find(".diigo-annotationList-item-delete").on("click",function(k){k.stopPropagation();
a.onlyInGroup||(S.find(a.id)?S.find(a.id).del():h.editItem("remove",a),document.getElementById("diigo-reader-frame").contentWindow.postMessage({type:"removeAnnotation",data:{ann:a.id}},"*"));O(ta(a.groups,function(m){return m.name}),function(m){a.del(m)})}),d.on("click",function(){c(a.id)}));this.updatecontent()}},show:function(){this.j||this.init();this.j.css({left:$(window).width()-this.j.outerWidth()-10+"px",top:"78px"});this.j.show();this.shown=!0},updatecontent:function(){0===$("#diigo-annotationList-box").find(".diigo-annotationList-item").length&&
$("#diigo-annotationList-box").append('<div id="diigo-annotationList-noItem">You have no annotations yet. Create a highlight or sticky note to see it here.</div>');$("#diigo-annotationList-toolbar").toggle(0<$("#diigo-annotationList-box").find(".diigo-annotationList-item").length)},hide:function(){this.j.hide();this.shown=!1},isOrphanHighlight:function(a){return l.orphanHighlights.some(function(c,d,f){return c.id==a.id})},editItem:function(a,c,d){if(this.j){var f=c?this.j.find('[data-ann-id="'+c.id+
'"]'):this.j.find('[data-ann-id="'+d.annotationId+'"]');if(f&&0<f.length)switch(a){case "remove":f.remove();0===$("#diigo-annotationList-box").find(".diigo-annotationList-item").length&&this.updatecontent();break;case "changeColor":f.removeClass("diigo-yellow diigo-blue diigo-green diigo-pink").addClass("diigo-"+c.extra.color);break;case "updateStickyNote":c=S.find(d.annotationId);a=c.type;0==a?f.find(".diigo-annotationList-commentItem").text(d.content):2==a&&f.find(".diigo-annotationList-item-content").text(d.content);
break;case "addInlineComment":$("#diigo-annotationList-noItem").remove();$('<div class="diigo-annotationList-commentItem" data-cid="'+d.id+'">'+d.content+"</div>").appendTo(f.find(".diigo-annotationList-commentContainer"));break;case "delInlineComment":f.find(".diigo-annotationList-commentContainer").find('.diigo-annotationList-commentItem[data-cid="'+d.id+'"]').remove()}}}};setTimeout(function(){Lb()&&R.get("prefs.showPdfButton",function(a){"true"===a&&(a=document.createElement("div"),a.id="diigo-pdf",
a.innerHTML='<div id="diigo-enter-pdf"></div><div id="diigo-pdfbtn-tip"><div id="diigo-i-know"></div></div><div id="diigo-pdf-premium"><div>You have reached the limit of your current plan. To continue using this feature, please upgrade your plan. </div><a id="diigo-pdf-go-premium" target="_blank" href="https://www.diigo.com/premium">Upgrade Now!</a><a href="#" id="diigo-pdf-cancel">cancel</a></div>',$(document.body.parentNode).append(a),$("#diigo-i-know").click(function(){$(this).parent().hide();
R.set({isPdfTipClicked:"true"})}),R.get("isPdfTipClicked",function(c){"true"===c&&$("#diigo-pdfbtn-tip").hide()}),$("embed").bind("click",function(){0==document.body.scrollTop?$("#diigo-enter-pdf").show():$("#diigo-pdf").hide()}),$("#diigo-pdf-cancel").on("click",function(c){c.preventDefault();$(this).parent().hide()}),$("#diigo-enter-pdf").on("click",function(){l.permissions.pdf?chrome.runtime.sendMessage({name:"openPdf",url:window.location.href}):$("#diigo-pdf-premium").show()}))})},1E3);var fc=
{j:null,step:1,init:function(){var a=this;this.j=$('<div id="diigo-ext-tutorial-wrapper" class="step1"><div id="diigo-ext-tutorial-panel"><div id="diigo-ext-tutorial-banner"><div id="diigo-ext-tutorial-elem1"></div><div id="diigo-ext-tutorial-elem2"></div><div id="diigo-ext-tutorial-elem3"></div><div id="diigo-ext-tutorial-banner-text"><span>Congratulations!</span><div>You are on the path to better learning.</div></div></div><div id="diigo-ext-tutorial-container"><div class="diigo-ext-tutorial-slide diigo-ext-tutorial-1 active"><div class="left"><div id="diigo-tutorial-image1"></div></div><div class="right"><div style="height: 212px; margin-top: 22px"><div style="position: relative; top: 85px">\n                  Found a link you like? Keep it by selecting "Save" at the top\n                  right of our extension menu.\n                </div></div><div style="height: 212px; margin-top: 22px"><div style="position: relative; top: 70px">\n                  Add a description and reference with tags for easy future\n                  retrieval.\n                </div></div></div></div><div class="diigo-ext-tutorial-slide diigo-ext-tutorial-2"><div class="left"><div id="diigo-tutorial-image2"></div></div><div class="right"><div style="height: 212px; margin-top: 22px"><div style="position: relative; top: 85px">\n                  Capture images you want to keep or share by selecting the\n                  "Screenshot" option in our extension menu.\n                </div></div><div style="height: 212px; margin-top: 22px"><div style="position: relative; top: 50px">\n                  Then select the portion of the page you want to capture. You\n                  will have the option of adding text, arrows, squares, etc. You\n                  can also label your images with tags to find them later on.\n                </div></div></div></div><div class="diigo-ext-tutorial-slide diigo-ext-tutorial-3"><div class="left"><div id="diigo-tutorial-image3"></div></div><div class="right"><div style="height: 312px; margin-top: 75px"><div style="position: relative; top: 85px">\n                  Highlight important or interesting parts of any website\n                  directly on the page. You can also add sticky notes directly\n                  to the page to mark important sections or reminders.\n                </div></div></div></div><div class="diigo-ext-tutorial-slide diigo-ext-tutorial-4"><div class="left"><div id="diigo-tutorial-image4"></div></div><div class="right"><div style="height: 312px; margin-top: 83px"><div style="position: relative; top: 103px">\n                  Once you have enough saved links with similar tags, you can\n                  structure your links through Outliner. This is the most\n                  efficient way to organize your links and share them with\n                  friends, classmates, or colleagues.\n                </div></div></div></div></div><a href="#" id="diigo-ext-tutorial-next" class="diigo-ext-tutorial-btn"></a><a href="#" id="diigo-ext-tutorial-prev" class="diigo-ext-tutorial-btn"></a><a href="#" id="diigo-ext-tutorial-close" class="diigo-ext-tutorial-btn"></a></div></div>\n').appendTo($("body"));
this.j.find("#diigo-ext-tutorial-next").on("click",function(c){c.preventDefault();a.next()});this.j.find("#diigo-ext-tutorial-prev").on("click",function(c){c.preventDefault();a.prev()});this.j.find("#diigo-ext-tutorial-close").on("click",function(c){c.preventDefault();a.hide()})},show:function(){var a=this;this.j||this.init();setTimeout(function(){a.j.addClass("active")},0)},hide:function(){this.j.removeClass("active");this.reset()},next:function(){4<=this.step||(this.step++,this.switchP(this.step))},
prev:function(){1!==this.step&&(this.step--,this.switchP(this.step))},switchP:function(a){this.j.removeClass("step1 step2 step3 step4").addClass("step"+a);this.j.find("#diigo-ext-tutorial-next").toggle(4>this.step);this.j.find("#diigo-ext-tutorial-prev").toggle(1<this.step);this.j.find("#diigo-ext-tutorial-close").toggle(4===this.step);this.j.find(".diigo-ext-tutorial-slide").removeClass("active");this.j.find(".diigo-ext-tutorial-"+a).addClass("active")},reset:function(){this.step=1;this.switchP(this.step)}},
Qb={j:null,init:function(){var a=this;this.j||(this.j=$('<div id="diigo-reader"><div id="diigo-showannotationList"></div><div id="diigo-reader-close"></div><div id="diigo-reader-loading"><div class="loader"><div class="double-bounce1"></div><div class="double-bounce2"></div></div></div><iframe id="diigo-reader-frame" src="" frameborder="0"></iframe><iframe id="diigo-process-frame" src="" frameborder="0"></iframe></div>\n').appendTo("body"));this.j.find("#diigo-reader-close").on("click",function(){a.close()});
this.j.find("#diigo-showannotationList").on("click",function(c){c.preventDefault();A.handle(c,"toggleAnnotationList")});$(document).on("dragstart",function(){a.j.find("#diigo-ghost").show()});$(document).on("dragend",function(){a.j.find("#diigo-ghost").hide()});this.j.find("#diigo-ghost").on("dragover",function(c){console.log("e",c.originalEvent);a.j.find("#diigo-reader-frame")[0].contentWindow.postMessage({type:"event",data:{e:c.originalEvent}},"*")});window.addEventListener("message",function(c){c=
c.data;"processStart"==c.type?(c=document.location,c={spec:c.href,host:c.host,prePath:c.protocol+"//"+c.host,scheme:c.protocol.substr(0,c.protocol.indexOf(":")),pathBase:c.protocol+"//"+c.host+c.pathname.substr(0,c.pathname.lastIndexOf("/")+1)},a.j.find("#diigo-reader-frame")[0].contentWindow.postMessage({type:"doc_html",data:{html:document.body.innerHTML,uri:c,title:document.title}},"*")):"processFinish"==c.type?a.hideLoading():"refreshBookmark"==c.type?chrome.runtime.sendMessage({name:"refreshBookmark"}):
"processFailed"==c.type&&a.close()})},open:function(){var a=this;this.j||this.init();a.j.addClass("show");$(document.body).css("overflow","hidden");setTimeout(function(){a.j.find("#diigo-reader-frame").attr("src",chrome.runtime.getURL("")+"reader.html")},300)},hideLoading:function(){this.j.find("#diigo-reader-loading").fadeOut()},reset:function(){this.j.find("#diigo-reader-loading").show()},close:function(){var a=this;this.j.removeClass("show");setTimeout(function(){a.reset()},500);$(document.body).css("overflow",
"auto");chrome.runtime.sendMessage({name:"refreshBookmark"})}},pa=window.OutlinerFrame={j:null,k:null,port:null,opened:!1,showed:!1,outlinerId:null,init:function(){window.CSP=!0;var a=this;this.j||(this.j=$('<div id="diigo-outliner-frame"><div id="diigo-outliner-toggle-btn"><div class="expand" title="Expand outliner sidebar"></div><div class="collapse" title="Collapse outliner sidebar"></div></div><div id="diigo-ghost"><input type="text" /></div>\x3c!--<div id="diigo-outliner-frame-close"></div>--\x3e<iframe id="diigo-outliner-iframe" src="" frameborder="0"></iframe></div>\n').appendTo("body"));
$(document).on("dragstart",function(){a.j.find("#diigo-ghost").show()});$(document).on("dragend",function(){setTimeout(function(){a.j.find("#diigo-ghost").hide().find("input").val("")},100)});this.j.find("#diigo-outliner-toggle-btn").on("click",function(){a.toggleSidebar()});this.j.find("#diigo-ghost").on("dragover",function(c){a.port.postMessage({type:"dragover-event",pos:{x:c.originalEvent.clientX-$(a.j).offset().left,y:c.originalEvent.clientY}})}).on("dragleave",function(){a.port.postMessage({type:"dragleave-event"})}).on("drop",
function(c){var d={type:"drop-event",text:c.originalEvent.dataTransfer.getData("text/plain"),url:window.location.href,pos:{x:c.originalEvent.clientX-$(a.j).offset().left,y:c.originalEvent.clientY}};c.originalEvent.dataTransfer.getData("text/html")&&"IMG"===$(c.originalEvent.dataTransfer.getData("text/html"))[0].tagName?(d.imgSrc=$(c.originalEvent.dataTransfer.getData("text/html")).attr("src"),d.title=document.title,d.originSrc=window.location.href):c.originalEvent.dataTransfer.getData("text/html")&&
"META"==$(c.originalEvent.dataTransfer.getData("text/html"))[0].tagName&&"IMG"==$(c.originalEvent.dataTransfer.getData("text/html"))[1].tagName&&(d.imgSrc=$(c.originalEvent.dataTransfer.getData("text/html"))[1].src,d.title=document.title,d.originSrc=window.location.href);a.port.postMessage(d);return!1});window.addEventListener("message",function(c){"port"==c.data.type?a.port=c.ports[0]:"outliner"==c.data.type&&a.j.find("iframe").attr("src",c.data.url)});this.detectCSP()},detectCSP:function(){var a=
document.createElement("iframe");a.style.display="none";a.setAttribute("src","https://www.diigo.com/asset/images/logo_s2.png");a.setAttribute("onload",'document.body.classList.add("noCSP")');document.body.appendChild(a)},open:function(){var a=this;this.j||this.init();a.j.addClass("show");a.j.find("#diigo-outliner-toggle-btn").show();$(document.body).addClass("diigo-outliner-mode");setTimeout(function(){""==a.j.find("#diigo-outliner-iframe").attr("src")&&R.get("prefs.outlinerFrameUrl",function(c){c||
(c="https://www.diigo.com/outliner/index");$(document.body).hasClass("noCSP")?/csp=true/.test(c)&&(c=c.replace(/[\?&]csp=true/i,"")):"https://www.diigo.com/outliner/index"==c?c+="?csp=true":/csp=true/.test(c)||(c+="&csp=true");a.j.find("#diigo-outliner-iframe").attr("src",c)})},300);a.opened=!0;a.showed=!0},changeHighlight:function(){},toggle:function(){this.opened?this.close():this.open()},toggleSidebar:function(){this.j.hasClass("show")?(this.j.removeClass("show"),$(document.body).removeClass("diigo-outliner-mode"),
$(".diigoHighlight").attr("draggable",!1),this.showed=!1):(this.j.addClass("show"),$(document.body).addClass("diigo-outliner-mode"),this.showed=!0)},showIcon:function(){this.j||this.init();this.k.show()},hideIcon:function(){this.k&&this.k.hide()},hideLoading:function(){this.j.find("#diigo-reader-loading").fadeOut()},reset:function(){this.j.find("#diigo-reader-loading").show()},close:function(a){this.j.removeClass("show");this.j.find("#diigo-outliner-toggle-btn").hide();$(document.body).removeClass("diigo-outliner-mode");
this.showed=this.opened=!1;R.set({openedOutlinerId:""});this.outlinerId=null}},Da={j:null,init:function(){this.j=$('<iframe id="diigo-bookmark-frame"></iframe>').appendTo("body").hide()},show:function(a,c){this.j||this.init();var d=chrome.runtime.getURL("")+"bookmark-window.html";c&&(d=d+"?title="+a+"&url="+c);this.j.show().attr("src",d)},close:function(){this.j.remove();this.j=null}},Fa=document,Mb=$(window),qb=$(Fa);A.$=$;diigolet.loaded=!0}();
